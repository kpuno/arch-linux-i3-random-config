var __extends=function(n,t){function r(){Object.defineProperty(this,"constructor",{configurable:!0,value:n,writable:!0})}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},__decorate=function(n,t,i,r){var s=window,f=arguments.length,u=f<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,e,o;if(typeof s.Reflect=="object"&&typeof s.Reflect.decorate=="function")u=s.Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(e=n[o])&&(u=(f<3?e(u):f>3?e(t,i,u):e(t,i))||u);return f>3&&u&&Object.defineProperty(t,i,u),u},executeInDevelopmentModeOnly=function(){},ko,HubsExtension,GroupDropDown,FxImpl,MsPortalFx;(function(n){"use strict";n.Base=n})(FxImpl||(FxImpl={})),function(n){"use strict";function s(n){return n.toLowerCase()}function h(n){return o[s(n)]}function c(n){var t=h(n);return!!t&&t.length===4&&s(t)==="true"}var o,f;n.Internal=FxImpl;var t=window,i=t.fx,r=i.environment,e=Date.now,l=e(),u=t.performance,a=u&&u.now&&function(
){return u.now()},v=i.getTimestamp=i.getTimestamp||a||function(){return e()-l};i.bootstrapTelemetry={fxScriptsBegin:v(),fxScriptsEnd:0};o=r.features;f=t.parent;n.isIFrame=f&&t.window!==f.window;n.getFeatureValue=h;n.isFeatureEnabled=c;r.isDevelopmentMode&&(executeInDevelopmentModeOnly=function(n){n()});n.defineProperty=Object.defineProperty;c("pov2")&&!r.javascriptObjectPropertiesAreEnumerable&&(Object.defineProperty=function(t,i,r){r&&r.get&&r.enumerable===!0&&(r.enumerable=!1);n.defineProperty(t,i,r)})}(MsPortalFx||(MsPortalFx={})),function(n){"use strict";function i(n){return function(){return v.apply(n,arguments)}}function f(n,t){return typeof n===t}function ct(n){return n instanceof Date}function li(n){var t=n&&n.dispose;return f(t,tt)&&t}function it(n,t){r(c(n),function(i){t(i,n[i])})}function lt(n){return c(n||{}).length}function cr(n){return!lt(n)}function lr(n){return!!li(n)}function ai(n){u(n)&&r(n,ai);var t=li(n);t&&t.call(n)}function ar(n){return n===null}function vr(n){return n===
t}function s(n){return n===null||n===t}function vi(n){return n!==null&&n!==t}function yr(n){return s(n)||f(n,p)&&!ci.test(n)}function pr(n,t){var i=t?t():new at,r=function(t){if(i.has(t))return i.get(t);var r=n(t);return i.set(t,r),r};return r.dispose=function(){i.clear()},r}function wr(n,t){var i=Q.defer(),r=u(n)?n:[n];return t&&(r=r.map(t.normalize)),ot.requirejs(r,function(n){i.resolve(n)},function(n){var u=n&&n.requireType,t,r;if(u==="scripterror"&&!nt(n,"status")&&(t=n.originalError||{},t.type==="error"&&t.srcElement)){r=t.srcElement.src;FxImpl.Diagnostics.getStatusCode(r,function(t,u,f){n.srcUrl=r;n.status=t;n.statusText=f;i.reject(n)});return}i.reject(n)}),i.promise}function vt(n,t,i){if(i===void 0&&(i=0),n){var u=n.length,f=u,e=1,r=i;if(u){if(i<0&&(r+=u,e=f=-1),!t)return r<u&&r>=0?r:-1;while(r!==f){if(t(n[r],r,n))return r;r+=e}}}return-1}function br(n,i,r){var u=vt(n,i,r);return u<0?t:n[u]}function kr(n){return n?n[0]:t}function dr(n){var i=n?n.length:0;return i?n[i-1]:t}function gr(
n,t,i){var o,r,s,u,h,e;for(i===void 0&&(i=0),o=[],r=0,f(t,tt)&&(s=t),u=i,h=n.length;u<h;u++)e=n[u],r&&(n[u-r]=e),(t===e||s&&s(e))&&(r++,o.push(e));return r&&st(n,-1*r),o}function yt(n,t,i,r){var s,e,f,h,o;if(r===void 0&&(r=!1),u(t)){for(s=i?function(t){return vt(n,function(n){return i(n,t)})}:function(t){return n.indexOf(t)},e=r?[]:n,f=0,h=t.length;f<h;f++)o=t[f],s(o)<0&&e.push(o);r&&n.push.apply(n,e)}return n}function yi(n,t){return yt([],n,t)}function nu(){var u=[],r=arguments.length-2,n=arguments[r+1],i,e;for(f(n,tt)||(n=t,r++),i=0;i<=r;i++)e=yi(arguments[i],n),yt(u,e,n,!0);return u}function tu(t,i){return n.merge.apply(null,t.map(i))}function iu(n,t){var i=n.map(function(n,t){return{i:t,v:n}});return i.sort(function(n,i){return t(n.v,i.v)||n.i-i.i}),i.map(function(n){return n.v})}function ru(n){return n?n.toString():String(n)}function uu(n,i,r,u,f){var e,o,l,h,s,c;for(r=r||ru,e=[i,,,""],o=0,l=i.length;o<l;o++)h=i[o],e[1]=h,e[2]=o,e[3]=t,s=v.apply(r,e),f&&n[s]!==t||(e[3]=s,c=u?v.apply(
u,e):h,c!==t&&(n[s]=c))}function fu(n,i,r,u){var f=[i,,];it(i,function(i,e){if(!u||n[i]===t){f[1]=e;f[2]=i;var o=r?v.apply(r,f):e||i;o!==t&&(n[i]=o)}})}function pt(n){return n=u(n)?ui(n):arguments,function(){var i={};return r(arguments,function(r,u){var f=n[u];r!==t&&(i[f]=r)}),i}}function eu(n){return pt.apply(t,n)}function ou(t,i){var r=[];return it(t,function(t,i){f(t,p)&&f(i,si)&&r.push(n.getNameValue(t,i))}),i?r.sort(function(n,t){return n.value-t.value}):r}function su(n){return u(n)||(n=s(n)?[]:[n]),n}function pi(n,t){return ct(n)&&ct(t)&&!(n>t||n<t)}function hu(n){return n.getTime()/1e3|0}function wi(n){return hi(n)&&u(n())}function cu(n){return u(n)||wi(n)}function bi(n,t,i){var r=ut[n]&t;ut[n]=r|i}function lu(){bt.getRandomValues(ut);bi(8,15,64);bi(11,63,128);for(var t=0;t<wt;t++)l[t]=rt[ut[t]];return l[4]=l[7]=l[10]=l[13]="-",n.applyUncurry(fi,"",l)}function au(n){for(var t,i=new Array(n),r;n;)for(t=4294967296*Math.random()|0,r=8;r--;){if(i[--n]=h[t&15],n<0)return i;t>>>=4}}function vu(
){var n=au(36);return n[8]=n[13]=n[18]=n[23]="-",n[14]="4",n[19]=h[8+(h.indexOf(n[19])&3)],k(fi,"",n)}function ki(n){return rt[n>>4]+h[n&15]}function di(t){t=t?t+"-":"";var r="",i=w;return function(){return++i>w&&(i=0),i||(r=t+n.newGuid().substring(0,33)),r+ki(i)}}function yu(n){var i=-1,t=w,r="";return function(){return++t>w&&(t=0,i++,r=n+i.toString(16)+"-"),r+ki(t)}}function pu(n,t){return t=Math.pow(10,t||0),Math.round(Number(n)*t)/t}function wu(n){return n|0}function bu(n,t){return n?!t:t}function ku(n,i){if(n!==t&&i!==t&&!(n>i))return Math.floor(Math.random()*(i-n+1))+n}function du(n,t,i){var r=nt(n,t)&&n[t];r&&hi(r)?r(i):n[t]=ko.observable(i)}function gu(n,t){return n===t||pi(n,t)}function nf(n,t){if(n===t)return!0;if(n&&t){if(n.length!==t.length)return!1;for(var i=0;i<n.length;i++)if(n[i]!==t[i])return!1;return!0}return!1}function ft(n){var t=typeof n;return t===ht&&(n===null?t="null":u(n)?t="array":ct(n)&&(t="date")),t}function kt(n,t,i){var r,f,u;if(i&&(n=i(n),t=i(t)),n===t)return!0;
if(!n||!t||(r=ft(n),r!==ft(t)))return!1;switch(r){case"array":return f=n,n.length===t.length&&f.every(function(n,r){return kt(n,t[r],i)});case"date":return n.getTime()===t.getTime();case ht:return u=c(n),u.length===lt(t)&&u.every(function(r){return kt(n[r],t[r],i)});default:return!1}}function tf(n,t,i){var r=i?gi.peekObservable:ko.unwrap;return kt(n,t,r)}function rf(n){return ft(n)===ht}function uf(t,i,r){var u=[t,,,r],f=c(t),e=f.map(function(n){return u[1]=t[n],u[2]=n,v.apply(i,u)});return n.merge.apply(null,e)}function ff(n,i,r){var u,f,e;for(r=r||c(i),u=0;u<r.length;u++)f=r[u],e=i[f],e!==t&&(n[f]=e)}function et(n,i,r){var u,e;return f(i,p)?(n=s(n)?"":String(n),u=n.length,(r===t||r>u)&&(r=u),r-=i.length,e=g(n,i,r),e!==-1&&e===r):!1}function ef(n,t,i,r){return s(n)?-1:f(t,p)?n.toLocaleLowerCase().localeCompare(t.toLocaleLowerCase(),i,r):1}function of(n,t){var i="";for(t=t<0?0:t;t--;)i+=n;return i}function sf(n){for(var t="",i=n.length;i;)t+=n[--i];return t}function hf(n){return function(
){return er(arguments,n)}}function cf(n,t){return n=n||"",t=t||n,function(i){return n+i+t}}function lf(n,t,i){return n.replace(new RegExp(dt(t),"g"),i)}function af(n,t){var r={},u=!1,i,f;for(i in t||{})t.hasOwnProperty(i)&&(r[dt(i)]=t[i],u=!0);return u?(f=new RegExp(c(r).join("|"),"g"),n.replace(f,function(n){return t[n]})):n}function vf(n,t,i){var r=[];if(n&&t&&i){var u=0,e=t.length,f=0;for(i--;;){if(r.length>=i||(f=g(n,t,u))<0){r.push(o(n,u));break}r.push(o(n,u,f));u=f+e}}return r}function b(n,t,i){return n=s(n)?"":String(n),i=s(i)||i<0?0:Math.min(i,n.length),n.lastIndexOf(t,i)===i}function nr(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];for(n=n||"";n;){if(i=r.first(function(t){return t&&et(n,t)}),!i)break;n=o(n,0,n.length-i.length)}return n}function yf(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];for(n=n||"";n;){if(i=r.first(function(t){return t&&b(n,t)}),!i)break;n=o(n,i.length)}return n}function pf(n,t){return n=n||"",et(n,t)||(n+=t),n}function tr(
n,t){return n=n||"",b(n,t)||(n=t+n),n}function wf(n,t){u(t)||(t=ui(arguments,1));var i="";return r(t||[],function(t){i?t&&(i=nr(i,n)+tr(t,n)):i=t||""}),i}function bf(n,t){var r,u,i;return(t===void 0&&(t=!0),!n)?n:(b(n,"//")?n=o(n,r+2):(r=g(n,"://"),r>-1&&(n=o(n,r+3))),u=t?/[?#/]/:/[?#/:]/,i=n.search(u),i=i>-1?i:n.length,o(n,0,i))}function kf(n,t){if(!n||!t||n.length<t.length)return!1;var i=ei(n),r=ei(t);return i===r||et(i,"."+r)}function df(n){return g(n,"://")!==-1||b(n,"//")}function gf(n,t,i){var r=n.inspect();switch(r.state){case"fulfilled":return t(r.value);case"rejected":return i(r.reason);default:return n.then(t,i)}}function ne(n,t){n.isPending()?n.finally(t):t()}function te(n,t,i){var r=i(),u;return r?n.resolve(r):(u=i.subscribe(t,function(t){t&&(u.dispose(),n.resolve(t))}),t.registerForDispose(function(){n.reject("disposed")})),n}function dt(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function ie(n){return n===null||typeof n in gt}function re(n,t,i){var r=
n.prototype;it(t,function(n,t){(i||!r[n])&&Object.defineProperty(r,n,{value:t,configurable:!0,enumerable:!1,writable:!0})})}function ir(n){if(n>ni)throw new Error("The requiredMaxInteger("+n+") should be less than "+ni);if(n<=0)throw new Error("The requiredMaxInteger("+n+") should be greater than zero.");}function ue(n){return ir(n),ti}function fe(n){return ir(n),ii}function ee(n){var r=Object.create(Object.getPrototypeOf(n)),t,i;for(t in n)i=n[t],f(i,tt)?r[t]=i.bind(n):nt(n,t)&&(r[t]=i);return r}var ot=window,v=Function.call,rr=Function.apply,k,ci,at,h,rt,bt,w,gi,gt,a,ri;n.uncurryThis=i;k=i(rr);n.applyCall=k;n.applyUncurry=k;var e=Array.prototype,ur=e.concat,fr=i(e.filter),r=i(e.forEach),er=i(e.join),ui=i(e.slice),st=i(e.splice),d=i(e.indexOf),u=Array.isArray,y=String.prototype,fi=i(y.concat),or=i(y.split),o=i(y.substring),g=i(y.indexOf),ei=i(y.toLowerCase),nt=i(Object.prototype.hasOwnProperty),c=Object.keys,t=undefined,sr=ot.fx.environment,oi=Object.freeze,hr=sr.isDevelopmentMode,tt=
"function",p="string",si="number",ht="object",hi=ko.isObservable;ci=/\S/;n.forEachKey=it;n.keysLength=lt;n.isEmpty=cr;n.isDisposable=lr;n.disposeDisposable=function(){r(arguments,ai)};n.isNull=ar;n.isUndefined=vr;n.isNullOrUndefined=s;n.notNullOrUndefined=vi;n.isNullOrWhiteSpace=yr;at=ot.Map||function(){var i=this,n=[],t=[];return{"delete":function(i){var r=d(n,i);return r>=0&&(st(n,r,1),st(t,r,1)),r>=0},has:function(t){return d(n,t)>=0},get:function(i){return t[d(n,i)]},set:function(i,r){var u=d(n,i);u<0&&(u=n.length);n[u]=i;t[u]=r},clear:function(){n=[];t=[]},forEach:function(u,f){r(n,function(n,r){u.call(f,t[r],n,i)})}}};n.Map=at;n.memoize=pr;n.require=wr;n.findIndex=vt;n.find=br;n.first=kr;n.last=dr;n.remove=gr;n.pushUnique=yt;n.unique=yi;n.union=nu;n.merge=function(){var n=fr(arguments,vi);return ur.apply([],n)};n.mapMany=tu;n.stableSort=iu;n.extendArrayIntoMap=uu;n.extendStringMapIntoMap=fu;n.getStringMapFunc=pt;n.applyStringMapFunc=eu;n.getNameValue=pt("name","value");n.getEnumArray=
ou;n.makeArray=su;n.areEqualDates=pi;n.toSeconds=hu;n.isObservableArray=wi;n.isArrayOrObservableArray=cu;h=or("0123456789abcdef","");rt=[];r(h,function(n){r(h,function(t){rt.push(n+t)})});var wt=20,ut=new Uint8Array(wt),l=new Array(wt);bt=window.crypto||window.msCrypto;n.newGuid=bt?lu:vu;w=4095;n.getUniqueIdGenerator=di;n.getIdGenerator=yu;n.getUniqueId=di();n.round=pu;n.truncate=wu;n.xor=bu;n.random=ku;n.hasOwnProperty=nt;n.setObjPropAsObservable=du;n.areEqual=gu;n.arrayEquals=nf;n.getTypeOf=ft;gi=ko.utils;n.deepEquals=tf;n.isObject=rf;n.map=uf;n.shallowCopyFromObject=ff;n.endsWith=et;n.localeCompareIgnoreCase=ef;n.repeat=of;n.reverse=sf;n.getJoinFunc=hf;n.getQuoteFunc=cf;n.replaceAll=lf;n.replaceMany=af;n.split=vf;n.startsWith=b;n.trimEnd=nr;n.trimStart=yf;n.ensureSuffix=pf;n.ensurePrefix=tr;n.pathJoin=wf;n.getUriAuthority=bf;n.isSubdomain=kf;n.isUriAbsolute=df;n.tryImmediateResolve=gf;n.tryImmediateFinally=ne;n.resolveWhen=te;n.regexEscape=dt;n.noop=function(){};gt={};r(["boolean","undefined",
si,p,"symbol"],function(n){gt[n]=!0});n.isPrimitive=ie;n.polyfill=re;var ni=50,ti=[],ii={};for(a=0;a<=ni;a++)ri=a+"",ti[a]=ri,ii[ri]=a;hr&&(oi(ti),oi(ii));n.getIntToStringMap=ue;n.getStringToIntMap=fe;n.cloneAndRebindFunctions=ee}(MsPortalFx||(MsPortalFx={})),function(n){"use strict";function r(n,t,i){var u="Code: '"+n+"'. ",r="";return t?r=t.format.apply(t,i):(i&&i.length&&(r="\nParameters: "+[].join.call(i,",")+". "),r+="\nUse development mode to get the detailed error message."),u+r}function u(n){var t={};return i(n,function(n,i){t[n]=function(){var t=r(n,i,arguments);throw new Error(t);}}),t}var t=MsPortalFx,i=t.forEachKey;n.getErrorMap=u}(FxImpl||(FxImpl={})),function(n){"use strict";var t,i,r;(function(t){var i,r;(function(t){t.loadAsync=n.require})(i=t.Amd||(t.Amd={})),function(t){function i(){return n.isIFrame}t.arrayEquals=n.arrayEquals;t.deepEquals=n.deepEquals;t.getUniqueIdGenerator=n.getUniqueIdGenerator;t.getIdGenerator=n.getIdGenerator;t.getUniqueId=n.getUniqueId;t.getUriAuthority=
n.getUriAuthority;t.isObject=n.isObject;t.isIFrame=i;t.isNullOrUndefined=n.isNullOrUndefined;t.isNullOrWhiteSpace=n.isNullOrWhiteSpace;t.isSubdomain=n.isSubdomain;t.isUriAbsolute=n.isUriAbsolute;t.map=n.map;t.newGuid=n.newGuid;t.noop=n.noop;t.split=n.split;t.xor=n.xor}(r=t.Utilities||(t.Utilities={}))})(t=n.Base||(n.Base={})),function(t){t.regexEscape=n.regexEscape}(i=n.Polyfills||(n.Polyfills={})),function(t){function i(t,i){return i===void 0&&(i=0),String(n.round(t,i))}t.isNull=n.isNull;t.isUndefined=n.isUndefined;t.isNullOrUndefined=n.isNullOrUndefined;t.newGuid=n.newGuid;t.random=n.random;t.regexEscape=n.regexEscape;t.shallowCopyFromObject=n.shallowCopyFromObject;t.toNiceFixed=i;t.truncate=n.truncate}(r=n.Util||(n.Util={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=n,e=i.Base,l=e.Utilities,o=window,r=Object,s=r.getOwnPropertyDescriptor,h=r.defineProperty,u=i.isFeatureEnabled("pov2"),f=$.noop,c=o.fx.environment;t.NotProxied=u?function(n,t,i){i.enumerable=
!1}:f;t.ProxyCompatibilityMode=u&&c.javascriptObjectPropertiesAreEnumerable?function(n){var i=n.prototype,t,u=!1;for(var r in i)t=s(i,r),t&&t.enumerable&&t.get&&(u=!0,t.enumerable=!1,h(i,r,t))}:f})(t=n.Composition||(n.Composition={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";function ht(){var t="MsPortalFx.Resources.Strings",n=window,i=(n=n.Resources)&&(n=n.getResources)&&n(t);if(!i)throw new Error("Unable to find the resources for '"+t+"'.");return function(n){return i[n]}}function ct(n){return n&&n[0].toLowerCase()+n.slice(1)}function lt(n){return n?function(t){return h(n+t)}:h}function i(t,i,r){t=t||n.Resources.Strings;i=i||"";n.extendArrayIntoMap(t,r,ct,lt(i))}var h=ht(),c="Pickers_",at,r,l,u,vt,a,yt,e,pt,v,wt,y,p,w,b,f,bt,k,d,g,nt,o,kt,tt,it,rt,ut,ft,et,s,dt,ot,st;(function(n){var t=c+"Specs_",r,u,f;(function(n){var f=t+"DropDown_",u;(function(){i(u,f,["LabelLinkText","Recent","Available","Recommended","LabelFormatter"])})(u=n.DropDown||
(n.DropDown={}));i(r,t,["PricingTier"])})(r=n.Specs||(n.Specs={}));u=c+"AccessDenied_",function(){i(f,u,["reasonMessage"])}(f=n.AccessDenied||(n.AccessDenied={}))})(at=t.Pickers||(t.Pickers={}));r="Azure_",function(n){var c=r+"Subscriptions_",a,f,v,t,y,u,p,e,w,o,s,h,b;(function(n){var r=c+"DropDown_",t;(function(){i(t,r,["SubCantRegisterWithRP","RequiredPermissionsValidationMessage","SubscriptionNotAllowedForGalleryItemValidationMessage","DisabledSubscriptionValidationMessage","DefaultLabel"])})(t=n.DropDown||(n.DropDown={}))})(a=n.Subscriptions||(n.Subscriptions={}));f=r+"ResourceManager_",function(n){var t=f+"Provisioner_",r;(function(n){var f=t+"ArmValidation_",u;(function(){i(u,f,["NetworkFailure","ValidationFailed"])})(u=n.ArmValidation||(n.ArmValidation={}));i(r,t,["SeeTemplateLink","PricingSummaryLinkLabel"])})(r=n.Provisioner||(n.Provisioner={}))}(v=n.ResourceManager||(n.ResourceManager={}));t=r+"ResourceGroups_",function(n){var e=t+"InfoBalloon_",u,r,f;(function(){i(u,e,["Text",
"LinkText"])})(u=n.InfoBalloon||(n.InfoBalloon={}));r=t+"DropDown_",function(n){var u=r+"ProvisioningStateValidation_",t;(function(){i(t,u,["BaseMessage","Movingresources","Deleting","Deleted"])})(t=n.ProvisioningStateValidation||(n.ProvisioningStateValidation={}));i(f,r,["RequiredPermissionsValidationMessage","DefaultLabel"])}(f=n.DropDown||(n.DropDown={}))}(y=n.ResourceGroups||(n.ResourceGroups={}));u=r+"Validators_",function(n){var e=u+"ReservedResourceName_",t,r,f;(function(){i(t,e,["Message"])})(t=n.ReservedResourceName||(n.ReservedResourceName={}));r=u+"RequiredPermission_",function(){i(f,r,["Message"])}(f=n.RequiredPermission||(n.RequiredPermission={}))}(p=n.Validators||(n.Validators={}));e=r+"Legal_",function(n){var r=e+"LegalTermsSelector_",t;(function(){i(t,r,["LegalTermsMessage","LegalTermsLabel","LegalTermsAcceptedMessage"])})(t=n.LegalTermsSelector||(n.LegalTermsSelector={}))}(w=n.Legal||(n.Legal={}));o=r+"BaseResourceDropDown_",function(){i(s,o,["SearchingValidationMessage",
"CreatingResourcedDisabledValidationMessage"])}(s=n.BaseResourceDropDown||(n.BaseResourceDropDown={}));h=r+"Locations_",function(n){var r=h+"DropDown_",t;(function(){i(t,r,["EmptyMessage","DefaultLabel"])})(t=n.DropDown||(n.DropDown={}))}(b=n.Locations||(n.Locations={}));i(l,r,["ErrorMessageWithCode"])}(l=t.Azure||(t.Azure={}));u="Part_",function(n){var t=u+"SettingList_",r,f,e,o,s,h,c,l,a,v,y,p,w;(function(n){var h=t+"Group_",u,f,e,o,s;(function(){i(u,h,["Settings","General","Monitoring","QuickAccess","Support","ResourceManagement"])})(u=n.Group||(n.Group={}));f=t+"Keyword_",function(){i(e,f,["Insights","logs","events"])}(e=n.Keyword||(n.Keyword={}));o=t+"Keywords_",function(){i(s,o,["ExportTemplate","EventLogs","ResourceHealth","troubleshoot","helpRequest","subQuotas"])}(s=n.Keywords||(n.Keywords={}));i(r,t,["properties","AccessDetails","locksForSubscriptions","locks","ExportTemplate","EventLogs","ResourceHealth","troubleshoot","helpRequest","accessControl","users","tags","subQuotas",
"subCerts","roles","Resources","ResourceGroups","access","searchBoxPlaceholder"])})(r=n.SettingList||(n.SettingList={}));f=u+"PropertiesPart_",function(){i(e,f,["changeSubscriptionLabel","changeResourceGroupLabel"])}(e=n.PropertiesPart||(n.PropertiesPart={}));o=u+"CollectionSummary_",function(){i(s,o,["NumberPlus","Number"])}(s=n.CollectionSummary||(n.CollectionSummary={}));h=u+"ResourceSummary_",function(){i(c,h,["notAvailable","subscriptionNamePropertyLabel","subscriptionIdPropertyLabel","locationPropertyLabel","statusPropertyLabel","resourceGroupPropertyLabel"])}(c=n.ResourceSummary||(n.ResourceSummary={}));l=u+"Chart_",function(){i(a,l,["editButtonText"])}(a=n.Chart||(n.Chart={}));v=u+"Quickstart_",function(){i(y,v,["title"])}(y=n.Quickstart||(n.Quickstart={}));p=u+"Provisioning_",function(){i(w,p,["pollingFailed","deploymentStatusUnavailable","description"])}(w=n.Provisioning||(n.Provisioning={}))}(vt=t.Part||(t.Part={}));a="Controls_",function(n){var r=a+"Grid2_",t;(function(){i(
t,r,["ContextMenu"])})(t=n.Grid2||(n.Grid2={}))}(yt=t.Controls||(t.Controls={}));e="ViewModels_",function(n){var t=e+"Controls_",r,u,f;(function(n){var v=t+"ResourceGroups_",u,f,e,o,s,h,c,l,a;(function(){i(u,v,["SelectExisting","CreateNew"])})(u=n.ResourceGroups||(n.ResourceGroups={}));f=t+"DateTimePicker_",function(){i(e,f,["TimeLabel","DateLabel"])}(e=n.DateTimePicker||(n.DateTimePicker={}));o=t+"DateTimePickerRange_",function(){i(s,o,["StartTime","StartDate","EndTime","EndDate"])}(s=n.DateTimePickerRange||(n.DateTimePickerRange={}));h=t+"CreatorAndSelector_",function(){i(c,h,["SelectExisting","UseExisting","CreateNew"])}(c=n.CreatorAndSelector||(n.CreatorAndSelector={}));l=t+"CreatorAndComboBox_",function(){i(a,l,["UseExisting","CreateNew"])}(a=n.CreatorAndComboBox||(n.CreatorAndComboBox={}));i(r,t,["Calendar","FileUpload","Selector","CreatorAndSelectorLabel","Button","RemoveItem","ChooseItem","AddItem","SpecComparison","Terminal","SearchBox","Search","NoRowsMessage"])})(r=n.Controls||
(n.Controls={}));u=e+"Container_",function(){i(f,u,["notFound","preview","unauthorizedText"])}(f=n.Container||(n.Container={}))}(pt=t.ViewModels||(t.ViewModels={}));v="ResourceGroup_",function(n){var r=v+"Validation_",t;(function(){i(t,r,["SubscriptionHasNoPermissionsMessage","LengthValidationMessage","InvalidMessage","AlreadyExistsMessage"])})(t=n.Validation||(n.Validation={}))}(wt=t.ResourceGroup||(t.ResourceGroup={}));y="UnitConversion_",function(){i(p,y,["PetabytesPerSecondSI","TerabytesPerSecondSI","GigabytesPerSecondSI","MegabytesPerSecondSI","PetabytesSI","TerabytesSI","GigabytesSI","MegabytesSI","TrillionPerSecond","Trillion","ThousandPerSecond","Thousand","TerabytesPerSecond","Terabytes","Seconds","PetabytesPerSecond","Petabytes","Percentage","Minutes","MilliSeconds","MillionPerSecond","Million","MicroSeconds","MegabytesPerSecond","Megabytes","KilobytesPerSecondSI","KilobytesSI","KilobytesPerSecond","Kilobytes","Hours","GigabytesPerSecond","Gigabytes","Days","CountPerSecond","CountPerMinute",
"CountPerHour","CountPerDay","BytesPerSecond","BytesPerMinute","BytesPerHour","BytesPerDay","Bytes","BillionPerSecond","Billion"])}(p=t.UnitConversion||(t.UnitConversion={}));w="NumericTextBox_",function(){i(b,w,["invalidText"])}(b=t.NumericTextBox||(t.NumericTextBox={}));f="DatePolyfill_",function(n){var a=f+"Months_",t,r,u,e,o,s,h,c,l;(function(){i(t,a,["September","October","November","May","March","June","July","January","February","December","August","April"])})(t=n.Months||(n.Months={}));r=f+"MonthsAbbr_",function(){i(u,r,["September","October","November","May","March","June","July","January","February","December","August","April"])}(u=n.MonthsAbbr||(n.MonthsAbbr={}));e=f+"Days_",function(){i(o,e,["Wednesday","Tuesday","Thursday","Saturday","Monday","Friday","Sunday"])}(o=n.Days||(n.Days={}));s=f+"DaysAbbr_",function(){i(h,s,["Wednesday","Tuesday","Thursday","Saturday","Monday","Friday","Sunday"])}(h=n.DaysAbbr||(n.DaysAbbr={}));c=f+"AgoStrings_",function(){i(l,c,["years","weeks",
"months","minutes","lessThanAMinute","hours","days","aYear","aWeek","anHour","aMonth","aMinute","aDay"])}(l=n.AgoStrings||(n.AgoStrings={}))}(bt=t.DatePolyfill||(t.DatePolyfill={}));k="FileDownload_",function(){i(d,k,["unauthorizedText"])}(d=t.FileDownload||(t.FileDownload={}));g="FileDownloadCommand_",function(){i(nt,g,["fileDownloadErrorStatus","authTokenNotAvailable"])}(nt=t.FileDownloadCommand||(t.FileDownloadCommand={}));o="Services_",function(n){var f=o+"Gallery_",t,r,u;(function(){i(t,f,["ViewPricingSummaryLabel"])})(t=n.Gallery||(n.Gallery={}));r=o+"AssetHandler_",function(){i(u,r,["titleGridColumn","assetTypeGridColumn"])}(u=n.AssetHandler||(n.AssetHandler={}))}(kt=t.Services||(t.Services={}));tt="Dialogs_",function(){i(it,tt,["OkButtonText","CancelButtonText"])}(it=t.Dialogs||(t.Dialogs={}));rt="FileUpload_",function(){i(ut,rt,["notSupported","notReady"])}(ut=t.FileUpload||(t.FileUpload={}));ft="DeleteAssetConfirmation_",function(){i(et,ft,["bladeTitle","warningText","confirmationLabel",
"assetNameValidationFailureMessage","affectedItemsLabel"])}(et=t.DeleteAssetConfirmation||(t.DeleteAssetConfirmation={}));s="DeleteCommand_",function(n){var f=s+"Failure_",t,r,u;(function(){i(t,f,["title","message"])})(t=n.Failure||(n.Failure={}));r=s+"Confirmation_",function(){i(u,r,["title","message"])}(u=n.Confirmation||(n.Confirmation={}))}(dt=t.DeleteCommand||(t.DeleteCommand={}));ot="ExtensionRequestHandler_",function(){i(st,ot,["VersionMismatch"])}(st=t.ExtensionRequestHandler||(t.ExtensionRequestHandler={}))})(i=t.Strings||(t.Strings={}))})(t=n.Resources||(n.Resources={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";function i(n){t.push(n)}function r(){t.forEach(function(n){n.reset()})}var t=[];n.register=i;n.resetGlobalState=r})(t=n.GlobalStateManager||(n.GlobalStateManager={}))}(FxImpl||(FxImpl={})),function(n){"use strict";var r=MsPortalFx,t=window,i=function(){function n(n,t,i){this._cache={};this._formatCulture=n;this._intl=t;this._formatFactorySelector=
i}return n.prototype._create=function(n){var i,t,u;return this._intl&&(t=this._formatFactorySelector(this._intl),t&&(u=r.Base.Utilities.clone(n),i=new t(this._formatCulture,u))),i||{format:function(n){return n+""}}},n.prototype.get=function(n){if(n){var t="";return Object.keys(n).sort().forEach(function(i,r){r&&(t+=",");t+=i;t+=":";t+=n[i]}),this._cache[t]||(this._cache[t]=this._create(n))}return this._defaultFormat||(this._defaultFormat=this._create())},n}(),u=function(){function n(n,t){var r=n.split(".");r.length>1?(this.displayLanguage=r[0],this.formatCulture=r[1]):this.displayLanguage=this.formatCulture=r[0];this._intl=t;this.numberFormatCache=new i(this.formatCulture,t,function(n){return n.NumberFormat});this.dateTimeFormatCache=new i(this.formatCulture,t,function(n){return n.DateTimeFormat})}return n.createWithBrowserIntl=function(i){return i===void 0&&(i=t.fx.environment.effectiveLocale||"en.en-us"),new n(i,t.Intl)},n.prototype.supportedLocalesOf=function(n){var t=this._intl;return t?
(n=t.DateTimeFormat.supportedLocalesOf(n),t.NumberFormat.supportedLocalesOf(n)):["en-us"]},n}(),f;n.IntlContext=u,function(i){var r=n.IntlContext.createWithBrowserIntl(),u,f,e;i.displayLanguage=r.displayLanguage;i.formatCulture=r.formatCulture,function(n){function t(n){return r.numberFormatCache.get(n)}function i(n){return t().format(n)}n.create=t;n.format=i}(u=i.NumberFormat||(i.NumberFormat={})),function(n){function u(n){return r.dateTimeFormatCache.get(n)}var t="numeric",i="long";n.shortDatePattern={day:t,month:t,year:t};n.longDatePattern={weekday:i,year:t,month:i,day:t};n.fullDateTimePattern={weekday:i,year:t,month:i,day:t,hour:t,minute:t,second:t};n.monthDayPattern={month:i,day:t};n.shortTimePattern={hour:t,minute:t};n.longTimePattern={hour:t,minute:t,second:t};n.yearMonthPattern={year:t,month:i};n.create=u}(f=i.DateTimeFormat||(i.DateTimeFormat={})),function(n){function t(n){return r.supportedLocalesOf(n)}n.supportedLocalesOf=t}(e=i.Internal||(i.Internal={}));t.define("MsPortalFx/Globalization",
[],function(){return n.Intl})}(f=n.Intl||(n.Intl={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";function i(){return t||(t=FxImpl.Extension.getRuntime().getSharedSettings())}var t;n.getSharedSettings=i})(t=n.Settings||(n.Settings={}))}(MsPortalFx||(MsPortalFx={})),function(n){"use strict";function r(){var n=arguments,e=this,o=!1,u,h=n.length===1&&n[0]&&typeof n[0]=="object",s=n.length===2&&n[0]&&typeof n[0]=="object"&&(typeof n[1]=="function"||n[1]===null),r=s?n[1]:null,f;return(h||s)&&(f=n[0],u=e.replace(t,function(n){var i=n.substring(1,n.length-1),t;return f.hasOwnProperty(i)?(o=!0,t=f[i],r?r(t):t):n})),o||(u=e.replace(i,function(t,i){if(i<n.length){var u=n[i];return r?r(u):u}return t})),u}var t=/\{[a-zA-Z$_\d]*\}/g,i=/\{(\d+)\}/g;n.polyfill(String,{format:r,localeCompareIgnoreCase:function(t,i,r){return n.localeCompareIgnoreCase(this,t,i,r)},replaceAll:function(t,i){return n.replaceAll(this,t,i)},replaceMany:function(t){return n.replaceMany(this,t)},repeat:function(
t){return n.repeat(this,t)},startsWith:function(t,i){return n.startsWith(this,t,i)},endsWith:function(t,i){return n.endsWith(this,t,i)}},!0)}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function f(n){return n||""}function i(n,t,i){return f(n).substr(t,i)}function w(n,t){return e(n)?o(n,r,4).slice(t,3).join(r):""}var s="?",h="#",c="=",l="&",r="/",u=n.isUndefined,a=undefined,e=n.isUriAbsolute,o=n.split,v=n.ensurePrefix,y=decodeURIComponent,p=encodeURIComponent,b=function(){function n(n,t){var e=this,r,f;this._qs=[];this._qsMap={};this._leadingSeparator=u(t)?s:t;n&&(r=n,r[0]===this._leadingSeparator&&(r=i(r,1)),f=r.split(l),f.forEach(function(n){if(n){var r=n.indexOf(c),f=r>=0,t=f?i(n,0,r):n,u=f?i(n,r+1):"";t&&(t=y(t),u=y(u),e.setParameter(t,u))}}))}return n.prototype.clear=function(){return this._qs=[],this._qsMap={},this},n.prototype.setParameters=function(n){for(var t in n)n.hasOwnProperty(t)&&this.setParameter(t,n[t]);return this},n.prototype.getParameterIndex=
function(n){var t=n.toUpperCase();return this._qsMap[t]},n.prototype.setParameter=function(n,t){var f=n.toUpperCase(),r=this._qsMap[f],i=this._qs;return u(r)?(this._qsMap[f]=i.length,i.push(n),i.push(t)):(i[r]=n,i[r+1]=t),this},n.prototype.getParameter=function(n){var t=this.getParameterIndex(n),i;return u(t)||(i=this._qs[t+1]),i},n.prototype.getParameters=function(){for(var r,i={},t=this._qs,n=0,u=t.length;n<u;n+=2)r=t[n],r!==a&&(i[t[n]]=t[n+1]);return i},n.prototype.removeParameters=function(n){return n.forEach(this.removeParameter,this),this},n.prototype.removeParameter=function(n){var t=this.getParameterIndex(n),i;return u(t)||(i=this._qs,i[t]=i[t+1]=a),this},n.prototype.toString=function(n){var e,o;n===void 0&&(n=!0);for(var t="",r=this._qs,s=r.length,f=0;f<s;)e=r[f++],o=r[f++],u(e)||(t+=l,t+=p(e),t+=c,t+=p(o));return t&&(t=i(t,1),n&&(t=this._leadingSeparator+t)),t},n}(),k;t.QueryStringBuilder=b;k=function(){function n(n){var t=f(n),u=t.indexOf(h),o=u>=0,r=o?i(t,0,u):t,l=o?i(t,u):
"",e=r.indexOf(s),c=e>=0,a=c?i(r,0,e):r;this._oq=c?i(r,e):"";this.path=a;this.query=new b(this._oq);this.fragment=l}return n.prototype.getOriginalQuery=function(){return this._oq},n.prototype.toString=function(){var t=(this.query||"").toString(),n=f(this.fragment);return n&&(n=v(n,h)),f(this.path)+t+n},n.prototype.getAuthority=function(){return w(this.path,2)},n.prototype.getSchemeAndAuthority=function(){return w(this.path,0)},n.prototype.getRelativePath=function(){var n=this.path;return e(n)&&(n=v(o(n,r,4)[3],r)),n},n.prototype.setRelativePath=function(n){var t=this.path,u;e(t)?(n=f(n),n.startsWith(r)&&(n=i(n,1)),u=o(t,r,4),u[3]=n,t=u.join(r)):t=n;this.path=t},n}();t.UriBuilder=k})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";var y=n.Base.QueryStringBuilder,i=undefined,l="Microsoft",u=l+"_Azure_",o="Resource",e=l+"."+o+"s/",r="Browse",s="Blade",p="Gallery",h="Extension",a="TelemetrySharing",v="Feature",c=n.extendArrayIntoMap,
f=n.extendStringMapIntoMap,w,b,k,d,g,nt,tt,it,rt,ut;t.Shell="fx";t.DefaultCloudName=window.fx.environment.defaultCloudName||new y(window.location.search).getParameter("defaultCloudName")||"DefaultCloud",function(n){f(n,{Hubs:"Hubs"+h,Billing:u+"Billing",AzureInsights:u+"Insights",AzureMonitoring:u+"Monitoring",ActiveDirectory:u+"AD",Marketplace:u+"Marketplace",Support:u+"Support",Websites:"Websites"+h})}(w=t.ExtensionNames||(t.ExtensionNames={})),function(n){f(n,{ResourceGroups:i,BrowseAllBlade:r+"All",BrowseAllResources:i,BrowseRecentResources:i,BrowseAllBladeWithType:r+"AllWithType",BrowseServiceBlade:r+"Service",BrowseResourceGroupBlade:r+o+"Group",BrowseResourceBlade:r+o,BrowseInstanceLinkBlade:r+"InstanceLink",Gallery:i,StoreGallery:i,Deployments:i,ArmExplorer:i,WhatsNew:i,BrowseDynamicResource:i,BrowseDynamicAsset:i,SubscriptionDetail:"Subscription",NonAssetResource:i})}(b=t.AssetNames||(t.AssetNames={})),function(n){f(n,{Subscriptions:e+"subscriptions",ResourceGroups:e+"subscriptions/resourcegroups",
AllResources:e+"resources",RecentResources:e+"recent"})}(k=t.ResourceTypes||(t.ResourceTypes={})),function(n){var t;(function(n){f(n,{BrowseServicePinnedPart:r+"ServicePart",BrowseResourcePinnedPart:i,BrowseResourceGroupPinnedPart:i})})(t=n.Hubs||(n.Hubs={}))}(d=t.PartNames||(t.PartNames={})),function(n){var t,r,u,e;(function(n){c(n,["SubscriptionsBlade"])})(t=n.Billing||(n.Billing={})),function(n){f(n,{CreateHubBlade:p+"Create"+s,BrowseAllResourcesBlade:i,BrowseLinkBlade:i,BrowseResourceBlade:i,BrowseResourceGroupBlade:i,BrowseServiceBlade:i,NotFoundAssetBlade:i,ResourceGroupMapBlade:i,ResourceMenuBlade:i,ResourceProperties:i,UnauthorizedAssetBlade:i,UnavailableAssetBlade:i})}(r=n.Hubs||(n.Hubs={})),function(n){f(n,{GalleryFeaturedMenuItemBlade:i,GalleryResultsListBlade:i,LegalTermsV2Blade:"PCLegalTermsV2"+s})}(u=n.Marketplace||(n.Marketplace={})),function(n){c(n,["NotificationAction"+s])}(e=n.AzureInsights||(n.AzureInsights={}))}(g=t.BladeNames||(t.BladeNames={})),function(n){n.ViewModel=
"viewModel";n.PartViewModel="partViewModel"}(nt=t.ViewModelTypes||(t.ViewModelTypes={})),function(n){c(n,[v+"Adoption",v+"Obsolete"])}(tt=t.Telemetry||(t.Telemetry={})),function(n){n.RegisterExtension=a+".register"+h;n.TraceTelemetry=a+".traceTelemetry"}(it=t.TelemetrySharing||(t.TelemetrySharing={})),function(n){n.HomeMenuItem="home"}(rt=t.GalleryMenuItems||(t.GalleryMenuItems={})),function(n){n.EditScopeId="editScopeId";n.ReferrerInfo="referrerInfo"}(ut=t.BladeParameterNames||(t.BladeParameterNames={}))})(i=t.Constants||(t.Constants={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){"use strict";n.NativeError=Error}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";function c(n){var u=[],i=[],f=n.prototype,r,t;for(i.push(n);(n=(f=h(f)).constructor)!==e;)i.push(n);while(n=i.pop())t=n.TypeName,r&&r===t?t=n.TypeName=o.getFunctionName(n):r=t,u.unshift(t);return u}function l(n,t){var i,u,r,f,e;return n&&(i=n.baseTypes,u=i&&i.length,u&&(r=c(t),f=r&&r.length,
f&&(e=u-f,e>=0)))?r.every(function(n){return n===i[e++]}):!1}function f(n,t){if(n){var i=typeof n;i==="string"&&(n={message:n})}else n={};return $.extend({},t||{},n)}var e=FxImpl.NativeError,o=n.Base.Utilities,s=window,i="MsPortalFx.Errors.",h=Object.getPrototypeOf,r,u,a,v,y,p,w;t.isInstanceOfErrorType=l;t.getErrorOptions=f;r=function(n){function t(t){var i=f(t,{errorLevel:2}),u,e,l,a,r;n.call(this,i.message);u=c(h(this).constructor);this.type=u[0];this.baseTypes=u;this.code=i.code;this.data=i.data;this._errorData=i.errorData;this.extension=s.fx.environment.extensionName;this.errorLevel=i.errorLevel;this.handled=i.handled;this.timestamp=i.timestamp||s.fx.getTimestamp();this.source=i.source;e=this.message;this.message=i.message||e;l=this.name;this.name=i.name||l;a=this.stack;this.stack=i.stack||a||o.getCurrentCallStack(!0);r=i.innerErrors;this.innerErrors=r?Array.isArray(r)?r.slice():[r]:[]}return __extends(t,n),t.isBaseOf=function(n){return l(n,this)},Object.defineProperty(t.prototype,
"errorData",{get:function(){return this._errorData},enumerable:!0,configurable:!0}),t.TypeName=i+"Error",t}(e);t.Error=r;u=function(n){function t(t,i){n.call(this,{source:t,errorData:i});this.dataSetName=t}return __extends(t,n),t.TypeName=i+"DataError",t}(r);t.DataError=u;a=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.TypeName=i+"FetchDataError",t}(u);t.FetchDataError=a;v=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.TypeName=i+"UnauthorizedDataError",t}(u);t.UnauthorizedDataError=v;y=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.TypeName=i+"NotFoundDataError",t}(u);t.NotFoundDataError=y;p=function(n){function t(t){var i=f(t,{errorLevel:0});n.call(this,i)}return __extends(t,n),t.TypeName=i+"CanceledError",t}(r);t.CanceledError=p;w=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.TypeName=i+"DisposedError",t}(r);t.DisposedError=w})(t=n.Errors||(n.Errors={}))}(MsPortalFx||(MsPortalFx={})),function(n){var
t;(function(t){"use strict";var i=n.Errors;t.GenericError=i.Error;t.GenericDataError=i.DataError;t.FetchDataError=i.FetchDataError;t.NotFoundDataError=i.NotFoundDataError;t.UnauthorizedDataError=i.UnauthorizedDataError})(t=n.FxError||(n.FxError={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";function i(n){var t;try{t=e(n)}catch(i){t="ERROR serializing message: "+e(i)}return t}function o(n,u,e,o){var l=r.bootMessageSignature,h=r.trustedParentOrigin,a=u.getAttribute("crossorigin"),c=function(r){var s=r.message||r.filename||r.lineno||r.colno,u={signature:l,kind:n,data:{error:i(r.error),url:e,crossOriginAttribute:a}};o&&(u.data.moduleName=o);s?(u.data.details={fileName:r.filename,lineNumber:r.lineno,columnNumber:r.colno,message:r.message},t.parent.postMessage(u,h)):f(e,function(n,i){u.data.statusCode=n;u.data.httpMessage=i;t.parent.postMessage(u,h)})},s;u.addEventListener("error",c);s=function(){u.removeEventListener("load",s);u.removeEventListener("error",c)}
;u.addEventListener("load",s)}function f(n,t){try{var i=new XMLHttpRequest;i.onerror=function(){t(i.status,i.responseText,i.statusText)};i.onload=function(){t(i.status,i.status===200?"":i.responseText,i.statusText)};i.open("GET",n,!0);i.send()}catch(r){t(u,u)}}function e(n){if(!n||typeof n!="object")return String(n);var t=[];return Object.getOwnPropertyNames(n).forEach(function(r){var u=n[r],f=typeof u;if(f!=="function"){if(f!=="string"&&!MsPortalFx.startsWith(r,"###"))if(u instanceof Error)u=i(u);else try{u=JSON.stringify(u)}catch(e){u="<cyclic object>"}t.push(r+": "+u+"\r\n")}}),t.sort().join("")}var t=window,r=t.fx.environment,u=undefined;n.getLogFriendlyMessage=i;n.addScriptErrorListener=o;n.getStatusCode=f})(t=n.Diagnostics||(n.Diagnostics={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(t){"use strict";function et(n){var t=[];return d&&t.push(d),n.level===i.Debug&&t.push("[DEBUG]"),t.push(new Date(n.timestamp).toString({hour:"numeric",minute:"numeric",second:
"numeric"})),n.area&&t.push(n.area),typeof n.code=="number"&&t.push(n.code),n.message&&t.push(n.message),t.push.apply(t,n.args),t}function ot(){return v}function p(n){var t=n||"",i=t.lastIndexOf("/");return i>=0?t.substr(i+1):t}function st(n){var t=r;return r=n||w,t}function ht(){a=o.console||{};var t=[],n=function(n){var t=a[n],i;return typeof t=="function"&&(i=function(n){try{var i=et(n);t.apply(a,i)}catch(r){}}),i};return t[i.Verbose]=n("log")||n("debug")||u,t[i.Warning]=n("warn")||u,t[i.Error]=n("error")||u,t[i.Debug]=ut?n("debug")||n("log")||u:u,t}function ct(n,t){var u=e[i.Error],r;e[i.Error]=function(t){u(t);n(t)};r=e[i.Warning];e[i.Warning]=function(n){r(n);t(n)}}function lt(n){var t=ht(),r=c(n)?i.Debug:n;[i.Debug,i.Verbose,i.Warning,i.Error].forEach(function(n){e[n]=n>=r?t[n]:u})}function at(n,t,i,r,u){var f=!0;f=typeof t=="function"?t():!!t;f||(n.debugBreak,n.error(i,r,u))}var b=FxImpl.Diagnostics,c=n.isNullOrUndefined,nt=undefined,k=Date.now,o=window,s=o.fx.environment,d="["+
s.extensionName+"] ",tt=s.isDevelopmentMode,l=s.trace||{},it=!!l.assert,rt=!!l.diagnostics,ut=!!l.debuglog,e=[],a,v=50,u=function(){},ft=s.features.canmodifyextensions,i,g,f,y,w,r,h,vt;(function(n){n[n.Custom=-2]="Custom";n[n.Debug=-1]="Debug";n[n.Verbose=0]="Verbose";n[n.Warning=1]="Warning";n[n.Error=2]="Error"})(t.LogEntryLevel||(t.LogEntryLevel={}));i=t.LogEntryLevel;g=function(){function n(){var n=[],h,t,l=6e4,c=i.Warning,f=function(){n=h(n);t&&(o.clearTimeout(t),t=null)},r,s;this.flush=f;r=function(i){n.push(i);n.length>v?f():t||(t=o.setTimeout(function(){f()},l))};ft==="true"&&(r=u);this.pushLog=r;this.log=function(n){var t=n.level;if(t>=c)r(n);else if(t===i.Custom){r(n);return}e[t](n)};this.getEntries=function(t){return n.filter(function(n){return n.level>=t})};this.emptyBuffer=function(){n=[]};this.setMinRemoteLogLevel=function(n){c=n};s=function(n){var t=n;t=t?function(t){try{return n(t)}catch(i){return[]}}:function(n){return n.length>v&&n.splice(0,2,{timestamp:k(),level:i.Error,
area:"MsPortalFx/Base/Base.Diagnostics",message:"Log entry buffer overflowed",code:nt}),n};h=t};this.setBufferFullCallback=s;s()}return n}();t.getMaxBufferSize=ot;f=new g;y=u;w=function(n,t,r,u,e,o){var s,h,c;s=u?typeof u=="string"?u:b.getLogFriendlyMessage(u):u+"";h=s;n>=i.Warning&&r&&(h=[r,s].join(": "));c={timestamp:k(),level:n,area:t,message:h,code:e,args:o&&o.map(function(n){return n instanceof Error?b.getLogFriendlyMessage(n):n})};f.log(c)};r=w;t.setWriter=st;t.setupErrorDetection=ct;h=function(){function n(n){this.debugBreak=it;this._area=n;this._type=p(n)}return n.writeEntry=function(n,t,u){for(var o,e=[],f=3;f<arguments.length;f++)e[f-3]=arguments[f];o=n>=i.Warning?p(t):null;r(n,t,o,u,null,e)},n.writeEntry2=function(n,t,u,f,e){var o=n>=i.Warning?p(t):null;r(n,t,o,u,f,e)},n.getEntries=function(n){return f.getEntries(n)},n.clear=function(){f.emptyBuffer()},n.flush=function(){f.flush()},n.initialize=function(n,t){var r=!c(n),e=!c(t),o=u;r||e?r&&!e?t=n:!r&&e&&(n=i.Debug):(n=t=i.Debug,
o=at);f.setMinRemoteLogLevel(t);lt(n);y=o},n.disable=function(){n.initialize(i.Error+1,i.Error+1)},n.prototype.verbose=function(n){for(var u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];r(i.Verbose,this._area,this._type,n,null,u)},n.prototype.warning=function(n,t){for(var f=[],u=2;u<arguments.length;u++)f[u-2]=arguments[u];r(i.Warning,this._area,this._type,n,t,f)},n.prototype.error=function(n,t){for(var f=[],u=2;u<arguments.length;u++)f[u-2]=arguments[u];r(i.Error,this._area,this._type,n,t,f)},n.prototype.debug=function(n){for(var u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];r(i.Debug,this._area,this._type,n,null,u)},n.prototype.custom=function(n,t){for(var f=[],u=2;u<arguments.length;u++)f[u-2]=arguments[u];r(i.Custom,this._area,this._type,n,t,f)},n.prototype.assert=function(n,t,i,r){y(this,n,t,i,r)},n._setBufferFullCallback=function(n){f.setBufferFullCallback(n)},n}();t.Log=h,function(n){function t(n){f.pushLog(n)}n.pushLogEntry=t}(vt=t.Internal||(t.Internal={}));tt||rt?h.
initialize():h.initialize(i.Error,i.Warning)})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";function i(n,t,i){n[t]=function(){return n[i].apply(this,arguments)}}function r(n){i(n,"finally","always");i(n,"catch","fail")}function u(t){return n.Deferred().resolve(t).promise()}function f(t){return n.Deferred().reject(t).promise()}var t=jQuery;n.ajax=t.ajax;n.ajax=function(){for(var i=[],n=0;n<arguments.length;n++)i[+n]=arguments[n];return t.ajax.apply(t,i)};n.selector=t;n.Callbacks=t.Callbacks;n.data=t.data;n.removeData=t.removeData,function(){var n=t.Deferred;t.Deferred=function(t){var i=n(t),u=i.promise;return r(i),i.promise=function(){var n=u.apply(this,arguments);return r(n),n},i}}();n.Deferred=t.Deferred;n.resolve=u;n.reject=f})(t=n.Helpers||(n.Helpers={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";function u(n,t){return typeof t=="number"&&(t={
palette:t}),i(n,t||null)}var r=function(){function n(n,t){typeof t=="number"&&(t={palette:t});this.type=n;this.options=t||null}return n}(),i;t.ImageData=r;i=n.getStringMapFunc("type","options");t.newImageData=u})(i=t.Image||(t.Image={}))})(t=n.Services||(n.Services={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.None=0]="None";n[n.White=1]="White";n[n.Black=2]="Black";n[n.Blue=3]="Blue";n[n.Green=4]="Green";n[n.Gray=5]="Gray";n[n.Inherit=99]="Inherit";n[n.Disabled=100]="Disabled"})(n.ImagePalette||(n.ImagePalette={}));var t=n.ImagePalette})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){"use strict";function nt(n,t,i,r){for(var u=t?t.split("."):[];n&&u.length;)n=i(n),n&&(n=n[u.shift()]);if(!u.length)return r&&(n=i(n)),n}function tt(n,t,i,r){var u=t.subscribe(i,r,"arrayChange");return n&&n.registerForDispose(u),u}var w=n.Base,r=ko.utils,it=ko.observable,u=ko.observableArray,v=ko.bindingHandlers,
s=ko.isObservable,h=ko.unwrap,rt=n.uncurryThis,e=n.isUndefined,ot=window,o=jQuery,b="koJqueryAppend",f="###knockoutArrayEditFixupTokenPropertyName###",k=Function.call,ut=Array.prototype,d=rt(ut.push),st=new w.Diagnostics.Log("MsPortalFx/Base/Base.KnockoutExtensions"),g=undefined,c="added",y="deleted",ft="retained",l="",et={fixedUp:l,fixedUpIndexes:l,createArraySplices:l,mapIntoChanges:l},p=FxImpl.getErrorMap(et),a;v.activateWidget={init:function(n,t,i){var r=t(),u=i()["fxc-options"]||{};o(n)[r](u)},update:function(){}};v.jqueryAppend={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t){var r=h(t()),i=o(n),u=i.data(b);u&&o(u).remove();i.append(r);i.data(b,r)}};v.commands={update:function(n,i){var f=o(n),u=i(),e,s;if(u&&u.group){f.on(t.EventTypes.fxcontextmenurequest,e=function(n){var r,i;r=h(u.viewModel);i=o.Event(t.EventTypes.fxrightclick);i.clientX=n.clientX;i.clientY=n.clientY;f.trigger(i,{commandGroup:u.group,viewModel:r,entityType:2});n.preventDefault();n.stopPropagation(
)});r.domNodeDisposal.addDisposeCallback(n,s=function(){f.off(t.EventTypes.fxcontextmenurequest,e)})}}};r.fixupArrayEdits=function(n){if(n){n[f]&&p.fixedUp();n[f]=f;var t=0;n.forEach(function(n){switch(n.status){case c:t++;break;case y:n.index+=t;t--}})}return n};r.adjustArrayEdits=function(n,t,i){n[f]&&p.fixedUpIndexes();var r=0,u=n.map(function(n){var u=w.Utilities.clone(n);switch(n.status){case c:t&&(u.value=e(n.moved)?i(n.value):t[n.moved]);r++;break;case y:u.index+=r;r--;case ft:t&&(u.value=t[n.index])}return u});return u[f]=f,u},function(n){function t(n,t,i){var r=3,u=!1;return(t.deleteCount>0||t.spliceArguments.length>r)&&(t.spliceArguments[1]=t.startIndex,t.spliceArguments[2]=t.deleteCount,k.apply(i,t.spliceArguments),u=!0),t.deleteCount=0,t.startIndex=t.currentIndex,t.spliceArguments.length=r,u}n.quickApplyArrayEdits=function(n,i,r){for(var c=r&&r.spliceFunc||Array.prototype.splice,a=r&&r.inplaceFixup,u={startIndex:0,currentIndex:0,spliceArguments:[n,0,0],deleteCount:0},e=0,l=
0,v={added:1,deleted:-1},o=0,y=i.length;o<y;o++){var s=i[o],f=v[s.status]||0,h=s.index;a&&(f<0&&(h+=l),l+=f);u.currentIndex!==h&&(t(n,u,c)&&e++,u.startIndex=u.currentIndex=h);f>0?(u.currentIndex++,d(u.spliceArguments,s.value)):f<0&&u.deleteCount++}return t(n,u,c)&&e++,e}}(a=i.Internal||(i.Internal={}));r.applyArrayEdits=function(n,t,i){var r=0;if(t){var o=s(n),u=h(n),e=o&&n,c=i?function(n,t){for(var u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];return Array.prototype.splice.apply(this,[n,t].concat(u.map(i)))}:g,l=t[f];r=a.quickApplyArrayEdits(u,t,{spliceFunc:c,inplaceFixup:!l});e&&r>0&&e(u)}return r},function(n){function t(n,t,i,r){var l,o,s,tt,p,a,k,h,d,g,nt;if(n[f])throw new Error("createArraySplices does not work against edits with indexes that have been adjusted by adjustArrayEdits.");if(l=n.length,i){for(p=0,a=new Array(l),s=0;s<l;s++)o=n[s],e(o.moved)&&o.status===c&&(a[p++]=o.value);a.length=p;tt=r(a)}var v=new Array(l),w=0,b=0,u,it=0;for(s=0;s<l;s++)o=n[s],k=o.status,h=!e(
o.moved),k===c?(d=o.index,g=i?h?i[o.moved]:tt[it++]:o.value,u&&(!t||!!u.move===h)&&d===u.start+u.items.length?u.items.push(g):(u={start:d,deleteCount:0,items:[g]},t&&h&&(u.move=h),v[w++]=u),b++):k===y&&(nt=o.index+b,u&&(!t||!!u.move===h)&&nt===u.start+u.items.length?u.deleteCount++:(u={start:nt,deleteCount:1,items:[]},t&&h&&(u.move=h),v[w++]=u),b--);return v.length=w,v}n.createArraySplicesInternal=t}(a=i.Internal||(i.Internal={}));r.createArraySplices=function(n,t,i,r){return a.createArraySplicesInternal(n,t,i,r?function(n){return n.map(r)}:g)};r.applyArraySplices=function(n,t,i){var u=[],r;return t.length&&(t.length>1&&s(n)&&(r=n,n=r.peek(),r.valueWillMutate()),t.forEach(function(t){var r,f,e;r=i?t.items.map(i):t.items;f=[t.start,t.deleteCount];e=n.splice.apply(n,f.concat(r));t.move||u.push.apply(u,e)}),r&&r.valueHasMutated()),u};r.twoWayBinding=function(n,t){var r=n(),u=t(),i=!1,f=function(n,t){if(!i)try{i=!0;n(t)}finally{i=!1}},o,s;return e(r)?e(u)||n(u):t(r),o=n.subscribe(function(
n){f(t,n)}),s=t.subscribe(function(t){f(n,t)}),[o,s]};r.cleanDescendantNodes=function(n){o(n).contents().toArray().forEach(function(n){ko.cleanNode(n)})};r.wrap=function(n){return s(n)?n:it(n)};r.wrapArray=function(n){return s(n)?n:u(n)};r.unwrapObservablePath=function(n,t,i){return i===void 0&&(i=!0),nt(n,t,h,i)};r.peekObservablePath=function(n,t,i){return i===void 0&&(i=!0),nt(n,t,r.peekObservable,i)};i.subscribeArrayEdits=tt;u.fn.subscribeArrayEdits=function(n,t,i){return tt(n,this,t,i)};u.fn.subscribeArrayChanges=function(n,t,i,r){r=r||this;var u=[r,null],f={added:t,deleted:i};return this.subscribeArrayEdits(n,function(n){for(var i,r,t=0,o=n.length;t<o;t++)i=n[t],e(i.moved)&&(r=f[i.status],r&&(u[1]=i.value,k.apply(r,u)))})};u.fn.subscribeArrayBulkChanges=function(n,t,i){return i=i||this,this.subscribeArrayEdits(n,function(n){for(var r,f=[],o=[],s={added:f,deleted:o},u=0,h=n.length;u<h;u++)r=n[u],e(r.moved)&&d(s[r.status],r.value);t.call(i,f,o)})};u.fn.subscribeArrayAdds=function(n,
t,i){return this.subscribeArrayChanges(n,t,null,i)};u.fn.subscribeArrayDeletes=function(n,t,i){return this.subscribeArrayChanges(n,null,t,i)};u.fn.mapInto=function(n,t,i){var f,o;i||(i=u());var h=this,e=new FxImpl.TriggerableLifetimeManager,c=function(n){return ko.ignoreDependencies(function(){var i=e.createChildLifetime(),r=t(i,n);return{item:r,lifetime:i}})},s=h.peek().map(c);return i(s.map(function(n){return n.item})),f=new FxImpl.TriggerableLifetimeManager,o=!1,i.subscribe(f,function(){o||p.mapIntoChanges()}),h.subscribeArrayEdits(f,function(n){var t=r.createArraySplices(n,!0,s,c),u=r.applyArraySplices(s,t);try{o=!0;r.applyArraySplices(i,t,function(n){return n.item})}finally{o=!1;u.forEach(function(n){n.lifetime.dispose()})}}),n.registerForDispose({dispose:function(){f&&(f.dispose(),f=null);e&&(e.dispose(),e=null)}}),i}})(i=t.KnockoutExtensions||(t.KnockoutExtensions={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(){"use strict";var n=MsPortalFx.
Errors.isInstanceOfErrorType,t=Q.makePromise.prototype;t.catchError=function(t,i){return this.catch(function(r){return n(r,t)?i(r):Q.reject(r)})}})(t=n.QExtensions||(n.QExtensions={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(t){"use strict";function s(n,t){return new u(n,t)}function i(n,t){var u=Q.defer(),r=u.promise,e=new FxImpl.TriggerableLifetimeManager,f;return ko.reactor(e,function(){var n=t.cancelation();n&&r.isPending()&&u.reject(n)}),r.finally(function(){e.dispose()}),Q(n).then(function(n){r.isPending()&&u.resolve(n)},function(n){r.isPending()&&u.reject(n)},function(n){t.canceled||u.notify(n)}),f=r.then,r.then=function(n,u,e){return u?f.apply(r,arguments):i(f.call(r,n&&function(i){if(!t.canceled)return n(i)},u,e&&function(n){if(!t.canceled)return e(n)}),t)},r}var f=n.Errors,e=f.CanceledError,o,r,u;(function(n){n.fulfilled="fulfilled";n.rejected="rejected"})(o=t.PromiseStates||(t.PromiseStates={}));t.wrapWithCancelablePromise=s;t.makeCancelable=i;r=function(
){function n(){this.cancelation=ko.observable()}return Object.defineProperty(n.prototype,"canceled",{get:function(){return!!this.cancelation()},enumerable:!0,configurable:!0}),n.prototype.cancel=function(n){var t=this.cancelation;return t()||t(n||new e),t()},n}();t.CancelationToken=r;u=function(){function n(n,t){var i="Argument '{0}' cannot be null or undefined.";if(!n)throw new Error(i.format("underlyingPromise"));if(!t)throw new Error(i.format("cancelationToken"));this._underlyingPromise=n;this._cancelationToken=t}return n.prototype.then=function(t,i){var r=this._cancelationToken,u=null,f;return i&&(u=function(n){if(!r.canceled)return i(n)}),f=this._underlyingPromise.then(function(n){if(!r.canceled)return t?t(n):null},u),new n(f,r)},n.prototype.progress=function(t){if(this._underlyingPromise.progress){var i=this._cancelationToken,r=this._underlyingPromise.progress(function(n){if(!i.canceled)return t(n)});return new n(r,i)}return this},n.prototype.finally=function(n){return this.then(
n,n)},n.prototype.catch=function(n){return this.then(null,n)},n}()})(i=t.Promises||(t.Promises={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";var l=n.keysLength,a=ko.observable,s=n.uncurryThis,p=n.applyCall,h=Array.prototype,r=s(h.forEach),w=s(h.push),v=n.shallowCopyFromObject,f=n.disposeDisposable,u="",y={keyNotFound:u,reservedKey:u,noPut:u,noRemove:u,noClear:u},i=FxImpl.getErrorMap(y),e=function(){function n(){this._modifyMap={};this._dependantMaps=[];this._observable=a({});this._isInModifyBlock=!1;this.latch=this._observable}return n.prototype.put=function(n,t){var i=this;this._validateKey(n);this.modify(function(){i._modifyMap[n]=t;r(i._dependantMaps,function(i){return i._putNotification(n,t)})})},n.prototype.lookup=function(n){return this._modifyMap[n]},n.prototype.modify=function(n){var i=!1,t=[];this._isInModifyBlock||(i=!0,this._isInModifyBlock=!0,this._modifyMap={},v(this._modifyMap,this._observable()),
r(this._dependantMaps,function(n,i){t.push(function(){return n.modify(t[i+1])})}));try{t.push(n);t[0]()}finally{i&&(this._isInModifyBlock=!1,this._observable(this._modifyMap))}},n.prototype.clear=function(){var n=this;this.modify(function(){n._modifyMap={};r(n._dependantMaps,function(t){return t._clearNotification(n)},n)})},Object.defineProperty(n.prototype,"count",{get:function(){return l(this._observable())},enumerable:!0,configurable:!0}),n.prototype.remove=function(n){var t=this;this._validateKey(n);n in this._observable()||i.keyNotFound(n);this.modify(function(){delete t._modifyMap[n];r(t._dependantMaps,function(t){return t._removeNotification(n)})})},n.prototype.forEach=function(n){this.some(function(){return n.apply(this,arguments),!1})},n.prototype.some=function(n,t){var r=this._observable(),f=t||this,i,u;for(i in r)if(u=r[i],n.call(f,u,i))return!0;return!1},n.prototype.every=function(n,t){return!this.some(function(){return!n.apply(this,arguments)},t)},n.prototype.toArray=function(
){var n=[];return this.forEach(function(t){n.push(t)}),n},n.prototype.dispose=function(){},n.prototype.subscribe=function(n,t,i,r){var u;return u=this._observable.subscribe(t,i,r),n.registerForDispose(u),u},n.prototype.map=function(n,t){return new o(n,this,t)},n.prototype._addDependantMap=function(n){this._dependantMaps.push(n)},n.prototype._removeDependantMap=function(n){var t=this._dependantMaps.filter(function(t){return t!==n});t.length!==this._dependantMaps.length&&(this._dependantMaps=t)},n.prototype._putNotification=function(){},n.prototype._removeNotification=function(){},n.prototype._clearNotification=function(){},n.prototype._validateKey=function(n){for(var t in Object.prototype)t===n&&i.reservedKey(n)},n}(),o,c;t.ObservableMap=e;o=function(n){function t(t,i,r){var u=this;n.call(this);this._map=i;this._transform=r;i._addDependantMap(this);t.registerForDispose(this);this.modify(function(){i.forEach(function(t,i){n.prototype.put.call(u,i,u._transform(t,undefined))})})}return __extends(
t,n),t.prototype.dispose=function(){this._map._removeDependantMap(this)},t.prototype.put=function(){i.noPut()},t.prototype.remove=function(){i.noRemove()},t.prototype.clear=function(){i.noClear()},t.prototype._putNotification=function(t,i){var r=this.latch()[t],u=this._transform(i,r);r&&r!==u&&f(r);n.prototype.put.call(this,t,u)},t.prototype._removeNotification=function(t){var i=this.latch()[t];f(i);n.prototype.remove.call(this,t)},t.prototype._clearNotification=function(){this.forEach(function(n){return f(n)});n.prototype.clear.call(this)},t}(e);t.ObservableMapProjection=o;c=function(n){function t(t){for(var r=this,u=[],i=1;i<arguments.length;i++)u[i-1]=arguments[i];n.call(this);this._maps=u;t.registerForDispose(this);u.forEach(function(t){t._addDependantMap(r);r.modify(function(){t.forEach(function(t,i){n.prototype.put.call(r,i,t)})})})}return __extends(t,n),t.prototype.dispose=function(){var n=this;r(this._maps,function(t){return t._removeDependantMap(n)})},t.prototype.put=function(
){i.noPut()},t.prototype.remove=function(){i.noRemove()},t.prototype.clear=function(){i.noClear()},t.prototype._putNotification=function(t,i){n.prototype.put.call(this,t,i)},t.prototype._removeNotification=function(t){n.prototype.remove.call(this,t)},t.prototype._clearNotification=function(t){var i=this;this._modifyMap={};r(this._maps,function(r){r!==t&&r.forEach(function(t,r){n.prototype.put.call(i,r,t)})});r(this._dependantMaps,function(n){n._clearNotification(i)})},t}(e);t.ObservableMapUnion=c})(i=t.Internal||(t.Internal={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){"use strict";function p(){y(arguments[0],"Invalid first argument: it must be a lifetimeManager.");s.apply(this,arguments)}function h(n){var t=n.subscribe;n.subscribe=function(n){var f,e,u,o;if(i(n),r(n)){for(f=arguments.length-1,e=new Array(f),u=0;u<f;u++)e[u]=arguments[u+1];return o=t.apply(this,e),n.registerForDispose(o),o}return t.apply(this,arguments)}}function t(n){return n&&(n.map=w,n.filter=
b),n}function w(n,u){if(i(n),r(n)){var f=a.call(this,{mappingWithDisposeCallback:function(t){var i=n.createChildLifetime();return{mappedValue:u(i,t),dispose:function(){i.dispose()}}}});return n.registerForDispose(f),t(f)}return t(a.apply(this,arguments))}function b(n,u){if(i(n),r(n)){var f=v.call(this,u);return n.registerForDispose(f),t(f)}return t(v.apply(this,arguments))}function i(n){y(n,"Invalid first argument: it must be a lifetimeManager, function or object.")}function y(n,t){var i=typeof n;if(!n||i!=="function"&&i!=="object")throw new Error(t+" Actual: "+(n===null?"null":i));}function r(n){return n&&typeof n.registerForDispose=="function"}var u=n.computed,o=n.ignoreDependencies,s=n.computed=function(t){var l,f,e,s,c,h,a,v;if(i(t),r(t)){for(l=arguments.length-1,f=new Array(l),e=0;e<l;e++)f[e]=arguments[e+1];return s=f[0],c=n.isSubscribable(s)&&[s]||Array.isArray(s)&&s,c&&(f.shift(),h=f[0],typeof h=="function"?f[0]=function(){return o(h,this,c.map(function(n){return n&&n()}))}:(a=
h.read,a&&(h.read=function(){return c.map(function(n){return n&&n()}),o(a,this,null)}))),v=u.apply(this,f),t.registerForDispose(v),v}return u.apply(this,arguments)},f,c,l;n.reactor=p;f=n.subscribable.fn;h(f);f.subscribeAndRun=function(n,t,i,r){var u=this.subscribe(n,t,i,r);return u.callback(this()),u};c=n.extenders.trackArrayChanges;n.extenders.trackArrayChanges=function(n){var t=n.subscribe,i=c.apply(this,arguments),r=n.subscribe;return r!==t&&h(n),i};l=n.hasPrototype;n.hasPrototype=function(t,i){return i===s&&(i=u),l.call(n,t,i)};var e=n.observableArray,a=e.fn.map,v=e.fn.filter;t(e.fn)}(ko||(ko={})),function(n){"use strict";var t=n.Base.Diagnostics;n.polyfill(Array,{concatUnique:function(t,i){return n.union(this,t,i)},first:function(t,i){var r=n.findIndex(this,t,i);return r<0?null:this[r]},firstIndex:function(t,i){return n.findIndex(this,t,i)},last:function(){if(this.length<1)throw new Error("Cannot get the last element because the array is empty.");return this[this.length-1]},mapMany:
function(t){return n.mapMany(this,t)},remove:function(t){return n.remove(this,function(n){return n===t})},stableSort:function(t){return n.stableSort(this,t)},toNumberMap:function(n){var t=[];return this.forEach(function(i){t[n(i)]=i}),t},unique:function(t){return n.unique(this,t)}})}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function i(n,t,i){return i===void 0&&(i=0),{limit:n,format:t,factorSeconds:i}}function ui(t,i){var r,f,e,o,u;if(i>=1){if(r=ft[t],r||(r=ft[t]=[""]),f=r[i],!f){for(e=n.repeat,o=i<5?5:i,u=1;u<o;u++)r[u]=e(t,u);f=r[i]}return f}return""}function fi(n,t,i){i===void 0&&(i="0");var r=n+"",u=t-r.length;return u>0?ui(i,u)+r:r}function ot(n,t){return(n+"").substr(-t)}function st(n,t){return ot(e(n,t),t)}function ei(n){return(n-1)%12+1}function s(n){for(var t="",i=0,r=n.length;i<r;i++)t+="\\",t+=n[i];return t}function oi(n,t){var i=t.length,r=i===2?st:g,f=et(),c,l,v,o,y,a,w;switch(t[0]){case"y":return c=n.getFullYear(),i===3?e(c,i):i===1?parseInt(
g(c,2),10)+"":st(c,i);case"M":return l=n.getMonth(),i===4?s(f.months[l]):i===3?s(u.monthsAbbr[l]):r(l+1,2);case"d":return i===4?s(f.days[n.getDay()]):i===3?s(u.daysAbbr[n.getDay()]):r(n.getDate(),2);case"h":v=!0;case"H":return o=n.getHours(),o=v?ei(o):o,r(o,2);case"m":return r(n.getMinutes(),2);case"s":return r(n.getSeconds(),2);case"t":return y=i===2?f.ampm:u.ampmAbbr,y[n.getHours()<12?0:1];case"z":var h=-n.getTimezoneOffset()/60,b=h<0,p="+";return b&&(h=-h,p="-"),a=parseInt(h+"",10),w=(h-a)*60,p+(i===3?e(a,2)+":"+e(w,2):e(a,i));case"/":return f.dateSeparator;case":":return f.timeSeparator}return""}function si(n,t){return y(oi(n,t))}function ht(n,t){var o=t?t.getTime():Date.now(),f=o-n.getTime(),i,r,e,u;for(f/=1e3,r=0,e=ut.length;r<e;r++)if(i=ut[r],f<i.limit)break;return u=i.format,i.factorSeconds&&(u=u.format(Math.round(f/i.factorSeconds))),u}function at(n){n=n||0;var i=this.getDate(),r=this.getDay(),t=n-r;return t>0&&(t-=7),new Date(this.getFullYear(),this.getMonth(),i+t)}function hi(
n){var t=at.call(n,u.firstDayOfWeek);return p[0].format=function(t){return ht(t,n)},p[1].limit=(n.getTime()-t.getTime())/1e3,p}function ci(n,t){var u,f,i,e,r;for(t===void 0&&(t=new Date),u=hi(t),f=(t.getTime()-n.getTime())/1e3,i=0,e=u.length;i<e;i++)if(r=u[i],f<r.limit&&r.limit>0)break;return r.format(n)}function pt(){return function(){var r=this,n,t,i;return arguments.length?(n=arguments[0],typeof n=="string"?(n=u.standard[n]||n,n=n.replace(/'([^']*)'/g,yt),t=function(n){return si(r,n)},y(y(n).replace(/(y{1,5}|M{1,4}|d{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|t{1,2}|z{1,3}|\/|:)(?!\\)/g,t).replace(/\\(?!\\)/g,""))):(i=h.create(n),i.format(this))):dt(this,arguments)}}var bt=n.Resources.Strings.DatePolyfill,h=FxImpl.Intl.DateTimeFormat,w=n.uncurryThis,kt=Array.prototype,c=w(kt.map),dt=w(Date.prototype.toString),gt=Date.parse,o=bt,li=new n.Base.Diagnostics.Log("MsPortalFx.Polyfill"),ni=o.Days,ti=o.DaysAbbr,ii=o.Months,ri=o.MonthsAbbr,r=o.AgoStrings,it=["sunday","monday","tuesday","wednesday","thursday",
"friday","saturday"],rt=["january","february","march","april","may","june","july","august","september","october","november","december"],u={days:c(it,function(n){return ni[n]}),daysAbbr:c(it,function(n){return ti[n]}),months:c(rt,function(n){return ii[n]}),monthsAbbr:c(rt,function(n){return ri[n]}),ampm:["AM","PM"],ampmAbbr:[],dateSeparator:"/",timeSeparator:":",standard:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",f:"",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"",G:"",m:"MMMM dd",M:"MMMM dd",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},firstDayOfWeek:0},l=60,a=l*60,f=a*24,b=f*7,v=f*365,k=v/12,ut=[i(l,r.lessThanAMinute),i(l*1.5,r.aMinute),i(a,r.minutes,l),i(a*1.5,r.anHour),i(f,r.hours,a),i(f*1.5,r.aDay),i(b,r.days,f),i(b*1.5,r.aWeek),i(k,r.weeks,b),i(k*1.5,r.aMonth),i(v,r.months,k),i(v*1.5,r.aYear),i(Number.POSITIVE_INFINITY,r.years,v),],ft=
{},et=function(){return u},d,e,g,y,ct,lt,p,vt,nt,yt,wt,tt;t.getLocaleValues=Date.getLocaleValues=et;d=function(n){u=n||u;u.ampmAbbr=[u.ampm[0][0]||"",u.ampm[1][0]||""];var t=u.standard;t.f=t.D+" "+t.t;t.g=t.d+" "+t.t;t.G=t.d+" "+t.T};t.setLocaleValues=Date.setLocaleValues=d;e=fi;g=ot;y=n.reverse;p=[{limit:f,format:undefined},{limit:undefined,format:function(n){var t=ct||(ct=h.create({weekday:"long"}).format);return t(n)}},{limit:Number.POSITIVE_INFINITY,format:function(n){var t=lt||(lt=h.create(h.shortDatePattern).format);return t(n)}}];vt={difference:ht,timestamp:ci};nt=function(n,t){var i=vt[n||"difference"];if(i)return i(this,t||new Date)};t.dateToRelativeString=nt;yt=w(s);t.getDateToStringFunc=pt;wt=pt(/(y{1,5}|M{1,4}|d{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|t{1,2}|z{1,3}|\/|:)(?!\\)/g);n.polyfill(Date,{toRelativeString:nt,toString:wt,getFirstDayOfWeek:at},!0);tt=function(t){return(typeof t!="string"&&(t=t+""),n.startsWith(t,"/Date("))?parseInt(t.substr(6),10):gt.call(this,t)};t.dateParse=
tt;Date.parse=tt;d(u)})(t=n.Polyfills||(n.Polyfills={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";function r(n){if(jQuery.type(n)!==i||n.nodeType||f(n))return!1;var t=n.constructor&&n.constructor.prototype;return t&&!c(t,"isPrototypeOf")?!1:!0}function a(n){for(var t in n)return!1;return!0}function f(n){return n!=null&&n===n.window}function e(n){if(n==null)return n+"";var t=typeof n;return t===i||t===u?l[toString.call(n)]||i:t}function o(n){return e(n)===u}function s(){for(var p=[],h=0;h<arguments.length;h++)p[+h]=arguments[h];var c,e,u,t,l,a,n=arguments[0]||{},f=1,y=arguments.length,v=!1;for(typeof n=="boolean"&&(v=n,n=arguments[f]||{},f++),typeof n===i||o(n)||(n={}),f===y&&(n=this,f--);f<y;f++)if((c=arguments[f])!=null)for(e in c)(u=n[e],t=c[e],n!==t)&&(v&&t&&(r(t)||(l=Array.isArray(t)))?(l?(l=!1,a=u&&Array.isArray(u)?u:[]):a=u&&r(u)?u:{},n[e]=s(v,a,t)):t!==undefined&&(n[e]=t));return n}var h=n.
uncurryThis,c=h(Object.prototype.hasOwnProperty),l={},i="object",u="function";t.isPlainObject=r;t.isEmptyObject=a;t.isWindow=f;t.type=e;t.isFunction=o;t.extend=s})(i=t.JQuery||(t.JQuery={}))})(i=t.Internal||(t.Internal={}))})(i=t.Utilities||(t.Utilities={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";function k(n,t,i){var r=i?[!0,n,t]:[n,t];return tt.extend.apply(void 0,r)}function st(n,t,i){if(i&&rt(n))return n;var r=u(n)?[]:{};return k(r,n,t)}function d(n){return t.isNullOrUndefined(n)?"":(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ht(n){return d(n).replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/`/g,"&#96;")}function ct(n){var i,u,r,e,o;return n||t.isDiagnosticsEnabled?(i=f(),i&&(u="\n",r=0,r=i.indexOf(u,0),r=i.indexOf(u,r+1),e=i.indexOf("@",0),o=e>-1&&e<r,o||(r=i.indexOf(u,r+1)),i=i.substr(r+1)),i):"(Callstack capturing is not enabled. Use ?trace=diagnostics to enable it.)"}
function lt(n,t){var i=function(t,i){if(t===n&&!t.hasOwnProperty(i))throw new Error("Missing property '"+i+"' on root object '"+h(t)+"'.");},r=function(r,f){var h=f===n,e,o;return f&&typeof f=="object"&&!u(f)?(e=h&&t?t:s(f),e.length===0?h?{}:f:(o=new kt,e.forEach(function(n){i(f,n);o.addProperty(n,f[n])}),o.toJSON())):f};return h(n||{},r)}function at(n){if(!n||typeof n!="object"||u(n))throw new Error(c+".");var t=s(n);if(t.length!==1)throw new Error(c+" with only one property.");return t[0]}function vt(n,t,i){return n[i]}function yt(n){var t=function(t,r){if(t===w&&u(r)){var f=this;i.extendArrayIntoMap(f,r,function(t){try{return at(t)}catch(i){i.message=i.message+(" String: '"+n+"'.");throw i;}},vt);return}return r};return ut(n,t)}function pt(n){n&&i.disposeDisposable(n.content,n.container)}function wt(n){return o+n+o}function bt(n){return n!=="constructor"&&!i.startsWith(n,o)}function v(n){var t="object",i;return n.constructor&&(i=n.constructor,t=a(i)),t}function r(n){return"<"+n+">"}
function gt(n,t,i,f){function y(n){return i.visited.indexOf(n)<0?(i.visited.push(n),!0):!1}var e,o,s,nt=!n,p=nt||f,w,b,h,c,k,d;if(!n||n[0]!=="_")return s=typeof t,e=r(s),s in g||(s==="object"?t===null?e=r("null"):u(t)?(w=t,b=y(t)?"":l,e=b+r("Array["+w.length+"]")):t instanceof Date?e=r("Date"):i.current!==t?(h=r(v(t)),p?(e=o={},o[h]=t,o=o[h],i.current=t):e=h):(i.current=null,e=y(t)?t:l+r(v(t))):s==="function"&&(c=r(s)+a(t),ko.isObservable(t)&&p?y(t)?(e=o={},k=t,d=k.peek(),o[c]=d):e=l+c:e=c)),e}function ni(n,t){var i={current:null,visited:[]};return h(n,function(n,r){return gt(n,r,i,t)},2).replace(/\"/g,"")}function ti(n,t,r){var u={};return i.extendArrayIntoMap(u,n,t,r),u}var i=n,nt=i.Base,tt=t.Internal.JQuery,y=window,e=y.fx.environment,it=new nt.Diagnostics.Log("MsPortalFx/Base/Base.Utilities"),p=function(){return(new Error).stack},rt=function(n){return typeof n!="object"||n===null},w="#",o="###",u=Array.isArray,s=Object.keys,h=JSON.stringify,ut=JSON.parse,ft=i.forEachKey,f=p,c,g;if(
i.isIFrame&&(!e.trace.nonsecure||!e.isDevelopmentMode)){var et="This call to {0} is not allowed in an extension.",ot={alert:undefined,confirm:!1,prompt:null},b=0;ft(ot,function(n,t){b++;y[n]=function(i){return it.error(et.format(n),b,i),t}})}f()||(f=function(){try{throw new Error;}catch(n){return n.stack}},f()||(f=function(){return""}));t.isDiagnosticsEnabled=function(){var n=e.trace;return n&&n.diagnostics?!0:n&&n.nocallstacks?!1:e.isDevelopmentMode&&!!p()?!0:!1}();t.extend=k;t.clone=st;t.htmlEncode=d;t.attributeEncode=ht;t.getCurrentCallStack=ct;t.toSortedString=lt;c="Invalid sorted string, property array must contain objects";t.parseSortedString=yt;t.disposeViewModelProperties=pt;t.generateNonSerializableProperty=wt;t.isSerializableProperty=bt;var kt=function(){function n(){this._propertyMap={}}return n.prototype.addProperty=function(n,t){t!==undefined&&typeof t!="function"&&(this._propertyMap[n]=t)},n.prototype.toJSON=function(){var n=this._propertyMap,i=s(n),t;return i.length>1?(t=
{},t[w]=i.sort().map(function(t){var i={};return i[t]=n[t],i}),t):n},n}(),dt=/function\s+(\w*)\(.*?\)/,l="[potential-circular-reference]",a=function(n){var t,r,i;return n?(t=n.name,t===undefined&&(r=n.toString(),r&&(i=dt.exec(r),i&&i.length>=1&&(t=i[1]))),t||"[anonymous]"):""};t.getFunctionName=a;t.getObjectConstructorName=v;g={undefined:1,boolean:1,number:1,string:1};t.getObjectDescriptor=ni;t.convertArrayToMap=ti})(i=t.Utilities||(t.Utilities={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";function i(n){return n.toLowerCase()}function c(t,u){var f=n.multiCloudEnabled?t:r;return u?i(f):f}function y(n){return new l.QueryStringBuilder(n).getParameter(u)}function p(){return!!n.selfCloudName||o.isFeatureEnabled("multicloud")}function w(u,o){var h,s;if(o===void 0&&(o={}),h=u.name,!h)throw new Error("Extension name"+v);if(!n.multiCloudEnabled||h===e.Shell)return h;if(s=u.cloudName,f[i(h)]&&!o.forceCloudName&&(s=r),o.addSelfCloudNameIfMissing&&
(s=s||n.selfCloudName),s=n.normalizeCloudName(s),!s)throw new Error(a+"extension name = "+h);return""+s+t+h}function b(u,o){if(o===void 0&&(o={}),!u)throw new Error("Window id"+v);if(!n.multiCloudEnabled||u===e.Shell)return{name:u,cloudName:undefined};if(f[i(u)])return{cloudName:r,name:u};var s=u.split(t),h=s[s.length-2];if(o.addSelfCloudNameIfMissing&&(h=h||n.selfCloudName),!h)throw new Error(a+"windowId = "+u);return{cloudName:h,name:s[s.length-1]}}function g(t,r){var e=i(t.name),o=i(r.name),u=e===o;return u&&n.multiCloudEnabled&&!f[e]&&(u=i(t.cloudName)===i(r.cloudName)),u}function k(t,r){return n.multiCloudEnabled?i(t)===i(r):!0}function nt(){return w({name:s,cloudName:r})}function tt(){return b(s).cloudName}function it(i,f,e){if(e===void 0&&(e=!0),n.multiCloudEnabled){h(i,t)&&(i=i.slice(1));var o=e?t:"";return k(f,r)?o+i:o+u+t+f+t+i}return i}function rt(i){var r,f,e;if(n.multiCloudEnabled){for(r=!1;h(i,t);)i=i.slice(1),r=!0;return(f=r?t:"",e=i.split(t),e[0]===u)?f+e.slice(2).join(
t):f+i}return i}function ut(i){if(n.multiCloudEnabled){while(h(i,t))i=i.slice(1);var f=i.split(t);return f[0]===u?f[1]:r}return}function ft(i){if(i===void 0&&(i=window.location.hash),n.multiCloudEnabled){var f=i.split(t);return f[1]!==u?r:f[2]}return}var o=MsPortalFx,l=o.Base,e=l.Constants,t="/",u="cloudname",r=e.DefaultCloudName,s=e.ExtensionNames.Hubs,a="Missing cloud name; ",v=" must not be empty",h=o.startsWith,f,d;n.selfCloudName=y(window.location.search);n.multiCloudEnabled=p();f={};f[i(s)]={};n.generateSelfCloudName=y;n.generateMultiCloudEnabled=p;n.getWindowId=w;n.getDescriptor=b;n.isEqualDescriptor=g;n.isEqualCloudName=k;n.normalizeCloudName=c;d=function(){function n(){this._map={}}return n.prototype.get=function(n){return this._map[c(n,!0)]},n.prototype.getOrSet=function(n,t){var i=this.get(n);return i===undefined?(this.set(n,t),t):i},n.prototype.set=function(n,t){this._map[c(n,!0)]=t},n.prototype.all=function(){var n=this,t=Object.getOwnPropertyNames(this._map);return t.map(
function(t){return n._map[t]})},n.prototype.disposeAll=function(){this.all().forEach(function(n){n.dispose()})},n}();n.CloudMap=d;n.getHubsWindowId=nt;n.getHubsCloudName=tt;n.addCloudNameToId=it;n.removeCloudNameFromId=rt;n.getCloudNameFromId=ut;n.getCloudNameOfActiveComposition=ft})(t=n.Extension||(n.Extension={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";function s(n,i){MsPortalFx.extendArrayIntoMap(n,i,null,function(n){return t+n})}function h(n,i){MsPortalFx.extendStringMapIntoMap(n,i,function(n){return t+n})}var e,c;(function(n){n.inputBindingKey="_msPortalFxCloudName";n.allClouds="_msPortalFxAllClouds"})(e=n.CloudName||(n.CloudName={}));var t="MsPortalFx.Internal.Constants.RpcMethods.",u=t+"AzureStorage.",i=t+"AzureResourceManager.DeploymentManager.",o="Hubs."+t,f=t+"ParameterCollection.ShellProvisioner.",r=window,l=r&&r.fx&&r.fx.environment;(function(n){n.hubsGetResourceGroupsFromSubscription=o+"getResourceGroupsFromSubscription";n.getSasUriForQueue=u+"getSasUriForQueue";
n.getHmacSha256=u+"getHmacSha256";n.azureResourceManagerDeployTemplate=i+"deployTemplate";n.azureResourceManagerPollForDeployment=i+"pollForDeployment";n.validateArmTemplate=i+"validateTemplate";n.getProvisioningRequest=f+"fulfillProvisioningRequest";n.initiateProvisioningRequest=f+"initiateProvisioningRequest";s(n,["brokerExtensionService","forwardEvent","getUserInfo","getSharedSettings","entryPointDispose","entryPointGetDefinition","entryPointGetBladeDefinition","entryPointGetControlDefinition","entryPointGetPartDefinition","entryPointInitialize","hasPermission","mapAssetIdToResourceId","mapResourceIdToAssetId","mapAssetIdToDynamicSelectionAndIcon","mapResourceIdToDynamicSelectionAndIcon","getAssetTypeInformation","getResourceTypeAssetTypeInformation","getResourceAssetInformation","getResource","notifyExtensionStatus","ping","provideExtensionService","updateSubscriptionInfo","updateTenantInfo","getRegisteredResourceProviderInfo","viewModels","getClientNotifications","signalResourcesChanged",
"getSubscriptionInfo","getAllSubscriptions","getSelectedSubscriptions","getLocationDisplayNames","submitObjectCacheTelemetry","networkTelemetry","addClientNotification","addClientNotifications","getArmEndpoint","getSettings","logFeatureAdoptionTelemetry","getExtensionGalleryServiceViewModel","getLocalGalleryPackagesEndpoints","getLocationsForCreate","getProvisioningOperation","registerLocalGalleryPackagesEndpoint","submitProvisionerTelemetry","pinParts"]);h(n,{getAuthToken:"getAuthenticationToken",registration:"register",shellReadUserSettings:"Shell.readUserSettings",shellWriteUserSettings:"Shell.writeUserSettings"})})(c=n.RpcMethods||(n.RpcMethods={}))})(t=n.Constants||(n.Constants={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){(function(n){n[n.Horizontal=0]="Horizontal";n[n.Vertical=1]="Vertical"})(n.Orientation||(n.Orientation={}));var t=n.Orientation})(t=n.Widgets||(n.Widgets={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";function w(n,t){return{type:
1,data:n,options:t?p:undefined}}var t=MsPortalFx.getStringMapFunc,u="assetType",c="assetIdInputProperty",f="bindings",a="commandGroupReference",i="name",s="permissions",h,v,y,e,l,r,o,p;n.createMenuBladeConfig=t();h=["htmlTemplate","parameterProvider","details","partSize","htmlTemplateInline","partState",];n.createTemplateBladeConfig=t(h);n.createTemplateBladeConfig2=t(h);n.createTemplateBladeConfig3=t(h);n.createTemplateBladeConfig4=t(h);n.createCommandExternalReference=t("commandType","extension");n.createDefaultBladeAction=t("partName","actionName");n.createHtmlTemplateDefinition=t("file","content");n.createAssetIdSource=t("sourceType","property","providerKey");n.createPairMasterInfo=t("width","defaultBladeAction","toggleMasterCommand");n.createPairDetailsInfo=t("shouldHideMasterBlade","windowed","navigateMasterCommands");n.createPermissionBase=t("permissionType");n.createPartSharedStateDefinition=t("property","key");n.createPartStateDefinition=t("inputIdentityProperties","sharedProperties");
n.createInputDefinition=t(i,"type","optional","isAssetId");n.createNotificationMessage=t("type","status","subStatus","title","message",u);n.createServerEvent=t("source","operation");v=["title","description","category","thumbnail","thumbnailStretch","pivotKind","autoConfigSelectablePath","feature",];n.createPartGalleryInfoDefinition=t(v);n.createPartGalleryInfoDefinition2=t(v);n.createPermissionSet=t("requirement",s,"permissionType");n.createPermission=t("extensionName",u,"assetId","action","permissionType");n.createReference=t("referenceType","property","part","bladeCommand","partCommand","constantValue");n.createToolbarDefinition=t("source");n.createNavigateMasterCommands=t("nextText","previousText");n.createToggleMasterCommand=t("showText","hideText");n.createActionBarDefinition=t(i,"actionBarKind","source","viewModel",f);y=[i,"inputs","optionalInputs","templateKeyInputs","outputs","commandGroup","viewModelName","_internal_viewModelExtensionName","lenses",a,"viewModelInputs",f,"width",
"locked","editScopeType",u,c,"pinnedPart","pinnable","initialDisplayState","style","actionBar","discardEditsOnSelectionChange","orientation",s,"pairMasterInfo","toolbar","templateBlade","waitForInputsSet","menuBlade","attributes",];n.createBladeDefinition=t(y);n.createBladeDefinition2=t(y);n.createCommandDefinition=t(i,"text","viewModel",f,"details",u,c,s,"commandKind","reference");n.createCommandGroupDefinition=t(i,"commands");n.createCommandGroupReference=t(i,"commands");n.createCommandReference=t(i,f);n.createGalleryServiceDefinition=t("serviceViewModel");n.createDashboardProviderDefinition=t("viewModel");n.createLensDefinition=t(i,"title","partInstances","isSummary");e=["viewModel","partKind","canUseOldInputVersions","inputs",f,"htmlTemplate","details","initialSize","largeInitialSize","supportedSizes","commandGroup",a,"editScopeType","viewStateProperties","partState",u,c,s,"options","htmlTemplateInline",];n.createPartDefinition=t(e);e.splice(10,0,"resizeMode");n.createPartDefinition2=
t(e);n.createPartDefinition3=t(e);e.splice(8,0,"initialWidth","initialHeight");n.createPartDefinition4=t(e);l=["partTypeName","extension","version",f,"initialSize","largeInitialSize",u,"extenderViewModel"];n.createPartReferenceDefinition=t(l);l.splice(5,0,"initialWidth","initialHeight");n.createPartReferenceDefinition2=t(l);n.createPartInstanceDefinition=t(i,"reference","inline","parameterProvider","options","redirectMode");r=[i,"partGalleryInfo","inputDefinitions","reference","parameterProvider","viewModel","partKind","canUseOldInputVersions","inputs",f,"htmlTemplate","details","initialSize","largeInitialSize","supportedSizes","commandGroup",a,"editScopeType","viewStateProperties","partState",u,c,s,"options","htmlTemplateInline",];n.createPartTypeDefinition=t(r);r.splice(15,0,"resizeMode");n.createPartTypeDefinition2=t(r);n.createPartTypeDefinition3=t(r);r.splice(13,0,"initialWidth","initialHeight");n.createPartTypeDefinition4=t(r);r.splice(1,1);n.createPartTypeDefinition5=t(r);o=["partsCatalog",
"commandsCatalog","blades","startBoardParts","commandGroups","htmlTemplates","styleSheets","galleryService",i,"version","hash","schemaVersion","sdkVersion","buildDescription","isPreview",];n.createDefinition=t(o);o.splice(2,1);n.createDefinition2=t(o);o.splice(7,0,"dashboardProvider");n.createDefinition3=t(o);n.createDetailsDefinition=t("blade","bladeExtension","isMultiple","invocationInputArguments","selectablePath","selectableBindings","additionalInputArguments","outputArguments","parameterCollector",i,"asSubJourney","pairInfo","openInContextPane","persistentContextPane");n.createInputBinding=t("property","valuesFrom","optional","isIdentityInput");p={isLogo:!0};n.createSvgImage=w})(t=n.DefinitionBuilder||(n.DefinitionBuilder={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(t){"use strict";function u(n,t){return f.multiCloudEnabled&&(t[r]=n),t}function e(n){return u(i.allClouds,n||{})}function o(n){return n&&n[r]}var f=n.Extension,i=n.Constants.CloudName,r=i.inputBindingKey;
t.addToModel=u;t.addAllCloudsToModel=e;t.readFromInputs=o})(i=t.CloudName||(t.CloudName={}))})(t=n.Extension||(n.Extension={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){var t;(function(n){"use strict";function r(n,i,r,u,f){var e=new t;i.progress(function(t){f&&f(t,n,e.millisecondsElapsed)}).then(function(t){r(t,n,e.millisecondsElapsed)},function(t){u&&u(t,n,e.millisecondsElapsed)})}var i=window.fx.getTimestamp,t=function(){function n(){this._getTimestamp=i;this._startTimestamp=this._getTimestamp()}return Object.defineProperty(n.prototype,"millisecondsElapsed",{get:function(){return this._getTimestamp()-this._startTimestamp},enumerable:!0,configurable:!0}),n.prototype.reset=function(){this._startTimestamp=this._getTimestamp()},n.timeOperation=function(t,i){var r=new n;return i(t),r.millisecondsElapsed},n}();n.TelemetryStopwatch=t;n.timeAsyncOperation=r})(t=n.Stopwatch||(n.Stopwatch={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){"use strict";var t;(function(
n){(function(n){n[n.BootGet=0]="BootGet";n[n.BootReturn=1]="BootReturn";n[n.BootError=2]="BootError";n[n.Initialize=3]="Initialize";n[n.UnhandledError=4]="UnhandledError";n[n.ScriptError=5]="ScriptError"})(n.MessageKind||(n.MessageKind={}));var t=n.MessageKind})(t=n.Boot||(n.Boot={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(t){"use strict";function rt(n){return new t.Log(n.normalize(undefined))}function ut(n,t){var i={message:n,stack:t,errorLevel:p?1:0};return new tt(i)}function ft(n){var i=new Error(n.reason),t=n.callStack;return i.stack=t.substring(0,c.length)===c?t:c+t,i}function w(){var n=Q.getUnhandledRejections();o?n.forEach(function(n){var t=o.get(n);t===!1?(b(n.inspect().reason),o.set(n,!0)):t!==!0&&o.set(n,!1)}):(n.forEach(function(n){b(n.inspect().reason)}),Q.resetUnhandledRejections());e=i.setTimeout(w,l)}function b(n){var t=2,r=n&&n.errorLevel,f,i;y(r)?(f=n&&n.stack,f||(t=0)):t=r;t===2?i=h:t===1&&(i=u.warning);i&&i.call(u,n,1)}function k(n){n===
void 0&&(n=it);var t=l;return y(n)||(l=n),d(),w(),t}function d(){typeof e=="number"&&(i.clearTimeout(e),e=null)}var a=n.Base,v=a.Utilities,g=FxImpl.Diagnostics,y=n.isNullOrUndefined,nt=n.Errors,tt=nt.Error,i=window,r=i.fx.environment,u=new t.Log("MsPortalFx.Base.Diagnostics.ErrorReporter"),s=[{regex:/\.querySelectorAll is not a function$/,count:0,limit:1},{regex:/[Oo]ut of memory$/,count:0,limit:1},{regex:/\.easing\[this\.easing\] is not a function$/,count:0,limit:1},],f="string",h=function(n){var i,r=n,y=r&&r.message,l=typeof n,a=typeof y,e,o,v,t,h,c;if(l===f?i=n:a===f&&(i=r.message),e=!0,i)for(o=0,v=s.length;o<v;o++)if(t=s[o],t.regex.test(i)){if(h=t.limit,t.count++,e=t.count>=h,e)if(c="[counter: "+h+"] "+i,t.limit=10*h,l===f)n=c;else if(a===f)try{r.message=c}catch(p){}break}e&&u.error.apply(u,arguments)},p=v.isDiagnosticsEnabled,it=r.isDevelopmentMode?1e3:5e3,c=v.generateNonSerializableProperty("_RPC_Exception_")+"\n",l,e,o=i.WeakMap&&new WeakMap,et;p&&(Q.longStackSupport=!0,Error.stackTraceLimit=
100);t.createLog=rt;t.createIgnoreUnhandledRejectionError=ut;t.createRpcException=ft;t.setPromiseErrorCapturePeriod=k;t.clearPromiseErrorCaptureTimeout=d;k(),function(n){function o(n,i){t=function(n,t,i){h(n,t,i)};u=n;i&&s.forEach(function(n){n.count=0;n.limit=1})}function f(i){var f={message:i.message,fileName:i.filename,lineNumber:i.lineno,columnNumber:i.colno},r=i.error;if(r?r.stack&&/http/.test(r.stack)&&(t(r,2,f),!n.lastError||n.lastError===r||t(n.lastError,3,f)):!n.lastError||t(n.lastError,3,f),n.lastError=null,u)try{u()}catch(e){}}var e=r.extensionName===a.Constants.Shell,t=function(n,t,u){if(e)h(n,t,u);else{var f={signature:r.bootMessageSignature,kind:FxImpl.Boot.MessageKind.UnhandledError,data:{error:g.getLogFriendlyMessage(n),details:u}};i.parent.postMessage(f,r.trustedParentOrigin)}},u;n.initialize=o;n.handleError=f;i.addEventListener("error",f)}(et=t.ErrorReporter||(t.ErrorReporter={}))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx=
{})),function(n){var t;(function(n){"use strict";function o(n,r){var u,f;for(i=null,u=t.length-1;u>=0;u--)if(f=!t[u].hasValue(n),t[u].setContextValue(n,r),!f)break}function s(n){var e,f,r,o;if(i=null,e=u(t),e)for(f=e.getValue(n),r=t.length-1;r>=0;r--){if(o=t[r].getValue(n),f&&o!==f||t[r].resetContextValue(n),t[r].hasValue(n))break;f=o}}function h(n,t,i){try{return o(t,i),n()}finally{s(t)}}function c(n){for(var r,u,i=0,f=t.length;i<f;i++)r=t[i].getValue(n),r&&(u=r);return u}function l(){for(var n,i,u={},f=!1,r=0,o=t.length;r<o;r++){n=t[r].getValues();for(i in n)n.hasOwnProperty(i)&&n[i]&&(f=!0,u[i]=n[i])}return f?u:e}function a(){return i||(i=new r(u(t))),i}function v(n,t){try{return y(t),n()}finally{p()}}function y(n){i=null;t.push(new r(n))}function p(){i=null;t.pop();t.length===0&&t.push(new r)}function u(n){if(n&&n.length!==0)return n.last()}var e=undefined,f;(function(n){n[n.Journey=0]="Journey";n[n.Part=1]="Part";n[n.Blade=2]="Blade";n[n.CompositionItem=3]="CompositionItem"})(n.ContextType||
(n.ContextType={}));f=n.ContextType;n.setContextValue=o;n.resetContextValue=s;n.provideContext=h;n.getCurrentValue=c;n.getCurrentValues=l;n.getState=a;n.usingState=v;var r=function(){function n(n){var u,i,t,f,e,r;if(this._providers=[],n&&n._providers)for(u=this._providers,i=n._providers,t=0,f=i.length;t<f;t++)for(u[t]=[],e=i[t]?i[t].length:0,r=0;r<e;r++)u[t].push(i[t][r])}return n.prototype.setContextValue=function(n,t){var r=f[n],i=this._providers;i[n]||(i[n]=[]);i[n].push(t)},n.prototype.resetContextValue=function(n){var t=this._providers[n];t&&t.length>0&&t.pop()},n.prototype.getValue=function(n){var t=this._providers[n];return t&&u(t)},n.prototype.getValues=function(){for(var t,i={},r=!1,n=0,o=this._providers.length;n<o;n++)t=u(this._providers[n]),t&&(r=!0,i[f[n]]=t);return r?i:e},n.prototype.hasValue=function(n){var t=this._providers[n];return!!t&&t.length>0},n}(),i=null,t=[new r]})(t=n.TelemetryContext||(n.TelemetryContext={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n)
{var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n){return function(){return f(n)}}var r=FxImpl.TelemetryContext,u=r.ContextType,f=r.getCurrentValue,i=u;n.getPartContext=t(i.Part);n.getBladeContext=t(i.Blade);n.getJourneyContext=t(i.Journey);n.getCompositionItemContext=t(i.CompositionItem)})(t=n.Context||(n.Context={}))})(t=n.Telemetry||(n.Telemetry={}))})(t=n.Diagnostics||(n.Diagnostics={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";function i(n,i,r){var f,e,u,o;return i===void 0&&(i=t.messageContext),f="From RPC:",e=i&&i.callStack,e&&(u=[],n&&u.push(n),n.indexOf(f)===-1&&(o=[f,i.srcWindowId+" -> "+i.destWindowId],r&&o.push("("+r+")"),u.push(o.join(" "),e),n=u.join("\r\n"))),n}function u(n){n&&typeof n.stack=="string"&&(n.stack=i(n.stack))}function f(t){return i(n.Utilities.getCurrentCallStack(t))}var r=Date.now,e;t.createCallStack=i;t.addRpcStack=u;t.getCurrentCallStack=
f,function(n){function i(){return r()}function u(n){return{tag:null,enqueueTime:n,operations:{},sendTime:n,receiveTime:n}}function f(n,r,f){var e,o=i();(f=f||t.messageContext,f)&&(e=f.timestamps||(f.timestamps=u(r)),e.operations[n]={begin:r,end:o})}n.ON_INPUTS_SET_CALLED="CallOnInputsSet";n.VIEW_MODEL_CTOR="ViewModelCtor";n.OBJECT_DESERIALIZE="ObjectDeserialize";n.ENDPOINT_INVOKED="EndpointInvoked";n.CONTENT_REVEALED="ContentRevealed";n.getTimestamp=i;n.newTimestamps=u;n.markOperationEnd=f}(e=t.Measurement||(t.Measurement={}))})(i=t.Internal||(t.Internal={}))})(t=n.Rpc||(n.Rpc={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){"use strict";function ri(n){return function(t){var i,f,r,u;return t&&(f=t[nt],f||(r=tt?FxImpl.PoV2.getOrCreateMetadata(t):et.getMetadataContainer(t),u=r,r&&(i=u[n],i||(i=u[n]={})))),i}}function ui(n){return function(t,i,r){var u=n(t),f;if(u)return f=arguments.length>2,f?u[i]=r:u[i]}}function fi(n){return tt?
FxImpl.PoV2.getOrCreateMetadata(n):et.getMetadataContainer(n)}function tr(n){var t=fi(n);t&&(t.isNonSerializableCallStack=u&&b()||"(Unknown callstack)")}var a=n,v=a.Base,f=v.Rpc.Internal,ei=v.Stopwatch.TelemetryStopwatch,ot=v.Diagnostics.Telemetry,st=FxImpl.TelemetryContext,oi=v.KnockoutExtensions.Internal,si=v.Diagnostics,ht=a.Helpers,d=v.Utilities,ct=a.isNullOrUndefined,hi=ko.observable,ci=ko.observableArray,it=ko.isObservable,lt=ko.isComputed,at=ko.isWritableObservable,vt=ko.isPureComputed,yt=d.getObjectDescriptor,b=d.getCurrentCallStack,ir=d.getObjectConstructorName,li=f.getCurrentCallStack,pt=window,rt=pt.fx.environment,g=rt.trace,wt=rt.extensionName,rr=wt.length,ai=g.poarraymutation2,ur=g.potrackobservable,vi=new si.Log("MsPortalFx/Base/Base.ProxiedObservables"),yi="constructor",h="The proxied {0} with id '{1}'",y=d.generateNonSerializableProperty,pi=y("PO_ClassProperties"),bt=y("PO_Metadata"),kt=y("PO_Promise"),nt=y("poSpecialType"),tt=n.isFeatureEnabled("pov2"),p=n.hasOwnProperty,
wi=/^(\w+-\w+-)\d_\d-\d+-(.*)/gim,bi=t.Utilities.getIdGenerator("po"),ut=n.uncurryThis,dt=Array.prototype,c=ut(dt.forEach),ki=ut(dt.slice),fr=ut(String.prototype.indexOf),di=n.isEmpty,e=Object.keys,ft=Object.defineProperties,gt=Object.defineProperty,ni=Object.getOwnPropertyDescriptor,w=Object.create,ti=Object.constructor,u=rt.isDevelopmentMode||g.diagnostics,ii=0,er=ai||g.poarraymutation,gi=function(){},k="object",l="function",r=undefined,s="",nr={nullObj:s,obsReadOnly:s,keyExists:s,noMetaDataId:s,skippedProp:s,unsupportedObj:s,pureVirtual:s,unexpected:s,cannotProxy:s},o=FxImpl.getErrorMap(nr),et;i.dataContainer=ri("client");i.disposableDataContainer=ri("clientDisposables");i.data=ui(i.dataContainer);i.disposableData=ui(i.disposableDataContainer);i.markNonSerializable=tr,function(n){function ir(n){var t=n;return t.splice||t.map?1:0}function sr(n,t){var u=i(n),r=u.ownerMetadataIfArray;return!r&&t&&(r=u.ownerMetadataIfArray=new et),r}function i(n,t){var i,u;return t===void 0&&(t=!1),n&&(
u=typeof n,(u===k||u===l)&&(i=rr.get(n),i!==r||t||(i={tracking:{},releaseCallstack:{}},rr.set(n,i)))),i}function uu(n){var t,r,u;return tt?(r=FxImpl.PoV2.getMetadata(n),t=r&&r.id):(u=i(n,!0),t=u&&u.proxiedMetadataId),t}function fu(n){var t=fi(n);t&&(t.disallowRemoteMutations=!0)}function cr(n,t){return(n&t)===t}function g(n){return n}function pr(){o.skippedProp()}function ut(n){return typeof n.then=="undefined"&&typeof n.reject===l}function wr(n,t){i(n);Object.isExtensible(n)&&t===1&&Object.preventExtensions(n)}function ur(n){var i=n.inspect(),t={state:0,args:[]};switch(i.state){case"fulfilled":t.state=1;t.args=[i.value];break;case"rejected":t.state=2;t.args=[i.reason]}return t}function vu(n){return ur(n.promise)}function yu(n){switch(n.state()){case"resolved":return 1;case"rejected":return 2;default:return 0}}function fr(n){var t=i(n),r;return ct(t.promiseValue)&&(t.promiseValue=[],r=function(){for(var r=[],i=0;i<arguments.length;i++)r[+i]=arguments[i];t.promiseValue=r.map(function(t)
{return t===n?kt:t})},n.then(r,r)),{state:yu(n),args:t.promiseValue}}function er(n,t,r,u){var o=i(n),f=t(n),e=r.getOrCreateOwnedObjectsList(f.args);return{state:f.state,args:e.map(function(n){return u.dispatch(n)})}}function br(n,t,i){return er(n,fr,t,i)}function si(n,t){var i=ht.Deferred(),u=n.args.map(function(n){return t.dispatch(n,!0)}),r=u.map(function(n){return typeof n=="string"&&n===kt?v.ThisContext:n});switch(n.state){case 1:i.resolveWith(v.ThisContext,r);break;case 2:i.rejectWith(v.ThisContext,r)}return i}var ri=function(){function n(n){this._propertyName=n}return n.create=function(t){return!pt.WeakMap||u?new n(t):new WeakMap},n.prototype.get=function(n){if(n&&p(n,this._propertyName))return n[this._propertyName]},n.prototype.set=function(n,t){gt(n,this._propertyName,{configurable:!0,value:t})},n}(),et,rr,dt,rt,yr,ai,or,kr;n.WeakMapShim=ri;n.assert=function(n,t,i,u,f){var e,o,c;if(u===void 0&&(u=null),!t){if(e="[frame:"+wt+"]\n"+(f||li(!0)),o=u?u.id():r,o){c=o.replace(wi,"$1$2");
e="["+c+"]\n"+e;i+="\nThe associated metadata id is: ";i+=o;var s="",h=u&&u.getObject(),l=it(h);s+=l?yt(h):typeof h;s&&(i+="\nThe typeof the value of the metadata is: ",i+=s)}e&&(i+="\nThe error occured in below callstack:\n"+e+"\n");vi.error(i,1)}};n.writeToReadOnlyObservableError="A change to a read-only proxied observable has been detected and this is an error. This can happen if the observable on the other side is a ko.computed without a writeFunction.",function(n){n[n.Observable=0]="Observable";n[n.Error=1]="Error";n[n.Array=2]="Array";n[n.Object=3]="Object";n[n.Date=4]="Date";n[n.RegExp=5]="RegExp";n[n.String=6]="String";n[n.Number=7]="Number";n[n.JQueryPromise=8]="JQueryPromise";n[n.JQueryDeferred=9]="JQueryDeferred";n[n.QPromise=10]="QPromise";n[n.QDeferred=11]="QDeferred";n[n.Function=12]="Function"}(n.EncodedAtomKind||(n.EncodedAtomKind={}));var s=n.EncodedAtomKind,iu=a.getEnumArray,ru=iu(s,!0);n.getObservableKind=ir;et=function(){function n(){this._ownerData={}}return n.prototype.
getOwners=function(){return e(this._ownerData)},n.prototype.getCallStack=function(n){var t=this._ownerData[n];return t&&t.callstack},n.prototype.getIsRateLimit=function(n){var t=this._ownerData[n];return t&&t.container&&t.container.rateLimitedIfObservable},n.setArrayOwnership=function(t,r,f){var e,o;u&&(e=f.peek(),r!==e&&(Array.isArray(e)&&(o=sr(e,!0),o._ownerData[t]||(o._ownerData[t]={callstack:b(),container:i(f)})),n.clearOwnership(t,r)))},n.clearOwnership=function(n,t){if(u&&Array.isArray(t)){var i=sr(t,!1);i&&delete i._ownerData[n]}},n}();n.ArrayOwnerMetadata=et;rr=ri.create(bt);dt=ri.create(pi);dt.set({}.constructor,{getterSetters:w(null)});n.getMetadataContainer=i;n.getMetadataId=uu;n.disallowRemoteMutations=fu;rt=function(){function t(n,t,r){this._refsObject=0;this._refsManager=1;this._isPrincipal=!0;var u=n.getMetadataPropertyName(),f=i(t).tracking,e=f[u];t||o.nullObj();e&&(e._isPrincipal=!1);f[u]=this;this._obj=t;this._id=r;this._metadataContext=n;this._creationContext=st.getState(
)}return t.prototype.getCreationContext=function(){return this._creationContext},t.prototype.getMetadataContext=function(){return this._metadataContext},t.prototype.getOrCreateOwnedObjectsList=function(n){return n===void 0&&(n=[]),this._ownedObjects||(this._ownedObjects=n.slice(0)),this._ownedObjects},t.prototype.isPrincipal=function(){return this._isPrincipal},t.prototype.id=function(){return this._id},t.prototype.getObject=function(){return this._obj},t.prototype.refsObject=function(){return this._refsObject},t.prototype.addRefForManager=function(){n.assert(1,!!this._metadataContext,"Obj is already released",this);this._refsManager++},t.prototype.addRefForObject=function(){return n.assert(1,!!this._metadataContext,"Obj is already released",this),this._refsObject++,this._refsObject},t.prototype.releaseForManager=function(){n.assert(1,this._refsManager>=1,"Faulty ref counting for refsManager.",this);this._refsManager--;var t=this._refsManager===0;return this._disposeIfZeroRefs(),t},t.prototype.
releaseForObject=function(t){n.assert(1,this._refsObject>=1,"Faulty ref counting for refsObjects.",this);this._refsObject--;var i=this._refsObject===0;return this._disposeIfZeroRefs(t),i},t.prototype.dispose=function(){this._disposeIfZeroRefs(null,!0)},t.prototype._disposeIfZeroRefs=function(n,t){if(t===void 0&&(t=!1),this._refsObject===0||t){var u=this._metadataContext.getMetadataPropertyName(),r=i(this._obj);n&&(r.releaseCallstack[u]=n);this._disposeClientDisposables(r);(this._refsManager===0||t)&&(this._dispose(),this._isPrincipal&&delete r.tracking[u])}},t.prototype._disposeClientDisposables=function(n){var t=n.clientDisposables;t&&(n.clientDisposables=null,c(e(t),function(n){var i=t[n];i.dispose()}))},t.prototype._dispose=function(){},t.getMetadata=function(n,t){var r=i(t);return r&&r.tracking&&r.tracking[n]},t.getReleaseCallstack=function(n,t){var r=i(t);return r&&r.releaseCallstack&&r.releaseCallstack[n]},t}();n.TrackingMetadataBase=rt;var eu=function(n){return n[0]==="_"?!a.startsWith(
n,"_msPortalFx"):!1},ou=function(n){return!!(n.get||n.set)},su=function(n,t,i){var r=typeof i;return r==="boolean"||r==="number"||r==="string"?t==="popupAlignment"||t==="inputAlignment"||t==="displayName"?0:2:ct(i)||r===k||it(i)?2:r===l&&di(i)?1:2},hu=function(n,t,i,r){var f=!1,u;if(r=r||ni(n,t),r.configurable&&!r.get&&!r.set&&(u=su(n,t,r.value),u!==0)){switch(u){case 1:r.configurable=!1;break;case 2:r.configurable=!1;r.writable=!1}i[t]=r;f=!0}return f},hr=function(n){function t(i,r,u){n.call(this,i,r,u);var f=t.getTrackedPropertyKeysAndFreeze(r);this._trackedProperties=f.trackedKeys.map(function(n){return r[n]})}return __extends(t,n),t.getTrackedPropertyKeysAndFreeze=function(n){var h=i(n),v,o,c,y,t,p,b,k,d,a,f,g,s;if(!h.trackedObjectKeys&&(h.trackedObjectKeys={ignoredKeys:[],trackedKeys:[],getterSetterKeys:[]},v=n instanceof Error,c=h.trackedObjectKeys,v?(o=Object.getOwnPropertyNames(n),o.remove(bt)):o=e(n),o.remove(yi),y=o.length,y)){for(t=n.constructor,u&&(b=w(null),k=!1),t&&typeof
t===l&&(p=t.prototype)&&(n===p||p.isPrototypeOf(n))||(t=t===null||t===r?ti:null),d=t&&dt.get(t),a=0;a<y;a++)f=o[a],s=!1,v||(eu(f)?s=!0:d?s=!!d.getterSetters[f]:(g=ni(n,f),(s=ou(g))&&t&&c.getterSetterKeys.push(f))),s?c.ignoredKeys.push(f):(c.trackedKeys.push(f),u&&hu(n,f,b,g)&&(k=!0));u&&k&&ft(n,b)}return h.trackedObjectKeys},t.prototype.getTrackedProperties=function(){return this._trackedProperties},t.prototype._getConstructor=function(){return this._proxyObjectConstructor||(this._proxyObjectConstructor=function(n){var u=e(n),t,f=u.length,r,i;if(f){for(r=w(null),i=0;i<f;i++){t=u[i];try{typeof this[t]=="undefined"&&(this[t]=n[t])}catch(o){}p(this,t)||(r[t]={configurable:!0,enumerable:!0,writable:!0,value:n[t]})}ft(this,r)}},this._proxyObjectConstructor.prototype=this.getObject()),this._proxyObjectConstructor},t.prototype.instantiate=function(n){var t=this._getConstructor();return new t(n)},t}(rt),cu=function(n){function t(t,i,r){n.call(this,t,i,r);this.refreshTrackedItems()}return __extends(
t,n),t.prototype.getTrackedItems=function(){return this._trackedItems},t.prototype.refreshTrackedItems=function(){this._trackedItems=this.getObject().slice(0)},t}(rt);var ui=function(n){function t(t,i,r,u){n.call(this,t,i,r);this._metadataFlags=u}return __extends(t,n),t.prototype.getFlags=function(){return this._metadataFlags},t.prototype.allowRemoteMutations=function(){return cr(this._metadataFlags,1)&&!i(this.getObject()).disallowRemoteMutations},t}(rt),v=function(t){function u(n,r,u,e){t.call(this,n,r,u,e);this._messageContext=f.messageContext;this._deferred=r.reject?r:i(r).ownerIfPromise;this._setupPromiseEventsListener();this._isSelfInflicted=0}return __extends(u,t),u.onPromiseValueChanged=function(n,t,i){var r=ut(n)?n.promise:n;Q.isPromise(r)||fr(r);r.progress(function(){for(var t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];i(t)}).finally(function(){Q.isPromise(r)?t(ur(r)):t(fr(r))})},u.prototype._dispatchBufferedPromiseState=function(){this._bufferedPromiseStateArgs&&this.refsObject(
)>0&&(this.getMetadataContext().raisePromiseEvent(this.id(),this._bufferedPromiseStateEventKind,this._bufferedPromiseStateArgs),this._bufferedPromiseStateArgs=null)},u.prototype._fireEvent=function(n,t){this._isSelfInflicted!==r&&(this._isSelfInflicted===0&&(n===0||n===1?(this._bufferedPromiseStateArgs=t,this._bufferedPromiseStateEventKind=n,this._dispatchBufferedPromiseState()):this.getMetadataContext().raisePromiseEvent(this.id(),n,t)),this._isSelfInflicted>0&&this._isSelfInflicted--)},u.prototype._setupPromiseEventsListener=function(){var n=this;u.onPromiseValueChanged(this.getObject(),function(t){switch(t.state){case 1:f.invokeWithContext(n._messageContext,function(){n._fireEvent(0,t.args)});break;case 2:n._fireEvent(1,t.args)}},function(t){n._fireEvent(2,t)})},u.prototype.applyEvent=function(t,i){if(this._deferred)if(this.allowRemoteMutations()){var r=ut(this._deferred);n.assert(0,!r||i.length<=1,h.format("Q deferred",this.id())+"is being resolved/rejected/notified with multiple args. Only the first arg will be used.",
this);this._isSelfInflicted++;switch(t){case 0:ut(this._deferred)?this._deferred.resolve(i[0]):this._deferred.resolveWith(u.ThisContext,i);break;case 1:ut(this._deferred)?this._deferred.reject(i[0]):this._deferred.rejectWith(u.ThisContext,i);break;case 2:ut(this._deferred)?this._deferred.notify(i[0]):this._deferred.notifyWith(u.ThisContext,i);break;default:this.getMetadataContext().raiseRemoteExceptionEvent("Unknown event kind.")}}else this.getMetadataContext().raiseRemoteExceptionEvent(h.format("promise",this.id())+"does not allow remote mutation.");else this.getMetadataContext().raiseRemoteExceptionEvent(h.format("promise",this.id())+"cannot be resolved.")},u.prototype.addRefForObject=function(){var n=t.prototype.addRefForObject.call(this);return this._dispatchBufferedPromiseState(),n},u.prototype._dispose=function(){this._deferred=null;t.prototype._dispose.call(this)},u.ThisContext="The this context of a promise is not proxied over.",u}(ui),lr=function(n){function t(t,i,r,u){n.call(
this,t,i,r,u)}return __extends(t,n),t.prototype.proxyInvoke=function(n,t){return this.getMetadataContext().raiseFunctionInvocationEvent(this.id(),n,t)},t.prototype.invoke=function(n,t){return this.getObject().apply(n,t)},t}(ui),d;(function(n){function s(n,t){return n.subscribe(t,null,u)}function h(n,t){return n.subscribe(t,null,f)}function e(n){return n._changeNumber||0}function i(n,t){var i=n._scheduledPostChangeHandler;n._scheduledPostChangeHandler=t;i&&i()}var r="_ibizaInternalPo",u=r+"PreChange",f=r+"PostChange",t,o;n.addPreListener=s;n.addPostListeners=h;n.getChangeNumber=e;t=ko.subscribable.fn.notifySubscribers;o=function(n,r){var s=this,o;if(r&&r!=="change")r==="beforeChange"?(i(this),t.call(this,n,u),o=t.apply(this,arguments)):o=t.apply(this,arguments);else{this._changeNumber=e(this)+1;this._isRaceChanged&&!this._raceChangecallStack&&(this._raceChangecallStack=b(!0));i(this,function(){t.call(s,n,f)});try{o=t.apply(this,arguments)}finally{i(this)}}return o};tt||(ko.subscribable.
fn.notifySubscribers=o)})(d||(d={}));var ar=ko.utils,gu=ar.fixupArrayEdits,lu=ar.compareArrays,au=function(u){function e(n,t,i,r){var f=this,e;u.call(this,n,t,i,r);this._subscriptions=[];this._changeNumber=0;this._handledChangeNumber=0;e=t.peek();this._trackedObservableValue=e;et.setArrayOwnership(i,null,t);this._handledChangeNumber=d.getChangeNumber(t);vt&&vt(t)&&this._subscriptions.push(t.subscribe(gi));Array.prototype.push.apply(this._subscriptions,d.addPostListeners(t,function(){f._handleChange(f.getObject().peek())}))}return __extends(e,u),e.prototype._handleChange=function(t){var h,v,y;if(!(this.refsObject()<=0)){var c=this.id(),u=this.getObject(),s=d.getChangeNumber(u),f=this._trackedObservableValue,l=Array.isArray(f),e=!0,p=ir(u)===1,w=lt(u),b=this._changeNumber;if(this._selfInflictedChangeNumber!==r||this._handledChangeNumber!==s){if(this._handledChangeNumber=s,et.setArrayOwnership(c,f,u),w?this._selfInflictedChangeNumber===r||this._desiredValue!==t||Array.isArray(this._desiredValue)||
l||Array.isArray(t)||(e=!1):s===this._selfInflictedChangeNumber?e=!1:p&&this._selfInflictedChangeNumber!==r&&n.assert(0,!1,"Proxied Observables does not support operations where a subscriber to an observable array modifies the array.",this),this._selfInflictedChangeNumber=r,this._desiredValue=r,e){if(h=i(u),h.isProxiedObservableReadOnly&&h.proxiedMetadataId===this.id()){n.assert(0,!1,n.writeToReadOnlyObservableError,this);return}this._changeNumber++}if(this._trackedObservableValue=t,l&&f===t){var a=this.getMetadataContext().getMetadata(f),k=a.getTrackedItems(),o=lu(k,t,{sparse:!0});a.refreshTrackedItems()}this._isLastChangeZeroSizedArrayEdit=!o||!o.length;this._isLastChangeZeroSizedArrayEdit&&(o=null,v=f,y=t);this.getMetadataContext().raiseChangeEvent(c,e,b,o,v,y)}}},e.prototype.getTrackedObservableValue=function(){return this._trackedObservableValue},e.prototype.applyChanges=function(n,t,i){this._validateAndIncrementChangeNumber(n,t,i);this.allowRemoteMutations()?t?this._setArrayValue(
t):this._setValue(i):this.getMetadataContext().raiseRemoteExceptionEvent(h.format("observable",this.id())+"does not allow remote mutation.")},e.prototype._validateAndIncrementChangeNumber=function(t,i,r){var o,s,h,u,e,c;this._changeNumber!==t&&(o=this.getObject(),s=i?i.length!==0||!this._isLastChangeZeroSizedArrayEdit:o.peek()!==r,s&&(h=this.getMetadataContext().getMetadata(r),tu.disableEncodingOptimization(h),u="",e=o,e._isRaceChanged?u="callstack: "+(e._raceChangecallStack||"<no change callstack>"):e._isRaceChanged=!0,u+="\nRpc callstack: "+(f.messageContext&&f.messageContext.callStack),c="Proxied Observables detected a simultaneous change to both the original and the proxied observable. When this happens, the original and the proxied observables will go out of sync.\n",n.assert(0,!1,c,this,u)));this._changeNumber++},e.prototype._ensureHandledChangeCalled=function(){this._selfInflictedChangeNumber!==r&&(this._selfInflictedChangeNumber--,this._handleChange(this._desiredValue))},e.prototype.
_setValue=function(n){var t=this.getObject(),u=t,e=i(t),f;this._selfInflictedChangeNumber=d.getChangeNumber(t)+1;this._desiredValue=n;try{f=u._isRaceChanged;f&&(u._isRaceChanged=!1);this.getObject()(n);this._ensureHandledChangeCalled()}finally{f&&(u._isRaceChanged=!0);this._selfInflictedChangeNumber=r;this._desiredValue=r}},e.prototype._setArrayValue=function(n){var u=this.getObject(),e=u,h;this._selfInflictedChangeNumber=d.getChangeNumber(u);var a=i(u),c=lt(u),f=u.peek(),l=this.getMetadataContext().getMetadata(f),s=l.getTrackedItems();t.Utilities.arrayEquals(s,f)||(f.length=0,s.length&&Array.prototype.push.apply(f,s));this._desiredValue=f;try{h=e._isRaceChanged;h&&(e._isRaceChanged=!1);at(u)||o.obsReadOnly();c||u.valueWillMutate();this._selfInflictedChangeNumber=d.getChangeNumber(this.getObject())+1;oi.quickApplyArrayEdits(f,n,{inplaceFixup:!0});c?u(f):u.valueHasMutated();this._ensureHandledChangeCalled()}finally{h&&(e._isRaceChanged=!0);this._selfInflictedChangeNumber=r;this._desiredValue=
r}},e.prototype._dispose=function(){et.clearOwnership(this.id(),this._trackedObservableValue);this._subscriptions&&(c(this._subscriptions,function(n){return n.dispose()}),this._subscriptions=null);u.prototype._dispose.call(this)},e}(ui),vr=function(){function n(){this._map={};this._count=0}return n.prototype.getValue=function(n){return this._map[n]},n.prototype.setValue=function(n,t){p(this._map,n)?o.keyExists(n):this._count++;this._map[n]=t},n.prototype.removeValue=function(n){p(this._map,n)&&(this._count--,delete this._map[n])},Object.defineProperty(n.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"keys",{get:function(){return e(this._map)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"values",{get:function(){return t.Utilities.map(this._map,function(n){return n})},enumerable:!0,configurable:!0}),n}();n.Dictionary=vr;yr=function(){function i(n,i,r,u,f){this._pendingReleases={};this._liveMetadata=
{};this._allMetadata=new vr;this._freedObjectCallStacks=new t.LruMap(200);this.raiseRemoteExceptionEvent=i;this.raiseChangeEvent=r;this.raisePromiseEvent=u;this.raiseFunctionInvocationEvent=f;ii++;this._metadataPropertyName=n+"_"+ii}return i.prototype.getMetadataById=function(t,i){var u=this._liveMetadata,f=u&&u[t],r;return f||typeof i!="string"||(r=this._freedObjectCallStacks.get(t),r&&(i+="\nThe object was freed in:\n"+r),n.assert(0,!1,i)),f},i.prototype.getMetadataPropertyName=function(){return this._metadataPropertyName},i.prototype.getMetadata=function(t,i,r){var u=t&&rt.getMetadata(this._metadataPropertyName,t),e="",f,o;return i&&u&&!this.getMetadataById(e=u.id())&&(u=null),u||typeof r!="string"||(f=rt.getReleaseCallstack(this._metadataPropertyName,t),o=i?0:1,f&&(r+="\nThe object (id:"+e+", propName: "+this._metadataPropertyName+") was freed in:\n"+f),n.assert(o,!1,r,u)),u},i.prototype.getAllMetadata=function(){return this._allMetadata.values},i.prototype.getOrResurrectMetadataWithId=
function(t){var i=this._liveMetadata[t];return i||(i=this._allMetadata.getValue(t),i&&(n.assert(0,i.isPrincipal(),"A non-principal metadata has been resurrected. This may cause unexpected behavior.",i),this._liveMetadata[t]=i,i.addRefForManager())),i},i.prototype.createReleaseSetId=function(){var n=bi();return this._pendingReleases[n]=[],n},i.prototype.isTracked=function(n){return!!this.getMetadata(n,!0)},i.prototype.applyAddRef=function(n){var t=this.getOrResurrectMetadataWithId(n);if(t)return t.addRefForObject(),t;o.noMetaDataId(n)},i.prototype._applyReleaseManager=function(n){n.releaseForManager()&&this._allMetadata.removeValue(n.id())},i.prototype.releaseInitiate=function(t,i){var r=this._liveMetadata[i],f=t.releaseSetId,e=t.callstack;r?r.releaseForObject(e)&&(u&&r instanceof lr&&this._freedObjectCallStacks.addOrUpdate(r.id(),e),f?this._pendingReleases[f].push(r):this._applyReleaseManager(r),delete this._liveMetadata[i]):n.assert(1,!1,h.format(k,i)+"has already been freed.")},i.prototype.
releaseFinalize=function(t){var r=this,i=this._pendingReleases[t];i?(c(i,function(n){r._applyReleaseManager(n)}),delete this._pendingReleases[t]):n.assert(1,!1,"Unable to find id for finalize release.")},i.prototype.getAllMetadataCount=function(){return this._allMetadata.count},i.prototype.createMetadata=function(n,t,i,r){var u=new r(this,t,n,i);return this._liveMetadata[n]=u,this._allMetadata.setValue(n,u),u},i.prototype.dispose=function(){c(this._allMetadata.values,function(n){return n.dispose()});this._allMetadata=null;this._liveMetadata=null;this._pendingReleases=null},i.prototype.isDisposed=function(){return this._liveMetadata===null},i}();ai=[g({kind:s.Observable,canEncode:function(n){return it(n)},metadataConstructor:au,encode:function(t,u,f){var o=ir(t)===1,s=i(t),h=s&&s.isProxiedObservableReadOnly||!at(t),e=u.getTrackedObservableValue();return o&&n.assert(0,Array.isArray(e)||e===null||e===r,"Attempting to serialize an observable array whose value is not an array, null, or undefined."),
{isArray:o,isReadOnly:h,value:f.dispatch(e)}},decode:function(n,t){var r=n.isArray?ci():hi();return r(t.dispatch(n.value)),n.isReadOnly&&(i(r).isProxiedObservableReadOnly=!0),r}}),g({kind:s.QDeferred,canEncode:function(n){return ut(n)},metadataConstructor:v,encode:function(n,t,i){return er(n,vu,t,i)},decode:si}),g({kind:s.QPromise,canEncode:function(n){return Q.isPromise(n)},metadataConstructor:v,encode:function(n,t,i){return er(n,ur,t,i)},decode:function(n,t){var r=si(n,t),u=r.promise();return i(u).ownerIfPromise=r,u}}),g({kind:s.JQueryDeferred,canEncode:function(n){return Q.isPromiseAlike(n)&&typeof n.reject===l},metadataConstructor:v,encode:br,decode:si}),g({kind:s.JQueryPromise,canEncode:function(n){return Q.isPromiseAlike(n)},metadataConstructor:v,encode:br,decode:function(n,t){var r=si(n,t),u=r.promise();return i(u).ownerIfPromise=r,u}}),g({kind:s.Function,canEncode:function(n){return typeof n===l},metadataConstructor:lr,encode:function(n,t,i){return i.getLastPathSegment()},decode:
function(n,t){var r=t.getMetadataManager(),i=function(){var t=r.getMetadata(i,!0,"Cannot invoke proxied function because the function has been freed."),u=ki(arguments),f;if(t)return f=n,t.proxyInvoke(this,u)};return i}}),g({kind:s.Array,canEncode:function(n){return Array.isArray(n)},metadataConstructor:cu,encode:function(n,t,i){return t.getTrackedItems().map(function(n,t){return i.dispatch(n,t+"")})},decode:function(n,t){return t.dispatch(n)}}),g({kind:s.Object,canEncode:function(n){return typeof n===k&&!Array.isArray(n)},metadataConstructor:hr,encode:function(n,t,i){var o=Object.getPrototypeOf(n),c=!!o,p=c&&o!==Object.prototype?i.dispatch(o):null,a={},b=t.getTrackedProperties(),f=hr.getTrackedPropertyKeysAndFreeze(n),d=f.trackedKeys,r,e,s,u,h;for(wr(n,i.getFreezeLevel()),r=0,e=f.trackedKeys.length;r<e;r++)s=f.trackedKeys[r],a[s]=i.dispatch(b[r],s);if(u=n.constructor,u&&typeof u===l&&(h=u.prototype)&&(n===h||h.isPrototypeOf(n))||(u=null),u&&u!==ti&&!dt.get(u)){var v=w(null),k={getterSetters:
v},y=f.getterSetterKeys;for(r=0,e=y.length;r<e;r++)v[y[r]]=!0;dt.set(u,k)}return{hasPrototype:c,prototype:p,object:a,ignoredProperties:f.ignoredKeys}},decode:function(n,t){var r=t.dispatch(n.object),i,l,a,o,v,s,h,f;if(n.prototype?(l=t.dispatch(n.prototype),a=t.getMetadataManager().getMetadata(l),i=a.instantiate(r)):n.hasPrototype?i=r:(i=w(null),c(e(r),function(n){i[n]=r[n]})),u&&n.ignoredProperties&&(o=n.ignoredProperties,s=o.length,s)){for(h=w(null),f=0;f<s;f++)v=o[f],h[v]={get:pr,set:pr,configurable:!0};ft(i,h)}return wr(i,t.getFreezeLevel()),i}})];or=new Array(ru.length);a.extendArrayIntoMap(or,ai,function(n){return n.kind});kr=[{poSpecialType:1,classes:[Date,ArrayBuffer,RegExp,window.Blob]},{poSpecialType:2,classes:[window.ImageData]},{poSpecialType:3,classes:[jQuery,jQuery.Event]},];c(kr,function(n){c(n.classes,function(t){t&&gt(t.prototype,nt,{configurable:!0,value:n.poSpecialType})})});var nr=function(){function n(){}return n.isUndefinedEquivalent=function(n){return n[nt]===3},n.
prototype.dispatch=function(n){var t,f,e,s,h,c;if(!n||(t=typeof n,f=n&&n[nt],f===1||t==="string"||t==="boolean"||t==="number"))return n;if(f===2)o.unsupportedObj(n);else{if(f===3)return;if(e=i(n),e.visitorIsAlongPath){s="There is a cycle.\n";this instanceof tr&&(h=this,c=h.getPath()||y("root"),s+="The path to the object contains a cycle:\n"+c+"\n");s+="In object\n"+yt(n,u)+"\n";throw new Error(s);}e.visitorIsAlongPath=!0;try{return n.encodedAtomReference!==r?this._visitEncodedAtomReference(n):this._visitNonScalar(n)}finally{e.visitorIsAlongPath=!1}}},n.prototype._visitNonScalar=function(){o.pureVirtual()},n.prototype._visitEncodedAtomReference=function(){o.pureVirtual()},n}(),dr=function(n){function t(t){n.call(this);this._freezeLevel=t}return __extends(t,n),t.prototype.dispatch=function(t){try{var i=this._freezeLevel;return n.prototype.dispatch.call(this,t)}finally{this._freezeLevel=i}},t.prototype.setFreezeLevel=function(n){this._freezeLevel=n},t.prototype.getFreezeLevel=function(){return this.
_freezeLevel},t}(nr),pu=0,tr=function(n){function t(t,i,r){n.call(this,i);this._pathSegments=[];this._metadataManager=t;this._desiredMetadataFlags=r}return __extends(t,n),t.prototype.getMetadataManager=function(){return this._metadataManager},t.prototype.getDesiredMetadataFlags=function(){return this._desiredMetadataFlags},t.prototype.getLastPathSegment=function(){return this._pathSegments.length>0?this._pathSegments.last():null},t.prototype.getPath=function(){return this._pathSegments.join(".")},t.prototype.dispatch=function(t,i){i&&this._pathSegments.push(i);try{return n.prototype.dispatch.call(this,t)}finally{i&&this._pathSegments.pop()}},t.prototype._visitNonScalar=function(n){for(var t,i,e,h,u=this._metadataManager,f=0;f<ai.length;f++)if(t=ai[f],t.canEncode(n))return t.kind!==s.Array&&t.kind!==s.Object&&this.setFreezeLevel(1),i=u.getMetadata(n,!0),i||(e=[u.getMetadataPropertyName(),pu++,this.getPath()].join("-"),i=u.createMetadata(e,n,this._desiredMetadataFlags,t.metadataConstructor)),
h=!t.encode?r:t.encode(n,i,this),{id:i.id(),kind:t.kind,data:h};o.unexpected()},t}(dr),wu=function(n){function t(t,i){n.call(this,t,0,i)}return __extends(t,n),t.prototype.visit=function(n){this.dispatch(n)},t.prototype._visitNonScalar=function(t){var r=this.getMetadataManager(),i=r.getMetadata(t,!1,"Metadata missing for NonEncodedAddTrackingVisitor.");i&&(r.applyAddRef(i.id()),i.refsObject()===1&&n.prototype._visitNonScalar.call(this,t))},t}(tr),gr=function(n){function t(t){n.call(this);this._metadataManager=t;this._helperVisitor=new wu(t,0)}return __extends(t,n),t.prototype.visit=function(n){try{this._atoms=n.atoms;this.dispatch(n.root)}finally{this._atoms=null}},t.prototype._visitNonScalar=function(n){var i,r,t,u;if(typeof n===k||Array.isArray(n))for(i=e(n),t=0,u=i.length;t<u;t++)r=i[t],this.dispatch(n[r])},t.prototype._visitEncodedAtomReference=function(n){var t=n.encodedAtomReference,i=this._atoms[t],r=this._metadataManager.getOrResurrectMetadataWithId(t);return i?(this._metadataManager.
applyAddRef(t),r.refsObject()===1&&this.dispatch(i.data)):this._helperVisitor.visit(r.getObject()),n},t}(nr),bu=function(n){function t(t,i){n.call(this,t,0,0);this._releaseInitiateContext=i}return __extends(t,n),t.prototype.visit=function(n){var t=this.getMetadataManager().getMetadata(n);return this.dispatch(n),t?t.id():null},t.prototype._visitNonScalar=function(t){var r=this.getMetadataManager(),i=r.getMetadata(t,!1,"Metadata missing for ReleaseTrackingVisitor.");i&&(i.refsObject()===1&&n.prototype._visitNonScalar.call(this,t),r.releaseInitiate(this._releaseInitiateContext,i.id()))},t}(tr),nu=ri.create(y("EncodingOptimizationDisabled")),tu=function(n){function t(t,i,r){n.call(this,t,i,r);this._performAllowRemoteChangesVerification=u&&!cr(this.getDesiredMetadataFlags(),1)}return __extends(t,n),t.disableEncodingOptimization=function(n){n&&nu.set(n,n)},t.prototype.visit=function(n){try{this._atoms={};this._visitedAtoms={};return{root:this.dispatch(n),atoms:this._atoms}}finally{this._atoms=
null;this._visitedAtoms=null}},t.prototype._visitNonScalar=function(t){var f=this.getMetadataManager(),i=f.getMetadata(t,!0),u,r,e;return i||(u=n.prototype._visitNonScalar.call(this,t),i=f.getMetadata(t)),r=i.id(),e={encodedAtomReference:r},p(this._visitedAtoms,r)||(this._visitedAtoms[r]=void 0,i.refsObject()===0||nu.get(i)?this._atoms[r]=u||n.prototype._visitNonScalar.call(this,t):!u&&this._performAllowRemoteChangesVerification&&n.prototype._visitNonScalar.call(this,t),this._performAllowRemoteChangesVerification&&i instanceof ui&&i.allowRemoteMutations()&&o.cannotProxy()),e},t}(tr),ku=function(t){function u(n){t.call(this,1);this._metadataManager=n}return __extends(u,t),u.prototype.getMetadataManager=function(){return this._metadataManager},u.prototype.visit=function(n){try{return this._atoms=n.atoms,this._ownedObjectList=[],this.dispatch(n.root)}finally{this._ownedObjectList=null;this._atoms=null}},u.prototype.dispatch=function(n,i){i===void 0&&(i=!1);var r=t.prototype.dispatch.call(
this,n);return i&&this._ownedObjectList.push(r),r},u.prototype._visitEncodedAtomReference=function(t){var f=t.encodedAtomReference,v=this._metadataManager,y=this._ownedObjectList.length,u=v.getOrResurrectMetadataWithId(f),o,c,l,a,p;return u||(o=this._atoms[f],o===r?n.assert(1,!1,h.format("observable",f)+("failed to decode the object due to id does not exists in Object.keys(this._atoms): "+e(this._atoms)+"."),u):(c=or[o.kind],c?(l=c.decode(o.data,this),u=v.createMetadata(f,l,1,c.metadataConstructor),i(l).proxiedMetadataId=u.id()):n.assert(1,!1,h.format("observable",f)+("failed to decode the object due to no available EncodedAtomKind: "+s[o.kind]+"."),u))),u?(a=this._ownedObjectList.length-y,a>0&&(p=this._ownedObjectList.splice(y,a),u.getOrCreateOwnedObjectsList(p)),u.getObject()):void 0},u.prototype._visitNonScalar=function(n){var i,r,u,t,f;for(i=Array.isArray(n)?new Array(n.length):{},r=e(n),t=0,f=r.length;t<f;t++)u=r[t],i[u]=this.dispatch(n[u]);return i},u}(dr),du=function(){function t(
t,i,u,f,e,o){var s=this,h=function(t,i,r,f,e,o){var l=s._metadataManager.getMetadataById(t),a,v,h,c;l?(h=[],c={shouldFullFreeze:!0,desiredMetadataFlags:l.getFlags()},f?v=f.map(function(n){switch(n.status){case"added":return{changeKind:0,index:n.index,value:s.serializeObject(n.value,c)};case"deleted":return h.push(n.value),{changeKind:1,index:n.index,value:null};default:return null}}):(a=s.serializeObject(o,c),h.push(e)),i&&u({id:t,changeNumber:r,arrayChanges:v,newValue:a}),s._releaseObjects(h,!0)):s._metadataManager.isDisposed()||n.assert(1,!1,"rawChangeListener("+t+") is called when metadataManager.getMetadataById return undefined.")},c=function(n,t,i){var r=s._metadataManager.getMetadataById(n),u,e;r&&(u=r.getOrCreateOwnedObjectsList(),e=i.map(function(n){return u.push(n),s.serializeObject(n,{shouldFullFreeze:!0,desiredMetadataFlags:r.getFlags()})}),f({id:n,eventKind:t,args:e}))},l=function(t,i,u){var c=s._metadataManager.getMetadataById(t),f=ht.Deferred(),l,a,w=s,o,p;if(c){var v=f.promise(
),h={shouldFullFreeze:!0,desiredMetadataFlags:c.getFlags()},y=!0;return!i||nr.isUndefinedEquivalent(i)||s._metadataManager.isTracked(i)||(y=!1,i=r),u&&(p=u.map(function(n){return s.serializeObject(n,h)})),v.hold=function(){return l=!0,{dispose:function(){a||(w._releaseObjects([f],!1),a=!0)}}},e({id:t,isThisArgValid:y,thisArg:s.serializeObject(i,h),argsArray:p,returnValue:s.serializeObject(f,h)}),f.finally(function(){setTimeout(function(){var n=l?[i]:[i,f];s._releaseObjects(n.concat(u),!1)},0)}),v}return o="RawProxyFunctionInvocationListener("+t+") is called when metadataManager.getMetadataById return undefined.",s._metadataManager.isDisposed()||n.assert(1,!1,o),f.reject(new Error(o))};this._releaseListener=o;this._metadataManager=new yr(t,i,h,c,l)}return Object.defineProperty(t.prototype,"metadataCache",{get:function(){return this._metadataManager},enumerable:!0,configurable:!0}),t.prototype.deserializeObject=function(n){var t=new ku(this._metadataManager),i=new gr(this._metadataManager),
r=t.visit(n);return i.visit(n),r},t.prototype.serializeObject=function(n,t){var r=t.shouldFullFreeze?1:0,u=t.desiredMetadataFlags,f=new tu(this._metadataManager,r,u),e=new gr(this._metadataManager),i=f.visit(n);return e.visit(i),i},t.prototype.applyPromiseEvent=function(n){var f=this,e=this._metadataManager,t=e.getMetadataById(n.id),i=n.args.map(function(n){return f.deserializeObject(n)}),u,r;if(t){for(u=t.getOrCreateOwnedObjectsList(),r=0;r<i.length;r++)u.push(i[r]);st.usingState(function(){t.applyEvent(n.eventKind,i)},t.getCreationContext())}else this._releaseObjects(i,!0)},t.prototype.applyChange=function(n){var o=this,t=[],s=new ei,e,i,r,u;n.arrayChanges?e=n.arrayChanges.map(function(n){switch(n.changeKind){case 0:var i=o.deserializeObject(n.value);return t.push(i),{status:"added",index:n.index,moved:null,value:i};case 1:return{status:"deleted",index:n.index,moved:null,value:null}}}):(i=this.deserializeObject(n.newValue),t.push(i));r=this._metadataManager.getMetadataById(n.id);try{
r&&r.applyChanges(n.changeNumber,e,i)}finally{this._releaseObjects(t,!0)}u=s.millisecondsElapsed;u>f.minTraceDurationInMs&&ot.trace({source:"ProxiedObservable",action:"ObservableChange",name:n.id.substring(n.id.lastIndexOf("-")+1),data:{srcExtension:f.messageContext&&f.messageContext.srcWindowId},actionModifier:ot.ActionModifier.Complete,duration:u})},t.prototype.invokeFunction=function(n){var o=this,u=!1,i=this.deserializeObject(n.returnValue),s=n.isThisArgValid?this.deserializeObject(n.thisArg):"An invalid this context was proxied over. It may be because the source object is an untracked object.",h=f.messageContext,c=(n.argsArray||[]).map(function(n){return o.deserializeObject(n)}),e=this._metadataManager.getMetadataById(n.id,"Unable to complete proxied function invocation."),t,r;if(e){try{t=e.invoke(s,c);u=!0}finally{u||i.reject()}if(t)if(ut(t)||Q.isPromiseAlike(t)){r=t._underlyingPromise;r&&p(t,"_cancelationToken")||(r=t);v.onPromiseValueChanged(r,function(n){switch(n.state){case 1:
f.invokeWithContext(h,function(){i.resolveWith(v.ThisContext,n.args)});break;case 2:i.rejectWith(v.ThisContext,n.args)}},function(n){i.notifyWith(v.ThisContext,n)})}else i.resolve(t);else i.resolve()}else i.reject()},t.prototype._releaseObjectsHelper=function(n,t,i){t===void 0&&(t=b());var r={callstack:t,releaseSetId:i},u=new bu(this._metadataManager,r);return n.map(function(n){return u.visit(n)}).filter(function(n){return!!n})},t.prototype._releaseObjects=function(n,t){var i=this._metadataManager.createReleaseSetId(),u=b(),r=this._releaseObjectsHelper(n,u,i);r&&r.length!==0?this._releaseListener({releaseStep:0,releaseSetId:i,callstack:u,rootIds:t?null:r}):this._metadataManager.releaseFinalize(i)},t.prototype.releaseObject=function(n){this._releaseObjects([n],!1)},t.prototype.applyRelease=function(n){var f=this,t=n.releaseSetId,i=n.rootIds,u;n.releaseStep===0?(i&&(u=i.map(function(n){var t=f._metadataManager.getMetadataById(n,"Cannot release object.");return t?t.getObject():r}),this._releaseObjectsHelper(
u,n.callstack)),this._releaseListener({releaseStep:1,releaseSetId:t,callstack:null,rootIds:null})):n.releaseStep===1&&this._metadataManager.releaseFinalize(t)},t.prototype.dispose=function(){this._metadataManager.dispose()},t}();n.ProxiedObjectManager=du}(et=i.Internal||(i.Internal={}))})(i=t.ProxiedObservables||(t.ProxiedObservables={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";function at(n){return typeof n===b}function sr(n){try{return pu(n)}catch(t){return t}}function du(n,t){dt.warning("POv2-"+n+":"+sr(t),n)}function hr(n,t,i,r){var u=n;i&&(u+=": "+i);u+="\r\n"+(e(r)?r:sr(r));ui&&pi.messageContext&&(u+="\r\nCall stack:"+pi.messageContext.callStack);dt.error(u,t)}function ut(n,t,i,r){hr("POv2-"+n,n,t,i,r)}function f(n,t){hr("POv2Exception-"+n+": Please open a bug to Framework.",n,i,t)}function k(n,t){f(n,"Unsupported value: "+t)}function fi(n,t,i){t[i]=n.slice(0)}function cr(n,t,i){var u={id:n};return r.set(t,u),w(t)&&fi(t,u,
i.arrayId),u}function gu(n){for(var r,i={},t=0,u=n.length;t<u;t++)r=n[t],i[r]=!0;return i}function nf(n,t){for(var r,u=ii(t),i=0,f=u.length;i<f;i++)r=u[i],n[r]=t[r];return n}function tf(n){for(var t in n)return!1;return!0}function ei(n){return typeof n.reject===b&&n.promise||typeof n.then===b}function rf(n){return n.charCodeAt(0)===95&&!(n.charCodeAt(1)===109&&n.charCodeAt(2)===115&&n.charCodeAt(3)===80&&n.charCodeAt(4)===111&&n.charCodeAt(5)===114&&n.charCodeAt(6)===116&&n.charCodeAt(7)===97&&n.charCodeAt(8)===108&&n.charCodeAt(9)===70&&n.charCodeAt(10)===120)}function d(n,t){var c,f,o,i,l,u,s,h;if(!e(n)&&r.get(n)&&!t.get(n)){t.set(n,!0);c=typeof n;switch(c){case ct:if(w(n))for(i=0;i<n.length;i++)d(n[i],t);else if(ei(n))f=nt(n),f.getState()!==0&&d(f.getValue(),t);else if(!(n instanceof Date)&&!(n instanceof RegExp)){for(o=ii(n),i=0,l=o.length;i<l;i++)(u=o[i],rf(u))||ri&&(s=fr(n,u),s.get||s.set)||d(n[u],t);h=rr(n);h!==ur&&d(h,t)}break;case b:ti(n)&&d(n.peek(),t)}}}function lr(n,t){return n.
idToObject[t]||n.idToObjectPendingRelease[t]}function v(n,t,i){var r=n.idToObject[t]||n.idToObjectPendingRelease[t];if(r)return r;n.freedIds[t]?du(207,{id:t,code:i}):f(i,t)}function uf(n,t){return n.isPrimary?n.idToObject[t]||n.idToObjectPendingRelease[t]:n.idToObject[t]}function oi(n,t,i){for(var u,f,e=t.id,r=0,o=a.length;r<o;r++)u=a[r],f=uf(u,e),f===n&&i(u,f)}function g(n){var t=r.get(n);return t||f(201,ht(n)),t}function ar(n,t){var i=r.get(n);return i?i[t]:n}function ff(n,t){var i=v(n,t,226);return i?r.get(i).disallowRemoteMutations:!1}function yt(n,t){var r=n[t];return r===i?0:r}function si(n,t){var i=yt(n,t);return n[t]=++i,i}function pr(n,t,r,u){r.desiredValue=u;try{t(u)}finally{r.desiredValue=i}}function ef(n,t,i,r){var h=nr(t),u=t.peek(),e,c,f,o,l;if(h||t.valueWillMutate(),i)for(f=0,o=i.length;f<o;f++){e=i[f];switch(e.changeKind){case 0:c=s(n,e.value);u.splice(e.index,0,c);break;case 1:u.splice(e.index,1)}}else for(u.splice(0,u.length),f=0,o=r.length;f<o;f++)u.push(s(n,r[f]));l=
g(u);fi(u,l,n.arrayId);h?t(u):t.valueHasMutated()}function of(n,t,i,r,u,f,e){var o=s(n,t.object),h=u+1;if(f===h||i.peek()===o)try{pr(n,i,r,o)}finally{yt(r,e)===u&&(r[e]=f)}else return n.isPrimary?si(r,e):pr(n,i,r,o),ht(o)}function sf(n,t,i){var e=[],f,o,r,u;if(t)for(r=0,u=t.length;r<u;r++)f=t[r],o=f.value,e.push({changeKind:f.changeKind,index:f.index,value:o?ht(s(n,o)):null});else if(i)for(r=0,u=i.length;r<u;r++)e.push(ht(s(n,i[r])));return e}function hf(n,t,r,u,f,e,o){var c=n.serialId,s=u[c],h=t.serialNumber,l=t.array,a=t.fullArray,v=h===s;if(e!==f+1&&v)return u[c]=s?s+1:1,u[o]=i,sf(n,l,a);if(!v){if(s&&(h===i||h<s))return;u[c]=h;u[o]=i}ef(n,r,l,a);yt(u,o)===f&&(u[o]=e)}function wr(n,t,i,r){var u=t.id;oi(n,t,function(n){var v=n.changeNumberId,c=si(t,n.changeNumberId),f,s,e,l,o,a,h;if(n.receivedChangeNumbers[u]!==c){if(f={id:u,changeNumber:c},t[n.serialId]&&t[v]===1){for(s=[],e=0,l=r.length;e<l;e++)s.push(p(n,r[e],!1));f.fullArray=s}else i=ar(i,n.arrayId),o=yu(i,r,{sparse:!0}),o=vu(o),a=
o.map(function(i){switch(i.status){case"added":return{changeKind:0,index:i.index,value:p(n,i.value,t.disallowRemoteMutations,!0)};case"deleted":return{changeKind:1,index:i.index};default:k(106,i.status)}}),f.array=a;h=t[n.serialId];h&&(f.serialNumber=h);n.changeListener(f);fi(r,g(r),n.arrayId)}})}function br(n,t,i,r){var u=i===r,f=w(i);if(u&&f){wr(n,t,i,r);return}oi(n,t,function(i){if(!rt.get(n)){var u=si(t,i.changeNumberId);if(i.receivedChangeNumbers[t.id]===u)if(nr(n)&&r!==t.desiredValue)u=++t[i.changeNumberId];else return;i.changeListener({id:t.id,object:p(i,r,t.disallowRemoteMutations,!0),changeNumber:u})}})}function ft(n,t){var i=n._poBuffer;n._poBuffer=t;i&&i()}function cf(n){var t=n.deferred,i=n.promise;t&&!i[lt]&&er(i,lt,{value:t,enumerable:!1})}function ci(n,t,i,r){oi(n,t,function(n){var u=n.promiseSId;t[u]||n.promiseListener({id:t.id,kind:i,value:p(n,r,t.disallowRemoteMutations,!0)});t[u]&&t[u]--})}function kr(n){var t=vt.get(n.promise),i;t||(t={},i=function(n){t.value=n},n.promise.
then(i,i),vt.set(n.promise,t))}function dr(n,t){n.promise.progress(function(n){var i=g(t);ci(t,i,0,n)});n.always(function(i){arguments.length===0&&(i=n.getValue());var r=n.getState(),u=g(t);switch(r){case 1:ci(t,u,1,i);break;case 2:ci(t,u,2,i);break;default:k(100,r)}})}function gr(n,t,i,r,u){switch(t){case 1:n.deferred.resolve(i);break;case 2:n.deferred.reject(i);break;case 0:u||dr(n,r);break;default:k(101,t)}}function nt(n){var t;return typeof n.then=="undefined"&&at(n.reject)?t=new li(n,n.promise,7):bu(n)?t=new li(n[lt],n,6):wu(n)&&(at(n.reject)?(t=new ai(n,n.promise(),7),kr(t)):(t=new ai(n[lt],n,6),kr(t))),cf(t),t}function lf(n,t){var e=v(n,t.id,221),o,i,r,u,f;if(e&&(o=nt(e),o.getState()===0)){i=g(e);r=n.promiseSId;i[r]?i[r]++:i[r]=1;u=s(n,t.value);f=o.deferred;switch(t.kind){case 1:f.resolve(u);break;case 2:f.reject(u);break;case 0:f.notify(u);break;default:k(101,t.kind)}}}function pt(n,t,i,r){n.promiseListener({id:r.funcCallId,kind:i,value:p(n,t,ff(n,r.funcId,220),!0)})}function af(
n,t){return function(){var u=n.generateFunctionCallId(),a=[],y=v(n,t,222),s,f,e,w,h,c,l,o;if(y){for(s=r.get(y).disallowRemoteMutations,f=[],e=0,w=arguments.length;e<w;e++)h=arguments[e],a.push(p(n,h,s,!0)),f.push(h);this===tt?c=[i]:(c=p(n,this,s,!0),f.push(this));var d={funcCallId:u,funcId:t,funcThis:c,funcArgs:a},b=di(),k=nt(b);return n.functionCalls[u]={promise:k,objs:f},n.proxyFunctionInvocationListener(d),l=k.promise,o=!1,l.hold=function(){return o=!0,{dispose:function(){delete n.rootObjects[u];o=!1}}},l.then(function(t){setTimeout(function(){o&&(n.rootObjects[u]=t)},0)}),b.promise()}}}function vf(n,t,i){var r=s(n,t.value),o=n.functionCalls,h=t.id,c=i.promise,u=c.deferred,f=t.kind;e(r)||o[h].objs.push(r);switch(f){case 1:u.resolve(r);break;case 2:u.reject(r);break;case 0:u.notify(r);break;default:k(103,f)}f!==0&&c.promise.finally(function(){setTimeout(function(){delete o[h]},0)})}function y(n,t,i,u,f){var e=r.get(t);if(e){if(e.id?f=e.id:e.id=f,i[f])return f}else cr(f,t,n);return i[
f]=t,u.push([f,t]),f}function yf(n,t){var i=fr(t,n);return i.get||i.set}function nu(n,i,r,u,f){for(var h,e=[],s=ii(r),c=function(){var i=s[o],h;if(!r.hasOwnProperty||r.hasOwnProperty(i)){if(i.charCodeAt(0)===95&&!(i.charCodeAt(1)===109&&i.charCodeAt(2)===115&&i.charCodeAt(3)===80&&i.charCodeAt(4)===111&&i.charCodeAt(5)===114&&i.charCodeAt(6)===116&&i.charCodeAt(7)===97&&i.charCodeAt(8)===108&&i.charCodeAt(9)===70&&i.charCodeAt(10)===120)||ri&&yf(i,r))return"continue";h=r[i];switch(typeof h){case b:if(i==="constructor")return"continue";ti(h)&&rt.set(h,!0);break;case ct:if(!h)return e.push(i,h),"continue";if(h[it])return"continue";break;default:return e.push(i,h),"continue"}e.push(i,t+y(n,h,n.idToObject,f,u+"."+i))}},o=0,l=s.length;o<l;o++)h=c(),h==="continue";return e}function pf(n,r,u,f,e){for(var o=[],c=function(s){var h=u[s];switch(typeof h){case ct:o[s]=h?h[it]?i:t+y(n,h,r,e,f+"."+s):h;break;case b:o[s]=t+y(n,h,r,e,f+"."+s);break;default:o[s]=h}},s=0,h=u.length;s<h;s++)c(s,h);return o}
function oe(n,u,s){var lt=[],k=n.idToObject,a,st,tt,at,rt,d,g,et,ft,ht,ot;if(u[it])return[i];if(a=[],st=r.get(u),st&&(tt=st.id,k[tt]))if(w(u)){if(at=ar(u,n.arrayId),hu(u,at))return[tt,i];a.push([tt,u])}else return[tt,i];for(rt=[],y(n,u,k,a,n.generateId());a.length;){var vt=a.shift(),p=vt[0],h=vt[1],yt=typeof h,c=void 0,v=void 0;switch(yt){case b:ti(h)?(d=h.peek(),h.splice||h.map?d&&w(d)?(c=vi,v=y(n,d,k,a,p+"(a)")):d===undefined?c=wf:d===l?c=bf:ut(303,"Attempting to serialize an observable array whose value is not an array, null, or undefined.",p):(cu(h)&&(h[n.koSubId]=h.subscribe(ou)),e(d)?(c=kf,v=d):(c=tu,v=y(n,d,k,a,p+"(o)")))):(c=df,v=i);break;case ct:ei(h)?(h._underlyingPromise&&ut(304,"Can't serialize CancellablePromise which is not returned from function",p),g=nt(h),g.getState()===0&&dr(g,h),et=g.getValue(),e(et)?(c=o[g.dataType]+fe+g.getState(),v=et):(c=o[g.dataType]+ee+g.getState(),v=y(n,et,k,a,p+"()"))):h instanceof Date?(c=gf,v=h.getTime()):h instanceof RegExp?(c=ne,ft=h.source+
t,h.global&&(ft+="g"),h.ignoreCase&&(ft+="i"),h.multiline&&(ft+="m"),v=ft):w(h)?(c=te,v=pf(n,k,h,p,a)):h instanceof Error?(c=wt,ht={message:h.message,name:h.name,stack:h.stack},nf(ht,h),v=nu(n,k,ht,p,a)):h instanceof ArrayBuffer?(c=re,v=h):(ot=rr(h),c=ot===ur?wt:ot===l?ie:wt+t+y(n,ot,k,rt,p+"(p)"),v=nu(n,k,h,p,a));break;default:f(105,{dataType:yt})}s&&(uu(h).disallowRemoteMutations=!0);lt.push(p+t+c,v);!a.length&&rt.length&&(a=rt,rt=[])}return lt}function se(n,i,r,u){for(var e,o,s,c,f=0,l=u.length;f<l;f+=2)e=u[f],o=u[f+1],o&&o[0]===t?(s=o.substring(1),c=n[s]||i[s],c?r[e]=c:(r[e]=s,h.push(e))):r[e]=o}function he(n,i,r){for(var f,e,o,u=0,s=r.length;u<s;u++)f=r[u],f&&f[0]===t&&(e=f.substring(1),o=n[e]||i[e],o?r[u]=o:(r[u]=e,h.push(""+u)));return r}function ce(n,t){for(var o,a,h,s,r=0,c=n.length;r<c;r++){var u=n[r],l=u[0],i=u[1],e=u[2];switch(l){case 3:for(o=0,a=e.length;o<a;o++)h=e[o],i[h]=v(t,i[h],223);break;case 0:case 1:s=v(t,e,223);rt.set(i,!0);i(s);rt.delete(i);break;case 7:case 6:s=
v(t,e,223);gr(i,u[3],s,l===7?i.deferred:i.promise,!1);break;default:f(107)}}}function le(n,r){function ht(i){var s,u,e;for(it?it[i]&&f(213,i):it={},it[i]=!0,i+=t,s=i.length,u=o-1;u>=2;u-=2)if(e=r[u],e.substring(0,s)===i){r[o+1]=e;r[o+2]=r[u+1];r[u]=ue;r[u+1]=l;o+=4;return}f(214,{id:i,freed:n.freedIds[i]})}var s=n.idToObject,y=n.idToObjectPendingRelease,a=[],w,it,ut,o,b,v,u,p,ft,d,g,tt;if(r.length===2&&r[1]===i&&(ut=lr(n,r[0]),ut))return ut;for(o=r.length-1;o>0;){var ct=r[o-1],e=r[o],c=ct.split(t);b=c[0];v=yr[c[1]];u=void 0;switch(v){case 3:p=c[2];p?p==="n"?u=ir(l):(ft=s[p]||y[p],ft?u=ir(ft):(ht(p),w=!0)):u={};w||(se(s,y,u,e),h.length&&(a.push([3,u,h]),h=[]));break;case 11:u=he(s,y,e);h.length&&(a.push([3,u,h]),h=[]);break;case 4:u=new Date(e);break;case 5:var et=e.lastIndexOf(t),lt=e.substring(0,et),at=e.substring(et+1);u=new RegExp(lt,at);break;case 10:u=af(n,b);break;case 0:if(u=lu(),d=void 0,c[2])d=e;else if(d=s[e]||y[e],!d){a.push([v,u,e]);break}u(d);break;case 1:if(u=au(),g=void 0,
c[2])g=c[2]==="u"?i:l;else if(g=s[e]||y[e],!g){a.push([v,u,e]);break}u(g);break;case 7:case 6:var ot=v===6,rt=nt(di()),st=yr[c[3]];if(u=ot?rt.promise:rt.deferred,tt=void 0,c[2])tt=e;else if(tt=s[e]||y[e],!tt){a.push([v,rt,e,st]);break}gr(rt,st,tt,u,ot);break;case 13:u=e;break;case 14:w=!0;break;default:k(105,v)}w?w=!1:(cr(b,u,n),s[b]=u);o-=2}return a.length&&ce(a,n),s[b]}function p(n,t,i,r){if(e(t))return[t];var u=Date.prototype.toJSON,f=RegExp.prototype.toJSON;Date.prototype.toJSON=function(){return this};RegExp.prototype.toJSON=function(){return this};try{return oe(n,t,i,r)}finally{Date.prototype.toJSON=u;RegExp.prototype.toJSON=f;rt=gt()}}function s(n,t){return(w(t)||f(218,{poManager:n.id}),t.length===0)?i:t.length===1?t[0]:le(n,t)}function bt(n,t,u,f){var e=r.get(n),o;e[t]&&(e[t]=i);o=n[u];o&&(o.dispose(),n[u]=i);e[f]&&(e[f]=i)}function iu(n,t){var i=n.rootObjects[t];i||f(206,t);delete n.rootObjects[t]}function ru(n){var r=n.rootObjects,u=n.functionCalls,t=gt(),f,e,o,i,s;for(f in r)
e=r[f],d(e,t);for(o in u){i=u[o].objs;for(s in i)d(i[s],t)}return t}function ae(n){var f=ru(n),i=n.idToObject,e=n.idToObjectPendingRelease,r=[],t,u;for(t in i)u=i[t],f.get(u)||(r.push(t),e[t]=i[t],delete i[t]);return r}function ve(n,t){var f=gu(t),e=n.idToObject,u=n.idToObjectPendingRelease,o=n.freedIds,s=n.arrayId,h=n.koSubId,c=n.changeNumberId,i,r;for(i in u)r=u[i],f[i]?(bt(r,s,h,c),o[i]=!0):e[i]=r;n.idToObjectPendingRelease={}}function ye(n,t){for(var i,r,h=ru(n),u=[],s=n.idToObject,c=n.idToObjectPendingRelease,e=[],o=0,l=t.length;o<l;o++)i=t[o],r=s[i],r?h.get(r)||(u.push(i),c[i]=r,delete s[i]):(u.push(i),e.push({id:i,freed:n.freedIds[i]}));return e.length&&f(231,{poId:n.id,missingObjects:e}),u}function pe(n){var i=n.idToObjectPendingRelease,u=n.freedIds,f=n.arrayId,e=n.koSubId,o=n.changeNumberId,t,r;for(t in i)r=i[t],bt(r,f,e,o),u[t]=!0;n.idToObjectPendingRelease={}}function we(n,t,i,r,u,e,o,s,h){var c=new yi,l=n+a.length;return c.id=l,c.changeNumberId="c-"+l,c.arrayId="a-"+l,c.koSubId=
"k-"+l,c.promiseSId="p-"+l,c.serialId="s-"+l,c.raiseRemoteException=t,c.changeListener=i,c.promiseListener=r,c.proxyFunctionInvocationListener=u,c.releaseListener=e,c.generateId=ni(l),c.generateFunctionCallId=ni(l+"f"),c.generateReleaseId=ni(l+"r"),c.remoteWindowId=s,o===s&&f(210,o),c.isPrimary=o>s,c.isPrimary&&!h&&c.scheduleGc(),a.push(c),c}function uu(n){return r.get(n)}function be(n){if(!e(n)){var t=r.get(n);return t||(t={id:null},r.set(n,t)),t}}function ke(){return{compatibilityMode:ri,diagnostics:ui,metadataMap:r,jqueryPromiseValueMap:vt,managers:a,log:dt,removeUserStringValues:ku,splitter:t}}var u=MsPortalFx,fu=u.Helpers,et=u.Base,pi=et.Rpc.Internal,eu=et.ProxiedObservables.Internal,kt=et.Utilities,tt=window,dt=new et.Diagnostics.Log("MsPortalFx/Base/Base.ProxiedObservablesV2"),wi=ko.subscribable.fn,ot=wi.notifySubscribers,bi=6e4,ou=u.noop,ki=eu.WeakMapShim.create,gt=function(){return new u.Map},e=u.isPrimitive,ni=u.getIdGenerator,st=tt.fx.environment,de=u.keysLength,di=fu.Deferred,
ge=kt.getObjectConstructorName,ht=kt.getObjectDescriptor,su=kt.getCurrentCallStack,no=u.isNullOrUndefined,to=u.isEmpty,hu=u.arrayEquals,t=String.fromCharCode(5),w=Array.isArray,gi=function(){return Date.now()},ti=ko.isObservable,cu=ko.isPureComputed,nr=ko.isComputed,lu=ko.observable,au=ko.observableArray,tr=ko.utils,vu=tr.adjustArrayEdits,yu=tr.compareArrays,pu=JSON.stringify,c=Object,ir=c.create,rr=c.getPrototypeOf,ii=c.keys,ur=c.prototype,fr=c.getOwnPropertyDescriptor,er=c.defineProperty,io=c.defineProperties,ro=c.preventExtensions,wu=Q.isPromiseAlike,bu=Q.isPromise,b="function",ct="object",i=undefined,l=null,lt="_deferred",or=u.isFeatureEnabled("pov2"),ri=!st.enableFastViewModelProxying,ui=st.isDevelopmentMode||st.trace.diagnostics,uo=st.trace.potrackobservable,it="###isPoUndefined###",ku,hi,li,ai,h,yi;or&&[$.prototype,$.Event.prototype,tt].forEach(function(n){er(n,it,{configurable:!0,value:!0})});var r=ki("###PO2_Metadata###"),vt=ki("###PO2_PromiseValue###"),rt=gt(),a=[];var vr=Math.
max(15,3),yr=u.getStringToIntMap(vr),o=u.getIntToStringMap(vr);or&&(wi.notifySubscribers=function(n,t){var f=this,u=r.get(this),e;if(u)if(t==="beforeChange")this._capturedOriginalValue===!0&&ut(302,"Detected a cycle subscription. Please avoid below pattern in the code:\r\n observable.subscribe(() => { observable(1); }, null, 'beforeChange')",{observable:u.id,callStack:su(!0)}),ft(this),this._originalValue=this.peek(),this._capturedOriginalValue=!0,ot.apply(this,arguments);else if(t===i){e=this.peek();this._capturedOriginalValue?(this._capturedOriginalValue=!1,ft(this,function(){br(f,u,f._originalValue,e)})):at(this.push)||n&&at(n.push)?ft(this,function(){wr(f,u,e,n)}):ft(this,function(){br(f,u,e,n)});try{ot.apply(this,arguments)}finally{ft(this);this._originalValue=i}}else ot.apply(this,arguments);else ot.apply(this,arguments)});hi={resolved:1,fulfilled:1,rejected:2,pending:0};li=function(){function n(n,t,i){this.deferred=n;this.promise=t;this.dataType=i}return n.prototype.getState=function(
){var n=this.promise.inspect();return hi[n.state]},n.prototype.getValue=function(){var n=this.promise.inspect();switch(n.state){case"pending":return;case"fulfilled":return n.value;case"rejected":return n.reason;default:k(102,n.state)}},n.prototype.always=function(n){var t=this;this.promise.finally(function(){n(t.getValue())})},n}();ai=function(){function n(n,t,i){this.deferred=n;this.promise=t;this.dataType=i;this.getState=function(){var n=t.state();return hi[n]}}return n.prototype.getValue=function(){if(this.getState()!==0){var n=vt.get(this.promise);return n||f(203,{metadata:r.get(this.promise)}),n.value}},n.prototype.always=function(n){var t=this;this.promise.finally(function(){n(t.getValue())})},n}();var vi=o[1],wf=vi+t+"u",bf=vi+t+"n",tu=o[0],kf=tu+t+"1",df=o[10],gf=o[4],ne=o[5],wt=o[3],te=o[11],ie=wt+t+"n",re=o[13],ue=t+14,fe=t+"1"+t,ee=t+t;h=[];yi=function(){function n(){this._disposed=!1;this.ops=[];this.idToObject={};this.idToObjectPendingRelease={};this.rootObjects={};this.receivedChangeNumbers=
{};this.functionCalls={};this.freedIds={}}return n.prototype.serializeObject=function(n,t){var u=t&&t.desiredMetadataFlags!==1||!1,f=p(this,n,u,!1),i;return e(n)||n[it]||(i=r.get(n),this.rootObjects[i.id]=n),f},n.prototype.deserializeObject=function(n){var t=s(this,n),i;return e(t)||(i=r.get(t),this.rootObjects[i.id]=t),t},n.prototype.applyPromiseEvent=function(n){if(!this._disposed){var t=this.functionCalls[n.id];t?vf(this,n,t):lf(this,n)}},n.prototype.applyChange=function(n){var t=this,f=n.id,u,h,c;if(!t._disposed&&(u=v(t,f,224),u)){var i=r.get(u),e=n.changeNumber,o=t.changeNumberId,s=yt(i,o);if(i.disallowRemoteMutations){i[o]=e;ut(216,"Remote change been disabled",i.id);return}h=t.receivedChangeNumbers;h[f]=s+1;try{c=n.object?of(t,n,u,i,s,e,o):hf(t,n,u,i,s,e,o);c&&ut(301,"Detected a simultaneous change.",{id:f,from:t.remoteWindowId,remote:e,local:s,serial:i[t.serialId],changes:c},!ui)}finally{delete h[f]}}},n.prototype.applyRelease=function(n){var r=this,i,t;this._disposed||(n.rootObjectId&&
iu(this,n.rootObjectId),i=gi(),n.initialIds?(t=ye(this,n.initialIds),this.releaseListener({confirmedIds:t})):n.confirmedIds?(ve(this,n.confirmedIds),this.releaseListener({completed:!0})):n.completed&&pe(this))},n.prototype.invokeFunction=function(n){var u=this,o=!1,t,h=v(this,n.funcId,225),e,c;if(h){e=s(this,n.funcThis);e===i&&n.funcThis.length>1&&f(209);c=n.funcArgs.map(function(n){return s(u,n)});try{t=h.apply(e,c);o=!0}finally{if(t&&ei(t)){var a=t.hasOwnProperty("_underlyingPromise")?t._underlyingPromise:t,r=nt(a),l=r.getState();l===0?(r.promise.progress(function(t){pt(u,t,0,n)}),r.always(function(t){pt(u,t,r.getState(),n)})):pt(this,r.getValue(),l,n)}else pt(this,t,o?1:2,n)}}},n.prototype.getMetadata=function(n){var t=r.get(n);if(t&&lr(this,t.id))return t},n.prototype.scheduleGc=function(){var n=this;setTimeout(function(){n._disposed||(n._gcIntervalHandle=tt.setInterval(function(){n.gc()},bi/2))},Math.random()*bi/2)},n.prototype.releaseObject=function(n){if(!e(n)){var t=g(n);iu(this,
t.id);this.releaseListener({rootObjectId:t.id})}},n.prototype.gc=function(){if(tf(this.idToObjectPendingRelease)){var t=gi(),n=ae(this);n.length&&this.releaseListener({initialIds:n})}},n.prototype.dispose=function(){var n=this,t,s,i;if(!n._disposed){n._disposed=!0;var r=n.idToObject,u=n.idToObjectPendingRelease,f=n.arrayId,e=n.koSubId,o=n.changeNumberId;for(tt.clearInterval(n._gcIntervalHandle),t=0,s=a.length;t<s;t++)if(a[t]===this){a.splice(t,1);break}for(i in r)bt(r[i],f,e,o);for(i in u)bt(u[i],f,e,o);n.idToObject=l;n.idToObjectPendingRelease=l;n.rootObjects=l}},n}();n.ProxiedObjectManager=yi;n.createPoManager=we;n.getMetadata=uu;n.getOrCreateMetadata=be;n.getDiagnostics=ke})(t=n.PoV2||(n.PoV2={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";function r(n){return i(n)||n>=0}function u(n,t){return n===t?0:i(n)?-1:i(t)?1:n>t?1:-1}function s(n){var t,i;if(!n)return t=new f,t.major=0,t.minor=0,t.build=0,t.revision=0,t;if(i=o(n),!i)throw new Error("value is not a valid version string.");
return i}function o(n){var t;n=n||"";var i=n.split(e),u=null,o=i.length;return o>=2&&(t=new f,t.major=parseInt(i[0]),t.minor=parseInt(i[1]),t.build=o>=3?parseInt(i[2]):null,t.revision=!i[3]?null:parseInt(i[3].match(/\d+/)),r(t.major)&&r(t.minor)&&r(t.build)&&r(t.revision)&&(u=t)),u}var i=n.isNullOrUndefined,e=".",f;t.getVersionFromString=s;t.tryParseVersion=o;f=function(){function n(){}return n.prototype.toString=function(){var n=[this.major,this.minor],r=this.build,t;return i(r)||(n.push(r),t=this.revision,i(t)||n.push(t)),n.join(e)},n.prototype.compareTo=function(n){var t=u(this.major,n.major);return t||(t=u(this.minor,n.minor),t||(t=u(this.build,n.build),t||(t=u(this.revision,n.revision)))),t},n}()})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={}));var placeHolder="",errorMessages={contextAmd:placeHolder,contextInit:placeHolder,protoEnum:placeHolder,unknownName:placeHolder,nonIframe:placeHolder,contentNull:placeHolder,entryMissMatch:placeHolder},throwError=FxImpl.getErrorMap(errorMessages),
FxImpl;(function(n){var t;(function(t){"use strict";function o(n,t){var r=i.getState(),e=u.messageContext;return MsPortalFx.require(n).then(function(n){return i.usingState(function(){var i=f.getTimestamp(),r=t(n);return f.markOperationEnd(f.VIEW_MODEL_CTOR,i,e),r},r)})}function h(n,i,r,u,f){e=new t.RuntimeImpl(n,i,r,u,f);e.register()}function c(){return e}var i=n.TelemetryContext,r=MsPortalFx.Base,u=r.Rpc.Internal,f=u.Measurement,l=window.fx.environment,a=r.tryParseVersion,e,s=function(){function n(){}return n.prototype.setDataContext=function(n){this._factory&&throwError.contextAmd();r.ProxiedObservables.markNonSerializable(n);this._context=n},Object.defineProperty(n.prototype,"dataContext",{get:function(){return this._context},enumerable:!0,configurable:!0}),n.prototype.setDataContextFactory=function(n,t,i){!this._context||throwError.contextInit();i&&(n=i.normalize(n));this._factory=function(){return o(n,t)}},n.prototype.loadViewModelAsync=function(n,t,f){var e=this,s,h,c;return f&&(
n=f.normalize(n)),s=function(){return o(n,t)},h=u.messageContext,!this._context&&this._factory?(this._promise||(this._promise=this._factory(),this._promise.then(function(n){r.ProxiedObservables.markNonSerializable(n);e._context=n;e._promise=undefined;e._factory=undefined})),c=i.getState(),this._promise.then(function(){return i.usingState(function(){return u.invokeWithContext(h,function(){return s()})},c)})):s()},n}();t.ViewModelAreaFactoriesBase=s;t.setRuntime=h;t.getRuntime=c})(t=n.Extension||(n.Extension={}))})(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";function a(n){var t=n;t.initialize=n.initialize.bind(n);t.dispose=n.dispose.bind(n);t.getDefinition=n.getDefinition.bind(n);t.getViewModel=n.getViewModel.bind(n);t.getPartViewModel=n.getPartViewModel.bind(n);n.getObservable&&(t.getObservable=n.getObservable.bind(n))}function v(t){var c=n.Base.tryParseVersion(s),r,o,h;if(c||i.error("Incorrect version '"+s+"' was specified in the environment. Please ensure that ApplicationContext.Version in your assembly is correctly set up, and updates correctly for major and minor version changes. For more information see section 'Support stamping the extension version at compile time' in the documentation page https://auxdocs.azurewebsites.net/en-us/documentation/articles/portalfx-creating-extensions"),
n.isNullOrUndefined(t)){r="The manifest is null or undefined for the extension at URL: "+u.location.href+".\r\nPossible reasons for the failure:\r\n - You passing an invalid manifest to the MsPortalFx.Extension.register/MsPortalFx.Extension.registerAmd call that is used to register your extension with the portal.\r\n - The manifest file is not included in your project.\r\n - If you are not using AMD, verify that your scipt ordering is correct so that the manifest object is being created before the call to the MsPortalFx.Extension.register/registerAmd."+f;i.error(r);throw new Error(r);}if(n.isNullOrWhiteSpace(t.name)){o="The extension manifest should specify a valid name. This name is obtained from the <Extension> tag in PDL. "+("\r\nExtension URL: "+u.location.href+".")+"\r\nThis name should be a string and cannot be empty or whitespace. It also cannot contain the ! character. \r\nThe recommended naming convention for an extension name is to follow the pattern {Company}_{BrandOrSuite}_{ProductOrComponent} (e.g. Microsoft_Azure_Insights)."+
f;i.error(o);throw new Error(o);}if(n.isIFrame||throwError.nonIframe(t.name),e.getRuntime()){h="The extension with name "+t.name+" has already been registered. Ensure that you are not calling MsPortalFx.Extension.register/MsPortalFx.Extension.registerAmd multiple times within your extension.";i.error(h);throw new Error(h);}}function y(t,i,r,u,o,s){v(t);n.isNullOrWhiteSpace(i)&&throwError.entryMissMatch(t.name,f);r&&(i=r.normalize(i),u&&(u=r.normalize(u)),o&&(o=r.normalize(o)),s&&(s=r.normalize(s)));e.setRuntime(t,function(){return n.require(i).then(function(n){return n.create()})},u,o,s)}function p(t,i,r){return Q(new n.Services.ObservableServiceClientImpl(t,r))}function w(t,i,u,f,e,o){var c=f?new n.ViewModels.Internal.SelectableContainerViewModel(!0):new n.ViewModels.Internal.ContainerViewModel,s,l=r.getTimestamp(),h;return(s=t(i,c,u),s||throwError.contentNull(i),h=function(n){var t=new FxImpl.ViewModels.CompositionViewModel(c,n,u,e);return o&&o(n),t},Q.isPromiseAlike(s))?s.then(h):(r.
markOperationEnd(r.VIEW_MODEL_CTOR,l),h(s))}var h=n.Base.Utilities,r=n.Base.Rpc.Internal.Measurement,e=FxImpl.Extension,u=window,i=new n.Base.Diagnostics.Log("MsPortalFx/Extension/Extension"),f="\r\nMore information at {0}".format("https://auxdocs.azurewebsites.net/en-us/documentation/articles/portalfx-creating-extensions"),o=u.fx.environment,s=o.version,c=o.isDevelopmentMode||h.isDiagnosticsEnabled,l=function(){function t(){a(this)}return t.prototype.initialize=function(){},t.prototype.dispose=function(){c&&n.ViewModels.Internal.ContainerViewModel.VerifyAllContainerViewModelDisposed()},t.prototype.getViewModel=function(n,t,i){var r,u=this.viewModelFactories;return n in u?r=u[n](t,i):throwError.unknownName(),r},t.prototype.getPartViewModel=function(n,t,i){var r,u=this.viewModelFactories;return n in u?r=u[n](t,i):throwError.unknownName(),r},t}();t.EntryPointBase=l;t.registerAmd=y;t.getService=p;t.composeViewModel=w})(t=n.Extension||(n.Extension={}))}(MsPortalFx||(MsPortalFx={})),function(
n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function li(n,t){return(typeof n=="string"?n:n&&n.message&&n.message+"")||t}function rt(n,i){var u=t.messageContext;t.messageContext=n;try{return i()}catch(r){t.addRpcStack(r);h.ErrorReporter.lastError=r;h.ErrorReporter.handleError({});throw r;}finally{t.messageContext=u}}function sr(n,t){var i=new w(n);t.registerForDispose(i);i.onDispose(function(){u(t)});return i}function ar(n,t,i){return n&&n.code==="ETIMEDOUT"&&n.message&&typeof n.message=="string"&&n.message.indexOf(vi.format(t,i))!==-1}function vr(){return ut.ProxiedObject.trackedObjects.values.sort(function(n,t){return n.getMetadata().creationTime.getTime()-t.getMetadata().creationTime.getTime()})}function pt(n){var t=dt.getDescriptor(n,{addSelfCloudNameIfMissing:!0});return dt.getWindowId(t)}function yi(n){if(n){var t=s.makeArray(n.allowedOrigin);n.allowedOrigin=t.map(pt)}}function yr(n){var t=new ct(n.originId,n.loadWindow,{hostWindow:v,parentTrustedOrigin:
ti.trustedParentOrigin,parentWindow:n.parentWindow});k.start(t)}function ft(n){return n.getName()}function pi(n,t,i,r){t.registerRpcEndPoint(ft(n),{allowedOrigin:i,handler:r})}function wi(n,t,i,r){return t.invokeRpc(ft(n),i,r)}var s=n,y=s.Base,a=FxImpl,bt=y.Utilities,h=y.Diagnostics,kt=y.ProxiedObservables.Internal.Dictionary,dt=a.Extension,gi=y.Stopwatch.TelemetryStopwatch,p=h.Telemetry,g=a.TelemetryContext,gt=p.Context,ni=bt.getCurrentCallStack,b,st,ei,ht,hi,ci,ct,lt,at,vt,ut,yt,wt,k,d,bi,ki,di;t.WindowLoadTimeoutsInSec=[20,40,80];t.minTraceDurationInMs=100;t.timeToDelayWindowUnload=6e4;var v=window,et=new h.Log("MsPortalFx/Base/Base.Rpc2"),ti=v.fx.environment,nt=ti.extensionName,f="fx",ot=bt.generateNonSerializableProperty("WindowMessage"),tt=(t.WindowLoadTimeoutsInSec.reduce(function(n,t){return n+t},0)+20)*1e3,ii="Rpc",ri=a.Constants.RpcMethods.entryPointDispose,u=s.disposeDisposable,it=s.noop,ui=s.uncurryThis,fi=Array.prototype,c=ui(fi.forEach),l=ui(fi.push),nr=s.forEachKey,tr=ko.
observable,r=r,i=null,e="",ir={noHandler:e,handlerExists:e,badRefCount:e,alreadyStarted:e,routeExists:e,callbackRegistered:e,endpointExists:e,sameWindow:e,badDuration:e,notStarted:e},o=a.getErrorMap(ir),w=function(){function n(n){this._disposeCallbacks=[];this._value=n}return n.prototype.getValue=function(){return this._value},n.prototype.dispose=function(){if(this._disposeCallbacks){var n=this.getValue(),t=this._disposeCallbacks;this._disposeCallbacks=i;c(t,function(t){try{t(n)}catch(i){setTimeout(function(){throw i;},0)}})}},n.prototype.onDispose=function(n){this._disposeCallbacks?l(this._disposeCallbacks,n):n(this.getValue())},n}();t.DisposableValue=w;b=function(){function n(n){this._dictionary=new kt;this._countChangesCallback=n}return n.prototype.getValue=function(n){return this._dictionary.getValue(n)},n.prototype.setValue=function(n,t){var r=this,i;this._dictionary.setValue(n,t);i=this._countChangesCallback;i&&i(this._dictionary.count,!0);t.onDispose(function(){r._dictionary.removeValue(
n);i&&i(r._dictionary.count,!1)})},Object.defineProperty(n.prototype,"values",{get:function(){return this._dictionary.values},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){u(this._dictionary.values)},n}();st=function(n){function t(t){n.call(this,t.window);this._trustedHost=(t.trustedHost||"*").toLowerCase();this._initFunc=t.initializationFunc;this._source=t.source}return __extends(t,n),t.prototype.getSource=function(){return this._source},t.prototype.initialize=function(){if(this._initFunc){var n=this._initFunc;this._initFunc=i;n(this)}},t.prototype.isHostAllowed=function(n){var t=this._trustedHost;return t==="*"||n.toLowerCase()===t},t.prototype.postMessage=function(n){this.getValue().postMessage(n,this._trustedHost)},t.prototype.getTrustedHost=function(){return this._trustedHost},t}(w);t.RpcWindow=st;ei=function(n,t){return t.seq-n.seq};ht=function(){function n(n,t){this._outerList=[];this._innerListIndex=0;this._outerListIndex=n;this._handler=t}return n.prototype._processInnerList=
function(n){var o=this,u,i,f,t,e;if(n&&this._innerList!==n&&(this._innerList=n,this._innerListIndex=0),this._innerList){u=this._innerList;i=!0;try{for(t=this._innerListIndex,e=u.length;t<e;t++)f=u[t],i=!1,this._handler(f),i=!0}finally{i||(this._innerListIndex=t+1,Q.nextTick(function(){o.addItem()}))}this._innerList=r}},n.prototype.addItem=function(n){var t=this._outerList,i;for(n&&(l(t,n),t.sort(ei)),this._processInnerList();t.length>0&&t[t.length-1].seq===this._outerListIndex;)i=t.pop(),this._outerListIndex++,this._processInnerList(i.data)},Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this._outerList.length===0&&this._innerList===r},enumerable:!0,configurable:!0}),n}();t.Sequencer=ht;var rr=function(){function n(n){this._isReadyToSend=!1;this._isCallbackScheduled=!1;this._frameBuffer=[];this._sender=n}return n.prototype._schedule=function(){var n=this;this._isReadyToSend&&!this._isCallbackScheduled&&(this._isCallbackScheduled=!0,Q.nextTick(function(){n.flush();n.
_isCallbackScheduled=!1}))},n.prototype.flush=function(){this._isReadyToSend&&this._frameBuffer.length>0&&(this._sender(this._frameBuffer),this._frameBuffer=[])},n.prototype.send=function(n){this._schedule();l(this._frameBuffer,n)},n.prototype.start=function(){this._isReadyToSend=!0;this._schedule()},n}(),oi=function(){function n(n){this._handlerMap={};this._messageListener=n}return n.prototype._getKindAsString=function(n){return n+""},n.prototype.handleMessage=function(n,t){var i=this._handlerMap[this._getKindAsString(n.kind)];i||o.noHandler();i(n.data,t)},n.prototype.registerHandler=function(n,t){var r=this,i=this._getKindAsString(n);return this._handlerMap[i]&&o.handlerExists(),this._handlerMap[i]=t,function(t,i){r._messageListener(t,{kind:n,data:i})}},n}(),ur=function(){function n(n,t,i){this._senderSequenceIndex=0;this._receiveSequenceStart=0;this._transmittedSequenceStart=0;this._isParentRoute=n;this._remoteId=t;this._routedMessageHandler=i}return n.prototype.getLocalInstanceIndex=
function(){return this._receiveSequenceStart},n.prototype.getRemoteInstanceIndex=function(){return this._transmittedSequenceStart},n.prototype.getRemoteId=function(){return this._remoteId},n.prototype.handleMessage=function(n,i,r){var o=this._rpcWindow,s,c,u,f,h,e,l;if(o){try{s=o.getSource()===n}catch(a){s=!1}if(s&&o.isHostAllowed(i))if(c=r.seq,r.handshakeData)this._handleHandshakeFrame(r.handshakeData);else if(this._windowMessageHandler&&c>=this._receiveSequenceStart){if(u=r.data,u&&u.length>0)for(h=t.Measurement.getTimestamp(),e=0,l=u.length;e<l;e++)f=u[e],f.timestamps?f.timestamps.receiveTime=h:f.timestamps=t.Measurement.newTimestamps(h);this._windowMessageHandler.addItem(r)}}},n.prototype.setWindow=function(n){var t=this;n?(this._bufferedSender=new rr(function(n){t._postMessageToWindow(n)}),this._rpcWindow=n,this._isParentRoute&&this._initiateHandshake()):(this._bufferedSender.flush(),this._rpcWindow=i,this._bufferedSender=i,this._windowMessageHandler=i)},n.prototype.send=function(
n){this._bufferedSender&&(this._rpcWindow.initialize(),n.timestamps=t.Measurement.newTimestamps(t.Measurement.getTimestamp()),t.messageContext&&t.messageContext.timestamps&&(n.initiatingTimestamps=t.messageContext.timestamps),this._bufferedSender.send(n))},n.prototype._initiateHandshake=function(){this._postMessageToWindow(i,!1)},n.prototype._handleHandshakeFrame=function(n){var t=n.sequenceStart;this._receiveSequenceStart=t;this._localId=n.destinationId;this._windowMessageHandler=new ht(t,this._routedMessageHandler);n.isResponse||this._postMessageToWindow(i,!0);this._bufferedSender.start()},n.prototype._postMessageToWindow=function(n,i){var e,o,s,u,f,h;if(this._rpcWindow){if(typeof i=="boolean"?(o=this._senderSequenceIndex,this._transmittedSequenceStart=o,e={signature:ot,seq:-1,originId:r,handshakeData:{isResponse:i,sequenceStart:o,destinationId:this._remoteId},data:r}):e={signature:ot,seq:this._senderSequenceIndex++,originId:this._localId,data:n},n&&n.length>0)for(s=t.Measurement.getTimestamp(
),f=0,h=n.length;f<h;f++)u=n[f],u.timestamps?u.timestamps.sendTime=s:u.timestamps=t.Measurement.newTimestamps(s);this._rpcWindow.postMessage(e)}},n}(),fr=function(){function n(){this._refCounts=[];this._totalCounts=0}return n.prototype.setCount=function(n,t){var i=this.getCount(n);return this._refCounts[n]=t,this._totalCounts+=t-i,this._totalCounts},n.prototype.getCount=function(n){return this._refCounts[n]||0},n.prototype.getTotalCount=function(){return this._totalCounts},n.prototype.clearRefCounts=function(){this._refCounts=[];this._totalCounts=0},n}(),er=function(){function n(){this._refCounts={};this._totalRefCounts=tr(0)}return n.prototype._getRefCountSet=function(n,t){var i=this._refCounts[n];return!i&&t&&(this._refCounts[n]=i=new fr),i},n.prototype.setRefCount=function(n,t,i){var f=this._getRefCountSet(n,!0),r=f.getTotalCount(),u=f.setCount(t,i);return this._totalRefCounts(this._totalRefCounts.peek()+u-r),u>r?r===0?0:1:u<r?u===0?2:3:4},n.prototype.clearRefCountsFrom=function(n){
var t=this._getRefCountSet(n,!1),i;t&&(i=t.getTotalCount(),t.clearRefCounts(),this._totalRefCounts(this._totalRefCounts.peek()-i))},n.prototype.getRefCountsFrom=function(n){var t=this._getRefCountSet(n,!1);return t?t.getTotalCount():0},Object.defineProperty(n.prototype,"totalRefCounts",{get:function(){return this._totalRefCounts},enumerable:!0,configurable:!0}),n}(),or=0,si=function(n){function t(){n.call(this,""+or++)}return __extends(t,n),t}(w);t.AcquireWindowResult=si;hi=function(){function n(n,t,i,r,u){this._windowUnloadTimeoutHandle=0;this._windowId=n;this._routeWindowSetter=t;this._clearRefCountsFunc=i;this._sendShutdownMessage=r;this._loadWindowFunc=u}return n.prototype.isAlive=function(){return this._windowUnloadTimeoutHandle?!1:!!this._currentWindow},n.prototype.setWindowLoaded=function(n){var f=this,e;if(n)if(this._currentWindow)this._windowUnloadTimeoutHandle!==0&&(v.clearTimeout(this._windowUnloadTimeoutHandle),this._windowUnloadTimeoutHandle=0);else{try{this._currentWindow=
this._loadWindowFunc(this._windowId)}catch(o){e=o}if(this._currentWindow){this._currentWindow.onDispose(function(){f._currentWindow=i;var n=f._windowId;f._sendShutdownMessage(n,void 0);f._routeWindowSetter.setRouteWindow(n,i);v.clearTimeout(f._windowUnloadTimeoutHandle);f._windowUnloadTimeoutHandle=0;f._clearRefCountsFunc({windowId:n,reason:"The window '"+n+"' was garbage collected or forcibly terminated.",callStack:r})});this._routeWindowSetter.setRouteWindow(this._windowId,this._currentWindow)}else this._clearRefCountsFunc({windowId:this._windowId,reason:li(e,"Fail to load window '"+this._windowId+"'."),callStack:e&&e.stack})}else!n&&this._currentWindow&&this._windowUnloadTimeoutHandle===0&&(this._windowUnloadTimeoutHandle=v.setTimeout(function(){u(f._currentWindow)},t.timeToDelayWindowUnload))},n}();ci=function(){function n(n,t,i,r){var u=this;this._refCounts={};this._knownWindows=[f];this._loadableWindows={};this._clearRefCountsFunc=function(n){c(u._knownWindows,function(t){var f=n.
windowId,i=u.getWindowRefCounts(t,!1),r=u.getWindowRefCounts(f,!1);(r&&r.getRefCountsFrom(t)>0||i&&i.getRefCountsFrom(f)>0)&&u._sendResetMessage(t,n);r&&r.clearRefCountsFrom(t);i&&i.clearRefCountsFrom(f)})};this._routeWindowSetter=n;this._sendShutdownMessage=i;this._sendResetMessage=t;this._loadWindowFunc=r}return n.prototype._getOrCreateLoadableWindow=function(n){var t=this._loadableWindows[n];return n===f||t||(t=new hi(n,this._routeWindowSetter,this._clearRefCountsFunc,this._sendShutdownMessage,this._loadWindowFunc),this._loadableWindows[n]=t,l(this._knownWindows,n)),t},n.prototype.setRefCount=function(n,t){var r=t.target,u=this.getWindowRefCounts(r,!0).setRefCount(n,t.kind,t.value),i=this._getOrCreateLoadableWindow(r);return i&&(t.isActivating&&!i.isAlive()||u===2&&i.isAlive())&&this._refreshWindowsLoadedState(),u},n.prototype.getWindowRefCounts=function(n,t){var i=this._refCounts[n];return!i&&t&&(this._refCounts[n]=i=new er),i},n.prototype._refreshWindowsLoadedState=function(){for(
var e=this,n={},t=[f],o=Object.keys(this._loadableWindows),s=o,i,u;t.length>0;)i=[],u=[],c(t,function(t){n[t]=r;c(s,function(f){var o;e.getWindowRefCounts(f,!0).getRefCountsFrom(t)>0?(n[t]=r,o=i):o=u;l(o,f)})}),t=i,s=u;c(o,function(t){e._loadableWindows[t].setWindowLoaded(n.hasOwnProperty(t))})},n}();t.invokeWithContext=rt;ct=function(){function n(n,t,i){var r=this,u,e;this._routedMessageClients=[];this._routedMessageRelay=new oi(function(n,t){var i={callStack:ni(),routeInstanceIndex:0,destWindowId:n,srcWindowId:r._localWindowId,data:t},u;r._localWindowId===n?r._routedMessageRelay.handleMessage(t,i):(u=r._localWindowId===f?n:f,r._baseDispatcher.sendMessage(u,i))});this.raiseRemoteException=this._routedMessageRelay.registerHandler(2,function(n){var t=h.createRpcException(n);throw t;});this._baseDispatcher=new lt(i);this._localWindowId=n;u=this._routedMessageRelay.registerHandler(0,function(n,t){t.srcWindowId===f&&c(r._routedMessageClients,function(i){i.handleResetMessage(n,t)})});e=this.
_routedMessageRelay.registerHandler(1,function(n,t){t.srcWindowId===f&&(c(r._routedMessageClients,function(n){n.handleShutdownMessage(t)}),h.Log.flush(),h.Log.disable())});t&&(this._shellRefCounter=new ci(this._baseDispatcher,u,e,t));this._sendRefCount=this._routedMessageRelay.registerHandler(3,function(n,t){r._shellRefCounter?r._shellRefCounter.setRefCount(t.srcWindowId,n):o.badRefCount()})}return n.prototype.handleMessage=function(n,t){var e=this,i=t.getRemoteId(),u=n.srcWindowId,r;if(i!==f&&i!==u){et.error("["+nt+"] Message from route to '"+i+"' specifies an invalid window ID '"+u+"'.",1);return}n.routeInstanceIndex+=t.getRemoteInstanceIndex();r=n.destWindowId;r===this._localWindowId?(n.routeInstanceIndex+=t.getLocalInstanceIndex(),rt(n,function(){return e._routedMessageRelay.handleMessage(n.data,n)})):this._baseDispatcher.sendMessage(r,n)},n.prototype.getTotalRefCounts=function(n){return this._shellRefCounter.getWindowRefCounts(n,!0).totalRefCounts},n.prototype.getLocalWindowId=function(
){return this._localWindowId},n.prototype.getRoutedMessageRelay=function(){return this._routedMessageRelay},n.prototype.createClient=function(n,t){var i=new n(this,t);return l(this._routedMessageClients,i),i},n.prototype.setRefCount=function(n,t,i,r){var u={target:n,kind:t,isActivating:i,value:r};this._shellRefCounter?this._shellRefCounter.setRefCount(f,u):this._sendRefCount(f,u)},n.prototype.start=function(){this._baseDispatcher.start(this)},n.prototype.dispose=function(){u(this._baseDispatcher)},n}();t.RoutedMessageDispatcher=ct;lt=function(){function n(n){var t=this,u;this._routes={};this._preStartReceiveBuffer=[];this._eventHandler=function(n){var i,r;t._window.Object&&(i=n.data,i&&i.signature===ot&&(r=t._preStartReceiveBuffer,r?l(r,{data:i,origin:n.origin,source:n.source}):t._handleMessage(n)))};var i=n.hostWindow,r=n.parentWindow,e=n.parentTrustedOrigin;this._window=i;i.addEventListener("message",this._eventHandler);r!==i&&e&&(u=this._registerRoute(!0,f),u.setWindow(new st({window:
r,source:r,trustedHost:n.parentTrustedOrigin,initializationFunc:void 0})))}return n.prototype.getRoute=function(n){return this._routes[n]},n.prototype.sendMessage=function(n,t){var i=this._routes[n];if(i)return i.send(t)},n.prototype.start=function(n){var i,t,u,f;if(this._preStartReceiveBuffer||o.alreadyStarted(),this._routedMessageMultiplexer=n,this._preStartReceiveBuffer)for(i=this._preStartReceiveBuffer,t=0,u=i.length;t<u;t++)f=i[t],this._handleMessage(f);this._preStartReceiveBuffer=r},n.prototype.setRouteWindow=function(n,t){var i=this._routes[n];i||(i=this._registerRoute(!1,n));i.setWindow(t)},n.prototype.dispose=function(){this._window.removeEventListener("message",this._eventHandler)},n.prototype._registerRoute=function(n,t){var r=this,i;return this._routes[t]&&o.routeExists(t),i=new ur(n,t,function(n){r._routedMessageMultiplexer.handleMessage(n,i)}),this._routes[t]=i,i},n.prototype._handleMessage=function(n){var t=n.data,r=t.originId,i;r?(i=this._routes[r],i&&i.handleMessage(n.
source,n.origin,t)):nr(this._routes,function(i,r){r.handleMessage(n.source,n.origin,t)})},n}();t.WindowMessageDispatcher=lt;var hr=function(){function n(){this._filters=[]}return n.prototype.register=function(n){var i=this,t;return this._filters.indexOf(n)>=0&&o.callbackRegistered(),l(this._filters,n),t=!1,{dispose:function(){t||(t=!0,i._filters.remove(n))}}},n.prototype.applyFilters=function(n,t){this._filters.concat(t).reduce(function(t,i){return t?t.then(function(){return i(n)}):i(n)},r)},n}(),cr=function(){function n(n,t){this._name=n;this._options=t}return n.prototype.invoke=function(n,i,r,f){var d=this,g=new gi,h=i.srcWindowId,c=new a.TriggerableLifetimeManager,e=this._options,b=s.makeArray(e.allowedOrigin),nt=e.handler||function(){},l=function(n,r){r===void 0&&(r=!0);u(c);n=n||{};var e=d._name,h=li(n,"Failed to complete the RPC call for '"+e+"'"),o=typeof n.stack=="string",s=t.createCallStack(o?n.stack:"",i,e);if(f(h,s),o&&(n.stack=s),r)throw n;},v,k,o,y,w;b.length&&b.indexOf(h)===
-1&&l("The origin window '"+h+"' is not allowed to access the endpoint name '"+this._name+"'.",!1);try{v=t.Measurement.getTimestamp();k=i.timestamps||(i.timestamps=t.Measurement.newTimestamps(v));k.tag=this._name;o=nt(n,i,c);y=function(n){(e.onSuccess||r)(sr(n,c),e,r);t.Measurement.markOperationEnd(t.Measurement.ENDPOINT_INVOKED,v)};Q.isPromiseAlike(o)?Q(o).then(function(n){rt(i,function(){y(n)})},l):y(o)}catch(tt){l(tt)}w=g.millisecondsElapsed;w>t.minTraceDurationInMs&&p.trace({source:ii,action:"InvokeEndpoint",name:this._name,data:{srcExtension:h},actionModifier:p.ActionModifier.Complete,duration:w})},n}(),ai=function(){function n(n){this._endPoints={};this._endPointDeferred={};this._endPointFilterManager=n}return n.prototype.registerEndPoint=function(n,t){if(this._endPoints[n])o.endpointExists(n);else{var i=new cr(n,t),r=this._endPointDeferred[n];this._endPoints[n]=i;r&&(r.resolve(i),delete this._endPointDeferred[n])}},n.prototype.invokeEndPoint=function(n,t,i,r,u){var f=this;this._endPointFilterManager.
applyFilters(n,function(){var o=f._endPoints[n],e;o?o.invoke(t,i,r,u):(et.verbose("["+nt+"] Attempted to invoke endpoint '"+n+"' but it is not registered. RPC call has been blocked until endpoint becomes registered."),e=f._endPointDeferred[n],e||(e=Q.defer(),f._endPointDeferred[n]=e,Q.timeout(e.promise,tt,"["+nt+"] Attempted to invoke endpoint '"+n+"' from '"+i.srcWindowId+"' but it is not registered after '"+tt+"'ms. The call was made in:\r\n'"+i.callStack+"'").catch(function(n){et.error(n)})),e.promise.then(function(n){rt(i,function(){return n.invoke(t,i,r,u)})}))})},n}(),vi="["+nt+"]: An RPC call to '{0}' in '{1}' timed out",lr=vi+" after '{3}'ms. The call was made in:\r\n'{2}'";t.errorIsRpcTimeout=ar;at=function(){function n(n,t,i){this._requestIdCounter=0;this._pendingRpcCall=new kt;this._destination=n;this._refCounter=t;this._kind=i}return n.prototype.getDestinationId=function(){return this._destination},n.prototype._setRefCount=function(n){this._refCounter.setRefCount(this._destination,
this._kind,n,this._pendingRpcCall.count)},n.prototype.getMetadata=function(n){return this._pendingRpcCall.getValue(n)},n.prototype.create=function(n,t,i){var u=this,f=Q.defer(),e=ni(),r=this._requestIdCounter+++"",o=new Date,s=Q.timeout(f.promise,tt,lr.format(n,this._destination,"{requestid: "+r+", creationTime: "+o+"}\n"+e,tt));return this._pendingRpcCall.setValue(r,{destinationId:this._destination,creationCallStack:e,creationTime:o,returnValue:f,returnCallback:i,telemetryContext:g.getState()}),this._setRefCount(!0),t(r),s.finally(function(){Q.nextTick(function(){u._pendingRpcCall.removeValue(r);u._setRefCount(!1)})})},n.prototype.resolve=function(n,t){var i=this._pendingRpcCall.getValue(n);i&&(i.returnCallback&&i.returnCallback(t),i.returnValue.resolve(t))},n.prototype.reject=function(n,t,i){var u=this._pendingRpcCall.getValue(t),f;u&&(f=h.createRpcException({reason:i.reason,callStack:i.callStack||u.creationCallStack}),u.returnCallback&&u.returnCallback(r),u.returnValue.reject(f))},n.
prototype.handleResetMessage=function(n,t){var i=this;c(this._pendingRpcCall.keys,function(r){i.reject(t.destWindowId,r,n)})},n}(),function(n){var t=function(){function n(n,t){var i=this,r;this._targetWindowContext={};r=n.getRoutedMessageRelay();this._clientContext=n;this._endPoints=t;this._sendInvokeFunc=r.registerHandler(4,function(n,t){var r=t.srcWindowId,f=n.requestId;i._endPoints.invokeEndPoint(n.name,n.arg,t,function(n){i._sendRpcResolveFunc(r,{pendingRequestId:f,successValue:n.getValue()});u(n)},function(n,t){i._sendRpcRejectFunc(r,{pendingRequestId:f,reason:n,callStack:t})})});this._sendRpcResolveFunc=r.registerHandler(5,function(n,t){i._getOrCreateTargetWindowContext(t.srcWindowId).resolve(n.pendingRequestId,n.successValue)});this._sendRpcRejectFunc=r.registerHandler(6,function(n,t){i._getOrCreateTargetWindowContext(t.srcWindowId).reject(t.destWindowId,n.pendingRequestId,n)})}return n.prototype._getOrCreateTargetWindowContext=function(n){var t=this._targetWindowContext[n];return t||
(this._targetWindowContext[n]=t=new at(n,this._clientContext,3)),t},n.prototype._invoke=function(n,t,i,r){var u=this;return this._getOrCreateTargetWindowContext(t).create(n,function(i){u._sendInvokeFunc(t,{requestId:i,name:n,arg:r})})},n.prototype.invokeAction=function(n,t,i){return this._invoke(n,t,!1,i)},n.prototype.invokeFunc=function(n,t,i){return this._invoke(n,t,!0,i)},n.prototype.handleResetMessage=function(n,t){this._getOrCreateTargetWindowContext(n.windowId).handleResetMessage(n,t)},n.prototype.handleShutdownMessage=function(n){this._endPoints.invokeEndPoint(ri,r,n,it,it)},n}();n.StatelessRpcClient=t}(vt||(vt={})),function(n){function e(n,i,r,u,f){p.trace({timestamp:r,extension:t.messageContext.srcWindowId,source:ii,action:n,name:u,actionModifier:p.ActionModifier.Complete,data:f,duration:r-i})}var l=y.ProxiedObservables.Internal,h=a.PoV2,v=s.isFeatureEnabled("pov2"),k=h.createPoManager,d=function(){function n(n){this._value=n}return n.prototype.getValue=function(){return this.
_value},n.prototype.dispose=function(){this._value=i},n}(),nt=0,c=function(n){function t(i,r){n.call(this,i);this._metadata=r;this._id=""+nt++;t.trackedObjects.setValue(this._id,this)}return __extends(t,n),t.prototype.getMetadata=function(){return this._metadata},t.trackedObjects=new b,t}(w);n.ProxiedObject=c;var f={begin:NaN,end:NaN},tt=function(){function n(i,r,f,e,o,s){var h=this,l;this._producedObjects=new b;this._acquiredObjects=new b(function(n){h._clientContext&&h._clientContext.setRefCount(h._remoteWindowId,1,!1,n)});this._remoteWindowId=f;this._pendingObjectRequests=o;this._clientContext=i;this._senderContainer=new d(s);l=[r,f,e].join("-");this._messageRelay=new oi(function(n,t){var i=h._senderContainer.getValue();i&&i(t)});this._proxiedObjectManager=n.createProxiedObjectManager(this,l,r,f);this._sendAcquireObjectResponse=this._registerSymmetricAction(4,function(n){var i=n.requestId,r=h._pendingObjectRequests.getMetadata(i),f=g.usingState(function(){var i=t.Measurement.getTimestamp(
),r=h._proxiedObjectManager.deserializeObject(n.object);return t.Measurement.markOperationEnd(t.Measurement.OBJECT_DESERIALIZE,i),h._traceAcquireObjectTelemetry(),r},r&&r.telemetryContext),u=new c(f,r);u.onDispose(function(){h._proxiedObjectManager.releaseObject(f);h._sendReleaseRootObject(i)});h._acquiredObjects.setValue(i,u);h._pendingObjectRequests.resolve(i,u)});this._sendReleaseRootObject=this._registerSymmetricAction(5,function(n){u(h._producedObjects.getValue(n))})}return n.createProxiedObjectManager=function(n,i,r,u){var e,f;return v?e=k(i,function(i){n._clientContext.raiseRemoteException(u,{reason:i,callStack:t.getCurrentCallStack()})},n._registerSymmetricAction(0,function(n){var t=h.getMetadata(n);g.usingState(function(){e.applyChange(n)},t)}),n._registerSymmetricAction(1,function(n){e.applyPromiseEvent(n)}),n._registerSymmetricAction(2,function(n){e.invokeFunction(n)}),n._registerSymmetricAction(3,function(n){e.applyRelease(n)}),r,u):f=new l.ProxiedObjectManager(i,function(i)
{n._clientContext.raiseRemoteException(u,{reason:i,callStack:t.getCurrentCallStack()})},n._registerSymmetricAction(0,function(n){var t=f.metadataCache.getMetadataById(n.id);g.usingState(function(){f.applyChange(n)},t&&t.getCreationContext())}),n._registerSymmetricAction(1,function(n){f.applyPromiseEvent(n)}),n._registerSymmetricAction(2,function(n){f.invokeFunction(n)}),n._registerSymmetricAction(3,function(n){f.applyRelease(n)}))},n.prototype._traceAcquireObjectTelemetry=function(){var w=t.Measurement.VIEW_MODEL_CTOR,b=t.Measurement.OBJECT_DESERIALIZE,k=t.Measurement.ON_INPUTS_SET_CALLED,d=t.Measurement.ENDPOINT_INVOKED,y=gt.getBladeContext(),p=gt.getPartContext(),n=t.messageContext.initiatingTimestamps,o=t.messageContext.timestamps,a=n.operations,g=o.operations,v=a[k]||f,i=a[w]||f,h=i!==f,l=h?"VMAcquired":"ObjectAcquired",s="",r=n.tag||"",u=a[d]||f,c=g[b]||f,nt={viewModelName:n.tag,requestQueueTime:n.sendTime-n.enqueueTime,requestPostTime:n.receiveTime-n.sendTime,invocationTime:u.end-
u.begin,vmCtorCallDelay:h?i.begin-u.begin:0,vmCtorCall:h?i.end-i.begin:0,vmCtorReturnDelay:h?u.end-i.end:0,requestProcessMsgTime:u.begin-n.receiveTime,onInputsSetCallTime:v!==f?v.end-v.begin:0,responseWaitTime:u.end-o.enqueueTime,responseQueueTime:o.sendTime-u.end,responsePostTime:o.receiveTime-o.sendTime,responseProcessMsgTime:c.begin-o.receiveTime,objectDeserializeTime:c.end-c.begin};y?(l="BladeVMAcquired",s="Blade",r=y.id):r.endsWith("Command")||r.endsWith("CommandViewModel")?(l="CommandVMAcquired",s="Command"):p&&(l="PartVMAcquired",r=p.id,s="Part");e(l,n.enqueueTime,c.end,r,nt);h&&(e("Ext"+s+"VMCtorDelay",n.enqueueTime,n.sendTime,r),e("Ext"+s+"VMCtor",i.begin,i.end,r),e("Ext"+s+"VMAcquired",i.begin,c.end,r))},n.prototype._registerSymmetricAction=function(n,t){var i=this._messageRelay.registerHandler(n,t);return function(n){i(r,n)}},n.prototype.handleAcquireObjectRequest=function(n,t,i){this._producedObjects.setValue(n,i);var r=0;t.allowRemoteChanges&&(r|=1);this._sendAcquireObjectResponse(
{requestId:n,object:this._proxiedObjectManager.serializeObject(i.getValue(),{shouldFullFreeze:!1,desiredMetadataFlags:r})})},n.prototype.handleEvent=function(n){this._messageRelay.handleMessage(n,r)},n.prototype.dispose=function(){u(this._acquiredObjects,this._producedObjects,this._proxiedObjectManager,this._senderContainer);this._clientContext=i},n}(),rt=function(){function n(n,t,i,r){var u=this;this._routeInstanceIndex=0;this._receiveSequenceIndex=0;this._transmitSequenceIndex=0;this._pendingObjectRequests=new at(n,t,2);this._clientContext=t;this._sendAcquireObjectRequest=i;this._sendConnectionMessage=function(t){r(n,{sequenceIndex:u._transmitSequenceIndex++,data:t})}}return n.prototype.getRemoteId=function(){return this._pendingObjectRequests.getDestinationId()},n.prototype.getPoConnection=function(n,t){var u=t>=0,r;return this._currentConnection&&t!==this._receiveSequenceIndex&&this._routeInstanceIndex!==n.routeInstanceIndex&&(this._resetConnection(),this._sendConnectionMessage(i)),
t!==0&&u||this._currentConnection||(this._routeInstanceIndex=n.routeInstanceIndex,this._currentConnection=new tt(this._clientContext,n.destWindowId,n.srcWindowId,n.routeInstanceIndex,this._pendingObjectRequests,this._sendConnectionMessage)),t===this._receiveSequenceIndex?(this._receiveSequenceIndex++,r=this._currentConnection):u||(r=this._currentConnection),r},n.prototype.acquireObject=function(n,t,i){var r=this;return this._pendingObjectRequests.create(n,function(i){r._sendAcquireObjectRequest(r.getRemoteId(),{requestId:i,name:n,arg:t})},i)},n.prototype.handleAcquireObjectResponseError=function(n,t){this._pendingObjectRequests.reject(n,t.pendingRequestId,t)},n.prototype.handleResetMessage=function(n,t){this._pendingObjectRequests.handleResetMessage(n,t);this._resetConnection()},n.prototype._resetConnection=function(){u(this._currentConnection);this._currentConnection=i;this._transmitSequenceIndex=0;this._receiveSequenceIndex=0},n}(),ut=function(){function n(n,t){var i=this,r;this._targetWindowContexts=
{};r=n.getRoutedMessageRelay();this._endPoints=t;this._routedMessageClientContext=n;this._sendAcquireObjectRequest=r.registerHandler(7,function(n,t){var r=i._getOrCreatePoConnection(t,-1);i._endPoints.invokeEndPoint(n.name,n.arg,t,function(t,i){r.handleAcquireObjectRequest(n.requestId,i,t)},function(r,u){i._sendAcquireObjectResponseError(t.srcWindowId,{pendingRequestId:n.requestId,reason:r,callStack:u})})});this._sendAcquireObjectResponseError=r.registerHandler(8,function(n,t){i._getOrCreateTargetWindowContext(t.srcWindowId).handleAcquireObjectResponseError(t.destWindowId,n)});this._sendConnectionMessage=r.registerHandler(9,function(n,t){var r=i._getOrCreatePoConnection(t,n.sequenceIndex),u=n.data;r&&u&&r.handleEvent(u)})}return n.prototype._getOrCreateTargetWindowContext=function(n){n===this._routedMessageClientContext.getLocalWindowId()&&o.sameWindow();var t=this._targetWindowContexts[n];return t||(this._targetWindowContexts[n]=t=new rt(n,this._routedMessageClientContext,this._sendAcquireObjectRequest,
this._sendConnectionMessage)),t},n.prototype._getOrCreatePoConnection=function(n,t){return this._getOrCreateTargetWindowContext(n.srcWindowId).getPoConnection(n,t)},n.prototype.acquireObject=function(n,t,i,r){return this._getOrCreateTargetWindowContext(t).acquireObject(n,i,r)},n.prototype.handleResetMessage=function(n,t){this._getOrCreateTargetWindowContext(n.windowId).handleResetMessage(n,t)},n.prototype.handleShutdownMessage=function(n){this._endPoints.invokeEndPoint(ri,r,n,it,it)},n}();n.ProxiedObjectClient=ut}(ut||(ut={}));t.dumpTrackedObjects=vr,function(n){var t=function(){function n(n){this._targetWindowContext={};this._routedMessageClientContext=n}return n.prototype._getOrCreateTargetWindowContext=function(n){var i=this,t=this._targetWindowContext[n];return t||(this._targetWindowContext[n]=t=new b(function(t,r){i._routedMessageClientContext.setRefCount(n,0,r,t)})),t},n.prototype.acquireWindow=function(n,t){var f=this._getOrCreateTargetWindowContext(n),r=0,i=new si;i.onDispose(function(
){v.clearTimeout(r)});return typeof t=="number"&&(t<0&&o.badDuration(),r=v.setTimeout(function(){u(i)},t*1e3)),f.setValue(i.getValue(),i),i},n.prototype.handleResetMessage=function(n){var t=n.windowId;u(this._targetWindowContext[t])},n.prototype.handleShutdownMessage=function(){},n}();n.WindowAcquirerClient=t}(yt||(yt={}));wt=function(){function n(){this.reset()}return n.prototype.registerRpcEndPoint=function(n,t){yi(t);this._rpcEndPoints.registerEndPoint(n,t)},n.prototype.registerObjectFactory=function(n,t){yi(t);this._poEndPoints.registerEndPoint(n,t)},n.prototype._assertReady=function(){this._dispatcher||o.notStarted()},n.prototype.invokeRpc=function(n,t,i){this._assertReady();var r=pt(t);return this._rpcClient.invokeAction(n,r,i)},n.prototype.acquireObject=function(n,t,i,r){this._assertReady();var u=pt(t);return this._poClient.acquireObject(n,u,i,r)},n.prototype.getTotalRefCountTo=function(n){return this._assertReady(),this._dispatcher.getTotalRefCounts(n)},n.prototype.acquireWindow=
function(n,t){return this._assertReady(),this._windowAcquirer.acquireWindow(n,t)},n.prototype.registerEndPointFilter=function(n){return this._endPointFilterManager.register(n)},n.prototype.start=function(n){this._dispatcher=n;this._rpcClient=n.createClient(vt.StatelessRpcClient,this._rpcEndPoints);this._poClient=n.createClient(ut.ProxiedObjectClient,this._poEndPoints);this._windowAcquirer=n.createClient(yt.WindowAcquirerClient,null);n.start()},n.prototype.reset=function(){u(this._dispatcher);this._dispatcher=i;this._endPointFilterManager=new hr;this._rpcEndPoints=new ai(this._endPointFilterManager);this._poEndPoints=new ai(this._endPointFilterManager);this._rpcClient=i;this._poClient=i;this._windowAcquirer=i},n}();t.ClientImpl=wt;k=new wt;a.GlobalStateManager.register(k);t.start=yr;t.client=k;t.internalClient=k;d=function(){function n(n){this._name=n}return n.prototype.getName=function(){return this._name},n}();t.EndPointDefinition=d;bi=function(n){function t(){n.apply(this,arguments)}
return __extends(t,n),t.prototype.register=function(n,t,i){pi(this,n,t,i)},t.prototype.invoke=function(n,t,i){return wi(this,n,t,i)},t}(d);t.ActionEndPointDefinition=bi;ki=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.register=function(n,t,i){pi(this,n,t,i)},t.prototype.invoke=function(n,t,i){return wi(this,n,t,i)},t}(d);t.FuncEndPointDefinition=ki;di=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.registerObjectFactory=function(n,t){n.registerObjectFactory(ft(this),t)},t.prototype.acquireObject=function(n,t,i,r){return n.acquireObject(ft(this),t,i,r)},t}(d);t.ProxiedObjectTypeDefinition=di})(i=t.Internal||(t.Internal={}))})(i=t.Rpc||(t.Rpc={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=MsPortalFx.Base.Rpc.Internal,r=n.Constants.RpcMethods;t.extensionStatusEndPoint=new i.ActionEndPointDefinition(r.notifyExtensionStatus)})(t=n.Extension||(n.Extension={})
)}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(t){"use strict";function s(n,t){return{type:n.type,data:n.data,options:$.extend({},n.options,{badge:t})}}function h(n,t){return{type:n.type,data:n.data,options:t}}function i(n){return function(t){return f(n,t)}}function c(n){return{type:2,data:n}}function u(t,r){n.extendStringMapIntoMap(t,r,function(n){return i(n)})}function r(n){return function(){return f(n,e)}}var o=n.Services.Image,f=o.newImageData,l,a,v,y,p,w,e,b;t.CustomImageWithBadge=s;t.CustomImageWithOptions=h;t.ImageUri=c;u(n.Base.Images,{Add:4,AddBoxed:300,AddTeamMember:82,AddTile:318,Attachment:83,AvatarDefault:84,AvatarUnknown:85,AzureQuickstart:161,Backlog:86,Blank:0,Book:10,Canceled:74,Check:12,Clock:75,Clone:76,Code:94,Collapse:298,Commit:96,Commits:210,Connect:132,Customize:296,Delete:17,Disable:98,Disabled:18,Discard:19,Disconnect:133,Download:174,Edit:99,Ellipsis:176,Error:77,Expand:299,Favorite:101,Feedback:228,File:102,Filter:22,ForPlacementOnly:
177,Gear:103,GetMoreLicense:104,GetStarted:105,Go:108,Guide:218,Hamburger:313,HeartPulse:211,History:109,Hyperlink:31,Inactive:110,LaunchCurrent:227,Link:35,Lock:37,Log:112,Monitoring:193,Paused:79,Pending:43,Person:44,PersonWithFriend:45,Pin:46,Plus:297,Postpone:114,PowerUp:216,Properties:48,Publish:162,Question:49,Queued:80,Redo:157,Refresh:51,Release:115,Request:116,Retain:117,Save:52,Signout:226,SmileyHappy:319,SmileyNeutral:320,SmileySad:321,Start:61,Stop:62,Subtract:65,Support:219,Swap:66,Tasks:119,Tools:159,TrendDown:204,TrendUp:205,Triangle:120,Unlock:69,Unpin:70,Upload:121,Variables:206,Warning:317,Wrench:160,Info:225,AddAlternate:259,ArrowDown:260,ArrowLeft:261,ArrowRight:262,ArrowUp:263,CaretDown:286,CaretUp:287,Columns:264,Diagnostics:279,FolderAlternate:265,GearAlternate:249,Globe:285,InstallVisualStudio:111,Key:266,Mail:267,Message:268,Query:270,SaveAll:271,Search:248,Star:283,Tag:239,Tags:246,Tour:275,Undo:272,WebHostingPlan:236});t.GitLogo=i(106);t.GitLogoBox=i(107);t.VisualStudio=
i(123);t.VisualStudioLogoBox=i(124),function(){u(n.Base.Images.Logos,{Bitbucket:181,BitbucketBox:182,Channel9:277,CodePlex:183,CodePlexBox:184,Dropbox:185,DropboxBox:186,ExternalRepositoryBox:212,Git:187,GitBox:188,GitHub:189,GitHubBox:190,Redis:229,StackOverflow:278,VisualStudio:191,VisualStudioBox:192,Microsoft:220,MicrosoftSquares:258})}(l=t.Logos||(t.Logos={})),function(n){function r(){return{type:328,options:{customClass:t}}}function u(){return{type:329,options:{customClass:t}}}n.EllipsisSquare=i(295);var t="msportalfx-svg-rotate360";n.Spinner=r;n.Loader=u}(a=t.Loading||(t.Loading={})),function(n){n.Happy=i(242)}(v=t.Emoticon||(t.Emoticon={})),function(n){u(n,{ActiveDirectory:3,ApiManagement:301,AppInsights:135,Automation:164,AvailabilitySet:136,Backlog:87,Backup:137,BillingHub:92,BizTalk:302,BlobBlock:231,BlobPage:232,Branch:240,Browser:138,Bug:11,Builds:93,Cache:230,Cdn:303,Certificate:194,Chart:241,ClearDBDatabase:178,Clock:195,CloudService:13,Code:95,Commit:97,Controls:14,ControlsHorizontal:
196,Counter:250,Cubes:15,CustomDomain:139,Database:16,Discs:244,ErrorIcon:274,EventHub:304,Extensions:237,DevConsole:213,Download:20,File:254,Files:255,FolderBlank:23,FolderCube:24,FolderWebsite:25,Ftp:26,Gear:27,Globe:140,GlobeError:222,GlobeSuccess:223,GlobeWarning:224,Grid:28,Guide:29,Heart:30,Image:256,Info:32,InputOutput:197,IpAddress:141,JourneyHub:33,Key:34,LaunchPortal:142,LoadBalancer:143,LoadTest:144,Location:36,Log:145,LogDiagnostics:146,LogStreaming:147,ManagementPortal:276,Media:38,MediaFile:39,Mobile:40,MobileEngagement:305,Module:198,Monitoring:41,NetworkInterfaceCard:148,Notification:42,OperationalInsights:306,Power:291,Powershell:47,PowerUp:199,ProcessExplorer:251,Preview:294,ProductionReadyDb:214,RemoteApp:307,ResourceDefault:149,ResourceGroup:179,ResourceGroupList:208,ResourceLinked:150,ResourceList:207,ResourceRole:288,Scale:118,Scheduler:308,Search:53,SearchGrid:54,ServerFarm:151,ServiceBus:309,SiteRecovery:310,SqlDatabase:165,SqlDataBaseServer:152,SSD:280,SslCustomDomains:
60,Storage:63,StorageAzureFiles:290,StorageContainer:233,StorageQueue:234,Store:64,StorSimple:311,StreamAnalytics:312,Support:200,Table:235,TeamProject:67,TfsVcRepository:153,Toolbox:68,TrafficManager:166,Versions:203,VirtualMachine:71,VirtualNetwork:245,WebEnvironment:167,WebHosting:154,WebJobs:168,Website:72,WebsitePower:73,WebsiteStaging:155,WebSlots:215,WebTest:156,Workflow:180});n.PolyTrafficManagerDisabled=i(201);n.PolyTrafficManagerEnabled=i(202);n.TrafficManagerDisabled=i(201);n.TrafficManagerEnabled=i(202);n.QuickStart=i(161)}(y=t.Polychromatic||(t.Polychromatic={})),function(t){u(n.Base.Images.Shell,{Add:325,ArrowWideUp:282,ArrowWideDown:281,Chevron:158,Close:55,Collapse:56,CornerCheck:221,Customize:314,DefaultBlade:57,Dots:169,Filter:326,Fullscreen:323,Gear:247,HeaderDots:273,Maximize:58,Mini:322,Minimize:289,Pin:331,Restore:59,Save:330,Share:324,Trash:284,TrashOutline:327,TripleArrow:257});var r;(function(n){n.Home=i(127);n.Alerts=i(129);n.Journey=i(128);n.Browse=i(126);n.Billing=
i(92);n.Create=i(125)})(r=t.JumpBar||(t.JumpBar={}))}(p=t.Shell||(t.Shell={})),function(n){var t,r;n.Canceled=i(89);n.Critical=i(292);n.Disabled=i(90);n.Error=i(6);n.Failed=i(252);n.Info=i(78);n.None=i(7);n.Pending=i(88);n.Stopped=i(131);n.Success=i(8);n.Unknown=i(91);n.Warning=i(9),function(n){n.Critical=i(293);n.Error=i(170);n.Failed=i(253);n.Info=i(171);n.Stopped=i(175);n.Success=i(172);n.Unknown=i(209);n.Update=i(238);n.Warning=i(173)}(t=n.Outline||(n.Outline={})),function(n){n.Error=i(315);n.Info=i(316);n.Warning=i(317)}(r=n.Solid||(n.Solid={}))}(w=t.StatusBadge||(t.StatusBadge={}));e={isLogo:!0},function(n){n.CollectionPartWithRollup=r(1e3);n.CollectionSummary=r(1001);n.DonutChart=r(1002);n.DonutChartPartial=r(1003);n.Extensions=r(1004);n.GridWithMoreData=r(1005);n.Map=r(1006);n.MultiLineChartMultiTrendLine=r(1007);n.MultiScatterChart=r(1008);n.MultiStackedBarChart=r(1009);n.MutliLineChart=r(1010);n.PricingTier=r(1011);n.QuotaGauge=r(1012);n.ResourceMap=r(1013);n.SingleAreaChart=
r(1014);n.SingleAreaChartSingleThreshold=r(1015);n.SingleAreaChartSingleTrendline=r(1016);n.SingleBarChartLarge=r(1017);n.SingleBarChartSmall=r(1018);n.SingleLineChart=r(1019);n.SingleScatterChart=r(1020);n.SingleScatterSingleThreshold=r(1021);n.SingleValueGauge=r(1022);n.SplitBarChart=r(1023);n.StackedAreaChart=r(1024)}(b=t.PartGallery||(t.PartGallery={}))})(i=t.Images||(t.Images={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function i(n){var t=[];return r(n,function(n,i){t.push(i)}),t}var r=n.forEachKey,u=function(){function n(n){this._map={};this._capacity=n?n:0;this.clear()}return n.prototype.addOrUpdate=function(n,t,i){var r=this._getItem(n);return r?r.data=t:(this._map[n]={key:n,data:t,lastAccessed:this._lastAccessed++},this.count++,i||this.trim()),!r},n.prototype.contains=function(n){return!!this._getItem(n)},n.prototype.trim=function(n){var t,r;if(n===void 0&&(n=this._capacity),n<0)throw new Error("Capacity cannot be negative.");
else if(n>0&&n<this.count)for(t=i(this._map),t.sort(function(n,t){return t.lastAccessed-n.lastAccessed}),r=n;r<t.length;r++)this.remove(t[r].key)},n.prototype.getOrAdd=function(n,t){var r=this._getItem(n,!t),i;return r?i=r.data:(i=t(n),this.addOrUpdate(n,i)),i},n.prototype.get=function(n){var t=this._getItem(n);return t?t.data:null},n.prototype.remove=function(n){this._map[n]&&(delete this._map[n],this.count--)},n.prototype.clear=function(){this._map={};this.count=0;this._lastAccessed=0},n.prototype.getList=function(){var n=i(this._map);return n.sort(function(n,t){return t.lastAccessed-n.lastAccessed}),n.map(function(n){return n.data})},n.prototype.merge=function(n,t){var u=this,r=i(this._map).concat(i(n._map));r.sort(function(n,i){return t(i.data,n.data)});this.clear();r.forEach(function(n){u.addOrUpdate(n.key,n.data,!0)});this.trim()},n.prototype._getItem=function(n,t){var i=this._map[n];if(i)i.lastAccessed=this._lastAccessed++;else if(t)throw new Error("Unable to find item with key: '"+
n+"'.");return i},n}();t.LruMap=u})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";function ut(n){if(n.collectTelemetry){var t=Date.now();if(t-h>=rt)return h=t,new c(n)}}function ft(){h=0}function et(){p.client.registerRpcEndPoint(y.RpcMethods.networkTelemetry,{allowedOrigin:null,handler:function(n,t){u.trace({extension:t.srcWindowId,timestamp:n.timestamp,source:n.source,action:n.action,actionModifier:n.actionModifier,name:n.name,duration:n.duration,data:n.data,optional:n.optional})}})}function ot(n,t,u){var f=r.performance,o,e,c,s,h;if(f&&f.getEntriesByType&&f.timing){o=f.timing;e=o.navigationStart;n=n||f.getEntriesByType("resource");c=n.filter(function(n){return n.initiatorType==="link"||n.initiatorType==="script"}).map(function(n){var t=g.getUriAuthority(n.name,!1);return{host:t,entry:n,queueTime:ht(n)}}).reduce(function(n,t){var i=t.host;return n[i]=n[i]||[],n[i].push(t),n},{});
b(c,function(n,t){var u=k("domainLookupStart","domainLookupEnd",t),f=k("connectStart","connectEnd",t),r=st(t),o=t.reduce(function(n,t){var i=n.entry&&n.entry.duration||0;return t.entry.duration>=i?t:n},{});i("MaxHostDnsTime",u.entry.domainLookupStart,u.entry.domainLookupEnd,{epochAdjustment:e,data:u.entry,name:n});i("MaxHostConnectTime",f.entry.connectStart,f.entry.connectEnd,{epochAdjustment:e,data:f.entry,name:n});i("MaxHostTotalTime",o.entry.startTime,o.entry.responseEnd,{epochAdjustment:e,data:o.entry,name:n});i("MaxHostQueueTime",r.entry.responseEnd-r.queueTime,r.entry.responseEnd,{epochAdjustment:e,data:r.entry,name:n})});u||l(o);try{s=r.sessionStorage;h=t&&s.getItem(t);h&&(l(JSON.parse(h),!0),s.removeItem(t))}catch(a){it.warning(a)}}}function l(n,t){if(n=n||r.performance&&r.performance.timing,n){var u=t?"Initial":"";i(u+"DocumentNavigationTime",n.fetchStart,n.responseEnd,{data:n});i(u+"DocumentFirstByte",n.fetchStart,n.responseStart,{data:n});i(u+"DocumentDnsTime",n.domainLookupStart,
n.domainLookupEnd,{data:n});i(u+"DocumentUnloadTime",n.navigationStart,n.fetchStart,{data:n})}}function i(n,t,i,r){r=r||{};a({timestamp:Math.round(i+(r.epochAdjustment||0)),source:o,action:n,name:r.name,actionModifier:u.ActionModifier.Complete,duration:i-t,data:ct(r.data)})}function a(t){tt?u.trace(t):p.client.invokeRpc(y.RpcMethods.networkTelemetry,n.Base.Constants.Shell,t)}function k(n,t,i){return i.reduce(function(i,r){return d(n,t,r.entry)>=d(n,t,i.entry)?r:i},{})}function d(n,t,i){return!i||!i[n]||!i[t]?0:i[t]-i[n]}function st(n){return n.reduce(function(n,t){return n&&n.queueTime>t.queueTime?n:t},null)}function ht(n){return f(n.startTime,n.redirectStart)+f(n.redirectEnd,n.fetchStart)+f(n.fetchStart,n.domainLookupStart)+f(n.domainLookupEnd,n.connectStart)+f(n.connectEnd,n.requestStart)}function f(n,t){return n&&t?Math.max(0,t-n):0}function ct(n){for(var t={},i=n;i&&i!==Object;)Object.keys(i).forEach(function(n){t[n]=undefined}),i=Object.getPrototypeOf(i);return b(t,function(i){var
r=n[i];typeof r!="function"?t[i]=r:delete t[i]}),t}function lt(){a({source:o,action:"CdnIndex",name:String(w.cdn.index)})}var e=n.Base,v=e.Diagnostics,y=FxImpl.Constants,p=e.Rpc.Internal,u=v.Telemetry,g=e.Utilities,o="Framework",nt="NetworkPerformance",r=window,w=r.fx.environment,tt=w.extensionName===e.Constants.Shell,s=r.fx.getTimestamp,it=new v.Log("MsPortalFx/Base/Internal/Diagnostics/Net"),b=n.forEachKey,rt=3e5,h=0,c;t.tryCreateTelemetry=ut;t.resetTelemetryTimer=ft;c=function(){function n(n){this._settings=n;this._startTime=s()}return n.prototype.success=function(n){this._result(n,u.ActionModifier.Complete,s()-this._startTime)},n.prototype.error=function(n){this._result(n,u.ActionModifier.Cancel,s()-this._startTime)},n.prototype._result=function(n,t,i){var r=n.getResponseHeader("Content-Length"),u=r?parseInt(r,10):-1;a({timestamp:Date.now(),source:o,action:nt,actionModifier:t,name:this._settings.url,duration:i,data:{status:n.status,dataSent:this._size(this._settings.data),dataReceived:
u},optional:!0})},n.prototype._size=function(n){return n?typeof n=="string"?n.length:-1:0},n}();t.NetworkTelemetry=c;t.registerTelemetrySubmissionHandler=et;t.traceResourceDownloads=ot;t.traceDocumentNavigation=l;t.traceCdnIndex=lt})(i=t.Net||(t.Net={}))})(i=t.Diagnostics||(t.Diagnostics={}))})(i=t.Internal||(t.Internal={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function ti(){return c=(c+1)%10}var f=n,p=f.Helpers,s=FxImpl.Extension,r=f.Base,it=r.Rpc.Internal,rt=r.Internal.Diagnostics.Net,w=r.Utilities,o=p.Deferred,l=f.isUndefined,ut=f.isEmpty,b=ko.computed,ft=ko.observable,a=w.extend,k=window,u=k.fx.environment,i="x-ms-",et="Accept-Language",ot="Authorization",d="Cache-Control",v=i+"cache-tag",st=i+"effective-locale",ht=i+"extension-flags",ct=i+"failure-cause",lt=i+"force-login",at=i+"path-query",vt="Pragma",g=i+"client-request-id",yt=i+"client-session-id",pt=i+"version",wt=i+"version-mismatch",bt=i+"command-name",kt=60,dt=f.
getUniqueIdGenerator(),gt="Failed to get authorization token.",h=new r.Diagnostics.Log("MsPortalFx/Base/Base.Net"),nt=p.ajax,ni=!1,y=h.error.bind(h),tt=nt,c=-1,e,ii;(function(n){function fi(n){var i=n.getResponseHeader(vt),t;return i===ii?!0:(t=n.getResponseHeader(d)||"",t.indexOf(ii)>=0)?!0:!1}function e(n,t,i){l(n[t])&&(n[t]=i)}function ei(){s.getRuntime().disableAjaxServerVersionCheck()}function oi(n){n||h.error("setAjaxLogFunc: Invalid arg!");y=n}function si(n){tt=n||nt}function ri(n,t){n.contentType="application/json";n.data=JSON.stringify(t);n.type="POST"}function ci(n,t){return i.postJSON(n,t)}function li(n){return i.ajax(n)}function ai(n){return i.ajaxExtended(n)}function vi(){return i}function yi(n){return i.cachedAjax(n)}function pi(n){n&&delete n[v]}function wi(n,t){return a(n,{"x-ms-cache-tag":t})}function bi(n){i.initialize(u.version,n,u.extensionFlags,u.effectiveLocale,u.traceAjaxErrors)}function ki(){i.skipVersionCheck=!0}var hi,i;(function(n){n[n.Continue=100]="Continue";
n[n.SwitchingProtocols=101]="SwitchingProtocols";n[n.Ok=200]="Ok";n[n.Created=201]="Created";n[n.Accepted=202]="Accepted";n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation";n[n.NoContent=204]="NoContent";n[n.ResetContent=205]="ResetContent";n[n.PartialContent=206]="PartialContent";n[n.Ambiguous=300]="Ambiguous";n[n.MultipleChoices=300]="MultipleChoices";n[n.Moved=301]="Moved";n[n.MovedPermanently=301]="MovedPermanently";n[n.Found=302]="Found";n[n.Redirect=302]="Redirect";n[n.RedirectMethod=303]="RedirectMethod";n[n.SeeOther=303]="SeeOther";n[n.NotModified=304]="NotModified";n[n.UseProxy=305]="UseProxy";n[n.Unused=306]="Unused";n[n.RedirectKeepVerb=307]="RedirectKeepVerb";n[n.TemporaryRedirect=307]="TemporaryRedirect";n[n.BadRequest=400]="BadRequest";n[n.Unauthorized=401]="Unauthorized";n[n.PaymentRequired=402]="PaymentRequired";n[n.Forbidden=403]="Forbidden";n[n.NotFound=404]="NotFound";n[n.MethodNotAllowed=405]="MethodNotAllowed";n[n.NotAcceptable=406]="NotAcceptable";
n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired";n[n.RequestTimeout=408]="RequestTimeout";n[n.Conflict=409]="Conflict";n[n.Gone=410]="Gone";n[n.LengthRequired=411]="LengthRequired";n[n.PreconditionFailed=412]="PreconditionFailed";n[n.RequestEntityTooLarge=413]="RequestEntityTooLarge";n[n.RequestUriTooLong=414]="RequestUriTooLong";n[n.UnsupportedMediaType=415]="UnsupportedMediaType";n[n.RequestedRangeNotSatisfiable=416]="RequestedRangeNotSatisfiable";n[n.ExpectationFailed=417]="ExpectationFailed";n[n.UpgradeRequired=426]="UpgradeRequired";n[n.InternalServerError=500]="InternalServerError";n[n.NotImplemented=501]="NotImplemented";n[n.BadGateway=502]="BadGateway";n[n.ServiceUnavailable=503]="ServiceUnavailable";n[n.GatewayTimeout=504]="GatewayTimeout";n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported"})(n.HttpStatusCode||(n.HttpStatusCode={}));var p=n.HttpStatusCode,ui=3,ii="no-cache";n.disableAjaxServerVersionCheck=ei;n.setAjaxLogFunc=oi;n.setAjaxFunc=si,function(
n){function ei(n){return r.Net2.ajaxExtended(n)}function oi(){i=new n.AjaxCaller}var b,nt,vt;n.ajaxExtended=ei;b=function(){function n(){this.ajaxStatus=ft({code:0});this.unknownErrorStatusCode=0;this.initialized=o();this.unknownErrors=0;this.backgroundTaskSingleton=o()}return n.prototype.initialize=function(n,t,i,r,e){var l=this,o,h;this.version=n;o=this.backgroundTaskSingleton;o.resolve(),function(){var n=o;k.setInterval(function(){n===o&&o.resolve()},6e4)}();c=-1;h=r&&r.split(".");this.acceptLanguage=h&&h[0];this.effectiveLocale=r;this.currentGetAuthTokenFunc=t;ut(i)||(this.extensionFlagsValue=JSON.stringify(i));this.traceAjaxErrors=e;u.useFxArmEndpoint?s.getArmEndpointEndPoint.invoke(it.client,s.getHubsWindowId(),undefined).then(function(n){l.armEndpoint=f.ensureSuffix(n,"/");l.initialized.resolve()}):this.initialized.resolve()},n.prototype.postJSON=function(n,t){return ri(n,t),this.ajax(n)},n.prototype.oldPostJSON=function(n,t){return ri(n,t),this.oldAjax(n)},n.prototype.ajaxExtended=
function(n){return this._executeAjaxCall(n,new nt)},n.prototype.oldAjax=function(n){return this._executeAjaxCall(n,new vt)},n.prototype.ajax=function(n){var t=this.ajaxExtended(n),i=t.inspect();return i.state==="fulfilled"?Q(i.value.content):t.then(function(n){return n.content})},n.prototype._executeAjaxCall=function(n,i){var f=this,h,c,v,a;return(n.url=n.uri||n.url,n.useRawAjax)?(this._worker(n,i),i.getPromise()):(h=!t.Resources.isUriAbsolute(n.url),l(n.setAuthorizationHeader)&&(n.setAuthorizationHeader=h),l(n.checkVersion)&&(n.checkVersion=h,this.skipVersionCheck&&(n.checkVersion=!1)),c=this.initialized.promise(),n.isBackgroundTask&&(c=c.then(this.backgroundTaskSingleton.promise),v=this.backgroundTaskSingleton=o(),i.finally(function(){v.resolve()})),a=function(){var o=function(t){var o=n.headers||{},l,a,v;if(n.setAuthorizationHeader&&(o[ot]=t),n.setTelemetryHeader&&(o[bt]=n.setTelemetryHeader.substring(0,kt)),l=f.acceptLanguage,l&&e(o,et,l),n.invokeApi){var y=f.armEndpoint,s=void 0,c=
void 0;y&&h?(s=new r.UriBuilder(y),c=encodeURI(n.url)):(s=new r.UriBuilder(n.url),s.query.clear(),c=encodeURI(s.getRelativePath()+s.getOriginalQuery()));s.setRelativePath(n.invokeApi);s.query.setParameter("_",ti());ni&&s.query.setParameter("uri",c);n.url=s.toString();n.uri=n.url;e(o,at,c)}e(o,st,f.effectiveLocale);e(o,g,dt());e(o,yt,u.sessionId);a=f.version;n.checkVersion&&a&&e(o,pt,a);v=f.extensionFlagsValue;h&&v&&(o[ht]=v);n.headers=o;f._worker(n,i)},t;n.setAuthorizationHeader?(t=void 0,n.cloudName=n.cloudName||s.selfCloudName,t=n.setAuthorizationHeader===!0?{cloudName:n.cloudName}:{resourceName:n.setAuthorizationHeader.resourceName,cloudName:n.cloudName},f.currentGetAuthTokenFunc(t).then(function(n){o(n)},function(n){i.reject(gt,n,null)})):o(null)},c.state()==="resolved"?a():c.then(a),i.getPromise())},n.prototype.cachedAjax=function(n){return n.headers=a({"x-ms-cache-tag":'"0"'},n.headers),this.ajaxExtended(n).then(function(n){var r=n.content,i=n.textStatus,t=n.jqXHR;return{cachedAjax:
!0,data:r,modified:i==="success",textStatus:i,cacheTagValue:t.status===p.Ok?t.getResponseHeader(v):null,jqXHR:t}})},n.prototype.oldCachedAjax=function(n){var t=o();return n.headers=a({"x-ms-cache-tag":'"0"'},n.headers),this.oldAjax(n).then(function(n,i,r){t.resolve({cachedAjax:!0,data:n,modified:i==="success",textStatus:i,cacheTagValue:r.status===p.Ok?r.getResponseHeader(v):null,jqXHR:r},i,r)},function(n,i,r){t.reject(n,i,r)}),t.promise()},n.prototype._worker=function(n,t){var r=this,f,i;this.shouldStall||(f=rt.tryCreateTelemetry(n),i=tt(n),i.always(function(){if(n.checkVersion&&fi(i)){var e=i.getResponseHeader(wt);e&&(h.warning("'{0}' with version '{1}' is not accepting requests from clients with version '{2}'".format(n.uri,e,r.version)),r._stall(1,e))}if(i.getResponseHeader(lt)&&r.ajaxStatus({code:2,message:"Received logged out header from server."}),!r.shouldStall)switch(i.state()){case"resolved":f&&f.success(i);r.unknownErrors&&(r.unknownErrors=0,r.ajaxStatus({code:0}));i.then(function(
n,i,r){t.resolve(n,i,r)});break;case"rejected":f&&f.error(i);i.status===r.unknownErrorStatusCode&&(r.unknownErrors++,r.unknownErrors>=ui&&(r.unknownErrors=0,r.ajaxStatus({code:4,message:n.uri})));i.then(null,function(f,e,o){var h,s;r.traceAjaxErrors&&i.status>=p.InternalServerError&&(h={uri:n.uri,requestId:n.headers[g],sessionId:u.sessionId},y&&y(f,0,h));i.status===p.Forbidden&&n.skipRetryOnForbidden!==!0&&(i.getResponseHeader(ct)||"").toLowerCase()==="gateway"?(s=w.clone(n,!0),s.skipRetryOnForbidden=!0,s.headers=s.headers||{},s.headers[d]=ii,r._worker(s,t)):n.detailedError?t.reject(e,{error:o,responseText:i.responseText},f):t.reject(e,o,f)})}}))},n.prototype._stall=function(n,t){this.shouldStall=!0;this.ajaxStatus({code:n,message:t})},n}();n.AjaxCaller=b;nt=function(){function n(){var n=Q.defer();this.resolve=function(t,i,r){n.resolve({content:t,jqXHR:r,textStatus:i})};this.reject=function(t,i,r){var u={jqXHR:r,textStatus:t,errorThrown:i};n.reject(u)};this.getPromise=function(){return n.
promise};this.finally=function(t){n.promise.finally(t)}}return n}();vt=function(){function n(){var n=o();this.resolve=function(t,i,r){n.resolve(t,i,r)};this.reject=function(t,i,r){n.reject(r,t,i)};this.getPromise=function(){return n.promise()};this.finally=function(t){n.promise().finally(t)}}return n}();n.reset=oi}(hi=n.Internal||(n.Internal={}));i=new n.Internal.AjaxCaller;n.postJSON=ci;n.ajax=li;n.ajaxExtended=ai;n.getSingleton=vi;n.cachedAjax=yi;n.invalidateCacheHeader=pi;n.setCacheHeader=wi;n.initialize=bi;n.status=b(function(){return i.ajaxStatus()});n.disableVersionCheck=ki;$.support.cors=!0;$.ajaxTransport("+binary",function(n,t,i){if(n.dataType&&n.dataType==="binary")return{send:function(t,i){var r=new XMLHttpRequest,f=n.url,e=n.type,o=n.data||null,u;r.addEventListener("load",function(){var t={};t[n.dataType]=r.response;i(r.status,r.statusText,t,r.getAllResponseHeaders())});r.open(e,f,!0);r.responseType="blob";for(u in t)r.setRequestHeader(u,t[u]);r.send(o)},abort:function(){i.
abort()}}})})(e=t.Net2||(t.Net2={})),function(n){function i(n,i){return t.oldPostJSON(n,i)}function u(n){return t.oldAjax(n)}function f(n){return t.oldCachedAjax(n)}n.HttpStatusCode=e.HttpStatusCode;n.disableAjaxServerVersionCheck=r.Net2.disableAjaxServerVersionCheck;var t=r.Net2.getSingleton();n.postJSON=i;n.ajax=u;n.cachedAjax=f;n.invalidateCacheHeader=e.invalidateCacheHeader;n.setCacheHeader=e.setCacheHeader;n.initialize=e.initialize;n.status=b(function(){return t.ajaxStatus()});n.disableVersionCheck=e.disableVersionCheck}(ii=t.Net||(t.Net={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var r=n.Base,u=r.Net2,i=window,f=10,e=1e3,o=function(){function t(n,t,r,u,o){function y(n,t){u&&h&&(i.clearTimeout(h),h=null);b()?v(!0,!!t):h||(h=i.setTimeout(function(){h=null;v(!0,!!t)},n||p))}function w(){c||h&&!b()||y(k,!0)}function v(i,r){if((s.length||r&&l.length)&&!c){var u=n(l,s);s=[];l=[];c=!0;a=Q(t(u)).then(null,function(t){if(i)return s=
n(u,s),c=!1,v(!1,r);throw t;}).finally(function(){c=!1;y()})}else l.length&&!c&&w();return a}function b(){return s.length+l.length>=d}o=o||{};var p=r||0,k=o.optionalDataInterval||p*f+1,d=o.maxBatchSize||e,h;u=!!u;var c=!1,s=[],l=[],a=Q();this.execute=function(t,i){i?(l=n(l,t),w()):(s=n(s,t),c||y())};this.flush=function(){return s.length?a.then(function(){return v(!1,!1)}):a}}return t.getMergeIntoArrayDataMerger=function(){return n.merge},t.getPostArrayExecutor=function(n){return function(t){if(Array.isArray(t)&&t.length)return u.postJSON({uri:n.uri,headers:n.headers,isBackgroundTask:!!n.isBackgroundTask,setAuthorizationHeader:!!n.setAuthHeader,collectTelemetry:!!n.collectTelemetry},t)}},t}();t.Debouncer=o})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){"use strict";function u(n,r,u,f){function h(n){return function(i){return t.getPostArrayExecutor({uri:n,headers:s,isBackgroundTask:!o,setAuthHeader:!0,collectTelemetry:u})(i)}}var o=0,s,e;return u=!!u,s={"x-ms-client-version":
i.version,"x-ms-client-query":JSON.stringify(i.query),"x-ms-extension-name":f,"x-ms-time-zone-offset":(new Date).getTimezoneOffset()+""},i.isDevelopmentMode&&(s["x-ms-client-settings"]="devmode"),e=new t(t.getMergeIntoArrayDataMerger(),h(n),r,!0),{execute:function(n,t){e.execute(n,t)},flush:function(){var n=e.flush();return Q.isPending(n)?(o++,e.flush().finally(function(){o--})):n}}}var t=MsPortalFx.Base.Debouncer,r=window,i=r.fx.environment;n.getStandardDebouncer=u}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function d(n){n._evt.duration=0;n._watch.reset()}function ht(n,t){return t=t||!1,g.initialize(n,t,[])}function ct(n){l.invokeRpc(h.RegisterExtension,a,undefined);l.registerRpcEndPoint(h.TraceTelemetry,{allowedOrigin:[a],handler:function(t){n?n.trace(t):nt(t)}})}function nt(n){i.trace(n)}function lt(n){return i.startTrace(n)}function at(n,t){return i.endTrace(n,b,t)}function vt(n,t){return i.endTrace(n,p,t)}function yt(n,t,
r){return i.endTrace(n,t,r)}function pt(n){i.resetTrace(n)}function wt(){return i.flush()}function bt(n){i.telemetryEventProcessors.push(n)}function o(t){var i={timestamp:ut(),data:v(t.data)};return n.shallowCopyFromObject(i,t,["source","action","actionModifier","assetType","duration","extension","name","journeyId","optional"]),i}var r=n.Base,s=r.Constants,h=s.TelemetrySharing,tt=r.Stopwatch.TelemetryStopwatch,c=n.isNullOrUndefined,it=n.Helpers.resolve(),f=n.noop,u=window.fx.environment,kt=r.Diagnostics,e=FxImpl.TelemetryContext,l=r.Rpc.Internal.client,rt=new r.Diagnostics.Log("MsPortalFx.Base.Diagnostics.Telemetry"),a=s.Shell,ut=Date.now,v=JSON.stringify,ft=u.features.canmodifyextensions,y="start",p="complete",w="reset",b="cancel",k="mark",et,g;(function(n){n.Start=y;n.Complete=p;n.Reset=w;n.Cancel=b;n.Mark=k})(et=t.ActionModifier||(t.ActionModifier={}));var ot=function(){function n(n){this._evt=n;this._watch=new tt;n.actionModifier=y;d(this)}return n}(),st=function(){function n(n){function u(
n){var t=e.getCurrentValues();c(t)||(n.context=v(t))}function r(t){n.forEach(function(n){try{t(n)}catch(i){rt.error(i)}})}function i(n){if(ft!=="true"){var t=e.getCurrentValue(e.ContextType.Journey);n.journeyId=n.journeyId||t&&t.id;r(function(t){t.trace(n)})}}function f(n,t,r){var u=o(n._evt);return u.actionModifier=t,u.duration=n._watch.millisecondsElapsed,r=r||i,r(u),u.duration}function h(n){f(n,w);d(n)}var t={},s=1;this.telemetryEventProcessors=n;this.trace=function(n){var t=n.timestamp;n=o(n);n.actionModifier=n.actionModifier||k;n.timestamp=t||n.timestamp;u(n);i(n)};this.startTrace=function(n){n=o(n);var u=s++,r="telemetry_"+u;return t[r]=new ot(n),i(n),r};this.endTrace=function(n,r,e){var o=t[n],s;if(o)return s=f(o,r,function(n){c(e)||(n.data=e);u(n);i(n)}),delete t[n],s};this.resetTrace=function(n){var i=t[n];i&&h(i)};this.traceBrowserInfo=function(){r(function(n){n.traceBrowserInfo()})};this.flush=function(){var n=[],t;return r(function(t){n.push(t.flush())}),t=n.every(function(
n){return!Q.isPending(n)}),t?Q():Q.all(n)}}return n}(),i={telemetryEventProcessors:[],trace:f,startTrace:function(){return""},endTrace:function(){return 0},resetTrace:f,traceBrowserInfo:f,flush:function(){return it}};t.initialize=ht;t.registerForShellTelemetry=ct,function(t){function r(t,r,f){var s=i.telemetryEventProcessors,e=u.extensionTelemetryUri,o;return u.enablePortalLogging&&e||(e=u.telemetryUri),o=f&&f.length?f:[n.Services.getTelemetryEventProcessor(e,t)],i=new st(o),r&&i.traceBrowserInfo(),s}t.initialize=r}(g=t.Internal||(t.Internal={}));t.trace=nt;t.startTrace=lt;t.cancelTrace=at;t.completeTrace=vt;t.endTrace=yt;t.resetTrace=pt;t.flush=wt;t.addProcessor=bt})(i=t.Telemetry||(t.Telemetry={}))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n,t,i,r){t.activatedItems.subscribeArrayChanges(n,i,r)}function r(n,t,i){return $.extend({source:n,action:
t},i)}function i(t,i,u){return function(f){n.trace(r(t,i,u(f)))}}function u(n,r,u,f,e,o){t(n,r,i(u,f,o),i(u,e,o))}n.addActivatedItemsWatcher=t;n.addActivatedItemsTelemetryWatcher=u})(t=n.Telemetry||(n.Telemetry={}))})(t=n.Diagnostics||(n.Diagnostics={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function o(n){if(n){var t=e.location.search;t&&n.indexOf("?")===-1&&(n+=t);r=FxImpl.getStandardDebouncer(n,h,!0,i.extensionName);u._setBufferFullCallback(function(n){return r.execute(n),[]})}else u._setBufferFullCallback(function(){return[]})}function c(){}function l(){return u.flush(),r?r.flush():Q()}var s=n.Base,h=5e3,e=window,i=e.fx.environment,u=s.Diagnostics.Log,f=i.extensionTraceUri,r;t.initialize=o;t.upload=c;t.flush=l;i.enablePortalLogging&&f||(f=i.clientTraceUri);o(f)})(i=t.Upload||(t.Upload={}))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(
n){"use strict";var t;(function(t){var i;(function(t){function u(n,t){throw new Error(n.format(t));}function e(n,t,i){return n.substr(t,i)}function ht(n){var t,r,o,f,e,i;l={};for(t in n)if(n.hasOwnProperty(t)){for(r=t.split("_"),o=r.length,i=l,e=0;e<o-1;e++)f=r[e],f||u("Resource key '{0}' is not in the correct format.",t),i=i[f]=i[f]||{};i[r[o-1]]=n[t]}}function tt(n){return b.getResources("MsPortalFx.Resources."+n)||{}}function it(n,t){var r,u;n||(n=o.fx.environment);g=n.applicationPath;h=n.contentUriBasePath||i;c=n.contentVersionToken||"";nt=(n.versionedContentRoots||[]).map(function(n){return s(n.toLowerCase(),i)});b&&(t=t||tt("Strings"),r=tt("Regions"),r.formats&&p.setLocaleValues&&p.setLocaleValues(r.formats));u=[];n.isRtl&&u.push("rtl=true");f=u.join("&");ht(t||{})}function ct(n,t){var i={};return d(n,function(n,r){typeof r=="string"&&(i[n]=t(r))}),i}function lt(n){return ct(n,function(n){return rt(r(ot,n))})}function at(n){n||u("Control must be specified.");for(var r=n.split("."),
f,t=l,i=0;i<r.length;i++)f=r[i],t=t[f],t||u("Control {0} is not recognized.",n);return y.clone(t,!0)}function r(){for(var f,r,h,c=[],u=0;u<arguments.length;u++)c[+u]=arguments[u];var l=arguments.length,n="",o=!1;for(f=0;f<l;f++)r=arguments[f],r&&(n&&(r=s(r,i),n+=i),h=r.length-1,o=r[h]===i,o&&(r=e(r,0,h)),n+=r);return o&&(n+=i),t.isUriAbsolute(n)||n[0]===i||(n=i+n),n}function a(n,o,l){var a,v;return n=s(n,i),v=n.toLowerCase(),nt.forEach(function(n){if(!a&&v.startsWith(n)){var t=n.length;(v.length===t||v[t]===i)&&(a=t)}}),o===1||o===2?(t.isUriAbsolute(n)&&u("The '{0}' URI is not a valid content URI because it is an absolute URI.",n),a||u("The '{0}' URI is an application relative URI. However a content URI was expected. Did you mean to call getAppRelativeUri?",n),c!==""&&(n=r(e(n,0,a),c,e(n,a))),o===2&&f&&(n+=n.indexOf("?")>0?"&"+f:"?"+f),n=r(h,n)):t.isUriAbsolute(n)||(a&&u("The '{0}' URI is a content URI. However an application relative URI was expected. Did you mean to call getContentUri?",
n),n=r(g,n)),l&&!t.isUriAbsolute(n)&&(n=r(w,n)),n}function rt(n,t){return t===void 0&&(t=!0),a(n,2,t)}function vt(n){return a(n,1,!1)}function yt(n){return a(n,0,!1)}function ut(n,i){return i===void 0&&(i=!0),n=n||"",t.isUriAbsolute(n)||(n=r(h,n),i&&!t.isUriAbsolute(n)&&(n=r(w,n))),n}function pt(n){var t=n.lastIndexOf(".");return t!==-1?e(n,0,t):n}function et(n,t,r,u){var f=t[r];return f||(t[r]=f={}),n.forEach(function(n){if(typeof n=="string"){var r=pt(n);f[r]=ft+u+"_"+n}else d(n,function(n,r){et(r,t,n,u+i+n)})}),t}function wt(n,t){var i=v.get(n);return i||(i=et(n,{},"",""),v.set(n,i)),i[t]}var y=n.Base.Utilities,o=window,p=Date,w="//"+o.location.host,b=o.Resources,i="/",k="Content/",ot=k+"Images",st=k+"Static",d=n.forEachKey,s=n.trimStart,g,h,c,nt=[],f,l={},ft,v;t.initialize=it;t.getImages=lt;t.getStrings=at;t.isUriAbsolute=y.isUriAbsolute;t.getContentUri=rt;t.getScriptUri=vt;t.getAppRelativeUri=yt;t.getVersionlessContentUri=ut;it();ft=ut(r(st,i));v=new n.Map;t._getImageMap=wt})(i=t.
Resources||(t.Resources={}))})(t=n.Base||(n.Base={}));n.getImages=t.Resources._getImageMap}(MsPortalFx||(MsPortalFx={})),function(n){"use strict";function i(n){if(t)throw new Error(n);}function s(n,t){if(typeof n.dispose=="function")t&&n.dispose();else if(typeof n=="function")t&&n();else return!1;return!0}var u=window.fx.environment,f=u.isDevelopmentMode,e=u.trace,o=e?e.lifetime:!1,t=f||o,r=f&&o,c=Array.prototype.slice,h=function(){function n(){var n=this;this._disposables=[];this._isDisposed=!1;this._isDisposing=!1;this._container=null;this._children=[];this._failToDispose=[];this.registerForDispose=function(t){var i;return i=Array.isArray(t)?t:[t],i.forEach(function(t){n._registerForDispose(t)}),n};r&&(this._diagnosticCreateStack=MsPortalFx.Base.Utilities.getCurrentCallStack(!0))}return n.setDevMode=function(n){t=n},n.setDiagnosticMode=function(n){n?(t=!0,r=!0):r=!1},n.prototype.isDisposed=function(){return this._isDisposed},n.prototype.createChildLifetime=function(){var t=new n;return t.
_container=this,this._children.push(t),t},n.prototype.dispose=function(){var u=this,n=[],r;this._isDisposed||(this._isDisposed=!0,this._isDisposing=!0,[this._disposables,this._children].forEach(function(i){while(i.length){var r=i.pop();try{s(r,!0)}catch(f){t&&(n.push(f),u._failToDispose.push(r))}}}),n.length&&i("error to disposing this lifetimeManager. Exceptions: "+n.map(function(n){return n.toString()}).join("\n")),r=this._container,r&&(this._container=null,r._unregisterChildForDispose(this)),this._isDisposing=!1)},n.prototype._unregisterChildForDispose=function(n){var t=this._children,r;this._isDisposing||(r=t.lastIndexOf(n),r<0?i("lifetime Manager internal error.  this._unregisterChildForDispose is called but the disposeable is not one of the child it created."):r===t.length-1?t.pop():t.splice(r,1))},n.prototype._isRegistered=function(n){return this._disposables.lastIndexOf(n)>=0||this._children.lastIndexOf(n)>=0},n.prototype._registerForDispose=function(n){var r=!this._isDisposed;
n?s(n,!r)||(i("disposable must have a dispose method or be a function."),r=!1):(i("disposable cannot be null or undefined."),r=!1);t&&this._isRegistered(n)&&i("Unable to add this disposable to LifetimeManager. This disposable is already included in the LifetimeManager.");r&&this._disposables.push(n)},n}();n.TriggerableLifetimeManager=h}(FxImpl||(FxImpl={})),function(n){"use strict";function h(n,r){return u(n)?n:i(t(n,r))}function c(n,i){return u(n)?n:r(t(n,i))}var e=n.isUndefined,o=ko.computed,i=ko.observable,r=ko.observableArray,u=ko.isObservable,f=ko.utils.peekObservable,s,t;(function(t){function h(n,t){var i=r(),u=o(function(){i(t())});return i.dispose=u.dispose.bind(u),n.registerForDispose(i),i}function y(n,t,i){var r=n.charCodeAt(0);return e[n]||(e[n]="&#"+(t?0:i?(r-l)*1024+n.charCodeAt(1)-a+v:r)+";")}function p(n){return s(n)}function s(n){return t.isNullOrUndefined(n)?"":String(n).replace(c,y)}function w(t){for(var s=new n.Map,u=[[t]],f,e,r,i,o;u.length;)for(f=u.pop(),e=Object.keys(
f),r=0;r<e.length;r++){if(i=f[e[r]],o=typeof i,o==="function"||i instanceof Error||i instanceof Node||i===document.all)return!1;i&&o==="object"&&!s.has(i)&&(s.set(i,!0),u.push(i))}return!0}function b(n,i){n=f(n);i=f(i);var u=!t.isNullOrUndefined(n),r=!t.isNullOrUndefined(i);if(u&&r){if(n.localeCompare)return n.localeCompare(i);n=+n;i=+i;u=!isNaN(n);r=!isNaN(i)}return u?r?n-i:-1:r?1:0}var u;t.thunkArray=h;u=function(){function n(n){var t=i(0),r=n?n:{rateLimit:30};t.extend(r);this._value=t}return Object.defineProperty(n.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),n.prototype.touch=function(){this._value(this._value.peek()+1&65535)},n}();t.KnockoutDelayTrigger=u;var c=/[`><"'&\t\n\r\xa0-\xff]|([\x00-\x1f\x7f\x80-\x9f])|([\ud800-\udbff][\udc00-\udfff])/g,e={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&#34;","`":"&#96;"},l=55296,a=56320,v=65536;t.encodeAttribute=p;t.encodeHtml=s;t.canSendThroughPostMessage=w;t.compare=b;t.initValue=n.initValue;
t.initObservable=n.initObservable;t.initObservableBase=n.initObservable;t.initObservableArray=n.initObservableArray})(s=n.Util||(n.Util={}));t=function(n,t){return e(n)?t:n};n.initValue=t;n.initObservable=h;n.initObservableArray=c}(MsPortalFx||(MsPortalFx={})),function(n){"use strict";function r(n,r){t.requirejs.config(n);r&&MsPortalFx.Base.Utilities.extend(i.environment.fxRequireConfig,r)}var t=window,i=t.fx;n.setupRequire=r}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";function s(t){var i=c[t];return n.isNullOrUndefined(i)?null:"#"+i.substr(f.length)}function h(n){return i[n]}function w(n){var t=n.length,i=f.length;if(t===e)return n;if(t===e+1){if(n[0]==="#")return n.substr(1)}else if(t===e+i&&n.substr(0,i)===f)return n.substr(i);return null}function b(t){var r=w(t),i;return!n.isNullOrUndefined(r)&&(i=c[f+r],!n.isNullOrUndefined(i))?i:null}function k(t){return n.isNullOrUndefined(t)?0:t.length>=e?b(t):i[t]}function rt(t,i){var u=k(t),r;return n.isNullOrUndefined(u)?
null:(r=d(u),i?r.map(s):r.map(h))}function d(n){return n=n%g,it[n]}function ut(){if(n.isNullOrUndefined(u)){var t=0;for(u=new Array(33),t=0;t<u.length;t++)u[t]=t}return u}function r(t,i){var u=new Array(t&&t.length),f=t.length,r,e=n.isNullOrUndefined(i)?0:i;if(i){for(r=0;r<f;r++)u[r]=t[(r+e)%f];return u}return t}function v(n){return r(nt,n)}function y(n){return r(tt,n)}function ft(t){return n.isNullOrUndefined(l)&&(l=v().map(h)),r(l,t)}function et(t){return n.isNullOrUndefined(a)&&(a=v().map(s)),r(a,t)}function ot(t){return n.isNullOrUndefined(o)&&(o=y().map(h)),r(o,t)}function st(t){return n.isNullOrUndefined(p)&&(p=y().map(s)),r(o,t)}var f="Hex_",e=6,c;(function(n){n[n.Hex_fcd116=0]="Hex_fcd116";n[n.Hex_eb3c00=1]="Hex_eb3c00";n[n.Hex_ba141a=2]="Hex_ba141a";n[n.Hex_b4009e=3]="Hex_b4009e";n[n.Hex_442359=4]="Hex_442359";n[n.Hex_002050=5]="Hex_002050";n[n.Hex_0072c6=6]="Hex_0072c6";n[n.Hex_008272=7]="Hex_008272";n[n.Hex_007233=8]="Hex_007233";n[n.Hex_7fba00=9]="Hex_7fba00";n[n.Hex_a0a5a8=
10]="Hex_a0a5a8";n[n.Hex_fff100=11]="Hex_fff100";n[n.Hex_ff8c00=12]="Hex_ff8c00";n[n.Hex_e81123=13]="Hex_e81123";n[n.Hex_ec008c=14]="Hex_ec008c";n[n.Hex_68217a=15]="Hex_68217a";n[n.Hex_00188f=16]="Hex_00188f";n[n.Hex_00bcf2=17]="Hex_00bcf2";n[n.Hex_00b294=18]="Hex_00b294";n[n.Hex_009e49=19]="Hex_009e49";n[n.Hex_bad80a=20]="Hex_bad80a";n[n.Hex_bbc2ca=21]="Hex_bbc2ca";n[n.Hex_fffc9e=22]="Hex_fffc9e";n[n.Hex_ffb900=23]="Hex_ffb900";n[n.Hex_dd5900=24]="Hex_dd5900";n[n.Hex_f472d0=25]="Hex_f472d0";n[n.Hex_9b4f96=26]="Hex_9b4f96";n[n.Hex_4668c5=27]="Hex_4668c5";n[n.Hex_6dc2e9=28]="Hex_6dc2e9";n[n.Hex_00d8cc=29]="Hex_00d8cc";n[n.Hex_55d455=30]="Hex_55d455";n[n.Hex_e2e584=31]="Hex_e2e584";n[n.Hex_d6d7d8=32]="Hex_d6d7d8";n[n.Hex_807900=33]="Hex_807900";n[n.Hex_804600=34]="Hex_804600";n[n.Hex_740912=35]="Hex_740912";n[n.Hex_760046=36]="Hex_760046";n[n.Hex_34113d=37]="Hex_34113d";n[n.Hex_000c48=38]="Hex_000c48";n[n.Hex_005e79=39]="Hex_005e79";n[n.Hex_084c41=40]="Hex_084c41";n[n.Hex_063d20=41]="Hex_063d20";
n[n.Hex_3d460a=42]="Hex_3d460a";n[n.Hex_32383f=43]="Hex_32383f";n[n.Hex_bfb500=44]="Hex_bfb500";n[n.Hex_bf6900=45]="Hex_bf6900";n[n.Hex_ae0d1a=46]="Hex_ae0d1a";n[n.Hex_b10069=47]="Hex_b10069";n[n.Hex_4e195c=48]="Hex_4e195c";n[n.Hex_00126b=49]="Hex_00126b";n[n.Hex_008db5=50]="Hex_008db5";n[n.Hex_00856f=51]="Hex_00856f";n[n.Hex_0f5b2f=52]="Hex_0f5b2f";n[n.Hex_8ba208=53]="Hex_8ba208";n[n.Hex_464f59=54]="Hex_464f59";n[n.Hex_fcf37e=55]="Hex_fcf37e";n[n.Hex_ffba66=56]="Hex_ffba66";n[n.Hex_f1707b=57]="Hex_f1707b";n[n.Hex_f466ba=58]="Hex_f466ba";n[n.Hex_a47aaf=59]="Hex_a47aaf";n[n.Hex_6674bc=60]="Hex_6674bc";n[n.Hex_66d7f7=61]="Hex_66d7f7";n[n.Hex_66d1bf=62]="Hex_66d1bf";n[n.Hex_66c592=63]="Hex_66c592";n[n.Hex_d6e86c=64]="Hex_d6e86c";n[n.Hex_8f9ca8=65]="Hex_8f9ca8";n[n.Hex_fffccc=66]="Hex_fffccc";n[n.Hex_ffe8cc=67]="Hex_ffe8cc";n[n.Hex_facfd3=68]="Hex_facfd3";n[n.Hex_fbcce8=69]="Hex_fbcce8";n[n.Hex_e1d3e4=70]="Hex_e1d3e4";n[n.Hex_ccd1e9=71]="Hex_ccd1e9";n[n.Hex_ccf2fc=72]="Hex_ccf2fc";n[n.Hex_ccf0ea=
73]="Hex_ccf0ea";n[n.Hex_ccecdb=74]="Hex_ccecdb";n[n.Hex_f0f7b2=75]="Hex_f0f7b2";n[n.Hex_63707e=76]="Hex_63707e";n[n.max=77]="max"})(t.AllRawColorCode||(t.AllRawColorCode={}));c=t.AllRawColorCode,function(n){n[n.a1=0]="a1";n[n.b1=1]="b1";n[n.c1=2]="c1";n[n.d1=3]="d1";n[n.e1=4]="e1";n[n.f1=5]="f1";n[n.g1=6]="g1";n[n.h1=7]="h1";n[n.i1=8]="i1";n[n.j1=9]="j1";n[n.k1=10]="k1";n[n.a0=11]="a0";n[n.b0=12]="b0";n[n.c0=13]="c0";n[n.d0=14]="d0";n[n.e0=15]="e0";n[n.f0=16]="f0";n[n.g0=17]="g0";n[n.h0=18]="h0";n[n.i0=19]="i0";n[n.j0=20]="j0";n[n.k0=21]="k0";n[n.a2=22]="a2";n[n.b2=23]="b2";n[n.c2=24]="c2";n[n.d2=25]="d2";n[n.e2=26]="e2";n[n.f2=27]="f2";n[n.g2=28]="g2";n[n.h2=29]="h2";n[n.i2=30]="i2";n[n.j2=31]="j2";n[n.k2=32]="k2";n[n.a0s2=33]="a0s2";n[n.b0s2=34]="b0s2";n[n.c0s2=35]="c0s2";n[n.d0s2=36]="d0s2";n[n.e0s2=37]="e0s2";n[n.f0s2=38]="f0s2";n[n.g0s2=39]="g0s2";n[n.h0s2=40]="h0s2";n[n.i0s2=41]="i0s2";n[n.j0s2=42]="j0s2";n[n.k0s2=43]="k0s2";n[n.a0s1=44]="a0s1";n[n.b0s1=45]="b0s1";n[n.c0s1=46]="c0s1";
n[n.d0s1=47]="d0s1";n[n.e0s1=48]="e0s1";n[n.f0s1=49]="f0s1";n[n.g0s1=50]="g0s1";n[n.h0s1=51]="h0s1";n[n.i0s1=52]="i0s1";n[n.j0s1=53]="j0s1";n[n.k0s1=54]="k0s1";n[n.a0t1=55]="a0t1";n[n.b0t1=56]="b0t1";n[n.c0t1=57]="c0t1";n[n.d0t1=58]="d0t1";n[n.e0t1=59]="e0t1";n[n.f0t1=60]="f0t1";n[n.g0t1=61]="g0t1";n[n.h0t1=62]="h0t1";n[n.i0t1=63]="i0t1";n[n.j0t1=64]="j0t1";n[n.k0t1=65]="k0t1";n[n.a0t2=66]="a0t2";n[n.b0t2=67]="b0t2";n[n.c0t2=68]="c0t2";n[n.d0t2=69]="d0t2";n[n.e0t2=70]="e0t2";n[n.f0t2=71]="f0t2";n[n.g0t2=72]="g0t2";n[n.h0t2=73]="h0t2";n[n.i0t2=74]="i0t2";n[n.j0t2=75]="j0t2";n[n.k0t2=76]="k0t2";n[n.max=77]="max"}(t.ColorCode||(t.ColorCode={}));var i=t.ColorCode,g=11,l,a,o,p,u,nt=[i.a0,i.a1,i.b2,i.b0,i.c2,i.b1,i.c0,i.c1,i.d0,i.d1,i.e2,i.e0,i.e1,i.f1,i.f0,i.g1,i.g0,i.g2,i.h2,i.h0,i.h1,i.i1,i.i0,i.i2,i.j1,i.j0,i.j2,],tt=[i.g0,i.f0,i.e0,i.h0,i.i0,i.j0,i.a1,i.b1,i.c1,i.d1,i.e1,i.f1,i.g1,i.h1,i.i1,i.j1,i.b2,i.c2,i.e2,i.g2,i.h2,i.i2,i.j2,i.a0,i.b0,i.c0,i.d0,],it={0:[i.a0s2,i.a0s1,i.a0,i.a0t1,i.
a0t2,],1:[i.b0s2,i.b0s1,i.b0,i.b0t1,i.b0t2,],2:[i.c0s2,i.c0s1,i.c0,i.c0t1,i.c0t2,],3:[i.d0s2,i.d0s1,i.d0,i.d0t1,i.d0t2,],4:[i.e0s2,i.e0s1,i.e0,i.e0t1,i.e0t2,],5:[i.f0s2,i.f0s1,i.f0,i.f0t1,i.f0t2,],6:[i.g0s2,i.g0s1,i.g0,i.g0t1,i.g0t2,],7:[i.h0s2,i.h0s1,i.h0,i.h0t1,i.h0t2,],8:[i.i0s2,i.i0s1,i.i0,i.i0t1,i.i0t2,],9:[i.j0s2,i.j0s1,i.j0,i.j0t1,i.j0t2,],10:[i.k0s2,i.k0s1,i.k0,i.k0t1,i.k0t2,]};t.getRawColorString=s;t.getColorCodeString=h;t.getRawColorCode=w;t.getRawColorIndex=b;t.getColorIndex=k;t.getColorCodeTintSet=rt;t.getColorCodeTintSetIndex=d;t.getAllColorCodeIndexes=ut;t.getRotatedArray=r;t.getGradientColorCodeIndexes=v;t.getRainbowColorCodeIndexes=y;t.getGradientColorCode=ft;t.getRawGradientColorCode=et;t.getRainbowColorCode=ot;t.getRawRainbowColorCode=st})(t=n.ColorUtil||(n.ColorUtil={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=n.initObservable,r=function(){function n(n,t,r){this.startDateTime=i(n,null);this.endDateTime=i(t,null);this.timezoneOffset=
i(r,-(new Date).getTimezoneOffset())}return n}();t.DateTimeRange=r})(t=n.DateUtil||(n.DateUtil={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function s(n){return{original:n,type:n>>f,index:n&127,perTime:!!(n&o)}}function yt(n,t,i){return et.isNumeric(n)?pt(Math.abs(n),t,i):t}function pt(t,i,r){var c=s(i),e,h=i,o=t,u,f,l,a=n.isNullOrUndefined(r)?i:r;if(c.type>0&&(e=vt[c.type],u=e.indexOf(i),f=t>1?1:-1,l=f>0?e.length-1:0,t!==1)){while(u!==l){if(o=t/rt(i,e[u+f])+st,f>0){if(o<1)break}else if(o>=1){u+=f;break}u+=f}h=e[u];f<0&&u===0&&o<ot&&(h=a)}return h}function y(n,t,i){var r=nt[n],u=r[t],f=r[i];return{dividend:f.dividend*u.divisor,divisor:f.divisor*u.dividend}}function wt(n,t,i){var a=nt[n],r=t.index-g,u=i.index-g,s=Math.max(0,r),h=Math.max(0,u),c=-Math.min(0,r),l=-Math.min(0,u),f=y(n,s,h),o=y(e.Time,l+d,c+d);return{dividend:f.dividend*o.dividend,divisor:f.divisor*o.divisor}}function rt(n,t){var i=kt(n,t);return i.dividend/i.divisor}function bt(n,t){var i=
a[n];return i?i[t]:null}function ut(n,t,i){var r=a[n];r||(r=a[n]={});r[t]=i}function kt(n,t){var o,f,r=null,c=!1,i;if(n===t)return h;if(i=bt(n,t),i)return i;if(o=s(n),f=s(t),o.type===f.type){switch(f.type){case u.DecimalPerTime:c=!0;case u.Decimal:r=e.Decimal;break;case u.BytesPerTime:c=!0;case u.Bytes:r=e.Binary;break;case u.BytesPerTime_SI:c=!0;case u.Bytes_SI:r=e.Decimal;break;case u.Time:r=e.Time}if(r!==null)return i=c?wt(r,o,f):y(r,o.index,f.index),ut(n,t,i),ut(t,n,{dividend:i.divisor,divisor:i.dividend}),i}throw"Not supported: conversion from unit "+n+"("+p(n)+") to unit "+t+"("+p(t)+") is not supported.";}function p(n,t){var i;return t===!0?(i=tt[n],i===w&&(i=tt[n]=ft(n,!0))):(i=v[n],i===w&&(i=v[n]=ft(n,!1))),i}function ft(n,t){switch(n){case r.Count:return"";case r.Thousand:return i.thousand;case r.Million:return i.million;case r.Billion:return i.billion;case r.Trillion:return i.trillion;case r.Bytes:case r.Bytes_SI:return i.bytes;case r.Kilobytes:return t?i.kilobytesSI:i.kilobytes
case r.Kilobytes_SI:return i.kilobytesSI;case r.Megabytes:return t?i.megabytesSI:i.megabytes;case r.Megabytes_SI:return i.megabytesSI;case r.Gigabytes:return t?i.gigabytesSI:i.gigabytes;case r.Gigabytes_SI:return i.gigabytesSI;case r.Terabytes:return t?i.terabytesSI:i.terabytes;case r.Terabytes_SI:return i.terabytesSI;case r.Petabytes:return t?i.petabytesSI:i.petabytes;case r.Petabytes_SI:return i.petabytesSI;case r.BytesPerDay:case r.BytesPerDay_SI:return i.bytesPerDay;case r.BytesPerHour:case r.BytesPerHour_SI:return i.bytesPerHour;case r.BytesPerMinute:case r.BytesPerMinute_SI:return i.bytesPerMinute;case r.BytesPerSecond:case r.BytesPerSecond_SI:return i.bytesPerSecond;case r.KilobytesPerSecond:return t?i.kilobytesPerSecondSI:i.kilobytesPerSecond;case r.KilobytesPerSecond_SI:return i.kilobytesPerSecondSI;case r.MegabytesPerSecond:return t?i.megabytesPerSecondSI:i.megabytesPerSecond;case r.MegabytesPerSecond_SI:return i.megabytesPerSecondSI;case r.GigabytesPerSecond:return t?i.gigabytesPerSecondSI:
i.gigabytesPerSecond;case r.GigabytesPerSecond_SI:return i.gigabytesPerSecondSI;case r.TerabytesPerSecond:return t?i.terabytesPerSecondSI:i.terabytesPerSecond;case r.TerabytesPerSecond_SI:return i.terabytesPerSecondSI;case r.PetabytesPerSecond:return t?i.petabytesPerSecondSI:i.petabytesPerSecond;case r.PetabytesPerSecond_SI:return i.petabytesPerSecondSI;case r.CountPerDay:return i.countPerDay;case r.CountPerHour:return i.countPerHour;case r.CountPerMinute:return i.countPerMinute;case r.CountPerSecond:return i.countPerSecond;case r.ThousandPerSecond:return i.thousandPerSecond;case r.MillionPerSecond:return i.millionPerSecond;case r.BillionPerSecond:return i.billionPerSecond;case r.TrillionPerSecond:return i.trillionPerSecond;case r.MicroSeconds:return i.microSeconds;case r.MilliSeconds:return i.milliSeconds;case r.Seconds:return i.seconds;case r.Minutes:return i.minutes;case r.Hours:return i.hours;case r.Days:return i.days;case r.Percentage:return i.percentage;default:return""}}var w=undefined,
et=jQuery,i=n.Resources.Strings.UnitConversion,ot=.0001,st=1e-5,h={dividend:1,divisor:1},b=60,k=60*b,c=24*k,ht=7*c,ct=30*c,l=[{dividend:1,divisor:Math.pow(10,6)},{dividend:1,divisor:Math.pow(10,3)},h,{dividend:b,divisor:1},{dividend:k,divisor:1},{dividend:c,divisor:1},{dividend:ht,divisor:1},{dividend:ct,divisor:1},],d=l.indexOf(h),f=8,g=3,o=1<<f-1,nt=[function(n){return{dividend:Math.pow(10,3*n),divisor:1}},function(n){return{dividend:Math.pow(2,10*n),divisor:1}},function(n){return l[n]}].map(function(n){return l.map(function(t,i){return n(i)})}),a={},v={},tt={},e,u,r;(function(n){n[n.Decimal=0]="Decimal";n[n.Binary=1]="Binary";n[n.Time=2]="Time"})(e||(e={})),function(n){n[n.None=0]="None";n[n.Bytes=1]="Bytes";n[n.Decimal=2]="Decimal";n[n.Time=3]="Time";n[n.BytesPerTime=4]="BytesPerTime";n[n.DecimalPerTime=5]="DecimalPerTime";n[n.Bytes_SI=6]="Bytes_SI";n[n.BytesPerTime_SI=7]="BytesPerTime_SI"}(u||(u={})),function(n){n[n.None=u.None<<f]="None";n[n.Percentage=n.None+1]="Percentage";n[n.
Bytes=u.Bytes<<f]="Bytes";n[n.Kilobytes=n.Bytes+1]="Kilobytes";n[n.Megabytes=n.Bytes+2]="Megabytes";n[n.Gigabytes=n.Bytes+3]="Gigabytes";n[n.Terabytes=n.Bytes+4]="Terabytes";n[n.Petabytes=n.Bytes+5]="Petabytes";n[n.BytesPerDay=u.BytesPerTime<<f|o]="BytesPerDay";n[n.BytesPerHour=n.BytesPerDay+1]="BytesPerHour";n[n.BytesPerMinute=n.BytesPerDay+2]="BytesPerMinute";n[n.BytesPerSecond=n.BytesPerDay+3]="BytesPerSecond";n[n.KilobytesPerSecond=n.BytesPerDay+4]="KilobytesPerSecond";n[n.MegabytesPerSecond=n.BytesPerDay+5]="MegabytesPerSecond";n[n.GigabytesPerSecond=n.BytesPerDay+6]="GigabytesPerSecond";n[n.TerabytesPerSecond=n.BytesPerDay+7]="TerabytesPerSecond";n[n.PetabytesPerSecond=n.BytesPerDay+8]="PetabytesPerSecond";n[n.Count=u.Decimal<<f]="Count";n[n.Thousand=n.Count+1]="Thousand";n[n.Million=n.Count+2]="Million";n[n.Billion=n.Count+3]="Billion";n[n.Trillion=n.Count+4]="Trillion";n[n.MicroSeconds=u.Time<<f]="MicroSeconds";n[n.MilliSeconds=n.MicroSeconds+1]="MilliSeconds";n[n.Seconds=n.MicroSeconds+
2]="Seconds";n[n.Minutes=n.MicroSeconds+3]="Minutes";n[n.Hours=n.MicroSeconds+4]="Hours";n[n.Days=n.MicroSeconds+5]="Days";n[n.CountPerDay=u.DecimalPerTime<<f|o]="CountPerDay";n[n.CountPerHour=n.CountPerDay+1]="CountPerHour";n[n.CountPerMinute=n.CountPerDay+2]="CountPerMinute";n[n.CountPerSecond=n.CountPerDay+3]="CountPerSecond";n[n.ThousandPerSecond=n.CountPerDay+4]="ThousandPerSecond";n[n.MillionPerSecond=n.CountPerDay+5]="MillionPerSecond";n[n.BillionPerSecond=n.CountPerDay+6]="BillionPerSecond";n[n.TrillionPerSecond=n.CountPerDay+7]="TrillionPerSecond";n[n.Bytes_SI=u.Bytes_SI<<f]="Bytes_SI";n[n.Kilobytes_SI=n.Bytes_SI+1]="Kilobytes_SI";n[n.Megabytes_SI=n.Bytes_SI+2]="Megabytes_SI";n[n.Gigabytes_SI=n.Bytes_SI+3]="Gigabytes_SI";n[n.Terabytes_SI=n.Bytes_SI+4]="Terabytes_SI";n[n.Petabytes_SI=n.Bytes_SI+5]="Petabytes_SI";n[n.BytesPerDay_SI=u.BytesPerTime_SI<<f|o]="BytesPerDay_SI";n[n.BytesPerHour_SI=n.BytesPerDay_SI+1]="BytesPerHour_SI";n[n.BytesPerMinute_SI=n.BytesPerDay_SI+2]="BytesPerMinute_SI";
n[n.BytesPerSecond_SI=n.BytesPerDay_SI+3]="BytesPerSecond_SI";n[n.KilobytesPerSecond_SI=n.BytesPerDay_SI+4]="KilobytesPerSecond_SI";n[n.MegabytesPerSecond_SI=n.BytesPerDay_SI+5]="MegabytesPerSecond_SI";n[n.GigabytesPerSecond_SI=n.BytesPerDay_SI+6]="GigabytesPerSecond_SI";n[n.TerabytesPerSecond_SI=n.BytesPerDay_SI+7]="TerabytesPerSecond_SI";n[n.PetabytesPerSecond_SI=n.BytesPerDay_SI+8]="PetabytesPerSecond_SI"}(t.Unit||(t.Unit={}));r=t.Unit;var it=n.getEnumArray,lt=it(u,!0),at=it(r).map(function(n){return s(n.value)}),vt=lt.map(function(n){return n.value===0?[]:at.filter(function(t){return t.type===n.value}).map(function(n){return n.original}).sort(function(n,t){return n-t})});t.getAppropriateUnit=yt;t.getConversionFactor=rt;t.toString=p})(t=n.UnitConversionUtil||(n.UnitConversionUtil={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function s(n,t,u){var f=e(u)?null:i(u),o=r.getAppropriateUnit(n,i(t),f);return a(o)}function h(n,t){return r.getConversionFactor(
i(n),i(t))}function c(n,t){return r.toString(i(n),t)}function y(n,t,i,r,u,f){return l(n,t,s(n,t,u),i,r,u,f)}function l(n,t,i,r,u,f,s){var w=u?u:v,a=r?r:{minimumFractionDigits:0,maximumFractionDigits:2},y=h(t,i),p=i,l="";return n===0?(l=o(a).format(n),p=e(f)?i:f):y&&(l=o(a).format(n/y)),w.format(l,c(p,s))}function i(n){var t=r.Unit,i=u[n];return t[i]}function a(n){var t=u,i=r.Unit[n];return t[i]}var f=n,r=f.UnitConversionUtil,e=f.isNullOrUndefined,o=FxImpl.Intl.NumberFormat.create,v="{0} {1}",u;(function(n){n[n.None=0]="None";n[n.Percentage=1]="Percentage";n[n.Bytes=2]="Bytes";n[n.Kilobytes=3]="Kilobytes";n[n.Megabytes=4]="Megabytes";n[n.Gigabytes=5]="Gigabytes";n[n.Terabytes=6]="Terabytes";n[n.Petabytes=7]="Petabytes";n[n.BytesPerDay=8]="BytesPerDay";n[n.BytesPerHour=9]="BytesPerHour";n[n.BytesPerMinute=10]="BytesPerMinute";n[n.BytesPerSecond=11]="BytesPerSecond";n[n.KilobytesPerSecond=12]="KilobytesPerSecond";n[n.MegabytesPerSecond=13]="MegabytesPerSecond";n[n.GigabytesPerSecond=14]="GigabytesPerSecond";
n[n.TerabytesPerSecond=15]="TerabytesPerSecond";n[n.PetabytesPerSecond=16]="PetabytesPerSecond";n[n.Count=17]="Count";n[n.Thousand=18]="Thousand";n[n.Million=19]="Million";n[n.Billion=20]="Billion";n[n.Trillion=21]="Trillion";n[n.MicroSeconds=22]="MicroSeconds";n[n.MilliSeconds=23]="MilliSeconds";n[n.Seconds=24]="Seconds";n[n.Minutes=25]="Minutes";n[n.Hours=26]="Hours";n[n.Days=27]="Days";n[n.CountPerDay=28]="CountPerDay";n[n.CountPerHour=29]="CountPerHour";n[n.CountPerMinute=30]="CountPerMinute";n[n.CountPerSecond=31]="CountPerSecond";n[n.ThousandPerSecond=32]="ThousandPerSecond";n[n.MillionPerSecond=33]="MillionPerSecond";n[n.BillionPerSecond=34]="BillionPerSecond";n[n.TrillionPerSecond=35]="TrillionPerSecond";n[n.Bytes_SI=36]="Bytes_SI";n[n.Kilobytes_SI=37]="Kilobytes_SI";n[n.Megabytes_SI=38]="Megabytes_SI";n[n.Gigabytes_SI=39]="Gigabytes_SI";n[n.Terabytes_SI=40]="Terabytes_SI";n[n.Petabytes_SI=41]="Petabytes_SI";n[n.BytesPerDay_SI=42]="BytesPerDay_SI";n[n.BytesPerHour_SI=43]="BytesPerHour_SI";
n[n.BytesPerMinute_SI=44]="BytesPerMinute_SI";n[n.BytesPerSecond_SI=45]="BytesPerSecond_SI";n[n.KilobytesPerSecond_SI=46]="KilobytesPerSecond_SI";n[n.MegabytesPerSecond_SI=47]="MegabytesPerSecond_SI";n[n.GigabytesPerSecond_SI=48]="GigabytesPerSecond_SI";n[n.TerabytesPerSecond_SI=49]="TerabytesPerSecond_SI";n[n.PetabytesPerSecond_SI=50]="PetabytesPerSecond_SI"})(t.Unit||(t.Unit={}));u=t.Unit;t.getAppropriateUnit=s;t.getConversionFactor=h;t.toString=c;t.getConvertedValue=y;t.getConvertedValueForTargetUnit=l;t._convertUnitToInternalConversionUnit=i;t._convertInternalConversionUnitToUnit=a})(t=n.UnitConversion||(n.UnitConversion={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";function u(n){return typeof n=="string"}function s(n,t){return n&&t[n.name.namespaceIndex]+"."+n.name.name}function h(n){return n?r[n]:null}function c(n,t){var i=l(n,t);return i&&i.itemType||null}function p(n,t){return h(c(n,t))}function l(n,t){var i=u(n)?h(n):n;return i&&
i.properties&&i.properties[t]}function w(n,t){var i=l(n,t);return!!(i&&i.isArray)}function b(n){var r=[],t=n&&n.properties,i;if(t)for(i in t)t.hasOwnProperty(i)&&r.push(i);return r}function k(n){var i=u(n)?t.getTypeMetadata(n):n,r=i&&i.idProperties;return r||null}function et(n){var t=k(n);return t&&t.length>0}function ot(n,i){for(var l=u(i)?t.getTypeMetadata(i):i,s=d(l),h,r,c=[],f=0,a=s.length;f<a;f++){if(h=s[f],r=o(n[h]),e(r))return;r===null&&(r=ft);c.push(r)}return c.join(",")}function d(n){return k(n)}function st(n,t){f(n,t,{visitArray:function(n,t){a.data(n,y,t)}})}function f(n,t,i){if(t)if(Array.isArray(o(n)))i.visitArray&&i.visitArray(n,t),o(n).forEach(function(n){f(n,t,i)});else if(rt(n))for(var r in n)n.hasOwnProperty(r)&&f(n[r],c(t,r),i)}function ht(n){return a.data(n,y)}function g(n){var t=u(n)?r[n]:n,i={},f;return t&&(f=b(t),f.forEach(function(n){var r=p(t,n),u=w(t,n);if(u)i[n]=ut();else if(!r||r.entityType)i[n]=v();else if(r.name)i[n]=v(g(r.name));else throw new Error("Cannot create entity.");
})),i}function ct(n){return n&&n.entityType}function nt(n,t){t&&!t.name&&(t=it.clone(t),t.name=n);r[n]=t}function lt(n){for(var i,t,f=(n+"Type").split("."),r=window,o=f.length,s=o-1,u=0;u<o;u++){if(i=f[u],t=r[i],u===s){if(t!==n){if(!e(t))throw new Error("Cannot create namespace for '"+n+"' because it already exists.");r[i]=n}}else if(typeof t!="object"){if(!e(t))throw new Error("Cannot create namespace for '"+n+"' at the segment '"+i+"' because it already exists.");t={};r[i]=t}r=t}}function at(n){var t=n.namespaces,r=n.metadata,u=r.map(function(n){var o={},u,f,e,i;lt(s(n,t));e=n.properties;for(u in e)i=e[u],f=i.typeIndex,o[u]={isArray:!!i.isArray,isDate:!!i.isDate,itemType:f===-1?null:s(r[f],t),trackEdits:!!i.trackEdits,persistEdits:!!i.persistEdits};return{name:s(n,t),properties:o,idProperties:n.idProperties,entityType:n.entityType,hasGloballyUniqueId:n.hasGloballyUniqueId}}),i=n.rootTypeIndex;return u.forEach(function(n){nt(n.name,n)}),typeof i=="number"&&i>=0&&u[i]||null}var i=n,tt=
i.Base,a=i.Helpers,it=tt.Utilities,rt=i.isObject,e=i.isUndefined,o=ko.unwrap,v=ko.observable,ut=ko.observableArray,y="aux-type",ft="NULL-VALUED-ID-PROPERTY",r={},vt;t.getTypeMetadata=h;t.getPropertyType=c;t.getPropertyTypeMetadata=p;t.getPropertyMetadata=l;t.getPropertyCardinality=w;t.getProperties=b;t.typeHasId=et;t.getItemId=ot;t.getIdPropertyNames=d;t.decorateWithType=st;t.visitTypedData=f;t.getArrayItemType=ht;t.createEmptyObject=g;t.typeIsEntityType=ct;t.setTypeMetadata=nt;t.setTypesMetadata=at,function(n){function t(){r={}}n.clearAllTypesMetadata=t}(vt=t.Internal||(t.Internal={}))})(i=t.Metadata||(t.Metadata={}))})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Unsorted=0]="Unsorted";n[n.Ascending=1]="Ascending";n[n.Descending=2]="Descending"})(n.SortOrder||(n.SortOrder={}));var t=n.SortOrder})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=ko.observableArray,
r=function(){function t(n){this._resetListeners=[];this._partialErrors=n||i()}return Object.defineProperty(t.prototype,"partialErrors",{get:function(){return this._partialErrors},enumerable:!0,configurable:!0}),t.prototype.resetNavigation=function(){var n=this._resetListeners.map(function(n){return n()});return Q.all(n)},t.prototype.addResetNavigationListener=function(n){if(this._resetListeners.indexOf(n)>=0)throw new Error("This callback is already registered.");this._resetListeners.push(n)},t.prototype.removeResetNavigationListener=function(n){var t=this._resetListeners.indexOf(n);if(t<0)throw new Error("This callback is not registered.");this._resetListeners.splice(t,1)},__decorate([n.Composition.ProxyCompatibilityMode],t)}();t.DataNavigatorBase=r})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function f(t){return n.regExpTenantResource.test(t)}function t(t){return n.regExpSubscriptionId.test(t)}
function i(t){return n.regExpResourceGroupId.test(t)}function e(t){return n.regExpResourceId.test(t)}function r(t){return n.regExpDeploymentResourceId.test(t)||n.regExpDeploymentId.test(t)}function u(t){return n.regExpTagId.test(t)}function o(f,e){if(e===void 0&&(e=!1),typeof f!="string")return!1;var o=n.regExpResourceIdRelaxed.test(f)||t(f)||i(f);return e?o:o||r(f)||u(f)}n.regExpTenantResource=/^(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)*)$/i;n.regExpSubscriptionId=/^\/subscriptions\/([^\/\s]+)$/i;n.regExpResourceGroupId=/^\/subscriptions\/([^\/\s]+)\/resourcegroups\/([^\/\s]+)$/i;n.regExpResourceId=/^(?:\/cloudname\/[^\/\s]+)?(?:\/subscriptions\/[^\/\s]+(\/resourcegroups\/[^\/\s]+)?)?(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)+)$/i;n.regExpResourceIdRelaxed=/^(?:\/subscriptions\/[^\/\s]+(\/resourcegroups\/[^\/\s]+)?)?(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)*)$/i;
n.regExpDeploymentId=/^\/subscriptions\/([^\/\s]+)\/resourcegroups\/([^\/\s]+)\/deployments\/([^\/]+)$/i;n.regExpDeploymentResourceId=/^\/subscriptions\/([^\/\s]+)\/resourcegroups\/([^\/\s]+)\/providers\/microsoft.resources\/deployments\/([^\/]+)$/i;n.regExpTagId=/^\/subscriptions\/([^\/\s]+)\/tagNames\/([^\/]+)(?:\/tagValues\/([^\/]+))?$/i;n.isTenantResource=f;n.isSubscriptionId=t;n.isResourceGroupId=i;n.isResourceId=e;n.isDeploymentId=r;n.isTagId=u;n.isResourceManagerId=o})(t=n.ResourceTypes||(n.ResourceTypes={}))})(t=n.Services||(n.Services={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.None=0]="None";n[n.Create=1]="Create";n[n.Picker=2]="Picker";n[n.Form=3]="Form";n[n.Filter=4]="Filter";n[n.Delete=5]="Delete";n[n.Generic=6]="Generic"})(n.ActionBarKind||(n.ActionBarKind={}));var t=n.ActionBarKind})(t=n.Extension||(n.Extension={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";
(function(n){n[n.ServiceViewModel=0]="ServiceViewModel";n[n.ResourceType=1]="ResourceType";n[n.AssetTypeBlade=2]="AssetTypeBlade";n[n.ServiceLink=3]="ServiceLink";n[n.InstanceLink=4]="InstanceLink";n[n.NoBrowse=-1]="NoBrowse"})(n.BrowseType||(n.BrowseType={}));var t=n.BrowseType})(t=n.Extension||(n.Extension={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Standard=0]="Standard";n[n.Url=1]="Url";n[n.Blade=2]="Blade";n[n.FileDownload=3]="FileDownload";n[n.List=4]="List";n[n.Dynamic=5]="Dynamic"})(n.CommandKind||(n.CommandKind={}));var t=n.CommandKind})(t=n.Extension||(n.Extension={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t,i;(function(n){n[n.None=0]="None";n[n.Preserve=1]="Preserve";n[n.Deprecate=2]="Deprecate"})(n.RedirectMode||(n.RedirectMode={}));t=n.RedirectMode,function(n){n[n.Permission=0]="Permission";n[n.PermissionSet=1]="PermissionSet"}(n.PermissionType||(n.PermissionType={}));i=n.PermissionType}
)(t=n.Extension||(n.Extension={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Error=0]="Error";n[n.Warning=1]="Warning";n[n.Success=2]="Success";n[n.Progress=3]="Progress";n[n.Info=4]="Info"})(n.NotificationMessageType||(n.NotificationMessageType={}));var t=n.NotificationMessageType})(t=n.Extension||(n.Extension={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Normal=0]="Normal";n[n.Hidden=1]="Hidden"})(n.KindVisibility||(n.KindVisibility={}));var t=n.KindVisibility})(t=n.Extension||(n.Extension={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.None=0]="None";n[n.General=1]="General";n[n.AssetType=2]="AssetType"})(n.PartGalleryPivotKind||(n.PartGalleryPivotKind={}));var t=n.PartGalleryPivotKind})(t=n.Extension||(n.Extension={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.None=0]="None";n[n.MenuBlade=
2]="MenuBlade";n[n.ResourceMenuBlade=3]="ResourceMenuBlade"})(n.RedirectType||(n.RedirectType={}));var t=n.RedirectType})(t=n.Extension||(n.Extension={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Part=0]="Part";n[n.BladeInput=1]="BladeInput";n[n.BladeActionBar=2]="BladeActionBar";n[n.BladeProperty=3]="BladeProperty";n[n.Command=4]="Command";n[n.Constant=5]="Constant";n[n.SelectedItem=6]="SelectedItem";n[n.Adapter=7]="Adapter";n[n.Dashboard=8]="Dashboard";n[n.AdapterInput=9]="AdapterInput"})(n.ReferenceType||(n.ReferenceType={}));var t=n.ReferenceType})(t=n.Extension||(n.Extension={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Default=0]="Default";n[n.Tenant=1]="Tenant"})(n.ResourceRoutingType||(n.ResourceRoutingType={}));var t=n.ResourceRoutingType})(t=n.Extension||(n.Extension={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function pt(n,t,i){var r="Failed to retrieve the "+
t+" defintion for '"+n+"' from the server.\r\n";return"message"in i?"status"in i?Q.reject(new Error(r+"url: "+i.srcUrl+"\r\nstatus: "+i.status+"\r\nstatusText: "+i.statusText)):Q.reject(new Error(r+"message:"+i.message)):Q.reject(i)}function k(n,t,i){return MsPortalFx.require(lt(n,"/")+i).then(function(n){return n[t]}).catch(function(n){return pt(i,t,n)})}var s=MsPortalFx,o=s.Base,e=o.Rpc.Internal,y=o.Net2,d=s.Extension,c=s.ViewModels,g=e.ActionEndPointDefinition,p=o.Constants,f=e.FuncEndPointDefinition,nt=n.TelemetryContext,tt=e.Measurement,w=e.ProxiedObjectTypeDefinition,i=n.Constants.RpcMethods,ht=c.Services.ResourceTypes,it=p.ViewModelTypes,ct=s.isNullOrUndefined,h=undefined,lt=s.ensureSuffix,b=window,u=p.Shell,rt=b.fx,ut=rt.environment,wt=ut.isDevelopmentMode,at=rt.bootstrapTelemetry,vt=s.isFeatureEnabled,ft=p.ExtensionNames,et=ko.isObservable,ot=ko.observable,yt=ko.pureComputed,l,r,st,a,v;t.registerManifestDefinition=new g(i.registration);t.getViewModelsDefinition=new w(i.viewModels);
t.getExtensionGalleryService=new w(i.getExtensionGalleryServiceViewModel);t.initializeEndPoint=new f(i.entryPointInitialize);t.disposeEndPoint=new g(i.entryPointDispose);t.getDefinitionEndPoint=new f(i.entryPointGetDefinition);t.getBladeDefinitionEndPoint=new f(i.entryPointGetBladeDefinition);t.getPartDefinitionEndPoint=new f(i.entryPointGetPartDefinition);t.getControlDefinitionEndPoint=new f(i.entryPointGetControlDefinition);t.pingEndPoint=new f(i.ping);t.getAuthorizationTokenEndPoint=new f(i.getAuthToken);t.getUserInfoEndPoint=new f(i.getUserInfo);t.getSharedSettingsEndPoint=new f(i.getSharedSettings);t.getLocalGalleryPackagesEndpointsDefinition=new f(i.getLocalGalleryPackagesEndpoints);t.registerLocalGalleryPackagesEndpointDefinition=new f(i.registerLocalGalleryPackagesEndpoint);t.submitObjectCacheTelemetryEndpoint=new f(i.submitObjectCacheTelemetry);t.sharedObservablesEndPoint=new w(i.provideExtensionService);t.hasPermissionsToShell=new f(i.hasPermission);t.mapAssetIdToResourceIdEndPoint=
new f(i.mapAssetIdToResourceId);t.mapResourceIdToAssetIdEndPoint=new f(i.mapResourceIdToAssetId);t.mapAssetIdToDynamicSelectionAndIconEndPoint=new f(i.mapAssetIdToDynamicSelectionAndIcon);t.mapResourceIdToDynamicSelectionAndIconEndPoint=new f(i.mapResourceIdToDynamicSelectionAndIcon);t.getAssetTypeInformationEndPoint=new f(i.getAssetTypeInformation);t.getResourceTypeAssetTypeInformationEndPoint=new f(i.getResourceTypeAssetTypeInformation);t.getResourceAssetInformationEndPoint=new f(i.getResourceAssetInformation);t.getResourceEndPoint=new f(i.getResource);t.signalResourcesChangedEndPoint=new f(i.signalResourcesChanged);t.getArmEndpointEndPoint=new f(i.getArmEndpoint);l=new o.Diagnostics.Log("MsPortalFx/Extension/Runtime");st=function(){function i(n,i,f,s,c){var l=this,v;this._hubsWindowsId=t.getHubsWindowId();r=e.client;this._extensionId=n.name;this._manifest=n;this._tokenCache=o.Security.createAuthTokenCache(function(n){return t.getAuthorizationTokenEndPoint.invoke(r,u,n)});this._entryPointDeferred=
Q.defer();o.Diagnostics.ErrorReporter.initialize();v=vt("prefetch");v?i():(t.initializeEndPoint.register(r,[u],function(){return l.initializeEntryPoint(i)}),t.disposeEndPoint.register(r,[u],function(){l._entryPointDeferred.promise.isPending||(l._entryPointDeferred=Q.defer());l._entryPoint&&(l._entryPoint.dispose(),l._entryPoint=null)}),f&&t.getBladeDefinitionEndPoint.register(r,[u],function(n){return k(f,"blade",n)}),s&&t.getPartDefinitionEndPoint.register(r,[u],function(n){return k(s,"part",n)}),c&&t.getControlDefinitionEndPoint.register(r,[u],function(n){return k(c,"control",n)}),t.getDefinitionEndPoint.register(r,[u],function(){var t=l._entryPoint.getDefinition(),n=require.s.contexts._.config;return t.requireConfig=JSON.parse(JSON.stringify({bundles:n.bundles,paths:n.paths,shim:n.shim})),t}),t.getViewModelsDefinition.registerObjectFactory(r,{allowedOrigin:[u,this._hubsWindowsId],allowRemoteChanges:!0,handler:function(n){return l.getObservable(n)},onSuccess:a.earlyOnInputsSet}),t.getExtensionGalleryService.
registerObjectFactory(r,{allowedOrigin:null,allowRemoteChanges:!0,handler:function(n,i){var r=t.getDescriptor(i.srcWindowId).name;if([u,ft.Hubs,ft.Marketplace].indexOf(r)!==-1)return l.getGalleryServiceViewModel();throw i.srcWindowId+" is not allowed to call getExtensionGalleryService()";}}));e.start({originId:t.getWindowId({name:n.name,cloudName:undefined},{addSelfCloudNameIfMissing:!0}),loadWindow:h,parentWindow:b.parent})}return i.prototype.initializeEntryPoint=function(n){var t=this;return n().then(function(n){return t._entryPoint=n,t._initialize(),t._entryPoint.initialize(),t._entryPointDeferred.resolve(!0),at})},i.prototype.register=function(){if(this._registered)throw new Error("Already registered");t.registerManifestDefinition.invoke(r,u,this._manifest);this._registered=!0;try{var i=o.Internal.Diagnostics.Net;i.traceResourceDownloads();i.traceCdnIndex()}catch(f){l.error("Error trying to trace resourceDownloads or cdnIndex. Error: "+n.Diagnostics.getLogFriendlyMessage(f))}},i.prototype.
_initialize=function(){var f=this,i;if(this._initialized)throw new Error("Already initialized");t.pingEndPoint.register(r,[u],function(){return Q(!0)});this._entryPoint.getObservable&&t.sharedObservablesEndPoint.registerObjectFactory(r,{allowedOrigin:null,allowRemoteChanges:!1,handler:function(n){return f._entryPoint.getObservable(n,[])}});y.status.subscribe(function(n){t.extensionStatusEndPoint.invoke(r,u,n)});y.initialize(function(n){return f.getAuthorizationToken(n).then(function(n){return n&&n.header})});i=ut.localGalleryPackageEndpoint;i&&t.registerLocalGalleryPackagesEndpointDefinition.invoke(r,u,i);n.Data.beginTelemetrySubmission();this._initialized=!0},i.prototype.getAuthorizationToken=function(n){return this._tokenCache.getToken(n)},i.prototype.getSharedSettings=function(){return t.getSharedSettingsEndPoint.invoke(r,u,h)},i.prototype.getUserInfo=function(){return t.getUserInfoEndPoint.invoke(r,u,h)},i.prototype.getLocalGalleryPackagesEndpoints=function(){return t.getLocalGalleryPackagesEndpointsDefinition.
invoke(r,u,h)},i.prototype.hasPermission=function(n,i,f){return ht.isResourceManagerId(n,!0)?t.hasPermissionsToShell.invoke(r,u,{entityId:n,requestedActions:i,cloudName:f}):(l.error("Entity ID must be a resource ID, a subscription ID or a resource group ID for hasPermissions, failing open"),Q(!0))},i.prototype.assetHasPermission=function(n,t,i){var r=this;return this.mapAssetIdToResourceId(n).then(function(n){return r.hasPermission(n,t,i)})},i.prototype.mapAssetIdToResourceId=function(n){return t.mapAssetIdToResourceIdEndPoint.invoke(r,u,n)},i.prototype.mapResourceIdToAssetId=function(n){return t.mapResourceIdToAssetIdEndPoint.invoke(r,u,n)},i.prototype.mapAssetIdToDynamicSelectionAndIcon=function(n,i){return t.mapAssetIdToDynamicSelectionAndIconEndPoint.invoke(r,u,{assetId:n,forceBladeSelection:i})},i.prototype.mapResourceIdToDynamicSelectionAndIcon=function(n,i){return t.mapResourceIdToDynamicSelectionAndIconEndPoint.invoke(r,u,{resourceId:n,forceBladeSelection:i})},i.prototype.getAssetTypeInformation=
function(n,i){return t.getAssetTypeInformationEndPoint.invoke(r,u,{extensionName:n,assetType:i})},i.prototype.getResourceTypeAssetTypeInformation=function(n){return t.getResourceTypeAssetTypeInformationEndPoint.invoke(r,u,n)},i.prototype.getResourceAssetInformation=function(n){return t.getResourceAssetInformationEndPoint.invoke(r,u,n)},i.prototype.getResource=function(n,i){return t.getResourceEndPoint.invoke(r,u,{resourceId:n,caller:i})},i.prototype.signalResourcesChanged=function(n){return t.signalResourcesChangedEndPoint.invoke(r,u,n)},i.prototype.disableAjaxServerVersionCheck=function(){y.disableVersionCheck()},i.prototype.getObservable=function(n){var i=this,r=n.telemetryContext,t=e.messageContext;return t&&(t.timestamps.tag=n.name),this._entryPointDeferred.promise.then(function(){return e.invokeWithContext(t,function(){var u;switch(n.type){case it.PartViewModel:u=nt.usingState(function(){return i.getPartViewModel(n)},r);break;case it.ViewModel:i._entryPoint.getViewModel&&(u=nt.usingState(
function(){return i.getViewModel(n)},r))}if(u)return u.then(function(i){return a.createViewModelWrapper(i,n,t)||i});throw new Error("Cannot provide the required object.");})})},i.prototype.getGalleryServiceViewModel=function(){var t=this,n=this._manifest&&this._manifest.galleryService&&this._manifest.galleryService.serviceViewModel;return n?this._entryPointDeferred.promise.then(function(){return d.composeViewModel(t._entryPoint.getViewModel,n,null,!1)}):Q(h)},i.prototype.dispose=function(){this._disposed=!0},i.prototype.getViewModel=function(n){var t=n.earlyExecTasks&&function(t){v.earlyExecuteTask(t,n.earlyExecTasks)};return Q(d.composeViewModel(this._entryPoint.getViewModel,n.name,n.initialState,n.createSelectable,n.createHubsInternalCloudNameProperty,t))},i.prototype.getPartViewModel=function(t){var f=n.Composition.BladeContainer,y=f.BladeContainer,p=f.bindActionBar,i=t.initialState,o=n.ViewModels.createFrameworkPartViewModel(),s=t.collapsed,w={initialState:i,selectable:t.createSelectable?
c.Part.createSelectableViewModel(i):h,location:t.partLocation},l=t.containerType===1,b=l?y:c.PartContainer,k=function(n,t){l&&p(n,t)},r=new b(o,w),d=e.Measurement.getTimestamp(),u=this._entryPoint.getPartViewModel(t.name,r,i),a=function(n){tt.markOperationEnd(tt.VIEW_MODEL_CTOR,d);ct(s)||n.collapsed(s);k(r,n);var u=new c.Part(o,r,n,i,t.createHubsInternalCloudNameProperty);return t.earlyExecTasks&&v.earlyExecuteTask(n,t.earlyExecTasks),u};return Q.isPromiseAlike(u)?u.then(a):Q(a(u))},i}();t.RuntimeImpl=st,function(t){function s(n,t,s){n.getViewModelOptions=t;var h=n.content;if(h&&h._msPortalFx_viewModelApiV2){if(!u(n,t))throw new Error("Inputs not available");return delete t.partSize,e.invokeWithContext(s,function(){var v=f(n,t),e,l;o(n,v);var u=i.reduce(function(n,t){return n[t]=ot(),n},{}),s={},c=n.container;return r(c,u,h,s,t.name),e=MsPortalFx.cloneAndRebindFunctions(n),l=e.content={_msPortalFx_viewModelApiV2_wrapper:!0,chrome:u,viewModel:ot()},a(n,function(){r(c,u,h,s,t.name);l.viewModel(
h)}),e})}}function r(n,t,r,u,f){i.forEach(function(i){var e,o;i in r&&(e=r[i],i in u?e!==u[i]&&l.error("Property changed non-observably, use an observable instead and update its value: '"+i+"' in '"+f+"' in '"+b.fx.environment.extensionName+"'"):(o=t[i],et(e)?(o(e()),e.subscribe(n,o)):o(e),u[i]=e))})}function h(n,t,i){var e,r=n.getValue(),h=r.getViewModelOptions,s,c;delete r.getViewModelOptions;u(r,h)&&(e=Q.defer(),o(r,e.promise));i(n,t);s=r.content;c=h.partSize;typeof c=="number"&&s&&et(s.size)&&s.size(c);e&&e.resolve(f(r,h))}function u(n,t){return!!(t.onInputsSetParameters&&n.updatePartInputValues)}function f(n,t){var i=t.onInputsSetParameters;return delete t.onInputsSetParameters,n.updatePartInputValues(i.inputs,i.settings,i.traceOptions,i.viewModelName,i.inputsMetadata)}function o(n,t){n.onInputsSetPromise=t}function a(t,i){var u=t.container,r,f;if(t instanceof c.Part)r=u.operations.blockingUi;else if(t instanceof n.ViewModels.CompositionViewModel)r=yt(function(){return t.state()===
n.ViewModels.CompositionState.Preparing});else throw new Error("Unexpected view model");r()?f=r.subscribe(u,function(n){n||(f.dispose(),i())}):i()}var i=["title","subtitle","icon","description"];t.createViewModelWrapper=s;t.earlyOnInputsSet=h}(a||(a={})),function(n){function t(n,t){return function(){var i=n[t.method],r=typeof i;if(r==="function")return i.apply(n,t.args);throw new Error("EalyExecTask failed to execute "+t.method+". Expected a function, however type is  "+r);}}function i(n,i){var u=[],r,f;i&&(r=i&&i.tasks,r&&r.length>0&&(i.taskExecType!==1?(f=r.reduce(function(i,r){return i.then(t(n,r))},Q()),u=[f]):u=r.map(function(i){return Q.fcall(t(n,i))})),typeof i.keepReturnsIn=="string"&&(n["_msPortalFx_earlyExec"+i.keepReturnsIn]=u))}n.earlyExecuteTask=i}(v||(v={}))})(t=n.Extension||(n.Extension={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Observable=0]="Observable"})(n.ServiceType||(n.ServiceType={}));var t=n.ServiceType})(t=n.Extension||
(n.Extension={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.FromInput=0]="FromInput";n[n.FromProvider=1]="FromProvider";n[n.FromSourceProvider=2]="FromSourceProvider"})(n.AssetIdSourceType||(n.AssetIdSourceType={}));var t=n.AssetIdSourceType})(t=n.Extension||(n.Extension={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.All=0]="All";n[n.Any=1]="Any"})(n.SetRequirement||(n.SetRequirement={}));var t=n.SetRequirement})(t=n.Extension||(n.Extension={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";function r(n,t,r){var u=this,f=r&&r.allowedOrigins;return i.client.registerRpcEndPoint(n,{allowedOrigin:f,handler:function(n){return t.apply(u,n)}})}function u(n,t){for(var u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];return i.client.invokeRpc(t,n,u)}var i=n.Base.Rpc.Internal,f=Array.prototype.slice;t.registerCallback=r;t.invokeCallback=u})(i=t.Rpc||
(t.Rpc={}))})(t=n.Services||(n.Services={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=n.Base,r=n.Base.Rpc.Internal,u=window,f=u.fx.environment,o=new i.Diagnostics.Log("MsPortalFx/Services/Services.ServiceProvider"),e=function(){function n(n,t){this._hostExtensionId=n;this._scope=t}return n.prototype.getObservable=function(){FxImpl.FeatureAdoption.traceFeature({name:"HubsObservables",status:!0,properties:{observable:this._scope}});var n=f.isDevelopmentMode;return FxImpl.Extension.sharedObservablesEndPoint.acquireObject(r.client,this._hostExtensionId,this._scope).then(function(n){return n.getValue()})},n.prototype.releaseObservable=function(){},n.prototype.dispose=function(){},n}();t.ObservableServiceClientImpl=e})(t=n.Services||(n.Services={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(){function n(n,t,i){this.partName=n;this.parameters=t;this.options=i||{}}return n}();n.PartReference=t})(t=n.Composition||
(n.Composition={}))}(MsPortalFx||(MsPortalFx={})),function(n){"use strict";function c(n,t){var i=n;i._msPortalFxIsSelectableViewModel=!0;t&&(i._msPortalFxSelectable=t);n.configureSelectable=h.configureSelectable.bind(n)}function l(n,t){var i=n;i._msPortalFxSelectable=t}function a(n){return o(n)?n:null}function o(n,t){var i=n,r;return i&&i._msPortalFxIsSelectableViewModel===!0?(r=!!i._msPortalFxSelectable2,!t)?!!i._msPortalFxSelectable||r:r:!1}function v(n){return n&&n._msPortalFxSelectableItf}function y(n,t,r){var u=n[i];u&&u[t]&&typeof u[t]=="function"&&u[t].apply(u,r)}var r=window,i="_msPortalFxCallbacks",u=ko.observable,t,f,e,s,h;(function(t){var r;(function(t){var o=function(){function n(n,t){this.parameters=n;this[i]=t}return n.prototype.clone=function(t){return new n(t,this[i])},n}(),r,s,f,h;t.BladeReference=o;r=function(t){function i(i,r,u,f){var e=arguments,o,s;(typeof e[1]=="object"||Array.isArray(e[2])||typeof e[4]=="string")&&(u={},f={},e[1]&&(u.parameters=e[1]),e[2]&&e[3]&&
(u.callbacks=e[3],f.outputParameters=e[2]),r=e[4]);o=u&&u.parameters;s=u&&u.callbacks;t.call(this,o,s);this.bladeName=i;this.extensionName=r;this.options=u;this.metadata=f;this.cloudName=n.Extension.selfCloudName}return __extends(i,t),i}(o);t.PdlBladeReference=r;s=function(t){function i(i,r,f,e){function v(t){var i=new n.TriggerableLifetimeManager,r=l.getEditableObservable(i);t(r);i.dispose()}var h=arguments,a;typeof h[0]=="object"&&(e={},f=h[0],i=h[1],f.parameters=h[2],r=h[3]);t.call(this,i,r,f,e);var s=f.supplyInitialData,c=f.supplyProviderConfig,o=f.receiveResult,l=f.editScopeAccessor;if(s=s&&s.bind(f),c=c&&c.bind(f),o=o&&o.bind(f),l){if(o||s)throw new Error("Do not specify both 'editScopeAccessor' and either 'supplyInitialData' or 'receiveResult'.");}else if(!o)throw new Error("Specify either a 'editScopeAccessor' or a 'receiveResult' callback.");a=u();this._msPortalFxPPBRItf={bladeConfig:a,getBladeConfig:function(){var n=null,t;return s?n=s():l&&v(function(t){n=t()}),t={config:c?c(
):undefined,initialState:n},a(t),t},receiveResult:function(n){o?o(n):v(function(t){t(n)})}}}return __extends(i,t),i}(r);t.ParameterProviderBladeReference=s;f=function(){function n(){}return n.prototype.renavigateActivatedBlade=function(){},n}();t.SelectableBase=f;h=function(n){function t(t){function o(n){r({reason:1,bladeReference:n})}function s(){var n=i();return o(n),n}function h(){return f().then(function(n){return o(n),n})}var c;n.call(this);var r=u(),i=t.supplyBladeReference,f=t.supplyBladeReferenceAsync;if(!i&&!f)throw new Error("Specify either a 'supplyBladeReference' or a 'supplyBladeReferenceAsync' callback.");if(i&&f)throw new Error("Do not specify both 'supplyBladeReference' and 'supplyBladeReferenceAsync'.");c=this._msPortalFxSelectableItf={flags:e.IsSelectable,openBladeRequest:r,fetchBladeReference:i?s:h};this.renavigateActivatedBlade=function(n){r({reason:2,bladeReference:n})}}return __extends(t,n),t}(f);t.Selectable2=h})(r=t.Selectable||(t.Selectable={}))})(t=n.Composition||
(n.Composition={}));f=t.Selectable;n.BladeReference=f.BladeReference,function(n){n[n.None=0]="None";n[n.IsSelectable=1]="IsSelectable";n[n.ActivateAsync=2]="ActivateAsync"}(n.SelectableFlags||(n.SelectableFlags={}));e=n.SelectableFlags;n.initializeSelectableViewModel=c;n.assignSelectable=l;n.tryGetSelectableViewModelContract=a;n.isSelectableViewModel=o;n.isSelectable2=v;n.invokeCallback=y;s=function(){function n(){}return n.prototype.configureSelectable=function(n){var i=new t.Selectable.Selectable2(n),r=this._msPortalFxSelectable;return r&&(r.dispose(),delete this._msPortalFxSelectable),this._msPortalFxSelectable2=i,i},n}();h=new s;r.define("MsPortalFx/Composition/Selectable",[],function(){return t.Selectable});r.define("Fx/Composition/Selectable",[],function(){return t.Selectable})}(FxImpl||(FxImpl={})),function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Minute=0]="Minute";n[n.Hour=1]="Hour";n[n.Day=2]="Day";n[n.Week=3]="Week";n[n.Month=4]="Month";n[n.Year=
5]="Year"})(n.TimeUnit||(n.TimeUnit={}));var t=n.TimeUnit;n.TimeRangeValueType="MsPortalFx.Composition.Configuration.ValueTypes.TimeRange"})(t=n.Configuration||(n.Configuration={}))})(t=n.Composition||(n.Composition={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";function t(n){return typeof n=="object"?u(n,!0):n}var i=MsPortalFx.deepEquals,r=MsPortalFx.union,u=MsPortalFx.Base.Utilities.clone,f=new MsPortalFx.Base.Diagnostics.Log("MsPortalFx/ViewModels/ViewModels.Part"),e=function(){function n(n,t){this._configChangedHandler=t}return n.prototype.setValues=function(n){this._persistedValues=t(n)},n.prototype.getValues=function(){var n=this._persistedValues;return n.parameters,t(n)},n.prototype.updateValues=function(n){var p;if(!this._persistedValues)throw new Error("This 'updateValues' method cannot be called until the associated Part/Blade has been initialized.  Typically, 'updateValues' is called in the 'receiveResult' callback for a ParameterCollector opening a configuration Blade.");
var e=!1,o=n.parameters,h=n.settings,c=this._persistedValues,l=c.parameters,s=c.settings,a=l.values,v=o&&o.values||{},u=l.metadata,y=o&&o.metadata||{},w=r(Object.keys(v),Object.keys(y));w.forEach(function(n){var o,c,s,r,l,h,p;if(!u.hasOwnProperty(n)){f.error("Parameter named '"+n+"' is not a recognized parameter for this Part.");return}if(o=!1,c=u&&u[n]&&Array.isArray(u[n].bindingSources)&&u[n].bindingSources.length>0,c){if(s=y[n],r=s&&s.activeBindingSourceName,r!==u[n].activeBindingSourceName){if(l=!r||u[n].bindingSources.firstIndex(function(n){return n.name===r})>=0,!l)throw new Error("The name '"+r+"' supplied as 'activeBindingSourceName' does not match a binding source in 'bindingSources'.");u[n].activeBindingSourceName=r;e=!0}o=!!r}h=v[n];p=o||i(h,a[n]);p||(a[n]=t(h),e=!0)});p=Object.keys(h);p.forEach(function(n){var u=!0,r=h[n];r===undefined&&(u=!1);u?i(r,s[n])||(s[n]=t(r),e=!0):s[n]!==undefined&&(s[n]=undefined,e=!0)});e&&this._configChangedHandler(this._persistedValues)},n}();n.
Configuration=e})(t=n.Composition||(n.Composition={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Ready=0]="Ready";n[n.Failed=1]="Failed";n[n.Preparing=2]="Preparing"})(n.CompositionState||(n.CompositionState={}));var t=n.CompositionState})(t=n.ViewModels||(n.ViewModels={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";function h(n){return typeof n=="function"}function it(){return{allowUiBlocking:i(!0),selectable:i()}}function rt(){return{allowUiBlocking:i(!0),selectable:i(),registeredSelectables:i(),registeredSelectableOptions:i(),_revealContentCallCount:i(0),activeOpenBladeCommand:i(),updatedConfiguration:i(),_onInputValuesUpdated:null}}function p(n,t){n&&typeof n===v&&tt(t,function(t,i){var r=n[t];b(r)?w(r,i):ft(r)?ut(r,i):p(r,i)})}function w(n,t){var i=function(i){t[i]&&Array.isArray(t[i])&&n[i](t[i])};i(o);i(e);i(s)}function ut(n,t){t&&(n.selectedValue(t.selectedValue),n.isSelected(!!t.isSelected))}function b(n){var t=typeof
n===v?Object.keys(n):[],i=t.indexOf(e)!==-1&&t.indexOf(o)!==-1&&t.indexOf(s)!==-1&&f(n[e])&&f(n[o])&&f(n[s]),r=t.indexOf("_msPortalFxSelectableSet")!==-1;return i||r}function ft(n){return n instanceof MsPortalFx.ViewModels.Selectable}var l=MsPortalFx.Base,k=n,i=ko.observable,f=ko.isObservable,a=ko.toJSON,r=l.Rpc.Internal,d=n.Extension,g=d.CloudName,u=n.TelemetryContext,v="object",nt=new l.Diagnostics.Log("MsPortalFx/ViewModels/Composition/ViewModels.Composition"),tt=MsPortalFx.forEachKey,e="activatedItems",o="selectedItems",s="itemsWithChildEdits",c,y;t.internalCloudNamePropertyName="cloudName";t.createFrameworkPartViewModel=rt;c=function(){function n(n,t,r,u,f){this._hadHubsInternalCloudNameProperty=!1;this.internal=n;this.container=t;this.content=r||{};u&&u.content&&p(r,u.content);f&&(this.internal.cloudName=i(),this._hadHubsInternalCloudNameProperty=!0)}return n.prototype.updatePartInputValues=function(n,t,i,f){var e=[],l=this.content,v=this.container,y=r.Measurement.getTimestamp(),
o,s,c;if(this.content&&h(l.onInputsSet)){i&&(nt.verbose("Invoking onInputsSet of view model '"+(i.debugId||"N/A")+"'.\nInputs: "+a(n)+".\nSettings: "+a(t)),!!i.breakOnInputsSet);f&&u.setContextValue(u.ContextType.CompositionItem,{id:f});try{o=l.onInputsSet(n,t);o&&h(o.then)&&e.push(o)}catch(p){e.push(Q.reject(p))}finally{f&&u.resetContextValue(u.ContextType.CompositionItem)}}return r.messageContext&&r.Measurement.markOperationEnd(r.Measurement.ON_INPUTS_SET_CALLED,y),this.container&&(s=v.onInputsSetCallbacks.triggerCallbacks(n,t),s&&h(s.then)&&e.push(s)),this._hadHubsInternalCloudNameProperty&&(c=g.readFromInputs(n),c&&this.internal.cloudName(c)),e.length>0?Q.all(e):null},n}();t.CompositionViewModelBase=c;y=function(n){function r(r,u,f,e){var s=this,o,h,c;n.call(this,it(),r,u,f,e);this.state=i(t.CompositionState.Preparing);o=null;h=r;h.selectable&&k.assignSelectable(h,h.selectable);c=function(n){var i=n.then(function(){var n=!o||o===i;n&&s.state(t.CompositionState.Ready)},function(){var
n=!o||o===i;n&&s.state(t.CompositionState.Failed)});return i};this.updatePartInputValues=function(i,r,u,f){o=null;var e=n.prototype.updatePartInputValues.call(s,i,r||{},u,f);return e!==null?(s.state(t.CompositionState.Preparing),o=c(e)):s.state(t.CompositionState.Ready),o}}return __extends(r,n),r.prototype.updatePartInputValues=function(){return},r}(c);t.CompositionViewModel=y;t.initializeSelectableSet=w;t.isSelectableSetLike=b})(t=n.ViewModels||(n.ViewModels={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){var t;(function(t){"use strict";function r(t,r){var f=n.createFrameworkPartViewModel(),e,u;return r=r||{},e={initialState:r.initialState,selectable:r.createSelectable?i.Part.createSelectableViewModel(r.initialState):undefined,location:r.location},u=new i.PartContainer(f,e),new i.Part(f,u,t(u),r.initialState,r.createHubsInternalCloudNameProperty)}var i=MsPortalFx.ViewModels;t.composePartViewModel=r})(t=n.Part||(n.Part={}))})(t=n.ViewModels||(n.ViewModels={}))}(FxImpl||(FxImpl=
{})),function(n){var t;(function(t){"use strict";var r=n.Base,i=ko.observable,u;(function(t){function v(n,t){t===void 0&&(t=!0);var i=n;i.preview(!!t)}function y(n,t){var i="_msPortalFxShell";return t?n[i]=t:t=n[i],t}var e=n.Resources.Strings.ViewModels.Container,l=window,f=l.fx.environment.isDevelopmentMode||r.Utilities.isDiagnosticsEnabled,o=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/ViewModels.Container"),s=function(){function n(){this._callbacks=[];this._onInputsSetInvoked=!1}return n.prototype.add=function(n,t){this._callbacks.indexOf(n)<0&&this._callbacks.push(n);t&&this._onInputsSetInvoked&&n(null)},n.prototype.remove=function(n){var t=this._callbacks.indexOf(n);t>=0&&this._callbacks.splice(t,1)},n.prototype.triggerCallbacks=function(n,t){this._onInputsSetInvoked=!0;var r=this._callbacks.slice(),i=r.map(function(i){try{return i(n,t)}catch(r){return Q.reject(r)}}).filter(function(n){return!!n});return i.length>0?Q.all(i):null},n.prototype.dispose=function(){this._callbacks.
splice(0,this._callbacks.length)},n}(),c;t.OnInputsSetCallbacksImpl=s;var a=0,u={},h=function(){function t(){var n=this,t;this._lifetime=new FxImpl.TriggerableLifetimeManager;this._id=a++;this._msPortalFxNotice=i();this.onInputsSetCallbacks=new s;this.notFoundMessage=i();this.unauthorizedMessage=i();this.registerForDispose=function(t){return n._lifetime.registerForDispose(t),n._lifetime};t=this;t.preview=i(!1);f&&(u[this._id]=r.Rpc.Internal.getCurrentCallStack())}return t.VerifyAllContainerViewModelDisposed=function(){var n,t;f&&(n=Object.keys(u),n&&n.length>0&&(t=["The following "+n.length+" ContainerViewModel is created but not disposed:"],t.push("This indicate a Framework bug. Please open a Framework bug with following call stacks."),n.forEach(function(n,i){t.push("ContainerViewModel ("+i+") callstack:");t.push(u[n])}),o.error(t.join("\n"))))},t.prototype.isDisposed=function(){return this._lifetime.isDisposed()},t.prototype.createChildLifetime=function(){return this._lifetime.createChildLifetime(
)},t.prototype.dispose=function(){this._lifetime&&this._lifetime.dispose();this.onInputsSetCallbacks&&this.onInputsSetCallbacks.dispose();f&&delete u[this._id]},t.prototype.unauthorized=function(n){n||(n=e.unauthorizedText);this.unauthorizedMessage(n)},t.prototype.notFound=function(n){n||(n=e.notFound);this.notFoundMessage(n)},t.prototype.enableNotice=function(n){this._msPortalFxNotice.peek()?o.error("Notice has been enabled. It cannot be enabled again."):this._msPortalFxNotice(n)},__decorate([n.Composition.ProxyCompatibilityMode],t)}();t.ContainerViewModel=h;c=function(t){function i(i){t.call(this);this.selectable=null;this.configureSelectable=undefined;i&&(this.selectable=n.ViewModels.Part.createSelectableViewModel());FxImpl.initializeSelectableViewModel(this,this.selectable)}return __extends(i,t),i}(h);t.SelectableContainerViewModel=c;t.markAsPreview=v;t.shellViewModel=y})(u=t.Internal||(t.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var
t;(function(n){"use strict";(function(n){n[n.None=0]="None";n[n.Success=1]="Success";n[n.Warning=2]="Warning";n[n.Error=3]="Error";n[n.Dirty=4]="Dirty";n[n.Info=5]="Info";n[n.Upsell=6]="Upsell"})(n.ContentState||(n.ContentState={}));var t=n.ContentState})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function nt(n,t,i,r){function e(t){var i=!!(t&&t.elementSelector);n!==2||i||u.elementSelectorMissing()}function f(n,u,f){e(u);var o=u&&u.elementSelector,s=u&&u.metadata;t({bladeReference:n,reason:3,restorable:!1,selector:o,metadata:s,selectedItem:i,controlMetadata:r,contextPane:f})}function o(n,t,i,r){e(i);t.then(function(n){f(n,i,r)}).catch(function(t){v.error("The extension provided promise to ClickContext."+n+" has failed.\n"+FxImpl.Diagnostics.getLogFriendlyMessage(t))})}return{openBlade:function(n,t){f(n,t,!1)},openBladeAsync:function(n,t){o("openBladeAsync",n,t,!1)},openContextPane:function(n,t){f(n,t,!0)},openContextPaneAsync:
function(n,t){o("openContextPaneAsync",n,t,!0)}}}var f=n.Base,s=n.ViewModels,b=FxImpl.Composition,a=s.Internal,h=FxImpl.ViewModels,k=h.CompositionViewModelBase,e=f.Rpc.Internal,o=f.Utilities.clone,d=f.Constants.BladeParameterNames,c=n.Errors,i=ko.observable,l=a.shellViewModel,v=new f.Diagnostics.Log("MsPortalFx/ViewModels/ViewModels.Part"),r="",g={elementSelectorMissing:r,containerViewModelMissing:r,messageMissing:r,enableNoticeInvoked:r,identitySelectableMissing:r,selectableRegistered:r,selectableInstanceRegistered:r},u=FxImpl.getErrorMap(g),y,p,w;(function(n){n[n._Internal_None=0]="_Internal_None";n[n.Dashboard=1]="Dashboard";n[n.Blade=2]="Blade"})(t.PartLocation||(t.PartLocation={}));y=t.PartLocation;p=function(i){function r(t,r,f,o,s){var h=this;r||u.containerViewModelMissing();i.call(this,t,r,f,o,s);r.selectable&&FxImpl.assignSelectable(r,r.selectable);this._hadRevealedContentAtConstruction=t._revealContentCallCount()>0;this._currentOnInputsSetPromise=n.Helpers.Deferred().promise(
);this.container.operations.add(this._currentOnInputsSetPromise,{blockUi:!this._hadRevealedContentAtConstruction});t._revealContentCallCount.subscribe(r,this._onRevealContent,this);ko.reactor(r,function(){h.container.operations.blockingUi()||e.Measurement.markOperationEnd(e.Measurement.CONTENT_REVEALED,e.Measurement.getTimestamp(),h._onInputsSetContext)})}return __extends(r,i),r.createSelectableViewModel=function(n,i){return new t.Selectable({selectedValue:arguments.length===2?i:!0,isSelected:!!(n&&n.container&&n.container.selectable.isSelected),isCommandSelected:!!(n&&n.container&&n.container.selectable.isCommandSelected)})},r.createClickableLinkViewModel=function(n,i){return new t.ClickableLink(n,i)},r.prototype.updatePartInputValues=function(n,t,r,u,f){var o,h,s,c;return this.internal._onInputValuesUpdated&&this.internal._onInputValuesUpdated(n,t,f),o=this._currentOnInputsSetPromise,this._currentOnInputsSetPromise=null,h=this.internal._revealContentCallCount(),this._onInputsSetContext=
e.messageContext,s=i.prototype.updatePartInputValues.call(this,n,t||{},r,u),s!==null&&(this._currentOnInputsSetPromise=this._updatePartStateAfterOnInputsSetPromise(s),c=this._hadRevealedContentAtConstruction||this.internal._revealContentCallCount()>h,this.container.operations.add(this._currentOnInputsSetPromise,{blockUi:!c})),o&&this.container.operations.remove(o),this._currentOnInputsSetPromise},r.prototype._updatePartStateAfterOnInputsSetPromise=function(t){var i=this,r=t.then(function(){if(n.isNullOrUndefined(i.container.unauthorizedMessage())){var t=!i._currentOnInputsSetPromise||i._currentOnInputsSetPromise===r;t&&i.container.recover()}},function(n){var f=FxImpl.Diagnostics.getLogFriendlyMessage(n),t="Part's onInputsSet promise failed.\nError: "+f,u;if(n instanceof c.UnauthorizedDataError||v.error(t),u=!i._currentOnInputsSetPromise||i._currentOnInputsSetPromise===r,u){if(n instanceof c.Error&&n.handled)return;n instanceof c.UnauthorizedDataError?i.container.unauthorized():i.container.
fail(t)}});return r},r.prototype.updatePartForUnauthorized=function(){var n=this._currentOnInputsSetPromise;this._currentOnInputsSetPromise=null;n&&this.container.operations.remove(n)},r.prototype.invokeClickHandler=function(n,t,i,r,u,f){if(i){var e=nt(n,r,u,f),o=n===3?[u,e]:[e];i.apply(t,o)}},r.prototype._onRevealContent=function(){var n=this._currentOnInputsSetPromise,t=n&&this.container.operations.getOptionsForOperation(n);t&&t.blockUi&&this.container.operations.update(n,{blockUi:!1})},r}(k);t.Part=p;w=function(r){function f(u,f){var o=this,e;r.call(this);this.isSelectable=i(!0);this.selectable=null;this.clickableLink=null;this.failureMessage=i();this.noDataMessage=i();this.height=i(0);this.width=i(0);this.mutate=i();this.configureSelectable=undefined;this._partState=null;f=f||{initialState:null};e=f.selectable;FxImpl.initializeSelectableViewModel(this,e);this._partState=i(n.Parts.PartState.Ready);this.partState=ko.pureComputed(function(){return o._partState()});e&&(this.selectable=
e);f.clickableLink&&(this.clickableLink=f.clickableLink);this.partTitle=i(f.partTitle||null);this.assetName=i(f.assetName||null);this.contentState=i(s.ContentState.None);this.operations=new t.PartOperationList(this);this.registerForDispose(this.operations);this._registeredSelectables=u.registeredSelectables;this._registeredSelectableOptions=u.registeredSelectableOptions;this._registeredSelectablesInitialState=f.initialState&&f.initialState.internal&&f.initialState.internal.registeredSelectables||{};u._onInputValuesUpdated=this._updateConfiguration.bind(this);this._internalViewModel=u;this.location=f.location||y._Internal_None;l(this,{autoSize:i(!1),resize:i(null),selectables:i({})});this._config=new b.Configuration(f||{},this._handleConfigurationChange.bind(this))}return __extends(f,r),f.prototype.autoSize=function(){l(this).autoSize(!0)},f.prototype.resizeTo=function(n,t){n=Math.min(Math.max(n,1),25);t=Math.min(Math.max(t,1),25);l(this).resize({width:n,height:t})},f.prototype.fail=function(
t){t||u.messageMissing();this.failureMessage(t);this._partState(n.Parts.PartState.Failed)},f.prototype.recover=function(){this._partState()===n.Parts.PartState.Failed&&(this.failureMessage(null),this._partState(n.Parts.PartState.Ready));this.unauthorizedMessage(null)},f.prototype.revealContent=function(){var n=this._internalViewModel._revealContentCallCount();this._internalViewModel._revealContentCallCount(n+1)},f.prototype.enableNotice=function(){u.enableNoticeInvoked()},f.prototype.registerSelectable=function(n,t,i,r){var l=this,f=this._registeredSelectables()||{},e=this._registeredSelectableOptions,s=e()||{},a=function(){return Object.keys(f).map(function(n){return f[n]}).some(function(n){return i===n})},c;t&&i||u.identitySelectableMissing();f.hasOwnProperty(t)&&u.selectableRegistered(t);a()&&u.selectableInstanceRegistered();c=this._registeredSelectablesInitialState;h.isSelectableSetLike(i)&&c.hasOwnProperty(t)&&h.initializeSelectableSet(i,c[t]);r&&(s=o(s,!1),s[t]=r,e(s));f=o(f,!1);
f[t]=i;this._registeredSelectables(f);n.registerForDispose(function(){var n=o(l._registeredSelectables(),!1),i=o(e(),!1);delete n[t];delete i[t];l._registeredSelectables(n);e(i)})},f.prototype.activateConfiguration=function(){return this._config},f.prototype._updateConfiguration=function(n,t,i){var r={},u;Object.keys(n||{}).filter(function(n){return!a.isBladeCallerInput(n)&&n!==d.EditScopeId}).forEach(function(t){r[t]=n[t]});u={parameters:{values:r,metadata:i||{}},settings:t&&t.content||{}};this._config.setValues(u)},f.prototype._handleConfigurationChange=function(n){var t={inputs:n.parameters&&n.parameters.values,settings:n.settings,inputsMetadata:n.parameters&&n.parameters.metadata};this._internalViewModel.updatedConfiguration(t)},f}(s.Internal.ContainerViewModel);t.PartContainer=w})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function h(n,t,i){return Math.min(Math.max(n,t),i)}var u=ko.observable,o=ko.observableArray,i=
ko.computed,s=function(){function t(t){var u=this;this._activeOperations=o();this.inProgress=i(t,function(){return u._activeOperations().length>0});this.blockingUi=i(t,function(){return u._activeOperations().some(function(n){return n.blockUi()})});this.shieldType=ko.pureComputed(function(){var n=u._activeOperations(),t;return n.length>0&&(t=n.every(function(n){return n.shieldType&&n.shieldType()===r.Translucent})),t?r.Translucent:r.Opaque});this.progressBarViewModel=new n.ViewModels.Controls.Visualization.ProgressBar.ViewModel(t);i(t,function(){var t=u._activeOperations().some(function(n){return n.deterministicPercentage()!==null});t?u.progressBarViewModel.status(n.ViewModels.Controls.Visualization.ProgressBar.StatusType.InProgress):u.progressBarViewModel.status(n.ViewModels.Controls.Visualization.ProgressBar.StatusType.Indeterminate)});i(t,function(){var n=0,t=0;u._activeOperations().forEach(function(i){var r=i.deterministicPercentage();r!==null&&(n++,t+=r)});u.progressBarViewModel.valuePercentage(
n===0?0:t/n)})}return t.prototype.dispose=function(){this.progressBarViewModel.dispose()},t.prototype.add=function(n,t){var u=this,i,r;if(!n)throw new Error("Argument cannot be null: promise.");t=t||new f;i=new e(n,t);r=function(){u._activeOperations.remove(i)};this._activeOperations.push(i);n.then(r,r)},t.prototype.remove=function(n){if(!n)throw new Error("Argument cannot be null: promise.");this._activeOperations.remove(function(t){return t.promise===n})},t.prototype.update=function(n,t){var i=this._activeOperations().first(function(t){return t.promise===n});i&&i.blockUi(t.blockUi)},t.prototype.getOptionsForOperation=function(n){var t=this._activeOperations().first(function(t){return t.promise===n});return t?{blockUi:t.blockUi(),shieldType:t.shieldType()}:null},t}(),r,f,e;t.PartOperationList=s,function(n){n[n.Opaque=0]="Opaque";n[n.Translucent=1]="Translucent"}(t.ShieldType||(t.ShieldType={}));r=t.ShieldType;f=function(){function n(){}return n}();t.PartOperationOptions=f;e=function()
{function n(n,t){var i=this;this.promise=n;this.deterministicPercentage=u(null);this.blockUi=u(t.blockUi);this.shieldType=u(t.shieldType);n.progress&&n.progress(function(n){var t=n&&n.percent;if(typeof t=="string"&&(t=parseFloat(t),isNaN(t)))throw new Error("Percent values should be numbers.");typeof t=="number"&&i.deterministicPercentage(h(t,0,100))})}return n}()})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(){"use strict";var t=window;t.define("Fx/Composition/Blade",[],function(){return n.Composition.Blade})})(i=t.Blade||(t.Blade={}))})(t=n.Composition||(n.Composition={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){var t;(function(n){"use strict";function r(n,t){var i=t&&t.actionBar;i instanceof MsPortalFx.ViewModels.ActionBars.Base.ViewModel&&n._actionBar(i)}var t=MsPortalFx.ViewModels,u=window,i=function(n){function t(t,i){n.call(this,t,i);this._actionBar=ko.observable()}return __extends(t,n),t}(t.PartContainer);
n.BladeContainer=i;n.bindActionBar=r})(t=n.BladeContainer||(n.BladeContainer={}))})(t=n.Composition||(n.Composition={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";var t;(function(n){var t="Id",i="resource",r="Type";n.name="name";n.nameColumnId=n.name;n.kind="kind";n.resourceGroup=i+"Group";n.resourceGroupColumnId=n.resourceGroup;n.location="location";n.locationColumnId=n.location;n.locationId=n.location+t;n.resourceId=i+t;n.resourceGroupId=n.resourceGroup+t;n.resourceType=i+r;n.subscription="subscription";n.subscriptionName=n.subscription;n.subscriptionColumnId=n.subscription;n.subscriptionId=n.subscription+t;n.assetType="asset"+r})(t=n.ResourceColumns||(n.ResourceColumns={}))})(t=n.Assets||(n.Assets={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t="_group";n.ManagementGroupId="management"+t;n.SupportGroupId="support"+t;n.QuickAccessGroupId="quickaccess"+t;n.MonitoringGroupId="monitoring"+t;n.EventLogsItemId="eventlogs";n.ExportTemplateItemId=
"exporttemplate";n.MyAccessItemId="access";n.ResourceHealthItemId="resourcehealth";n.ResourceGroupsItemId="resourceGroups";n.ResourcesItemId="resources";n.SubscriptionCertsItemId="subcerts";n.SubscriptionQuotasItemId="subquotas";n.SupportHelpRequestItemId="supportrequest";n.TagsItemId="tags";n.LocksItemId="locks";n.TroubleshootItemId="troubleshoot";n.UsersItemId="users";n.PropertiesItemId="properties";n.AlertsItemId="alerts";n.DiagnosticsItemId="diagnostics";n.MetricsItemId="metrics";n.AppInsightsItemId="appinsights";n.LogAnalyticsItemId="loganalytics";n.LogSearchItemId="logsearch"})(t=n.Assets||(n.Assets={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";function e(n,i,f){var e,o=!1;return n.registerForDispose(function(){o=!0}),t.has(f)?e=t.get(f):(e=Q(r.acquireObject(u,i,{})).then(function(t){return n.registerForDispose(t),t.getValue()}),t.set(f,e),n.registerForDispose(function(){t.delete(f)})),e.then(function(n){if(o)throw new Error("supplyMenuDetailBladeReferenceAsync's input lifetime is already disposed");
else return Q(n.supplyBladeReferenceAsync(f))})}var i=MsPortalFx.Base.Constants,r=MsPortalFx.Base.Rpc.Internal.client,u="MenuDetailBladeReferenceLifeExtenderObject",t=new MsPortalFx.Map,f;n.supplyMenuDetailBladeReferenceAsync=e;f=function(){function n(){this.value=ko.observable()}return n.prototype.supplyBladeReferenceAsync=function(n){var r=this,t=function(n){return r.value(n),n},i;return n.supplyBladeReference?(i=n.supplyBladeReference(),t(i)):n.supplyBladeReferenceAsync().then(function(n){return t(n)})},n}();r.registerObjectFactory(u,{allowedOrigin:[i.ExtensionNames.Hubs,i.Shell],allowRemoteChanges:!0,handler:function(){return new f}})})(t=n.Assets||(n.Assets={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";var t;(function(n){function t(n,t,i,r,u){var e=function(n){if(n.length){var r=n.map(function(n){return n.resourceId.toLowerCase()}),t=i().filter(function(n){return r.indexOf(n.resourceId.toLowerCase())===-1});t.push.apply(t,n);i(t)}},f=t.items.filter(n,r).map(
n,function(n,t){return ko.ignoreDependencies(function(){return u(t)})});f.subscribe(n,e).callback(f())}n.ConnectView=t})(t=n.SupplementalDataStreamHelper||(n.SupplementalDataStreamHelper={}))})(t=n.Assets||(n.Assets={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";function u(n,t){return(n&t)===t}function c(n,t){return n&&n.viewModel&&u(n.contracts,t)}function f(n){return Q(new e.PdlBladeReference(n.detailBlade,n.extension,{parameters:n.detailBladeInputs}))}function l(n){return t().mapAssetIdToResourceId(n)}function a(n){return t().mapResourceIdToAssetId(n)}function i(n,i){return i===void 0&&(i=!1),t().mapAssetIdToDynamicSelectionAndIcon(n,i)}function v(n,t){return t===void 0&&(t=!1),i(n,t).then(function(n){return n.selection})}function y(n){return i(n,!0).then(function(n){return f(n.selection)})}function r(n,i){return i===void 0&&(i=!1),t().mapResourceIdToDynamicSelectionAndIcon(n,i)}function p(n,t){return t===void 0&&(t=!1),r(n,t).then(function(n){return n.
selection})}function w(n){return r(n,!0).then(function(n){return f(n.selection)})}function b(n,i){return t().getAssetTypeInformation(n,i)}function k(n){return t().getResourceTypeAssetTypeInformation(n)}function d(n){return t().getResourceAssetInformation(n)}function g(n){return t().signalResourcesChanged(n)}var e=FxImpl.Composition.Selectable,t=function(){return FxImpl.Assets.runtimeForTesting||FxImpl.Extension.getRuntime()},o,s,h;(function(n){n[n.None=0]="None";n[n.AssetInfo=1]="AssetInfo";n[n.BrowseConfig=2]="BrowseConfig";n[n.SupplementalData=4]="SupplementalData";n[n.ResourceMenuConfig=8]="ResourceMenuConfig";n[n.KindResourceMenuConfig=16]="KindResourceMenuConfig";n[n.StaticResourceMenuOverview=32]="StaticResourceMenuOverview"})(n.AssetContracts||(n.AssetContracts={}));o=n.AssetContracts,function(n){n[n.None=0]="None";n[n.CoAdmin=1]="CoAdmin"}(n.BrowseRequirements||(n.BrowseRequirements={}));s=n.BrowseRequirements,function(n){n[n.NotFound=0]="NotFound"}(n.AssetInfoRejection||(n.AssetInfoRejection=
{}));h=n.AssetInfoRejection;n.supportsContract=u;n.assetTypeInformationSupportsContract=c;n.mapAssetIdToResourceId=l;n.mapResourceIdToAssetId=a;n.mapAssetIdToDynamicSelectionAndIcon=i;n.mapAssetIdToDynamicSelection=v;n.mapAssetIdToBladeReference=y;n.mapResourceIdToDynamicSelectionAndIcon=r;n.mapResourceIdToDynamicSelection=p;n.mapResourceIdToBladeReference=w;n.getAssetTypeInformation=b;n.getResourceTypeAssetTypeInformation=k;n.getResourceAssetInformation=d;n.signalResourcesChanged=g})(t=n.Assets||(n.Assets={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function f(n,t,u){return r(i({name:n,cloudName:t}),u)}function r(n,t){return n+"_"+t}function e(n,t){return n?i({name:n,cloudName:t}):n}var u=n.Extension,i=u.getWindowId;t.getAssetTypeOrResourceTypeId=f;t.getAssetTypeOrResourceTypeIdByWindowId=r;t.addCloudNameToAssetTypeId=e})(t=n.Assets||(n.Assets={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";var t=function(){function n(){this._init(
)}return n.prototype.add=function(n,t){var i,r,u;return n&&(r=this._entries,t?(u=this._names,i=u[t],i===undefined&&(i=r.length,u[t]=i)):i=r.length,r[i]=n),this},n.prototype.remove=function(n){var t=this._entries,i,r;return typeof n=="string"?(i=this._names,r=i[n],isNaN(r)||(delete i[n],t[r]=null)):t.forEach(function(i,r){i===n&&(t[r]=null)}),this},n.prototype.clear=function(){return this._init(),this},n.prototype.fire=function(n){return this._entries.forEach(function(t){t&&t(n)}),this},n.prototype._init=function(){this._entries=[];this._names={}},n}();n.Callbacks=t})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";var y=n.Base.QueryStringBuilder,i=undefined,l="Microsoft",u=l+"_Azure_",o="Resource",e=l+"."+o+"s/",r="Browse",s="Blade",p="Gallery",h="Extension",a="TelemetrySharing",v="Feature",c=n.extendArrayIntoMap,f=n.extendStringMapIntoMap,w,b,k,d,g,nt,tt,it,rt,ut;t.Shell="fx";t.DefaultCloudName=window.fx.environment.defaultCloudName||
new y(window.location.search).getParameter("defaultCloudName")||"DefaultCloud",function(n){f(n,{Hubs:"Hubs"+h,Billing:u+"Billing",AzureInsights:u+"Insights",AzureMonitoring:u+"Monitoring",ActiveDirectory:u+"AD",Marketplace:u+"Marketplace",Support:u+"Support",Websites:"Websites"+h})}(w=t.ExtensionNames||(t.ExtensionNames={})),function(n){f(n,{ResourceGroups:i,BrowseAllBlade:r+"All",BrowseAllResources:i,BrowseRecentResources:i,BrowseAllBladeWithType:r+"AllWithType",BrowseServiceBlade:r+"Service",BrowseResourceGroupBlade:r+o+"Group",BrowseResourceBlade:r+o,BrowseInstanceLinkBlade:r+"InstanceLink",Gallery:i,StoreGallery:i,Deployments:i,ArmExplorer:i,WhatsNew:i,BrowseDynamicResource:i,BrowseDynamicAsset:i,SubscriptionDetail:"Subscription",NonAssetResource:i})}(b=t.AssetNames||(t.AssetNames={})),function(n){f(n,{Subscriptions:e+"subscriptions",ResourceGroups:e+"subscriptions/resourcegroups",AllResources:e+"resources",RecentResources:e+"recent"})}(k=t.ResourceTypes||(t.ResourceTypes={})),function(
n){var t;(function(n){f(n,{BrowseServicePinnedPart:r+"ServicePart",BrowseResourcePinnedPart:i,BrowseResourceGroupPinnedPart:i})})(t=n.Hubs||(n.Hubs={}))}(d=t.PartNames||(t.PartNames={})),function(n){var t,r,u,e;(function(n){c(n,["SubscriptionsBlade"])})(t=n.Billing||(n.Billing={})),function(n){f(n,{CreateHubBlade:p+"Create"+s,BrowseAllResourcesBlade:i,BrowseLinkBlade:i,BrowseResourceBlade:i,BrowseResourceGroupBlade:i,BrowseServiceBlade:i,NotFoundAssetBlade:i,ResourceGroupMapBlade:i,ResourceMenuBlade:i,ResourceProperties:i,UnauthorizedAssetBlade:i,UnavailableAssetBlade:i})}(r=n.Hubs||(n.Hubs={})),function(n){f(n,{GalleryFeaturedMenuItemBlade:i,GalleryResultsListBlade:i,LegalTermsV2Blade:"PCLegalTermsV2"+s})}(u=n.Marketplace||(n.Marketplace={})),function(n){c(n,["NotificationAction"+s])}(e=n.AzureInsights||(n.AzureInsights={}))}(g=t.BladeNames||(t.BladeNames={})),function(n){n.ViewModel="viewModel";n.PartViewModel="partViewModel"}(nt=t.ViewModelTypes||(t.ViewModelTypes={})),function(n){c(
n,[v+"Adoption",v+"Obsolete"])}(tt=t.Telemetry||(t.Telemetry={})),function(n){n.RegisterExtension=a+".register"+h;n.TraceTelemetry=a+".traceTelemetry"}(it=t.TelemetrySharing||(t.TelemetrySharing={})),function(n){n.HomeMenuItem="home"}(rt=t.GalleryMenuItems||(t.GalleryMenuItems={})),function(n){n.EditScopeId="editScopeId";n.ReferrerInfo="referrerInfo"}(ut=t.BladeParameterNames||(t.BladeParameterNames={}))})(i=t.Constants||(t.Constants={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i,r={doubleclick:"dblclick",mousewheel:"wheel",fxbreadcrumbclick:"fxbreadcrumbclicked",fxpinblade:"pinblade",fxrightclick:"rightclick",fxopenshortcutslegend:"openshortcutslegend",animationstart:i,blur:i,change:i,click:i,contextmenu:i,dragover:i,dragstart:i,dragend:i,dragenter:i,dragleave:i,drop:i,focus:i,hashchange:i,input:i,keydown:i,keypress:i,keyup:i,mousedown:i,mouseenter:i,mouseleave:i,mousemove:i,mouseout:i,mouseover:i,mouseup:i,popstate:i,resize:
i,rightclick:i,scroll:i,selectstart:i,transitionend:i,focusin:i,focusout:i,remove:i,fxactionbarclick:i,fxactionbarresize:i,fxactionbarvalidationtargetupdated:i,fxactivatepairmaster:i,fxaddparts:i,fxautosettings:i,fxavatarmenutoggling:i,fxbladestatusbarclicked:i,fxbrowseitemclick:i,fxbrowserecentitemdiscardclick:i,fxclosehub:i,fxcollapsedstateupdated:i,fxcontextmenu:i,fxcontextmenurequest:i,fxcontextpaneclosing:i,fxcopybuttonclick:i,fxcreatepart:i,fxcreateabandoned:i,fxensurebladevisible:i,fxensureviewportvisible:i,fxenterorganizemode:i,fxerrorpartclicked:i,fxexitorganizemode:i,fxfeedbackbuttonclick:i,fxhomebuttonclick:i,fxhubclicking:i,fxjourneyclick:i,fxopenhub:i,fxopeninnewtab:i,fxopensupportblade:i,fxnotificationclickinmenu:i,fxpancomplete:i,fxpartcreated:i,fxpartgallerypivotinitialized:i,fxportalcontrolloadfailed:i,fxreadyforfocus:i,fxrearrange:i,fxrecomposeframepart:i,fxredrawblade:i,fxregistermenu:i,fxremovewidget:i,fxresourcesummaryready:i,fxrotatetheme:i,fxsettingsbuttonclick:i,
fxshowstartboard:i,fxsizechange:i,fxsizechanged:i,fxsummarycollapsed:i,fxtoastclick:i,fxwidthchanged:i,fxunpin:i,touchcancel:i,touchend:i,touchmove:i,touchstart:i,lostpointercapture:i,pointercancel:i,pointerdown:i,pointermove:i,pointerup:i};n.forEachKey(r,function(n,t){r[n]=t||n});t.EventTypes=r})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var r=window,u=new n.Diagnostics.Log("MsPortalFx/Base/Base.Scheduler"),i,t=[],f=function(){i=null;var n=t.shift();if(n){n.silent||u.verbose("Executing sheduled task '"+n.name+"' that was scheduled for "+new Date(n.scheduledExecutionTime).toLocaleTimeString());try{n.scheduledTask.apply(n,n.args||[])}catch(o){u.error("Error executing task '"+n.name+"': "+o.message)}finally{n.recurring&&e.scheduleTask(n);!i&&t.length>0&&(i=r.setTimeout(f,Math.max(0,t[0].scheduledExecutionTime-+new Date)))}}},e=function(){function e(){}return e.scheduleTask=function(e,o){var a;if(e.recurring){if(e.absoluteTime)throw new
Error("Tasks scheduled for an absolute time cannot be recurring.");if(e.isAsync)throw new Error("Asynchronous tasks cannot be marked as auto recurring. Instead call sheduleTask again at the end on completition of the aynchronous event.");}if(!o&&t.indexOf(e)>=0)throw new Error("Same task cannot be scheduled multiple times concurrently.");e.name||(e.name="Anonymous "+n.Utilities.getUniqueId());var v=+new Date,l,h,y,s=e,c=s.absoluteTime;if(!c){if(a=s.delayInMs,isNaN(a)||a<=0)throw new Error("Tasks that are not scheduled for an absolute time require a positive integer value in task.delayInMs.");c=v+a}for(s.scheduledExecutionTime=c,l=-1,h=0,y=t.length;h<y;h++)if(t[h].scheduledExecutionTime>c){t.splice(h,0,s);l=h;break}l===-1&&t.push(s);s.silent||u.verbose("Scheduled task '"+s.name+"' to execute at "+new Date(c).toLocaleTimeString());(t.length===1||l===0)&&(i&&r.clearTimeout(i),i=r.setTimeout(f,Math.max(0,c-v)))},e.deleteTask=function(n){var u=t.indexOf(n);u>=0&&(t.splice(u,1),t.length===0&&
i&&(r.clearTimeout(i),i=null))},e}();n.Scheduler=e})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";function e(n,t){return new FxImpl.Security.AuthTokenCacheImpl(n,t)}function o(n){return i().getAuthorizationToken(n)}function s(){return i().getUserInfo()}function h(n,t){return i().hasPermission(n,t,r)}function c(n,t){return i().assetHasPermission(n,t,r)}var u=n.Base,f=FxImpl.Extension,r=u.Constants.EmptyCloudName,i=f.getRuntime;t.createAuthTokenCache=e;t.getAuthorizationToken=o;t.getUserInfo=s;t.hasPermission=h;t.assetHasPermission=c})(i=t.Security||(t.Security={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function v(n,t,i){return f().hasPermission(n,t,i)}function y(n,t,i){return f().assetHasPermission(n,t,i)}var r=MsPortalFx.Base,h=r.Utilities,i=n.Extension,u=new r.Diagnostics.Log("MsPortalFx/Base/Internal/Base.Security"),f=i.getRuntime,e=1e3,c=6e4,l=4,a=MsPortalFx.
forEachKey,o=i.selfCloudName,s;t.tokenErrors={unknown:"Unknown",accessDenied:"AccessDenied",sessionEnded:"SessionEnded",credentialsExpired:"CredentialsExpired",networkError:"NetworkError",requiresMFA:"RequiresMfa",nullToken:"NullToken"};s=function(){function n(n,t,r){var u=this;this._cachedAuthTokenMap=new i.CloudMap;this._getTokenWorker=n;this._refreshBeforeExpiryMilliseconds=r||6e5;t&&a(t,function(n,t){var i={token:t};u._initTokenCacheEntry(i);u._cachedAuthTokenMap.getOrSet(o||"*",{})[n]=i})}return n.prototype.getToken=function(n){var h=this._stalledPromise,f,s;if(h)return h;n=n||{};var r={cloudName:n.cloudName||o||"*",resourceName:n.resourceName||""},c=r.resourceName,l=this._cachedAuthTokenMap.getOrSet(r.cloudName,{}),t=l[c],u=Date.now(),i;if(t){if(i=t.refreshAfter,t.token&&i>0&&i>u)return Q(t.token)}else t={token:null,expiresAt:-1,refreshAfter:-1},l[c]=t;return(f=t.expiresAt,s=this._refreshTokenWorker.bind(this),!t.token||f>0&&f<u)?(t.token=null,t.expiresAt=-1,t.refreshAfter=-1,s(r,
!1,e,t)):(i>0&&i<u&&s(r,!0,e,t),Q(t.token))},n.prototype.getTokenExpiresAt=function(n,t){var i=this._cachedAuthTokenMap.getOrSet(n||"",{})[t||""];return i&&i.expiresAt},n.prototype._refreshTokenWorker=function(n,i,r,f){var e=this,o;return f.tokenPromise?f.tokenPromise:(o=h.extend(n,{isBackground:i}),f.tokenPromise=this._getTokenWorker(o).then(function(o){var a=o||{},v=a.token,y,s,h;if(v)return f.token=v,e._initTokenCacheEntry(f),v;if(i)return Q.reject(o);y=a.error;switch(y){case t.tokenErrors.sessionEnded:h=e._stalledPromise;h||(e._stalledPromise=h=Q.defer().promise);s=h;break;case t.tokenErrors.accessDenied:s=Q.reject(o);break;default:y===t.tokenErrors.unknown&&u.error("Failed to get token unknown error. Message:"+a.errorMessage);s=Q.delay(r).then(function(){var t=Math.min(r*l,c);return f.tokenPromise=null,e._refreshTokenWorker(n,i,t,f)})}return s},function(n){u.error("Unexpected failure when getting token. Error:"+n+".");throw n;}).finally(function(){f.tokenPromise=null}))},n.prototype.
_initTokenCacheEntry=function(n){var t=n.token,r,i;t&&t.expiresAt>0?(r=Date.now(),i=t.expiresAt-this._refreshBeforeExpiryMilliseconds,n.expiresAt=t.expiresAt,n.refreshAfter=i<r?-1:i):(n.expiresAt=-1,n.refreshAfter=-1)},n}();t.AuthTokenCacheImpl=s;t.hasPermission=v;t.assetHasPermission=y})(t=n.Security||(n.Security={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r;(function(i){"use strict";function k(n){var t=y(n);return t[s]=!0,t}function d(n){return n&&n.hasOwnProperty(s)}function g(n){return f(n)}function y(n,t,i){var w=e(n),s=w?n.peek():n,f={},b,d,k,p;if(v&&(b=t||new WeakMap,d=w||Array.isArray(n)||u(n)),d){if(k=b.get(n),k===c)return a("toSerializableObjectImpl detects a cycle. root: "+r.getObjectDescriptor(n,!1),n)||l;if(k!==undefined)return k;b.set(n,c)}return p=i||function(n){return y(n,b,p)},w&&(f.t=1),Array.isArray(s)?w?(n.splice&&(f.t=2),f.v=p(s)):f.v=s.map(p):e(s)?f.v=p(s):u(s)?w?f.v=p(s):(f.v={},h(s).forEach(function(n){o(n)&&
(f.v[n]=p(s[n]))})):s instanceof Date?(f.d=!0,f.v=s.valueOf()):f.v=s,d&&b.set(n,f),f}function f(n){var i,t=n.v,e=n.t,s=!1,r;return t===l.v&&(t=undefined),e&&u(t)&&t.hasOwnProperty("v")&&(i=f(t),s=!0),s||(Array.isArray(t)?i=t.map(f):u(t)?(i={},h(t).forEach(function(n){o(n)&&(i[n]=f(t[n]))})):i=n.d?new Date(t):t),r=i,e===1?r=p(i):e===2&&(r=w(i)),r}var r=n.Base.Utilities,p=ko.observable,w=ko.observableArray,e=ko.isObservable,o=r.isSerializableProperty,u=r.isObject,s="#fxSerialized#",b=new t.Diagnostics.Log("MsPortalFx/Base/Base.Utilities.Serialization"),h=Object.getOwnPropertyNames,v;i.toSerializableObject=k;i.isSerializedObject=d;i.fromSerializableObject=g;var tt=r.getObjectDescriptor,c={},l={v:r.generateNonSerializableProperty("object_cycle_detected")},a=function(n){b.error(n+"at callstack:"+r.getCurrentCallStack(!0))},nt;nt=a;v=!!window.WeakMap})(r=i.Serialization||(i.Serialization={}))})(r=i.Internal||(i.Internal={}))})(i=t.Utilities||(t.Utilities={}))})(t=n.Base||(n.Base={}))}(MsPortalFx||
(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t,i,r;(function(n){n[n.None=0]="None";n[n.Master=1]="Master";n[n.Details=2]="Details"})(n.BladePairing||(n.BladePairing={}));t=n.BladePairing,function(n){n[n.None=0]="None";n[n.Fullscreen=1]="Fullscreen";n[n.Windowed=2]="Windowed"}(n.BladePairingMode||(n.BladePairingMode={}));i=n.BladePairingMode,function(n){n[n.Minimized=0]="Minimized";n[n.Normal=1]="Normal";n[n.Maximized=2]="Maximized"}(n.DisplayState||(n.DisplayState={}));r=n.DisplayState})(t=n.Blades||(n.Blades={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Action=1]="Action";n[n.Info=2]="Info";n[n.Create=3]="Create";n[n.Context=4]="Context";n[n.Help=5]="Help";n[n.Basic=6]="Basic";n[n.ContextAction=7]="ContextAction";n[n.BasicWithCommands=8]="BasicWithCommands";n[n.Hub=9]="Hub";n[n.HubSubMenu=10]="HubSubMenu";n[n.ResourceSetting=11]="ResourceSetting";n[n.App=12]="App"})(n.BladeStyle||(n.BladeStyle={}));var t=n.BladeStyle}
)(t=n.Blades||(n.Blades={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium";n[n.Large=2]="Large";n[n.XLarge=3]="XLarge";n[n.Menu=51]="Menu";n[n.Expandable=101]="Expandable"})(n.BladeWidth||(n.BladeWidth={}));var t=n.BladeWidth})(t=n.Blades||(n.Blades={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium"})(n.PairParentWidth||(n.PairParentWidth={}));var t=n.PairParentWidth})(t=n.Blades||(n.Blades={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=MsPortalFx.Base,f=MsPortalFx.Errors,r=MsPortalFx.Helpers.resolve(),u=ko.observable,e=function(){function t(n,t,r){var f=this,e;this._loadedCacheEntry=u(null);this._isDisposed=!1;this._requestInProgress=u();this._dataSource=n;this._errorNotificationTarget=t;this._interceptNotFound=r&&r.interceptNotFound!==undefined?r.interceptNotFound:!0;i.ProxiedObservables.
markNonSerializable(this);e=this._lifetime=t;this._isLoading=ko.computed(e,function(){return!!f._requestInProgress()});e.registerForDispose(function(){f._isDisposed=!0;f._cancelInProgressRequest();f._releaseCurrentContents()})}return Object.defineProperty(t.prototype,"loading",{get:function(){return this._isLoading},enumerable:!0,configurable:!0}),t.prototype.fetch=function(t){var f=this,e=this._requestInProgress,o,s,h,u;return this._isDisposed?r:(o=this._currentCacheEntryDisposer,s=function(){o&&o.dispose()},this._currentParams=t,this._cancelInProgressRequest(),this._currentParams===null||this._currentParams===undefined)?(this._loadedCacheEntry(null),s(),r):(this._currentCacheEntryDisposer=new n.TriggerableLifetimeManager,h=new i.Promises.CancelationToken,u={cancelationToken:h,cancelablePromise:i.Promises.wrapWithCancelablePromise(this._dataSource.fetch(t,this._currentCacheEntryDisposer),h),externalPromise:null},s(),e(u),u.cancelablePromise.then(function(n){f._loadedCacheEntry(n);e(null)}
,function(){e(null);f._loadedCacheEntry(null)}),u.externalPromise=u.cancelablePromise.then(function(){}),u.externalPromise.then(null,function(n){f._handleFetchRejections(n)}),u.externalPromise)},t.prototype._cancelInProgressRequest=function(){var n=this._requestInProgress;n()&&(n().cancelationToken.cancel(),n(null))},t.prototype._releaseCurrentContents=function(){this._currentCacheEntryDisposer&&(this._currentCacheEntryDisposer.dispose(),this._currentCacheEntryDisposer=null)},t.prototype._handleFetchRejections=function(n){if(n instanceof f.NotFoundDataError&&this._interceptNotFound!==!1){var t=n;t.handled=!0;typeof this._interceptNotFound=="function"?this._interceptNotFound(this._currentParams):this._errorNotificationTarget.notFound&&this._errorNotificationTarget.notFound()}},__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],t)}();t.ObjectView=e})(t=n.Data||(n.Data={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";var r=MsPortalFx.Base,i=MsPortalFx.Data,e=
window,u=function(){function n(){r.ProxiedObservables.markNonSerializable(this);this._atomizationCache=new i.ObjectCache({serializeKey:function(n){return JSON.stringify([n.type,n.id])},supplyValue:function(){return null}})}return n.prototype.getEntity=function(n,t,i){var r={type:n,id:t},u;return this._atomizationCache.hasEntry(r)&&(u=this._atomizationCache.getValue(r,i)),u},n.prototype.addEntity=function(n,t,i,r){this._atomizationCache.insertValueIfNotPresent({type:n,id:t},i,r)},n.prototype.releaseEntities=function(){},n}(),f;t.RefCountingAtomizationContext=u,function(t){function u(i){i=i||r;var u=t.atomizationContextCollection[i];return u||(u=n.Data.AtomizationContext.createInstance(),t.atomizationContextCollection[i]=u),u}function f(n){if(!n)return!1;var t=i.Metadata.getTypeMetadata(n);return!!(t&&t.hasGloballyUniqueId&&i.Metadata.typeHasId(n))}function e(){return new n.Data.RefCountingAtomizationContext}t.atomizationContextCollection={};var r="__default__";t.get=u;t.canAtomizeType=f;
t.createInstance=e}(f=t.AtomizationContext||(t.AtomizationContext={}))})(t=n.Data||(n.Data={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";var t=MsPortalFx.Base,i=MsPortalFx.Data,r=0,f=new t.Diagnostics.Log("MsPortalFx/Data/Internal/Internal.Data.DataCache"),u=function(){function n(n){var u=this,f,e;if(this._dataSetUniqueIdWithinDataCache=0,t.ProxiedObservables.markNonSerializable(this),this._dataCacheUniqueId=++r,n.loader){if(this._loader=n.loader,n.sourceUri||n.httpMethod)throw new Error("If you supply 'loader', do not supply a 'sourceUri' or 'httpMethod'.");this._logIgnoredDataCacheLoaderOptions(n)}else if(n.sourceUri||n.supplyData&&n.serializeParams){if(this._loader=new i.DataCacheLoader2(n),f=n.httpMethod&&n.httpMethod.toLowerCase()!=="get",f&&!n.serializeParams)throw new Error("When httpMethod is set to anything but 'GET', you must supply a 'serializeParams' callback.");}else throw new Error("Provide either a 'sourceUri', or a 'loader', or both 'supplyData' and 'serializeParams' when constructing a DataCache.");
e={collectEfficiencyTelemetry:!0,supplyValue:function(n,t){var i=u._createUniqueDataSetName();return u._supplyValue(i,n,t)},tryFindValueInRelatedCache:function(n,t){var r=u._tryFindDataInRelatedCache(n,t);if(r){var e=ko.toJS(r),i=u._createUniqueDataSetName(),o=u._establishDataSet(i,n,e,t),f=Q(o);return f.dataSetName=i,u.doesPoll&&u._supplyValue(i,n,t),{value:f}}return null},serializeKey:function(n){return u._loader.serializeParams(n)},evictionDelay:n.evictionDelay,extendEntryLifetimes:n.extendEntryLifetimes,onEntryDisposed:function(n){var t=function(){u._loader.disposeDataSet(n)};n.state&&n.state()!=="pending"||n.isFulfilled&&n.isFulfilled()||n.isRejected&&n.isRejected()?t():n.then(t,t)}};this._cacheByParams=new i.ObjectCache(e)}return n.prototype.fetch=function(n,t){var i=this._cacheByParams,r=i.getValue(n,t);return r.then(null,function(){i.immediatelyEvictEntry(n)}),r},n.prototype.refresh=function(n,t){var r=this._cacheByParams.hasEntry(n),i=this.fetch(n,t);return r?this._loader.refreshDataSet(
i):i},n.prototype.refreshAll=function(n){var t=this;this._forEachEntry(function(i,r){var u=!n||n(i);u&&t._loader.refreshDataSet(r)})},n.prototype.forceRemove=function(n){this._cacheByParams.immediatelyEvictEntry(n)},n.prototype.applyChanges=function(n,t){var i=this;this._forEachEntry(function(t,r,u){u&&n(t,u);var e=r.dataSetName,f=i._loader;f.isLoadingDataSet(e)&&f.refreshDataSet(r)},t)},n.prototype.dispose=function(){this._cacheByParams.dispose()},Object.defineProperty(n.prototype,"doesPoll",{get:function(){return this._loader.doesPoll},enumerable:!0,configurable:!0}),n.prototype._findEntity=function(n,t){var r=this,i;return this._forEachEntry(function(u,f,e){if(!i){var o=r._getDataFromDataSet(e);i=n(u,o,t)}}),i},n.prototype.dump=function(n){var t=[];if(this._forEachEntry(function(n,i,r){t.push(ko.toJS({key:n,data:!r?"<null dataSet>":r.data}))}),n)return t;console.log(JSON.stringify(t,null,4))},n.prototype._tryFindDataInRelatedCache=function(){return null},n.prototype._forEachEntry=function(
n,t){var i=this;this._cacheByParams.forEachEntry(function(r,u){if(!t||t(r)){var f=u.dataSetName,e=i._loader.getLoadedDataSet(f);n(r,u,e)}})},n.prototype._supplyValue=function(n,t,i){return this._loader.loadDataSetForParams(n,t,i)},n.prototype._establishDataSet=function(n,t,i,r){if(!this._loader.establishDataSet)throw new Error("This QueryCache/EntityCache supplies a DataCacheLoader via the 'loader' option that doesn't support the 'establishDataSet' method.  Either stop using the QueryCache/EntityCache 'loader' option or modify your DataCacheLoader to derive from DataCacheLoader2.");return this._loader.establishDataSet(n,t,i,r)},n.prototype._createUniqueDataSetName=function(){return"DataCache:"+this._dataCacheUniqueId+":"+ ++this._dataSetUniqueIdWithinDataCache},n.prototype._logIgnoredDataCacheLoaderOptions=function(){},__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],n)}();n.DataCache=u})(t=n.Data||(n.Data={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";
var t=MsPortalFx.Base,i=MsPortalFx.Helpers.resolve(),r=ko.observableArray,u=function(n){function u(t,i,u){var f=this;n.call(this,t,i,u);this._partialErrors=r();ko.reactor(i,function(){var n=f._loadedCacheEntry();f._partialErrors(n&&n.partialErrors()||[])})}return __extends(u,n),Object.defineProperty(u.prototype,"_refreshableDataSource",{get:function(){return this._dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"partialErrors",{get:function(){return this._partialErrors},enumerable:!0,configurable:!0}),u.prototype.refresh=function(){var n=this._requestInProgress,r,u;if(this._isDisposed||!this._currentCacheEntryDisposer)return i;if(!n()){if(!this._loadedCacheEntry())return this.fetch(this._currentParams);r=new t.Promises.CancelationToken;n({cancelationToken:r,cancelablePromise:t.Promises.wrapWithCancelablePromise(this._refreshableDataSource.refresh(this._currentParams,this._currentCacheEntryDisposer),r),externalPromise:null});u=function(){n(null)};n().cancelablePromise.
then(u,u);n().externalPromise=n().cancelablePromise.then(function(){})}return n().externalPromise},__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],u)}(n.ObjectView);n.DataView=u})(t=n.Data||(n.Data={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";var o=MsPortalFx,r=o.Base,u=o.Data,i=r.Rpc.Internal,c=r.Utilities,s=new r.Diagnostics.Log("MsPortalFx/Data/Internal/Internal.Data.EditScopeCache"),f,e,h;t.saveSerializedEditScopeEndPoint=new i.ActionEndPointDefinition("FxImpl.Data.saveSerializedEditScope");t.loadSerializedEditScopeEndPoint=new i.FuncEndPointDefinition("FxImpl.Data.loadSerializedEditScope");t.onEditScopeDiscardedEndPoint=new i.ActionEndPointDefinition("FxImpl.Data.onEditScopeDiscarded");t.updateEditScopeIsSavingStateEndPoint=new i.ActionEndPointDefinition("FxImpl.Data.updateEditScopeIsSavingState"),function(n){n[n.LoadOriginalDataFailed=0]="LoadOriginalDataFailed";n[n.LoadEditsFailed=1]="LoadEditsFailed";n[n.ApplyEditsFailed=2]="ApplyEditsFailed"}
(t.FetchEditScopeError||(t.FetchEditScopeError={}));f=t.FetchEditScopeError;e=function(){function n(n){var r=this;n===void 0&&(n=i.client);this._caches=[];t.onEditScopeDiscardedEndPoint.register(n,["fx"],function(n){r._caches.forEach(function(t){t.onEditScopeDiscarded(n)})})}return n.prototype.register=function(n){this._caches.push(n)},n.prototype.deregister=function(n){this._caches.remove(n)},n}();t.EditScopeDiscardedReceiver=e;t.editScopeDiscardedReceiver=new e;h=function(){function e(n,i){var f=this,s,o;if(this._editScopeEditsChangedSubs={},this._loadEdits=i&&i.loadEdits||e._remoteLoadEdits,this._saveEdits=i&&i.saveEdits||e._remoteSaveEditScope,this._updateEditScopeIsSavingState=i&&i.updateEditScopeIsSavingState||e._remoteUpdateEditScopeIsSavingState,this._entityTypeName=n.entityTypeName,s=this._options=c.clone(n),o=s.dataCache,o&&o.doesPoll)throw new Error("Any DataCache supplied with the 'EditScopeCacheOptions.dataCache' option should not be one that polls for server data changes. Otherwise, server changes detected during polling will be reflected incorrectly as user edits. See 'MsPortalFx.Data.DataCacheConfig.poll'.");
r.ProxiedObservables.markNonSerializable(this);this._cacheByParams=new u.ObjectCache({supplyValue:function(n,t){return f._getEditScopeForKey(n,t)},serializeKey:function(n){return f._serializeKey(n)},onEntryDisposed:function(n,t){var i=f._serializeKey(t),r=f._editScopeEditsChangedSubs[i];r&&(delete f._editScopeEditsChangedSubs[i],r.dispose());n.then(function(n){n.dispose()})}});t.editScopeDiscardedReceiver.register(this)}return e.prototype.createView=function(n,t){return new u.EditScopeView(this,n,t||{})},e.prototype.fetch=function(n,t){return this._cacheByParams.getValue(n,t)},e.prototype.forEachEditScope=function(n){var t=[];return this._cacheByParams.forEachEntry(function(i,r){t.push(r.then(function(t){n(i.editScopeId,t)}))}),Q.all(t)},e.prototype.dispose=function(){var i=this._cacheByParams,n,r;if(i&&(i.dispose(),this._cacheByParams=null),n=this._editScopeEditsChangedSubs,n){for(r in n)n[r].dispose();this._editScopeEditsChangedSubs=null}t.editScopeDiscardedReceiver.deregister(this)}
,e.prototype.disposeAndDiscardEdits=function(n,t){var i=t.editScope();if(!i)throw new Error("EditScopeView isn't loaded with an EditScope.");i.dispose();e._remoteSaveEdits(n,{edits:[]})},e.prototype.onEditScopeDiscarded=function(n){return this.forEachEditScope(function(t,i){t!==n||i.saving()||i.revertAll()})},e._remoteSaveEditScope=function(n,t){e._remoteSaveEdits(n,t.getEdits())},e._remoteSaveEdits=function(n,i){t.saveSerializedEditScopeEndPoint.invoke(e._rpcClient,"fx",{editScopeId:n,edits:i})},e._remoteLoadEdits=function(n){return t.loadSerializedEditScopeEndPoint.invoke(e._rpcClient,"fx",n).then(null,function(n){s.error("Loading of EditScope edits from user settings service failed.");throw n;})},e._remoteUpdateEditScopeIsSavingState=function(n,i){t.updateEditScopeIsSavingStateEndPoint.invoke(e._rpcClient,"fx",{editScopeId:n,isSaving:i})},Object.defineProperty(e.prototype,"_isDisposed",{get:function(){return this._cacheByParams===null},enumerable:!0,configurable:!0}),e.prototype._serializeKey=
function(n){var f=n.editScopeId,i=n.params,r,t,u;if(i){if(r=this._options,t=r.serializeParams,!t&&(t=r.serializeKeyOrQuery,!t))if(u=typeof i,u==="number"||u==="string")t=JSON.stringify;else throw new Error("If 'params' is not of number or string type, the 'serializeParams' option has to be provided to Data.EditScopeCache.");f+=":"+t(i)}return f},e.prototype._getEditScopeForKey=function(n,t){var r,i,f;if(!n.editScopeId)throw new Error("'editScopeId' has to be provided when 'fetchForNewData' or 'fetchForExistingData' is called.");if(i=this._options,f=n.params,f!==undefined)if(i.supplyExistingData)r=function(){return i.supplyExistingData(f,t)};else if(i.dataCache)r=function(){var n=i.dataCache.createView(t);return n.fetch(f).then(function(){return n.data})};else throw new Error("'dataCache' or 'supplyExistingData' has to be provided if 'fetchForExistingData' is called.");else if(i.supplyNewData)r=function(){return Q(i.supplyNewData())};else if(i.entityTypeName)r=function(){return Q(u.Metadata.
createEmptyObject(i.entityTypeName))};else throw new Error("'supplyNewData' or 'entityTypeName' has to be provided if 'fetchForNewData' is called.");return this._acquireEditScope(n,r,t,i.entityTypeName)},e.prototype._acquireEditScope=function(t,i,r,u){var f=this,e=Q.defer();return i().then(function(i){var c,o,h,s;if(!f._isDisposed){if(o=f._options,o.refreshEditScope?c=function(i){var r=new n.TriggerableLifetimeManager;return o.refreshEditScope(t.params,r,i).finally(function(){r.dispose()})}:o.dataCache&&(c=function(){var i=new n.TriggerableLifetimeManager,r=o.dataCache.createView(i);return r.fetch(t.params).then(function(){return r.data}).finally(function(){i.dispose()})}),h=t.editScopeId,s=n.Data.createEditScope(i,{kind:o.kind,typeName:u,refresh:c,save:o.saveEditScopeChanges&&function(i,r,u){f._updateEditScopeIsSavingState(h,!0);var e=new n.TriggerableLifetimeManager;return f._cacheByParams.getValue(t,e),i.saving.subscribe(e,function(n){n||(e.dispose(),f._updateEditScopeIsSavingState(
h,!1))}),o.saveEditScopeChanges(t.params,i,r,e,u)}}),o.onEditScopeCreated)o.onEditScopeCreated(r,s);f._loadAndApplyEdits(s,h).then(function(){if(!f._isDisposed){var n=f._serializeKey(t);f._editScopeEditsChangedSubs[n]=s.editsChanged.subscribe(function(){f._saveEdits(h,s)});e.resolve(s)}},function(n){e.reject(n)})}},function(n){e.reject(n)}),e.promise},e.prototype._loadAndApplyEdits=function(n,t){var i=this;return this._loadEdits(t).then(function(t){if(!i._isDisposed)return t&&!n.applyEdits(t)?(s.warning("Application of EditScope edits from user settings service failed."),Q.reject(f.ApplyEditsFailed)):void 0},function(){return f.LoadEditsFailed})},e._rpcClient=i.client,e=__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],e)}();t.EditScopeCache=h})(t=n.Data||(n.Data={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";var i=MsPortalFx.Base,s=i.Rpc.Internal,r=MsPortalFx.Helpers,u=r.resolve,h=i.Utilities,f=r.Deferred,e=new i.Diagnostics.Log("MsPortalFx/Data/Internal/Internal.Data.EditScopeCache"),
o=n.Data.editScopeDiscardedReceiver,c=function(){function r(n,t){var u=this;this._editScopeEditsChangedSubs={};this._loadEdits=t&&t.loadEdits||r._remoteLoadEdits;this._saveEdits=t&&t.saveEdits||r._remoteSaveEditScope;this._entityTypeName=n.entityTypeName;this._options=h.clone(n);i.ProxiedObservables.markNonSerializable(this);this._cacheByParams=new MsPortalFx.Data.ObjectCache({supplyValue:function(n,t){return u._getEditScopeForKey(n,t)},serializeKey:function(n){return u._serializeKey(n)},onEntryDisposed:function(n,t){var i=u._serializeKey(t),r=u._editScopeEditsChangedSubs[i];r&&(delete u._editScopeEditsChangedSubs[i],r.dispose());n.then(function(n){n.dispose()})}});o.register(this)}return r.prototype.createView=function(n,t){return new MsPortalFx.Data.EditScopeView(this,n,t||{})},r.prototype.fetch=function(n,t){return this._cacheByParams.getValue(n,t)},r.prototype.forEachEditScope=function(n){var t=[];return this._cacheByParams.forEachEntry(function(i,r){t.push(r.then(function(t){n(i.editScopeId,
t)}))}),Q.all(t)},r.prototype.dispose=function(){var t=this._cacheByParams,n,i;if(t&&(t.dispose(),this._cacheByParams=null),n=this._editScopeEditsChangedSubs,n){for(i in n)n[i].dispose();this._editScopeEditsChangedSubs=null}o.deregister(this)},r.prototype.disposeAndDiscardEdits=function(n,t){var i=t.editScope();if(!i)throw new Error("EditScopeView isn't loaded with an EditScope.");i.dispose();r._remoteSaveEdits(n,{edits:[]})},r.prototype.onEditScopeDiscarded=function(n){return this._revertEditScope(n)},r._remoteSaveEditScope=function(n,t){r._remoteSaveEdits(n,t.getEdits())},r._remoteSaveEdits=function(n,i){t.saveSerializedEditScopeEndPoint.invoke(r._rpcClient,"fx",{editScopeId:n,edits:i})},r._remoteLoadEdits=function(n){return t.loadSerializedEditScopeEndPoint.invoke(r._rpcClient,"fx",n).then(null,function(n){e.error("Loading of EditScope edits from user settings service failed.");throw n;})},Object.defineProperty(r.prototype,"_isDisposed",{get:function(){return this._cacheByParams===null}
,enumerable:!0,configurable:!0}),r.prototype._revertEditScope=function(n){return this.forEachEditScope(function(t,i){t===n&&i.revertAll()})},r.prototype._serializeKey=function(n){var f=n.editScopeId,i=n.params,r,t,u;if(i){if(r=this._options,t=r.serializeParams,!t&&(t=r.serializeKeyOrQuery,!t))if(u=typeof i,u==="number"||u==="string")t=JSON.stringify;else throw new Error("If 'params' is not of number or string type, the 'serializeParams' option has to be provided to Data.EditScopeCache.");f+=":"+t(i)}return f},r.prototype._getEditScopeForKey=function(n,t){var f,i=this._options,r=n.params;if(n.editScopeId&&(r||r===null)){if(!i.supplyExistingData)throw new Error("'supplyExistingData' has to be provided if 'fetchForExistingData' is called.");f=function(){return i.supplyExistingData(r,t)}}else if(n.editScopeId&&r===undefined&&i.supplyNewData)f=function(){return u(i.supplyNewData())};else if(n.editScopeId&&!r&&i.entityTypeName)f=function(){return u(MsPortalFx.Data.Metadata.createEmptyObject(
i.entityTypeName))};else if(i.supplyNewData||i.entityTypeName)throw new Error("'editScopeId' has to be provided if 'fetchForNewData' or 'fetchForExistingData' is called.");else throw new Error("'supplyNewData' or 'entityTypeName' has to be provided if 'fetchForNewData' is called.");return this._acquireEditScope(n,f,t,i.entityTypeName)},r.prototype._acquireEditScope=function(i,r,u,e){var o=this,s=f(),c=s.promise(),h=i.editScopeId;return r().then(function(t){if(!o._isDisposed){var r=o._options,f=n.Data.createEditScope(t,{kind:r.kind,typeName:e,refresh:r.refreshEditScope&&function(t){var u=new n.TriggerableLifetimeManager;return r.refreshEditScope(i.params,u,t).finally(function(){u.dispose()})},save:r.saveEditScopeChanges&&function(t,u,f){var e=new n.TriggerableLifetimeManager;return r.saveEditScopeChanges(i.params,t,u,e,f).finally(function(){e.dispose()})}});if(r.onEditScopeCreated)r.onEditScopeCreated(u,f);o._loadAndApplyEdits(f,h).then(function(){if(!o._isDisposed){var n=o._serializeKey(
i);o._editScopeEditsChangedSubs[n]=f.editsChanged.subscribe(function(){o._saveEdits(h,f)});s.resolve(f)}},function(n){s.reject(n)})}},function(){s.reject(t.FetchEditScopeError.LoadOriginalDataFailed)}),c},r.prototype._loadAndApplyEdits=function(n,i){var r=this;return this._loadEdits(i).then(function(i){if(!r._isDisposed){var u=f();return i?n.applyEdits(i)?u.resolve():(e.warning("Application of EditScope edits from user settings service failed."),u.reject(t.FetchEditScopeError.ApplyEditsFailed)):u.resolve(),u.promise()}},function(){return t.FetchEditScopeError.LoadEditsFailed})},r._rpcClient=s.client,r=__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],r)}();t.EditScopeCacheOld=c})(t=n.Data||(n.Data={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";function h(n){f.client.invokeRpc(e.RpcMethods.submitObjectCacheTelemetry,MsPortalFx.Base.Constants.Shell,n)}function c(n,t){if(u){i=[];var r=n||s,f=t||h,e=window.setInterval(function(){i.length>0&&(f(i),i=[])},r);
return{dispose:function(){window.clearInterval(e)}}}}function l(){f.client.registerRpcEndPoint(e.RpcMethods.submitObjectCacheTelemetry,{allowedOrigin:null,handler:function(n,t){n.forEach(function(n){MsPortalFx.Base.Diagnostics.Telemetry.trace({extension:t.srcWindowId,timestamp:n.timestamp,source:n.source,action:"ObjectCacheRead",data:n})})}})}var f=MsPortalFx.Base.Rpc.Internal,e=n.Constants,i=[],s=5e3,u=MsPortalFx.isFeatureEnabled("dataobjectcachetelemetry"),r=Date.now,o;t.beginTelemetrySubmission=c;t.registerTelemetrySubmissionHandler=l;o=function(){function n(){this._evictedEntryDateValues={};this._evictedEntryCircularBuffer=[]}return Object.defineProperty(n,"maxTrackedEvictedEntries",{get:function(){return 1e3},enumerable:!0,configurable:!0}),n.prototype.recordCacheRead=function(n,t){u&&(t?this._recordCacheHit(n):this._recordCacheMiss(n))},n.prototype.recordEviction=function(n){u&&(this._ensureEntryNotTrackedAsEvicted(n),this._evictedEntryDateValues[n]=r(),this._evictedEntryCircularBuffer.
push(n),this._pruneExcessiveEvictedEntries())},n._getCurrentTelemetrySource=function(){var n=MsPortalFx.Base.Diagnostics.Telemetry.Context.getCompositionItemContext();return n?n.id:null},n.prototype._recordCacheHit=function(t){this._ensureEntryNotTrackedAsEvicted(t);i.push({timestamp:r(),key:t,source:n._getCurrentTelemetrySource(),wasHit:!0,secondsSinceEviction:null})},n.prototype._recordCacheMiss=function(t){var u=null;this._evictedEntryDateValues.hasOwnProperty(t)&&(u=(r()-this._evictedEntryDateValues[t])/1e3);i.push({timestamp:r(),key:t,source:n._getCurrentTelemetrySource(),wasHit:!1,secondsSinceEviction:u})},n.prototype._ensureEntryNotTrackedAsEvicted=function(n){if(this._evictedEntryDateValues.hasOwnProperty(n)){delete this._evictedEntryDateValues[n];var t=this._evictedEntryCircularBuffer.indexOf(n);t>=0&&this._evictedEntryCircularBuffer.splice(t,1)}},n.prototype._pruneExcessiveEvictedEntries=function(){while(this._evictedEntryCircularBuffer.length>n.maxTrackedEvictedEntries){var t=
this._evictedEntryCircularBuffer.shift();delete this._evictedEntryDateValues[t]}},n}();t.ObjectCacheTelemetryCollector=o})(t=n.Data||(n.Data={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";function f(n){if(n.evictionDelay!==undefined&&n.extendEntryLifetimes)throw new Error("Don't specify both 'evictionDelay' and 'extendEntryLifetimes'.");if(n.extendEntryLifetimes)return u.defaultCacheEvictionDelay;if(n.evictionDelay>i)throw new Error("The maximum eviction delay is "+i+" milliseconds.");return n.evictionDelay}var t=Object.getOwnPropertyNames,u=window.fx.environment,i=6e4,e=function(){function n(n){this._isDisposed=!1;this._evictionDelayMilliseconds=null;this._evictionTimeoutHandlesByKey={};this._entriesByKey={};this._entriesByReferrerThenKey={};MsPortalFx.Base.ProxiedObservables.markNonSerializable(this);n&&(this._onDisposeEntryCallback=n.onEntryDisposed,this._evictionDelayMilliseconds=f(n))}return n.prototype.getEntry=function(n,t,i){if(!n)throw new Error("Value cannot be null: key (If you're working with an edit scope verify that you have NewEditScope='true' attribute in PDL.");
if(!i)throw new Error("Value cannot be null: createCallback.");if(this._isDisposed)throw new Error("Cannot getEntry from a RefCountCache that is already disposed.");var u=this._entriesByKey[n];return u||(u=new r(n,i()),t&&(this._entriesByKey[n]=u)),t?(this._ensureReferenceExists(u,t),this._cancelAnyDelayedEviction(u.key)):this._entryHasDelayedEvictionInProgress(u)||this._immediateEvictEntryIfNoReferences(u),u.value},n.prototype.hasEntry=function(n){return n in this._entriesByKey},n.prototype.dissociateEntry=function(n,i){var u=this._entriesByKey[n],r;u&&(u.dissociate(i),r=this._entriesByReferrerThenKey[i],r&&(delete r[n],t(r).length===0&&delete this._entriesByReferrerThenKey[i]),this._delayedEvictEntryIfNoReferences(u))},n.prototype.immediatelyEvictEntry=function(n){var r=this,t=this._entriesByKey[n],i;t&&(i=t.dissociateFromAllReferrers(),i.forEach(function(t){var i=r._entriesByReferrerThenKey[t];i&&delete i[n]}),this._immediateEvictEntryIfNoReferences(t))},n.prototype.disposeReferrer=
function(n){var r=this,i=this._entriesByReferrerThenKey[n];i&&t(i).forEach(function(t){r.dissociateEntry(t,n)})},n.prototype.forEachEntry=function(n){var i=this,r=t(this._entriesByKey);r.forEach(function(t){var r=i._entriesByKey[t];n(t,r.value)})},n.prototype.dispose=function(){var n=this;this._isDisposed=!0;this._onDisposeEntryCallback&&t(this._entriesByKey).forEach(function(t){var i=n._entriesByKey[t];n._onDisposeEntryCallback(i.value,t)});this._entriesByKey={};this._entriesByReferrerThenKey={};t(this._evictionTimeoutHandlesByKey).forEach(function(t){n._cancelAnyDelayedEviction(t)})},n.prototype._ensureReferenceExists=function(n,t){var i=this._entriesByReferrerThenKey[t];i||(i={},this._entriesByReferrerThenKey[t]=i);n.key in i||(i[n.key]=n,n.associate(t))},n.prototype._entryHasDelayedEvictionInProgress=function(n){return!!this._evictionTimeoutHandlesByKey[n.key]},n.prototype._cancelAnyDelayedEviction=function(n){var t=this._evictionTimeoutHandlesByKey[n];t&&(delete this._evictionTimeoutHandlesByKey[
n],window.clearTimeout(t))},n.prototype._delayedEvictEntryIfNoReferences=function(n){var t=this;n.hasNoReferences()&&(this._cancelAnyDelayedEviction(n.key),this._evictionDelayMilliseconds===null||this._evictionDelayMilliseconds===undefined?this._immediateEvictEntryIfNoReferences(n):this._evictionTimeoutHandlesByKey[n.key]=window.setTimeout(function(){t._immediateEvictEntryIfNoReferences(n)},this._evictionDelayMilliseconds))},n.prototype._immediateEvictEntryIfNoReferences=function(n){n.hasNoReferences()&&(delete this._entriesByKey[n.key],this._onDisposeEntryCallback&&this._onDisposeEntryCallback(n.value,n.key),this._cancelAnyDelayedEviction(n.key))},n}(),r;n.RefCountCache=e;r=function(){function n(n,t){this._referrerIds=[];this._key=n;this._value=t}return Object.defineProperty(n.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),n.prototype.hasNoReferences=
function(){return this._referrerIds.length===0},n.prototype.associate=function(n){this._referrerIds.indexOf(n)<0&&this._referrerIds.push(n)},n.prototype.dissociate=function(n){var t=this._referrerIds.indexOf(n);t>=0&&this._referrerIds.splice(t,1)},n.prototype.dissociateFromAllReferrers=function(){var n=this._referrerIds;return this._referrerIds=[],n},__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],n)}()})(t=n.Data||(n.Data={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){var t;(function(n){"use strict";function i(n,i){var r=n[i];return t(n,i)?r():r}function t(n,t){var i=n[t];return ko.isObservable(i)&&!MsPortalFx.isObservableArray(i)}function r(n){if(!MsPortalFx.isArrayOrObservableArray(n))throw new Error("Only an array or an observable array is expected here.");return ko.unwrap(n)}n.isObject=MsPortalFx.isObject;n.isNullOrUndefined=MsPortalFx.isNullOrUndefined;n.equalDates=MsPortalFx.areEqualDates;n.isObservableArray=MsPortalFx.isObservableArray;n.isArrayOrObservableArray=
MsPortalFx.isArrayOrObservableArray;n.unwrapObjectPropertyValue=i;n.isObservableObjectPropertyValue=t;n.unwrapArrayOrObservableArray=r;n.equalScalarValues=MsPortalFx.areEqual})(t=n.Shared||(n.Shared={}))})(t=n.Data||(n.Data={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";function f(n,t){return function(){return t.apply(n,arguments)}}var t=MsPortalFx,i=t.Data.Metadata,r=t.isArrayOrObservableArray,u=t.isObject,o=t.isObservableArray,e=function(){function t(n,t){var i=this,r=this,u=t,e=this._callbacks={};["visitEntityArray","visitNonEntityArray","visitArray","visitArrayItem","visitEntity","visitNonEntityObject","visitObject","shouldVisitObjectProperty","visitEntityTypedObjectPropertyValue","visitNonEntityTypedObjectPropertyValue","visitObjectPropertyValue","visitDate","visitScalar","visitFunction"].forEach(function(n){e[n]=u[n]||f(i,r[n])})}return t.prototype.visit=function(n,t,i){return this._visit(n,t,i)},t.prototype.visitEntityArray=function(n,t,i){return this._callbacks.
visitArray(n,t,i)},t.prototype.visitNonEntityArray=function(n,t,i){return this._callbacks.visitArray(n,t,i)},t.prototype.visitArray=function(t,i,r){var u=this;n.Shared.unwrapArrayOrObservableArray(t).forEach(function(n,t){u._callbacks.visitArrayItem(n,t,i,r)});return},t.prototype.visitArrayItem=function(n,t,i,r){if(ko.isObservable(n))throw new Error("Data can't include arrays whose items are observables.  Only scalar- and object-typed array items are supported.");return this._visit(n,i,r)},t.prototype.visitEntity=function(n,t,i){return this._callbacks.visitObject(n,t,i)},t.prototype.visitNonEntityObject=function(n,t,i){return this._callbacks.visitObject(n,t,i)},t.prototype.visitObject=function(n,t,i){var r=this;this.getObjectPropertiesToVisit(n,t).forEach(function(u){r.visitObjectPropertyValueDispatch(u,n,t,i)});return},t.prototype.shouldVisitObjectProperty=function(n,t){return typeof ko.unwrap(t[n])!="function"},t.prototype.visitEntityTypedObjectPropertyValue=function(t,i,u,f){var e=n.
Shared.unwrapObjectPropertyValue(i,t);return r(e)?this._callbacks.visitEntityArray(e,u,f):e?this._callbacks.visitEntity(e,u,f):void 0},t.prototype.visitNonEntityTypedObjectPropertyValue=function(n,t,i,r){return this._callbacks.visitObjectPropertyValue(n,t,i,r)},t.prototype.visitObjectPropertyValue=function(t,i,r,u){return this._visit(n.Shared.unwrapObjectPropertyValue(i,t),r,u)},t.prototype.visitDate=function(){return},t.prototype.visitScalar=function(){return},t.prototype.visitFunction=function(){return},t.prototype.getObjectPropertiesToVisit=function(n,t){var i=this;return Object.keys(n).filter(function(r){return i._callbacks.shouldVisitObjectProperty(r,n,t)})},t.prototype.visitObjectPropertyValueDispatch=function(n,t,r,u){var f=i.getPropertyTypeMetadata(r,n),e=i.typeIsEntityType(f);return e?this._callbacks.visitEntityTypedObjectPropertyValue(n,t,f,u):this._callbacks.visitNonEntityTypedObjectPropertyValue(n,t,f,u)},t.prototype._visit=function(n,t,i){return r(n)?this._visitArrayDispatch(
n,t,i):u(n)?this._visitObjectDispatch(n,t,i):n instanceof Date?this._callbacks.visitDate(n,i):typeof n=="function"?this._callbacks.visitFunction(n,i):this._callbacks.visitScalar(n,i)},t.prototype._visitArrayDispatch=function(n,t,r){var u=i.typeIsEntityType(t);return u?this._callbacks.visitEntityArray(n,t,r):this._callbacks.visitNonEntityArray(n,t,r)},t.prototype._visitObjectDispatch=function(n,t,r){var u=i.typeIsEntityType(t);return u?this._callbacks.visitEntity(n,t,r):this._callbacks.visitNonEntityObject(n,t,r)},t}();n.Visitor=e})(t=n.Data||(n.Data={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";var t=MsPortalFx,e=t.isArrayOrObservableArray,o=t.isObject,r=t.isObservableArray,i=ko.observable,u=ko.observableArray,f=function(t){function f(n,i){t.call(this,n,i)}return __extends(f,t),f.prototype.clone=function(n,t){return this._visit(n,t)},f.prototype.visitArray=function(t,f){var o=this,e=n.Shared.unwrapArrayOrObservableArray(t).map(function(n,t){return o._callbacks.
visitArrayItem(n,t,f)});return r(t)&&(e=t.splice?u(e):i(e)),e},f.prototype.visitObject=function(n,t){var r=this,i={};return this.getObjectPropertiesToVisit(n,t).forEach(function(u){i[u]=r.visitObjectPropertyValueDispatch(u,n,t)}),i},f.prototype.visitEntityTypedObjectPropertyValue=function(n,t,i){return this._callbacks.visitObjectPropertyValue(n,t,i)},f.prototype.visitObjectPropertyValue=function(t,r,u){var f=r[t],e=n.Shared.isObservableObjectPropertyValue(r,t),o=this._visit(e?f():f,u);return e?i(o):o},f.prototype.visitDate=function(n){return new Date(n.getTime())},f.prototype.visitScalar=function(n){return n},f.prototype.visitFunction=function(){throw new Error("Cloning functions is not supported.");},f}(n.Visitor);n.CloneVisitor=f})(t=n.Data||(n.Data={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";var t=MsPortalFx.Data.Metadata,s=MsPortalFx.Base.Utilities,i=ko.isObservable,h=MsPortalFx.areEqual,r=MsPortalFx.isArrayOrObservableArray,u=MsPortalFx.isObject,f=MsPortalFx.
isObservableArray,e=ko.utils,o=e.compareArrays,c=function(c){function l(n,t){c.call(this,n,t);this._clone=n.clone;this._onDetach=n.onDetach}return __extends(l,c),l.prototype.merge=function(n,t,i){var r=c.prototype._visit.call(this,n,i,t);if(!r)throw new Error("Cannot merge changes because there are no observables to set to reflect merge changes.");},l.prototype.visitObject=function(n,t,i){var r=this;return this.getObjectPropertiesToVisit(n,t).every(function(u){return r.visitObjectPropertyValueDispatch(u,n,t,i)})},l.prototype.visitObjectPropertyValueDispatch=function(n,t,i,r){var u=c.prototype.visitObjectPropertyValueDispatch.call(this,n,t,i,r);return u||(u=this._cloneAndSetProperty(n,t,i,r)),u},l.prototype.visitEntityTypedObjectPropertyValue=function(n,t,i,r){return this._callbacks.visitObjectPropertyValue(n,t,i,r)},l.prototype.visitNonEntityTypedObjectPropertyValue=function(n,t,i,r){return this._callbacks.visitObjectPropertyValue(n,t,i,r)},l.prototype.visitObjectPropertyValue=function(
t,i,f,e){var o=n.Shared.unwrapObjectPropertyValue(i,t),s=n.Shared.unwrapObjectPropertyValue(e,t),c=!1;return r(o)?r(s)&&(c=this._visitArrayDispatch(o,f,s)):u(o)?u(s)&&(c=this._visitObjectDispatch(o,f,s)):typeof o=="function"?c=!0:h(o,s)&&(c=!0),c},l.prototype.visitArray=function(n,t,i){return this._mergeArray(n,t,i)},l.prototype._mergeArray=function(r,u,f,h){var c=this,l,a,w,nt;if(h=h||{},!!h.handleAdd!=!!h.handleDelete)throw new Error("Supply both 'handleAdd' and 'handleDelete'.");h.getEdits||(l=void 0,a=void 0,t.typeHasId(u)?(l=function(n,t){var r=n.map(function(n){return c._getItemId(n,u)}),f=t.map(function(n){return c._getItemId(n,u)}),i=o(f,r);return i.forEach(function(i){i.value=(i.status==="added"?n:t).first(function(n){return c._getItemId(n,u)===i.value})}),i},a=function(n,t){var i=c._getItemId(n,u);return t.first(function(n){return c._getItemId(n,u)===i})}):(l=function(n,t){return o(t,n)},a=null),s.extend(h,{getEdits:l,getSourceItem:a}));var k=n.Shared.unwrapArrayOrObservableArray(
r),tt=n.Shared.unwrapArrayOrObservableArray(f),v=i(f),b=v&&f,y=b&&b(),p,it=function(n){var t,i,r;switch(n.status){case"added":if(t=c._clone(n.value,u),h.handleAdd)h.handleAdd(t,n.index);else if(v)p=!0,y.splice(n.index,0,t);else return!1;break;case"deleted":if(i=n.value,r=n.index,h.handleDelete)h.handleDelete(i,r);else if(v)c._onDetach(i,u),p=!0,y.splice(r,1);else return!1;break;case"retained":if(h.getSourceItem){var f=n.value,e=h.getSourceItem(f,k),o=c._callbacks.visitObject(e,u,f);if(!o)if(v)c._onDetach(f,u),p=!0,y.splice(n.index,1,c._clone(e,u));else return!1}}return!0},d=e.adjustArrayEdits(h.getEdits(k,tt)),g=!0;for(w=0;w<d.length;w++)if(nt=d[w],!it(nt)){g=!1;break}return p&&b(y),g},l.prototype._cloneAndSetProperty=function(r,u,e,o){var y=u[r],s=o[r],a=n.Shared.unwrapObjectPropertyValue(u,r),h=n.Shared.unwrapObjectPropertyValue(o,r),c,l,v;if(i(s)&&f(a)!==f(h))throw new Error("Data being merged is not type-compatible with previous data.");return i(s)?(c=!0,h&&this._onDetach(h,l),l=t.
getPropertyTypeMetadata(e,r),v=this._clone(a,l),s(v)):c=!1,c},l.prototype._getItemId=function(n,i){var r=t.getItemId(n,i);if(r===undefined)throw new Error("Data item is missing id property or properties.");return r},l}(n.Visitor);n.MergeVisitor=c})(t=n.Data||(n.Data={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";var i=ko.observable,t=ko.computed,r=function(n){function r(r,u,f){var e=this;n.call(this,f);this._currentSkipTakeParams=i(null);this._allItems=u;this._itemsComputed=t(function(){var n=e._currentSkipTakeParams();return n&&e._allItems()?e._allItems().slice(n.skip,n.take?n.skip+n.take:undefined):[]});this._metadataComputed=t(function(){return{totalItemCount:e._allItems().length}});this.items=this._itemsComputed;this.metadata=this._metadataComputed;r.registerForDispose(this._itemsComputed);r.registerForDispose(this._metadataComputed)}return __extends(r,n),r.prototype.loadBySkipTake=function(n,t){return this._currentSkipTakeParams({skip:n||0,take:t}),Q(!0)},r}
(n.DataNavigatorBase);n.LocalDataNavigator=r})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=function(t){function i(n,i,r,u,f){if(t.call(this,f),this._continuationTokenFilter=null,this._continuationTokenSort=[],this._continuationTokenResetRequested=!0,this._queryParams=null,!n)throw new Error("Argument cannot be null: lifetime");this.items=i;this.metadata=r;this._options=u;this._options.loadBySkipTake||(this.loadBySkipTake=null);this._options.loadByContinuationToken||(this.loadByContinuationToken=null)}return __extends(i,t),i.prototype.loadBySkipTake=function(n,t,i,r){if(!this._options.loadBySkipTake)throw new Error("This data navigator does not support skip/take.");return this._options.loadBySkipTake(this.metadata(),this._getClonedQuery(),n,t,i,r)},i.prototype.loadByContinuationToken=function(){if(!this._options.loadByContinuationToken)throw new Error("This data navigator does not support continuation tokens.");var n=this._continuationTokenResetRequested;
return this._continuationTokenResetRequested=!1,this._options.loadByContinuationToken(this.metadata(),this._getClonedQuery(),n,this._continuationTokenFilter,this._continuationTokenSort)},i.prototype.resetLoadByContinuationToken=function(n,t){this._continuationTokenResetRequested=!0;this._continuationTokenFilter=n;this._continuationTokenSort=t},i.prototype.setQuery=function(n){return this._queryParams=n,this.resetNavigation()},i.prototype._getClonedQuery=function(){return n.Base.Utilities.clone(this._queryParams,!0)},i}(t.DataNavigatorBase);t.RemoteDataNavigator=i})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){"use strict";function r(n,i,f){Array.isArray(n)?n.forEach(function(n){r(n,i,f)}):u.isObject(n)&&Object.getOwnPropertyNames(n).forEach(function(u){var e=t.Metadata.getPropertyMetadata(i,u);f(n,u,e)&&e&&e.itemType&&r(n[u],e.itemType,f)})}function f(n){return n.substr(0,6)==="/Date("?new Date(parseInt(n.substr(6),10)):new Date(
n)}var u=n.Base.Utilities;i.DataContractJsonSerializer={processResult:function(n,t,i,u,e){return e&&r(t.data,e,function(n,t,i){var u=!0,r;return i&&(i.isDate||i.itemType==="System.DateTime")&&(r=n[t],typeof r=="string"&&(n[t]=f(r)),u=!1),u}),!0}}})(i=t.DataProvider||(t.DataProvider={}))})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){"use strict";function t(n){var r=n.property,u=n.operator,t=n.value,i;typeof t=="string"?t="'"+t+"'":t&&t instanceof Date&&(t="datetime'"+t.toISOString()+"'");switch(u){case"<":i=r+" lt "+t;break;case"<=":i=r+" le "+t;break;case"==":i=r+" eq "+t;break;case"!=":i=r+" ne "+t;break;case">=":i=r+" ge "+t;break;case">":i=r+" gt "+t;break;case"StartsWith":i="startswith("+r+","+t+") eq true";break;case"EndsWith":i="endswith("+r+","+t+") eq true";break;case"Contains":i="substringof("+t+","+r+") eq true";break;default:throw new Error("The operator '"+u+"' is not supported.");}return i}function i(n){return!n.descending?
n.property:n.property+" desc"}n.OData={shapeQuery:function(n){var u={},e=n.filter,f,r;return e&&e.length&&(u.$filter=e.map(t).join(" and ")),f=n.sort,f&&f.length&&(u.$orderby=f.map(i).join()),r=n.paging,r&&r.skip&&(u.$skip=r.skip),r&&r.take&&(u.$top=r.take),n.includeTotalCount&&(u.$inlinecount="allpages"),u}}})(t=n.DataProvider||(n.DataProvider={}))})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function ot(n,t){k.data(n,g,t)}function p(n){return u(n)||l(n)?k.data(n,g):null}function st(n){delete k.data(n,g)}function v(n){var t=i(n);return u(t)?n:t}function nt(n,t){var r=i(n[t]);return u(r)?n[t]:r}function kt(){return Date.now()}function dt(n,t){return n===t}function tt(n,i,r){var u=p(n);return u?r===s.Deletion&&u.editKind===t.EditKind.Add?!1:!i||u.unlockedAt&&i>=u.unlockedAt:!0}function it(n,t){return t&&t.indexOf?t.indexOf(n):-1}function gt(n,t){n.splice.apply(n,[0,n.length].concat(t))}function ni(n,t,i){for(var u,c=n.length,s,f,h,o,
r=i-1;r>=0;r--)if(u=it(n[r],t),u>=0){s=u+1;f=i-r;break}for(r=i+1;r<c;r++)if(u=it(n[r],t),u>=0){h=u;o=r-i;break}return e(f)&&e(o)?t.length:(f||1e5)<(o||1e5)?s:h}function ti(n,t){for(var s={},h=[],o,u,i=0,c=n.length;i<c;i++)o=n[i],u=r.getItemId(o,t),e(u)?f.missingId():(s[u]=o,h.push(u));return{index:s,ids:h}}function rt(n,t,r){var f=i(n),e,o,h,s;if(!ft(f)){if(e=!1,r++,u(f)){for(o=0,h=f.length;o<h;o++)if(e=t(nt(f,o)),e||rt(nt(f,o),t,r),e)break}else if(l(f)&&(r===1&&(e=t(f)),!e))for(s in f)if(!s.match(/^jQuery\d+$/)&&(e=rt(nt(f,s),t,r),e))break;return e}}function w(n,t,r,f,e){var o=!0,s=i(t);return u(s)?ut(n,t,r,f,e):l(s)?h(n,t,r,f,e):o=!1,o}function ut(n,t,i,r,u){var f=r.preserveNewItemsOrdering;f?ct(n,t,i,r,u):lt(n,t,i,r,u)}function ct(t,u,o,c,l){for(var g=i(u),et=g.length,b,nt,p=i(t),a,rt=p.length,k,ot,d=n.Data.Metadata.getArrayItemType(u)||o,st=n.Data.Metadata.typeHasId(d),lt=st&&p.map(function(n){var t=r.getItemId(i(n),d);return e(t)&&f.missingId(),t}),at=c.preventItemRemoval,vt=c.fetchStart,
ut,ht,ft=[],it,ct=p.slice(0),w=0;w<et;w++){if(b=g[w],nt=undefined,ut=!1,st&&rt>0)for(nt=r.getItemId(i(b),d),e(nt)&&f.missingId(),a=0;a<rt;a++)k=p[a],ot=lt[a],dt(nt,ot)&&(h(k,b,d,c,l),p.splice(a,1,b),ct[a]=null,ut=!0);ut||!at&&tt(v(b),vt,s.Deletion)||ft.push(w)}for(a=0;a<rt;a++)k=ct[a],k&&(p[a]=y(k,d,c,l));for(ht=ft.length,it=0;it<ht;it++)w=ft[it],b=g[w],a=ni(g,p,w),p.splice(a,0,b);u.splice.apply(u,[0,et].concat(p))}function lt(t,u,o,c,l){for(var d=i(u),g=d.slice(0),nt,it,rt=i(t),b,p,k=n.Data.Metadata.getArrayItemType(u)||o,ut=n.Data.Metadata.typeHasId(k),ot=ut&&ti(rt,k),st,lt=c.preventItemRemoval,at=c.fetchStart,ft=[],ht={},ct=0,et=!1,w=d.length-1;w>=0;w--)nt=d[w],p=null,ut&&(it=r.getItemId(i(nt),k),e(it)&&f.missingId(),p=ot.index[it]),p?(h(p,nt,k,c,l),ht[it]=!0,ct++):!lt&&tt(v(nt),at,s.Deletion)&&(g.splice(w,1),et=!0);if(ct!==rt.length){for(b=0,st=rt.length;b<st;b++)p=rt[b],ut&&ht.hasOwnProperty(ot.ids[b])||ft.push(y(p,k,c,l));ft.length>0&&(g.push.apply(g,ft),et=!0)}et&&(a(u)&&u.valueWillMutate(
),gt(d,g),a(u)&&u.valueHasMutated())}function h(t,r,f,e,c){if(tt(v(r),e.fetchStart,s.Merge)){st(v(r));var y,w=i(r),p,a,b;for(y in t)if(t.hasOwnProperty(y))if(p=i(w[y]),a=i(t[y]),b=n.Data.Metadata.getPropertyType(f,y),a===null)p!==null&&w[y](null);else if(u(a))u(p)?ut(a,w[y],b||null,e,c):o(w,y,a,b,e,c);else if(l(a))ft(p)?o(w,y,a,b,e,c):p instanceof Date?(p>a||p<a)&&o(w,y,a,b,e,c):h(a,p,b||null,e,c);else if(typeof a=="function")continue;else o(w,y,a,b,e,c)}}function o(n,t,r,u,f,e){var o=y(r,u,f,e);n[t]&&a(n[t])?n[t](i(o)):n[t]=a(o)?o:d(o)}function y(n,t,i,u){var f=b(n,t,i,u);return r.decorateWithType(f,t),f}function b(n,t,r,f){return u(i(n))?et(i(n).map(function(n){return b(n,t,r,f)})):l(n)?at(n,t,r,f):n}function at(t,i,u,f){var e,v=f&&f.lifetime&&f._atomizationContext&&FxImpl.Data.AtomizationContext.canAtomizeType(i),l,s,o,c;if(v&&(l=r.getItemId(t,i),s=f._atomizationContext.getEntity(i,l,f.lifetime),s&&(h(t,s,i,u,f),e=s)),!e){e={};for(o in t)t.hasOwnProperty(o)&&(c=b(t[o],n.Data.Metadata.
getPropertyType(i,o),u,f),e[o]=a(c)?c:d(c));v&&f._atomizationContext.addEntity(i,l,e,f.lifetime)}return e}var vt=FxImpl.Data,yt=vt.AtomizationContext,c=n,pt=c.Base,wt=c.Data,r=wt.Metadata,k=pt.ProxiedObservables,e=c.isUndefined,l=c.isObject,ft=c.isNullOrUndefined,d=ko.observable,et=ko.observableArray,i=ko.unwrap,a=ko.isObservable,bt=window,ii=new n.Base.Diagnostics.Log("MsPortalFx/Data/Data.DataSet"),u=Array.isArray,ri=bt.fx.environment.isDevelopmentMode,g="aux-lockState",f=FxImpl.getErrorMap({missingId:"Data item is missing id property.",incorrectOptions:"If 'atomizationOptions' is provided, data set lifetime manager and an atomizable type have to be provided.",invalidEditKind:"Invalid edit kind.",multipleIds:"Type has multiple id properties.",invalidMergeTarget:"Merge target must be an array or object contained in this data set.",addToNonArray:"Cannot add items to non-array target.",removeFromNonArray:"Cannot remove items from non-array target."}),s,ht;(function(n){n[n.Merge=0]="Merge";
n[n.Deletion=1]="Deletion"})(s||(s={}));ht=function(){function s(t,i,r){this._data=null;this._navigationMetadata=d(null);this._partialErrors=et();n.Base.ProxiedObservables.markNonSerializable(this);this._type=t||null;r&&!i&&f.incorrectOptions();this._lifetime=i;this._atomizationContext=r&&yt.get(r.atomizationContextId)}return Object.defineProperty(s.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"lifetime",{get:function(){return this._lifetime},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"navigationMetadata",{get:function(){return this._navigationMetadata},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"partialErrors",{get:function(){return this._partialErrors},enumerable:!0,configurable:!0}),s.lockItem=function(n,i){t.EditKind[i]||f.invalidEditKind();ot(n,{editKind:i})}
,s.hasUnmergedClientChanges=function(n){return rt(n,function(n){var t=p(n);return!!(t&&!!t.unlockedAt)},0)},s.unlockItem=function(n,t){if(t=arguments.length===1?!0:t,t){var i=p(n);i&&(i.unlockedAt=kt())}else st(n)},s.isLockedItem=function(n){var t=p(n);return!!(t&&!t.unlockedAt)},s.getIdPropertyNames=function(t){var i;return t instanceof s&&(t=t.data),i=r.getArrayItemType(t),i&&n.Data.Metadata.getIdPropertyNames(i&&r.getTypeMetadata(i))},s.getIdPropertyName=function(n){var t=this.getIdPropertyNames(n),i=null;return t&&(t.length>1&&f.multipleIds(),i=t[0]||null),i},s.mergeWithoutAtomization=function(n,t,i){i=i||{};var u=i.type||r.getArrayItemType(t);w(n,t,u,i)||f.invalidMergeTarget()},s.prototype.addItems=function(n,o,s,h,c){var p=this,l,a;s=s||{};c?l=s.type||r.getArrayItemType(c):(c=this.data,l=this.type);u(i(c))||f.addToNonArray();h=e(h)?!0:h;a=o.map(function(n){var i=y(n,l,s,p);return h&&ot(v(i),{editKind:t.EditKind.Add}),i});c.splice.apply(c,[n,0].concat(a))},s.prototype.removeItems=
function(n,t,e,o){o?e=e||r.getArrayItemType(o):(o=this.data,e=this.type);u(i(o))||f.removeFromNonArray();var s=o.splice(n,t);this._atomizationContext&&this._atomizationContext.releaseEntities(e,s,this.lifetime)},s.prototype.removeItem=function(n,t,r){r||(r=this.data);var u=it(n,i(r));u>=0&&this.removeItems(u,1,t,r)},s.prototype.setProperty=function(n,t,i,r){i=i||{};var u;r?u=i.type:(r=this.data,u=this.type);w(t,r[n],u,i,this)||o(r,n,t,u,i,this)},s.prototype.merge=function(n,t){t=t||{};w(n,this.data,this.type,t,this)||o(this,"_data",n,this.type,t,this)},s.prototype.hasUnmergedClientChanges=function(){return s.hasUnmergedClientChanges(this.data)},s._mergeArrayOrObject=w.bind(s),s._mergeArray=ut.bind(s),s._mergeArrayPreserveSourceItemsOrdering=ct.bind(s),s._mergeArrayPreserveTargetItemsOrdering=lt.bind(s),s._mergeObject=h.bind(s),s._attachPropertyValue=o.bind(s),s._processForAdd=y.bind(s),s._atomizeOrMap=b.bind(s),s._atomizeOrMapObject=at.bind(s),s=__decorate([n.Composition.ProxyCompatibilityMode],
s)}();t.DataSet=ht})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t,i,r;(function(n){n[n.Copy=0]="Copy";n[n.InPlace=1]="InPlace"})(n.EditScopeKind||(n.EditScopeKind={}));t=n.EditScopeKind,function(n){n[n.None=0]="None";n[n.Created=1]="Created";n[n.Deleted=2]="Deleted";n[n.Updated=3]="Updated"}(n.EditState||(n.EditState={}));i=n.EditState,function(n){n[n.AcceptClientChanges=0]="AcceptClientChanges";n[n.DiscardClientChanges=1]="DiscardClientChanges";n[n.RefreshFromServerImplicitly=2]="RefreshFromServerImplicitly";n[n.ServerChangesAppliedManually=3]="ServerChangesAppliedManually";n[n.ServerDataReturned=4]="ServerDataReturned"}(n.AcceptEditScopeChangesAction||(n.AcceptEditScopeChangesAction={}));r=n.AcceptEditScopeChangesAction})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function bi(n,t){var i=t&&t.kind;return i===hi.InPlace?new gi(n,t):new di(n,t)}function ki(n){var t=oi(n),r,u;t.
length?(r=t.map(function(n){var t={state:i[n.state]},r=n.entityReference;return r&&r.type&&(t.entityType=r.type,t.entityId=r.id),n.entityPath&&(t.pathFromRoot=n.entityPath),n.encodedCreatedEntities&&(t.createdEntities=n.encodedCreatedEntities),n.entityUpdates&&(t.updates=n.entityUpdates),t}),u=JSON.stringify(ko.toJS(r),function(n,t){return n&&dt(t)?"<undefined>":t},4),console.debug(u)):console.debug("No edits")}function ti(){r.accessorLifetime()}function f(n,t,i){return t===void 0&&(t={}),i===void 0&&(i=!1),lt({shouldVisitObjectProperty:function(t,r,u){return ei(t,u)&&n().shouldVisitObjectProperty(t,r,u)&&(!i||!ut(k(u,t)))}},t)}function pt(n){typeof n!="object"&&r.makeObs();yi(n,function(t,i){if(rt(i))pt(i),n[t]=ct(i);else{var r=typeof i;r==="object"?pt(i):r!=="function"&&(n[t]=o(i))}})}function ui(n){var t=bt.toSerializableObject(n);return JSON.stringify(t)}function fi(n,t,i){if(i===0)return ir(n,t);var r=JSON.parse(n);return bt.fromSerializableObject(r)}function ir(n,t){var i=JSON.parse(
n);return t||pt(i),i}function wt(n,t){var i=nt(n.type)&&nt(t.type)&&nt(n.id)&&nt(t.id),r=n.type===t.type&&n.id===t.id;return i||r}function et(n){var t=0,r,i;if(n.length===0)return t+"";for(i=0;i<n.length;i++)r=n.charCodeAt(i),t=(t<<5)-t+r|0;return t+""}function ei(n,t){return!(t&&t.properties&&t.properties[n]&&t.properties[n].trackEdits===!1)}function oi(n,t){t===void 0&&(t=!0);var r=n.version||0;return n.edits.map(function(n){var u={state:n.state,entityReference:n.entityReference};switch(n.state){case i.Created:u.entityPath=n.entityPath;u.encodedCreatedEntities=n.createdEntities.map(function(n){return fi(n,t,r)});break;case i.Updated:u.entityUpdates=fi(n.entityUpdates,t,r)}return u})}function si(n){return ut(n)?!0:n?c.getProperties(n).some(function(t){return si(k(n,t))}):!1}var e=MsPortalFx,c=e.Data.Metadata,i=e.Data.EditState,ot=n.Data.Shared,st=e.Base.Utilities,bt=st.Internal.Serialization,w=e.Data.AcceptEditScopeChangesAction,l=n.Data.Visitor,g=n.Data.CloneVisitor,ht=n.Data.MergeVisitor,
hi=e.Data.EditScopeKind,h=e.isArrayOrObservableArray,kt=e.areEqual,dt=e.isUndefined,nt=e.isNullOrUndefined,s=e.isObject,o=ko.observable,ct=ko.observableArray,v=ko.isObservable,tt=ko.unwrap,it=ko.computed,lt=st.extend,gt=MsPortalFx.getUniqueId,y=e.Base.ProxiedObservables,p=ot.unwrapArrayOrObservableArray,b=ot.unwrapObjectPropertyValue,ci=ot.isObservableObjectPropertyValue,rt=Array.isArray,ut=c.typeIsEntityType,k=c.getPropertyTypeMetadata,at=new e.Base.Diagnostics.Log("MsPortalFx/Data/Data.EditScope"),a=undefined,li="aux-entityState",ai="aux-entityArrayState",vi=window,d=vi.fx.environment.isDevelopmentMode,ni="Turn on development mode to generate diagnostic information for this error.",yi=e.forEachKey,pi=e.isEmpty,u="",wi={accessorLifetime:u,scopeInputType:u,scopeOptsTypes:u,missingMeta:u,noRefresh:u,noSave:u,entityDupe:u,saveInProg:u,nullMerge:u,resetInProg:u,noEntityRoot:u,resetType:u,newInputObs:u,newEditObs:u,diffEditInput:u,missingIdProp:u,targetArrObs:u,editsUnavail:u,mergeUnavail:
u,noImpl:u,serialize:u,namedMeta:u,disposed:u,nestedEntities:u,makeObs:u,entityEdit:u,resetObs:u,moveEditState:u},r=n.getErrorMap(wi),ft,vt;t.allowNonPersistentEdits=!1;t.createEditScope=bi;t.logEditsToConsole=ki;t.nonPersistedPropertySentinel="EDITSCOPENOTPERSISTED";ft={entityType:!0};vt={registerForDispose:ti,createChildLifetime:ti};var ii=function(){function u(n,t,i){var u=this,e,l,f;this._isDisposed=!1;this._initializing=o(!0);this._saving=o(!1);this._refreshing=o(!1);this._refreshInProgressCount=0;this._resettingValue=o(!1);this._dirty=o(!1);this._edits=o([]);this.editsChanged=o();y.markNonSerializable(this);this._createEditableAndOriginalData=i;e=h(n)&&tt(n);l=e&&(e.length===0||s(e[0]));l||s(n)||r.scopeInputType();t=t||{};f=t.typeMetadata;f?t.typeName&&r.scopeOptsTypes():t.typeName&&(f=c.getTypeMetadata(t.typeName),f||r.missingMeta(t.typeName));this._hasMetadata=!!f;f?f.entityType||(f=lt(st.clone(f),{entityType:!0})):f=ft;this._inconsistent=ko.pureComputed(function(){return u._initializing(
)||u._refreshing()||u._saving()||u._resettingValue()});this._getEditsVisitor=this._createGetEditsVisitor(!1);this._getPersistableEditsVisitor=this._createGetEditsVisitor(!0);this._applyEditsVisitor=this._createApplyPersistedEditsVisitor();this._revertAllVisitor=this._createRevertAllVisitor();this._generateValueBasedEntityIdVisitor=this._createGenerateValueBasedEntityIdVisitor();this._mergeToEditableVisitor=this._createMergeToEditableVisitor();this._getEditsReactor=it(function(){u._inconsistent()?u._edits(null):(u._edits(u._getEdits(!1)),u.editsChanged.valueHasMutated())});this._entityStateKey=li+gt();this._entityArrayStateKey=ai+gt();this._rootTypeMetadata=f;this._root=this._createEditableAndOriginalData(n,this._rootTypeMetadata).editable;this._refreshCallback=t.refresh||function(){return r.noRefresh(),null};this._saveCallback=t.save||function(){return r.noSave(),null};this._dirtyReactor=it(function(){u._inconsistent()||u._dirty(u._edits().length>0)});this._initializing(!1)}return u.prototype.
dispose=function(){this._isDisposed||(this._isDisposed=!0,this._deregisterNestedEntities(this._root,this._rootTypeMetadata,!1),this._getEditsReactor.dispose(),this._dirtyReactor.dispose())},Object.defineProperty(u.prototype,"root",{get:function(){return this._assertNotDisposed(),this._root},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"refreshing",{get:function(){return this._refreshing},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"saving",{get:function(){return this._saving},enumerable:!0,configurable:!0}),u.prototype.markForDelete=function(n){this._assertNotDisposed();var r=this._getEntityState(n,!1),t=r.readOnlyEditState();t!==i.None&&this._revertEntity(n,r,t);t!==i.Created&&this._markAsDeletedOrUpdated(n,i.Deleted)},u.prototype.create=function(n){this._assertNotDisposed();var t=this._getEntityArrayType(n,!1);return c.createEmptyObject(
t)},u.prototype.addCreated=function(n,t){var i,u;this._assertNotDisposed();i=this._getEntityState(n,!1,!1);i&&r.entityDupe();u=this._getCreatedEntities(t,!1);this._addEntityStateToCreatedEntity(n,t);u.push(n)},u.prototype.revert=function(n){this._assertNotDisposed();var t=this._getEntityState(n,!1),r=t.readOnlyEditState();this._revertEntity(n,t,r);t.writableEditState(i.None)},u.prototype.revertAll=function(){this._assertNotDisposed();this._revertAll()},u.prototype.getEditState=function(n){return this._assertNotDisposed(),this._getEditState(n,!1)},u.prototype.getOriginal=function(n){return this._assertNotDisposed(),h(n)?this._getEntityArrayState(n,!1).original:this._getEntityState(n,!1).original},u.prototype.getCreated=function(n){return this._assertNotDisposed(),this._getCreatedEntities(n,!1)},u.prototype.mergeFromOriginal=function(){this._assertNotDisposed();this._mergeFromOriginal()},u.prototype.refresh=function(){var n=this;this._assertNotDisposed();this._refreshInProgressCount++;this.
_refreshing(!0);var r=this._refreshCallback(this._getRefreshableData())||Q(a),t=Q.defer(),i=function(){--n._refreshInProgressCount<=0&&(n._refreshInProgressCount=0,n._refreshing(!1))};return r.then(function(r){n._onRefreshComplete(r);n._isDisposed||(i(),t.resolve())}).catch(function(n){i();t.reject(n)}),t.promise},u.prototype.save=function(){this.mergeFromOriginal();this.revertAll()},u.prototype.saveChanges=function(){var n=this,t;if(this._assertNotDisposed(),this._inconsistent()&&r.saveInProg(),t=this._edits(),t.length===0)return Q();this._saving(!0);var e=MsPortalFx.mapMany(t,function(n){switch(n.state){case i.Created:return n.createdEntities.map(function(t){return{editState:i.Created,entityTypeName:n.typeMetadata.name,entity:t}});case i.Updated:case i.Deleted:return[{editState:n.state,entityTypeName:n.typeMetadata.name,entity:n.updatedOrDeletedEntity}]}return[]}),o=this._saveCallback(this,e,this._getRefreshableData())||Q(a),u=Q.defer(),f=function(){n._revertAll();n._isDisposed||(n._saving(
!1),u.resolve())};return o.then(function(t){var u=t&&t.action||w.AcceptClientChanges,i;switch(u){case w.AcceptClientChanges:n._acceptChanges();break;case w.RefreshFromServerImplicitly:return n.refresh().then(function(){f()});case w.ServerChangesAppliedManually:n._onRefreshComplete(null);break;case w.ServerDataReturned:i=t.dataToMerge;i||r.nullMerge();n._onRefreshComplete(i)}f()}).catch(function(t){n._isDisposed||(n._saving(!1),u.reject(t))}),u.promise},u.prototype.resetValue=function(n,t){var y=this,e,p,o,i,w,c,a,h,u;this._assertNotDisposed();this._inconsistent.peek()&&r.resetInProg();e=function(n){var t="";n&&n.stack&&(t+="  Inner exception: "+n.stack);r.resetObs(t)};p=n;p.returnsObservablesFromEditScope||e();try{o=n.getOriginalObservable(vt);i=n.getEditableObservable(vt)}catch(b){e(b)}(!o||!i||ko.isComputed(o)||ko.isComputed(i))&&e();w=function(n){var e=n,i,u,t=new l(null,f(function(){return t},{visitObject:function(n,r){t.getObjectPropertiesToVisit(n,r).forEach(function(f){n[f]===e?
(u=!0,i=k(r,f)):t.visitObjectPropertyValueDispatch(f,n,r)})}}));return t.visit(y._root,y._rootTypeMetadata),u||r.noEntityRoot(),i};this._resettingValue(!0);try{c=w(i);si(c)&&r.resetType();a=t.newInputValue;v(a)&&r.newInputObs();h=this._createEditableAndOriginalData(a,c);i(h.editable);o(h.original);t.hasOwnProperty("newEditableValue")&&(u=t.newEditableValue,v(u)&&r.newEditObs(),(rt(u)||s(u))&&u===h.original&&r.diffEditInput(),i(t.newEditableValue))}finally{this._resettingValue(!1)}},u.prototype.getEntityArrayWithEdits=function(n){var t=this,u=this._getCreatedEntities(n,!1)(),r=tt(n),f=r.filter(function(n){return t.getEditState(n)()!==i.Deleted}).concat(u),e=r.filter(function(n){return t.getEditState(n)()===i.Updated}),o=r.filter(function(n){return t.getEditState(n)()===i.Deleted});return{arrayWithEdits:f,createdEntities:u,updatedEntities:e,deletedEntities:o}},u.prototype.applyArrayAsEdits=function(n,t){var u=this,o=this._getEntityArrayState(t,!1,!1),i,e,h;if(o){i=t;e=o.typeMetadata;(!rt(
e.idProperties)||e.idProperties.length<1)&&r.missingIdProp();var l=[],s=[],p=this._getCreatedEntities(t,!0)().slice(0);n.forEach(function(n){var t=c.getItemId(n,e);dt(t)?s.push(n):l.push(n)});var a=function(n){v(i)?u.addCreated(n,i):u.addCreated(n,i)},w=lt({handleAdd:function(n){a(n)},handleDelete:function(n){u.markForDelete(n)}},this._createMergeEntityOnlyVisitorOptions()),y=new tr(w,f(function(){return y}));y.applyEntityArrayAsEdits(l,i,o.typeMetadata);s.length&&s.forEach(function(n){a(n)});p.forEach(function(n){u.revert(n)})}else v(t)||r.targetArrObs(),h=new g(null,f(function(){return h})),t(h.clone(n,null))},u.prototype.getEdits=function(){this._inconsistent()&&r.editsUnavail();var n=this._getEdits(!0).map(function(n){var t={state:n.state,entityReference:n.entityReference};switch(t.state){case i.Created:t.entityPath=n.entityPath;t.createdEntities=n.encodedCreatedEntities.map(function(n){return ui(n)});break;case i.Updated:t.entityUpdates=ui(n.entityUpdates)}return t});return{edits:
n,version:1}},u.prototype.applyEdits=function(n){this._assertNotDisposed();var t=oi(n,this._hasMetadata);return this._applyEdits(t,this._applyEditsVisitor,!1),!0},Object.defineProperty(u.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),u.prototype._mergeFromOriginal=function(){r.mergeUnavail()},u.prototype._getRefreshableData=function(){return r.noImpl(),null},u.prototype._onRefreshComplete=function(){r.noImpl()},u.prototype._addEntityStateToEditableEntity=function(n,t,u){var f=this,e=this._addEntityState(n);e.original=t;e.typeMetadata=u;e.entityUpdateReactor=it(function(){if(!f._inconsistent()){var u=f._getEntityState(n,!0),t=u.readOnlyEditState.peek(),e=f._edits().some(function(t){return t.state===i.Updated&&t.updatedOrDeletedEntity===n});e?t===i.None?f._markAsDeletedOrUpdated(n,i.Updated):t!==i.Updated&&r.moveEditState(i[t],i[i.Updated]):t===i.Updated&&u.writableEditState(i.None)}})},u.prototype._addEntityStateToCreatedEntity=function(n,
t){var r=this._addEntityState(n);r.containingArray=t;r.writableEditState(i.Created)},u.prototype._addEntityState=function(n){var t=o(i.None),r={writableEditState:t,readOnlyEditState:it(function(){return t()})};return y.data(n,this._entityStateKey,r),r},u.prototype._getEntityState=function(n,t,i){var u,f,r;if(i===void 0&&(i=!0),u=n&&y.data(n,this._entityStateKey),!u&&i){f=!h(n)&&s(n);r="";r=t?"Entity-typed object is not known to this edit scope.  Such entity-typed objects can only be added via 'editScope.addCreated', 'editScope.refresh' and any refresh concluding an async 'editScope.saveChanges' call.  Such objects cannot be added due to the addition of some object/array that nests this object.":f?this._rootTypeMetadata===ft?"No type metadata was supplied to this EditScope.  Depending on scenario, be sure to supply either: (1) the 'editScopeMetadataType' option to your MsPortalFx.ViewModels.ParameterProvider or (2) the 'entityTypeName' option to your MsPortalFx.Data.EditScopeCache.":d?"":
"Object passed as the 'entity' parameter either isn't reachable from 'editScope.root' or isn't entity-typed according to type metadata.":"Value passed as the 'entity' parameter must be an object.";d&&(r=this._addMetadataHelperMessage(r,n));d||(r=r+"  "+ni);throw new Error(r);}return u},u.prototype._deregisterNestedEntities=function(n,t,r){var e=this,u;r===void 0&&(r=!0);u=new yt({getCreatedEntities:function(n){return e._getCreatedEntities(n,!0)}},f(function(){return u},{visitEntityArray:function(n,t,i){u.visitEntityArray(n,t,i);e._disposeEntityArrayState(n)},visitEntity:function(n,t,r){if(u.visitEntity(n,t,r),r){var f=e._getEditState(n,!0)();f!==i.None&&at.error("Edited entities are being disconnected from the EditScope, losing user-authored edits.")}e._disposeEntityState(n)}}));u.visit(n,t,r)},u.prototype._addEntityArrayState=function(n,t,i){var r={typeMetadata:i,original:t};y.data(n,this._entityArrayStateKey,r)},u.prototype._createVisitorCallbacks=function(n,t,i){return t===void 0&&(
t={}),i===void 0&&(i=!1),f(n,t,i)},u.prototype._rootIsEntity=function(){return s(this._root)},u.prototype._rootAsEntity=function(n){return n===void 0&&(n=!0),s(this._root)?n?this._root:this._getOriginalEntity(this._root):null},u.prototype._rootAsArray=function(n){return n===void 0&&(n=!0),h(this._root)?n?this._root:this._getOriginalArray(this._root):null},u.prototype._getOriginalEntity=function(n){return this._getEntityState(n,!0).original},u.prototype._getOriginalArray=function(n){return this._getEntityArrayState(n,!0).original},u.prototype._revertEntity=function(n,t,r){switch(r){case i.Updated:this._mergeToEditableVisitor.mergeEntity(t.original,n,t.typeMetadata);break;case i.Created:var u=this._getCreatedEntities(t.containingArray,!0);u.splice(u().indexOf(n),1)}},u.prototype._getEntityArrayState=function(n,t,i){var u,f,r;if(i===void 0&&(i=!0),u=y.data(n,this._entityArrayStateKey),!u&&i){f=h(n);r="";r=t?"Entity-typed array is not known to this EditScope.  Such entity-typed arrays can only be added via 'editScope.refresh' and any refresh concluding an async 'editScope.saveChanges' call.  Such arrays cannot be added due to the addition of some object/array that nests this array.":
f?this._rootTypeMetadata===ft?"No type metadata was supplied to this EditScope.  Depending on scenario, be sure to supply either: (1) the 'editScopeMetadataType' option to your MsPortalFx.ViewModels.ParameterProvider or (2) the 'entityTypeName' option to your MsPortalFx.Data.EditScopeCache.":d?"":"Array passed as the 'entityArray' parameter either isn't reachable from 'editScope.root' or isn't entity-typed according to type metadata.":"Value passed as the 'entityArray' parameter must be an array or an observable array.";d&&(r=this._addMetadataHelperMessage(r,n));d||(r=r+"  "+ni);throw new Error(r);}return u},u.prototype._disposeEntityArrayState=function(n){y.data(n,this._entityArrayStateKey,a)},u.prototype._disposeEntityState=function(n){var t=this._getEntityState(n,!0);t.entityUpdateReactor&&(t.entityUpdateReactor.dispose(),t.entityUpdateReactor=null);y.data(n,this._entityStateKey,a)},u.prototype._markAsDeletedOrUpdated=function(n,t){var f=this._getEntityState(n,!0),u=f.readOnlyEditState.
peek();u!==i.None&&u!==t&&r.entityEdit(i[u]);f.writableEditState(t)},u.prototype._getEntityArrayType=function(n,t){return this._getEntityArrayState(n,t).typeMetadata},u.prototype._getCreatedEntities=function(n,t){var r=this._getEntityArrayState(n,t),i=r.createdEntities;return i||(i=r.createdEntities=ct()),i},u.prototype._revertAll=function(){this._revertAllVisitor.visit(this._root,this._rootTypeMetadata)},u.prototype._createRevertAllVisitor=function(){var n=this,t=new yt({getCreatedEntities:function(t){return n._getCreatedEntities(t,!0)}},f(function(){return t},{visitEntityArray:function(i,r){t.visitArray(i,r);for(var u=n._getCreatedEntities(i,!0);u().length>0;)n.revert(u()[0])},visitEntity:function(i,r){t.visitEntity(i,r);n.revert(i)}}));return t},u.prototype._getEdits=function(n){var t=[],i=this._rootIsEntity()?this._createEntityReference(this._rootAsEntity(),this._rootTypeMetadata,!1):null,r=n?this._getPersistableEditsVisitor:this._getEditsVisitor;return r.visit(this._root,this._rootTypeMetadata,
{edits:t,entityReference:i,entityPath:""}),t},u.prototype._createGetEditsVisitor=function(n){var t=this,u=new yt({getCreatedEntities:function(n){return t._getCreatedEntities(n,!0)}},f(function(){return u},{visitEntityArray:function(n,i){t._getEntityArrayState(n,!0);u.visitEntityArray(n,i)},visitEntity:function(n,i){t._getEntityState(n,!0);u.visitEntity(n,i)}})),o=this._createComputeEntityUpdatesVisitor(n),e=function(n,t,i){return o.visit(n,t,i)},r=new l(null,f(function(){return r},{shouldVisitObjectProperty:function(n,i,u){return ei(n,u)&&r.shouldVisitObjectProperty(n,i,u)&&t._objectPropertyNestsEntities(i,n,u)},visitArrayItem:function(n,t,i,u){r.visitArrayItem(n,t,i,{edits:u.edits,entityReference:u.entityReference,entityPath:u.entityPath+"."+t})},visitEntityArray:function(n,f,o){var s;if(r.visitArray(n,f,o),s=t._getCreatedEntities(n,!0),s().length){var h=o.edits,c=o.entityReference,l=o.entityPath;h.push({state:i.Created,entityReference:c,entityPath:l,encodedCreatedEntities:s().map(function(
n){return e(n,f)}),typeMetadata:f,createdEntities:s()});s().forEach(function(n){u.visit(n,f)})}},visitObject:function(n,i,u){var f=ut(i),e=u.edits,o=u.entityReference,s=u.entityPath;r.getObjectPropertiesToVisit(n,i).forEach(function(u){r.visitObjectPropertyValueDispatch(u,n,i,{edits:e,entityReference:f?t._createEntityReference(n,i,!1):o,entityPath:f?u:s+"."+u})})},visitEntity:function(n,u,f){var o=f.edits,h=t._getEditState(n,!0)(),s=e(n,u,t._getOriginalEntity(n));pi(s)?h===i.Deleted&&o.push({state:i.Deleted,entityReference:t._createEntityReference(n,u,!1),typeMetadata:u,updatedOrDeletedEntity:n}):o.push({state:i.Updated,entityReference:t._createEntityReference(n,u,!1),entityUpdates:s,typeMetadata:u,updatedOrDeletedEntity:n});r.visitEntity(n,u,f)}}));return r},u.prototype._createApplyPersistedEditsVisitor=function(){var n=this;return this._createApplyEditsVisitor(!1,{applyCreate:function(t,i,r){n._removeNonPersistedPropertySentinels(i,r,!0);n.addCreated(i,t)},applyUpdate:function(t,i,r)
{n._removeNonPersistedPropertySentinels(i,r,!1);n._applyEntityUpdates(t,i,r)},applyDelete:function(t,r){n._markAsDeletedOrUpdated(r,i.Deleted)}})},u.prototype._createApplyEditsVisitor=function(n,t){var u=this,r=new l(null,f(function(){return r},{visitArrayItem:function(n,t,i,u){r.visitArrayItem(n,t,i,{edits:u.edits,entityReference:u.entityReference,entityPath:u.entityPath+"."+t})},visitEntityArray:function(f,e,o){var s,c,h,p;for(r.visitArray(f,e,o),s=o.edits,c=tt(f),h=c.length-1;h>=0;h--){var a=c[h],w=u._createEntityReference(a,e,n),v=s.firstIndex(function(n){return n.state===i.Deleted&&wt(w,n.entityReference)});v>=0&&(s.splice(v,1),t.applyDelete(f,a))}var y=o.entityReference,b=o.entityPath,l=s.firstIndex(function(n){if(n.state===i.Created)if(y){if(n.entityReference&&wt(y,n.entityReference)&&b===n.entityPath)return!0}else if(!n.entityReference)return!0});l>=0&&(p=s[l],s.splice(l,1),p.encodedCreatedEntities.forEach(function(n){t.applyCreate(f,n,e)}))},visitObject:function(f,e,o){var s=o.
edits,c=o.entityReference,v=o.entityPath,l=ut(e),h,a;l&&(c=u._createEntityReference(f,e,n));r.getObjectPropertiesToVisit(f,e).forEach(function(n){r.visitObjectPropertyValueDispatch(n,f,e,{edits:s,entityReference:c,entityPath:l?n:v+"."+n})});l&&(h=s.firstIndex(function(n){return n.state===i.Updated&&wt(c,n.entityReference)}),h>=0&&(a=s[h],s.splice(h,1),t.applyUpdate(f,a.entityUpdates,e)))}}));return r},u.prototype._acceptChanges=function(){var n=this._getEdits(!1);this._applyEdits(n.slice(0),this._createAcceptChangesVisitor(!0),!0);this._applyEdits(n,this._createAcceptChangesVisitor(!1),!1)},u.prototype._createAcceptChangesVisitor=function(n){var t=this;return this._createApplyEditsVisitor(n,{applyCreate:function(i,r,u){if(!n){var f=i,e=t._createEditableAndOriginalData(r,u).editable,o=function(n,t){if(n.push)n.push(t);else{var i=n,r=i().slice(0);r.push(t);i(r)}};o(f,e);o(t._getOriginalArray(f),t._getOriginalEntity(e))}},applyUpdate:function(i,r,u){n&&t._applyEntityUpdates(i,r,u)},applyDelete:
function(n,t){var u=tt(n).indexOf(t),i,r;n.splice?n.splice(u,1):(i=n,r=i().slice(0),r.splice(u,1),i(r))}})},u.prototype._applyEntityUpdates=function(n,t,i){this._mergeToEditableVisitor.mergeEntity(t,n,i)},u.prototype._removeNonPersistedPropertySentinels=function(n,i,r){var u=new l(null,{visitObjectPropertyValue:function(n,i,f){var e=b(i,n);e===t.nonPersistedPropertySentinel?v(i[n])?i[n](a):r?i[n]=a:delete i[n]:u.visitObjectPropertyValue(n,i,f)},visitArray:function(n,i){var r=p(n);r.length===1&&r[0]===t.nonPersistedPropertySentinel?r.splice(0,1):u.visitArray(n,i)}});u.visit(n,i)},u.prototype._generateValueBasedEntityId=function(n,t){return this._generateValueBasedEntityIdVisitor.visit(n,t)},u.prototype._createGenerateValueBasedEntityIdVisitor=function(){var n=new l(null,f(function(){return n},{visitArray:function(t,i){var r="";return p(t).forEach(function(t,u){r+=n.visitArrayItem(t,u,i)}),et(r)},visitObject:function(t,i){var u=n.getObjectPropertiesToVisit(t,i).sort(),r="";return u.forEach(
function(u){r+=n.visitObjectPropertyValueDispatch(u,t,i)}),et(r)},visitScalar:function(n){return et(""+n)},visitDate:function(n){return et(""+n)}},!0));return n},u.prototype._createEntityReference=function(n,t,i){var u,o,f,s,e;return i===void 0&&(i=!1),o=this._rootAsEntity(!i)===n,o?u={type:a,id:a}:(f=i?n:this._getOriginalEntity(n),t&&(t.name||t===this._rootTypeMetadata)||r.serialize(),s=c.typeHasId(t)?c.getItemId(f,t):this._generateValueBasedEntityId(f,t),e=t.name||null,e||t===this._rootTypeMetadata||r.namedMeta(),u={type:e,id:s}),u},u.prototype._createComputeEntityUpdatesVisitor=function(n){var e=this,r=new g(null,f(function(){return r},{visitObject:function(i,u){var f={};return r.getObjectPropertiesToVisit(i,u).forEach(function(s){var c=r.visit(b(i,s),k(u,s)),l,a,y;n&&(e._shouldPersistObjectPropertyEdits(s,u)||(c=t.nonPersistedPropertySentinel));l=i[s];ci(i,s)?a=o(c):h(l)&&c===t.nonPersistedPropertySentinel?(y=[t.nonPersistedPropertySentinel],a=v(l)?!l.splice?o(y):ct(y):y):a=c;f[s]=
a}),f}},!0)),i={},u=new l(null,f(function(){return u},{visitObject:function(f,o,h){if(s(h)){var c;return e._enumeratePropertiesForUpdates(f,h,u,o,function(r){var s=u.visit(b(f,r),k(o,r),b(h,r));s!==i&&(c||(c={}),n&&(e._shouldPersistObjectPropertyEdits(r,o)||(s=t.nonPersistedPropertySentinel)),c[r]=s)}),c||i}return r.visit(f,o)},visitArray:function(n,t,f){var e=!1,o;return h(f)?p(n).length!==p(f).length?e=!0:(o=p(f),e=p(n).some(function(n,r){return u.visitArrayItem(n,r,t,o[r])!==i})):e=!0,e?r.visit(p(n),t):i},visitScalar:function(n,t){return kt(n,t)?i:n},visitDate:function(n,t){return kt(n,t)?i:n}},!0));return u},u.prototype._shouldPersistObjectPropertyEdits=function(t,i){if(!n.Data.allowNonPersistentEdits)return!0;var r=i&&i.properties&&i.properties[t];return!r||r.persistEdits!==!1},u.prototype._enumeratePropertiesForUpdates=function(n,t,i,r,u){i.getObjectPropertiesToVisit(n,r).forEach(function(n){t.hasOwnProperty(n)?u(n):at.warning("Encountered a property '"+n+"' on an editable object that is not present on the original object.  Updates to the property value are not being persisted along with other edits.")}
);i.getObjectPropertiesToVisit(t,r).forEach(function(t){n.hasOwnProperty(t)||at.warning("Encountered a property '"+t+"' on an original object that is not present on the editable object.  Updates to the property value are not being persisted along with other edits.")})},u.prototype._assertNotDisposed=function(){this._isDisposed&&r.disposed()},u.prototype._objectPropertyNestsEntities=function(n,t,i){var r=n[t],u;return(v(r)&&(r=r.peek()),!(rt(r)||s(r)))?!1:(u=k(i,t),!u)?!1:!0},u.prototype._getEditState=function(n,t){return this._getEntityState(n,t).readOnlyEditState},u.prototype._createMergeToEditableVisitor=function(){var n=new nr(this._createMergeEntityOnlyVisitorOptions(),f(function(){return n}));return n},u.prototype._createMergeEntityOnlyVisitorOptions=function(){var n=new l(null,f(function(){return n},{visitEntityTypedObjectPropertyValue:function(){r.nestedEntities()}})),t=new g(null,f(function(){return t}));return{onDetach:function(t,i){n.visit(t,i)},clone:function(n,i){return t.clone(
n,i)}}},u.prototype._applyEdits=function(n,t,i){var r=this._rootIsEntity()?this._createEntityReference(this._rootAsEntity(),this._rootTypeMetadata,i):null,u=i?this.getOriginal(this._root):this._root;t.visit(u,this._rootTypeMetadata,{edits:n,entityReference:r,entityPath:""})},u.prototype._addMetadataHelperMessage=function(n){return n},u.prototype._computeMetadataHelperMessage=function(){},__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],u)}(),di=function(n){function t(t,i){var r=this;n.call(this,t,i,function(n,t){return{editable:r._getVisitor().clone(n,t),original:n}})}return __extends(t,n),t.prototype._mergeFromOriginal=function(n){n===void 0&&(n=!0);var t=this._rootTypeMetadata,i=this._createMergeEntitiesVisitor(n);this._rootIsEntity()?i.mergeEntity(this._rootAsEntity(!1),this._rootAsEntity(),t):i.mergeEntityArray(this._rootAsArray(!1),this._rootAsArray(),t)},t.prototype._getRefreshableData=function(){return this.getOriginal(this._root)},t.prototype._onRefreshComplete=function(
n){n&&e.Data.DataSet.mergeWithoutAtomization(n,this.getOriginal(this._root),{type:this._rootTypeMetadata.name});this._mergeFromOriginal(!1)},t.prototype._getVisitor=function(){var t=this,n=this._visitor;return n||(this._visitor=n=new g(null,f(function(){return n},{visitEntityArray:function(i,r){var u=n.visitEntityArray(i,r);return t._addEntityArrayState(u,i,r),u},visitEntity:function(i,r){var u=n.visitEntity(i,r);return t._addEntityStateToEditableEntity(u,i,r),u}}))),n},t.prototype._createMergeEntitiesVisitor=function(n){var t=this,i=new ri({onDetach:function(i,r){t._deregisterNestedEntities(i,r,n)},clone:function(n,i){return t._getVisitor().clone(n,i)},getSourceEntity:function(n){return t._getOriginalEntity(n)},isSourceForTargetEntity:function(n,i){return t._getOriginalEntity(i)===n}},f(function(){return i}));return i},t}(ii),gi=function(n){function t(t,i){var r=this;n.call(this,t,i,function(n,t){return{editable:n,original:r._getVisitors().clone.clone(n,t)}})}return __extends(t,n),t.prototype.
_getRefreshableData=function(){return this._root},t.prototype._onRefreshComplete=function(n){n&&e.Data.DataSet.mergeWithoutAtomization(n,this._root,{type:this._rootTypeMetadata.name});this._mergeToOriginal()},t.prototype._getVisitors=function(){var t=this,i=this._visitors,n,r;return i||(n=new g(null,f(function(){return n},{visitEntityArray:function(i,r,u){var f=n.visitEntityArray(i,r,u);return t._addEntityArrayState(i,f,r),f},visitEntity:function(i,r,u){var f=n.visitEntity(i,r,u);return t._addEntityStateToEditableEntity(i,f,r),f}})),r=new ri({onDetach:function(){},clone:function(t,i){return n.clone(t,i)},getSourceEntity:function(n,i){return i.first(function(i){var r=t._getEntityState(i,!0,!1);return r&&r.original===n})},isSourceForTargetEntity:function(n,i){var r=t._getEntityState(n,!0,!1);return r&&r.original===i}},f(function(){return r})),this._visitors=i={clone:n,merge:r}),i},t.prototype._mergeToOriginal=function(){var n=this._rootTypeMetadata,t=this._getVisitors().merge;this._rootIsEntity(
)?t.mergeEntity(this._rootAsEntity(),this._rootAsEntity(!1),n):t.mergeEntityArray(this._rootAsArray(),this._rootAsArray(!1),n)},t}(ii),yt=function(n){function t(t,i){n.call(this,t,i);this._getCreatedEntities=t&&t.getCreatedEntities}return __extends(t,n),t.prototype.visitEntityArray=function(t,i,r){var u=this._getCreatedEntities(t);return n.prototype.visitEntityArray.call(this,u,i,r),n.prototype.visitEntityArray.call(this,t,i,r)},t}(l),nr=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.mergeEntity=function(t,i,r){n.prototype.merge.call(this,t,i,r)},t.prototype.visitEntityTypedObjectPropertyValue=function(){return!0},t}(ht),tr=function(n){function t(t,i){n.call(this,t,i);this._handleAdd=t.handleAdd;this._handleDelete=t.handleDelete}return __extends(t,n),t.prototype.applyEntityArrayAsEdits=function(n,t,i){var r=this;this._mergeArray(n,i,t,{handleAdd:function(n){r._handleAdd(n)},handleDelete:function(n){r._handleDelete(n)}})},t}(ht),ri=function(n){function t(
t,i){n.call(this,t,i);this._getSourceEntity=t.getSourceEntity;this._isSourceForTargetEntity=t.isSourceForTargetEntity}return __extends(t,n),t.prototype.mergeEntity=function(t,i,r){n.prototype.merge.call(this,t,i,r)},t.prototype.mergeEntityArray=function(t,i,r){n.prototype.merge.call(this,t,i,r)},t.prototype.visitEntityTypedObjectPropertyValue=function(n,t,i,r){var o=this._callbacks,u=b(t,n),f=b(r,n),e=!1;return h(u)?h(f)&&(e=o.visitEntityArray(u,i,f)):s(u)&&s(f)&&this._isSourceForTargetEntity(u,f)&&(e=o.visitEntity(u,i,f)),e},t.prototype.visitEntityArray=function(n,t,i){var r=this;return this._mergeArray(n,t,i,{getEdits:function(n,t){var i=function(t){return r._getSourceEntity(t,n)},f=t.map(function(n){return i(n)}),u=ko.utils.compareArrays(f,n);return u.forEach(function(n){if(n.status==="deleted"||n.status==="retained"){var r=n.value;n.value=t.first(function(n){return i(n)===r})}}),u},getSourceItem:function(n,t){return r._getSourceEntity(n,t)}})},t}(ht)})(t=n.Data||(n.Data={}))}(FxImpl||
(FxImpl={})),function(n){var t;(function(n){var t;(function(n){"use strict";function i(n){return new t.EditScopeCache(n)}function r(n){return new t.EditScopeCacheOld(n)}var t=FxImpl.Data;n.createNew=i;n.create=r})(t=n.EditScopeCache||(n.EditScopeCache={}))})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),Object.defineProperty(i.prototype,"editScope",{get:function(){return this._loadedCacheEntry},enumerable:!0,configurable:!0}),i.prototype.fetchForNewData=function(n){return this.fetch({editScopeId:n,params:undefined})},i.prototype.fetchForExistingData=function(t,i){return this.fetch({editScopeId:t,params:n.isNullOrUndefined(i)?null:i})},__decorate([n.Composition.ProxyCompatibilityMode],i)}(FxImpl.Data.ObjectView);t.EditScopeView=i})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=n.Base.Utilities,r=function(
n){function r(t){n.call(this,i.clone(t));var r=t;if(r.findCachedEntity&&r.loader&&!r.loader.establishDataSet)throw new Error("This EntityCache supplies a DataCacheLoader via the 'loader' option that doesn't support the 'establishDataSet' method.  Either stop using the EntityCache 'loader' option or modify your DataCacheLoader to derive from DataCacheLoader2.");this._findCachedEntity=r.findCachedEntity}return __extends(r,n),r.prototype.createView=function(n,i){return new t.EntityView(this,n,i)},r.prototype._tryFindDataInRelatedCache=function(n){var i,t=this._findCachedEntity,r,f,u,e;return t&&(t.hasOwnProperty("queryCache")?(r=t,f=r.queryCache,i=f._findMatchingEntity(r.entityMatchesId,n)):(u=t,e=u.dataCache,i=e._findEntity(u.findMatchingEntityInCacheEntry,n))),i},r.prototype._getDataFromDataSet=function(n){var t=n.data;if(!ko.isObservable(t))throw new Error("DataSets used with EntityCache must contain observable data.");return n.data()},r}(FxImpl.Data.DataCache);t.EntityCache=r})(t=n.Data||
(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=ko.observable,r=function(t){function r(n,r,u){var f=this,e;t.call(this,n,r,u||{});this._item=i(null);e=ko.computed(function(){var t=f._loadedCacheEntry(),n,i;if(t)if(n=t.data,ko.isObservable(n))i=n(),f._item(i);else throw new Error("DataSets used with EntityView must contain observable data.");else f._item(null)});r.registerForDispose(e)}return __extends(r,t),Object.defineProperty(r.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"data",{get:function(){return this._item()},enumerable:!0,configurable:!0}),__decorate([n.Composition.ProxyCompatibilityMode],r)}(FxImpl.Data.DataView);t.EntityView=r})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function ft(n,t){return r[n]=new et(n,t)}function b(){return+new Date}function s(n,t){var i=p[n];return i?i[t]:(i=rt,i?i[t]:w[t])}function at(
n){var t=w.fastPollingInterval;return n=a(n),(isNaN(n.pollingInterval)||n.pollingInterval<t)&&(n.pollingInterval=t),(isNaN(n.fastPollingInterval)||n.fastPollingInterval<t)&&(n.fastPollingInterval=t),(isNaN(n.slowPollingInterval)||n.slowPollingInterval<t)&&(n.slowPollingInterval=t),n.fastPollingInterval>n.pollingInterval&&(n.pollingInterval=n.fastPollingInterval),n.pollingInterval>n.slowPollingInterval&&(n.slowPollingInterval=n.pollingInterval),n}var d=n.Base,h=d.Utilities,ot=n.Helpers,e=d.Net2,c=e.HttpStatusCode,l=ot.Deferred,g=h.extend,a=h.clone,nt=n.isObject,tt=n.deepEquals,i=null,v=window,it=new n.Base.Diagnostics.Log(""),r={},st={getFetchParameters:function(n,t,r){return r?{headers:t&&t.ajaxHeaders,data:t&&t.ajaxData}:i},fetchData:function(n,t,r,u,f,o){var c=i,s,h;return r&&(c=typeof r=="string"?r:JSON.stringify(r)),s="json",h=e.ajax({uri:t,type:f||"POST",dataType:s,cache:!1,headers:u,traditional:!0,contentType:"application/json",data:c,setAuthorizationHeader:o}),h.requestedDataType=
s,h},processResult:[t.DataProvider.DataContractJsonSerializer.processResult]},y,rt,p={},w={fastPollingInterval:1e4,pollingInterval:6e4,slowPollingInterval:3e5},u={slow:"slowPollingInterval",normal:"pollingInterval",fast:"fastPollingInterval"},f=0,ht=/^application\/json\b/,ct=function(n){try{return JSON.parse(n),!0}catch(t){return!1}},lt=function(n){return ht.test(n.getResponseHeader("Content-Type"))&&ct(n.responseText)},ut=v.fx.environment.features.tracefetch==="true",o,et,k;(function(n){n[n.Never=1]="Never";n[n.Normal=2]="Normal"})(t.PollFrequency||(t.PollFrequency={}));o=t.PollFrequency;et=function(){function t(t,r){this._pollFrequency=o.Normal;this._fastPollingRefCount=0;this._pollCount=0;this._merged=!1;this._hasSnapshottedFetchOptions=!1;this._name=t;var u;r&&(this._snapshotFetchOptions(r),u=r.type);this.dataSet=new n.Data.DataSet(u||i,r.dataSetLifetime,r.atomizationOptions)}return Object.defineProperty(t.prototype,"hasRequestInFlight",{get:function(){return!!this._currentFetchDeferred}
,enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchState",{get:function(){return this._lastFetchState},enumerable:!0,configurable:!0}),t.prototype.getCachedOrInFlightData=function(t){var f=t.uri,e=t.ajaxData,o=t.ajaxHeaders,r,u,h=n.Base.Diagnostics,s=t.httpMethod||i;return this._lastCompletedFetchStart&&f===this._uri&&s===this._httpMethod&&tt(e,this._ajaxData)&&tt(o,this._ajaxHeaders)?!this._expiry||this._expiry>b()?(t.forceCacheRefresh&&this.debounceServerFetch(!0,!0),r=l().resolve(this._name,this.dataSet)):this._currentFetchDeferred&&!t.forceCacheRefresh?r=this._currentFetchDeferred:(it.verbose("Cached data expired: '"+this._name+"'"),u=!0):(this._tryExecuteDebouncedServerFetch(),this._snapshotFetchOptions(t)),{promise:r?r.promise():i,fetchingSameData:u}},t.prototype.forceRefresh=function(){if(!this._hasSnapshottedFetchOptions)throw new Error("Complete an initial MsPortalFx.Data.Loader.getData before using 'forceRefresh'.");return e.invalidateCacheHeader(this.
_ajaxHeaders),this._tryExecuteDebouncedServerFetch(!0)?this._currentFetchDeferred.promise():this.debounceServerFetch(!0,!0)},t.prototype.debounceServerFetch=function(t,r){if(!this._debouncedFetchFunction){this._currentFetchDeferred=l();this._pollingTask&&n.Base.Scheduler.deleteTask(this._pollingTask);var u=this;this._debouncedFetchFunction=function(){var n=u._debouncedFetchFunction.isForcedCacheRefresh,t=u._debouncedFetchFunction.fetchingSameData;u._debouncedFetchFunction=i;u._fetchData(t,!0,n)};this._debouncedFetchFunction.timeoutId=v.setTimeout(this._debouncedFetchFunction,0);this._debouncedFetchFunction.isForcedCacheRefresh=!1;this._debouncedFetchFunction.fetchingSameData=!0}return this._debouncedFetchFunction.isForcedCacheRefresh|=r?1:0,this._debouncedFetchFunction.fetchingSameData&=t?1:0,this._currentFetchDeferred.promise()},t.prototype.setFastPolling=function(n){n?this._fastPollingRefCount++:this._fastPollingRefCount>0&&this._fastPollingRefCount--},t.prototype.dispose=function(){
this._isDisposed=!0;delete p[this._name];this._pollingTask&&n.Base.Scheduler.deleteTask(this._pollingTask)},t.prototype._tryExecuteDebouncedServerFetch=function(n){var t=this._debouncedFetchFunction;return t?(t.isForcedCacheRefresh|=n?1:0,t.fetchingSameData&=n?1:0,v.clearTimeout(t.timeoutId),this._debouncedFetchFunction(),!0):!1},t.prototype._snapshotFetchOptions=function(n){this._hasSnapshottedFetchOptions=!0;this._uri=n.uri;this._httpMethod=n.httpMethod||i;this._ajaxData=n.ajaxData;this._ajaxHeaders=n.ajaxHeaders;this._loaderOptions=n.loaderOptions;this._preserveNewItemsOrdering=n.preserveNewItemsOrdering;this._pollFrequency=n.pollFrequency||o.Normal;this._setAuthorizationHeader=n.setAuthorizationHeader;var t=n.fetchStartListener;this._fetchStartListener=t?function(n){t.fire(n)}:h.noop},t.prototype._fetchData=function(t,r,u){var o=this,s=this._name,tt=this._getLoaderOptionFunction("getFetchParameters"),rt=this._getLoaderOptionFunction("fetchData"),h=this._getLoaderOptionFunction("processResult"),
l,y=b(),c=this._currentFetchDeferred,w=this._lastFetchState,et=n.Base.Diagnostics,k=n.Base.Diagnostics.Telemetry,d,ft=this.dataSet,v,p,nt;ut&&(d=k.startTrace({source:"Data",action:"Fetch",name:this._name,data:this._uri}));u&&(this._lastForcedFetchStart=y);this._fetchStartListener({dataSetName:s,promise:c.promise(),isClientInitiated:r});l=tt(s,w,t)||{};v=a(this._ajaxData,!1,!0)||i;l.data&&(v=g(v,l.data));p=rt(s,this._uri,v,g(a(this._ajaxHeaders),l.headers),this._httpMethod,this._setAuthorizationHeader);nt=p.requestedDataType==="json";p.then(function(n){var a=!0,u=n&&n.cachedAjax?n:{cachedAjax:!1,modified:!0,data:n,cacheTagValue:i},v={data:u.data},l,p,b,g,nt;if(u.cacheTagValue&&(o._ajaxHeaders=e.setCacheHeader(o._ajaxHeaders,u.cacheTagValue)),!o._isDisposed){if(Array.isArray(h)||(h=[h]),u.modified)for(p=h.length,l=0;l<p;++l)if(!h[l](s,v,w,t,ft.type)){a=!1;break}b=!r&&f>0;o._onFetchCompleted(r,!0,c);try{u.modified&&a&&!b&&o._shouldAcceptFetchResult(y)&&o._acceptFetchResult(v,y)}catch(tt){
g=FxImpl.Diagnostics.getLogFriendlyMessage(tt);nt="Data merge failed for data set '"+s+"'. The error message was: "+g;it.error(nt)}finally{ut&&k.completeTrace(d);c.resolve(s,o.dataSet)}}},function(n){if(!o._isDisposed){o._onFetchCompleted(r,!1,c);var t=o._getErrorDataForFailedRequest(s,n&&n.jqXHR||n,nt);c.reject(t)}})},t.prototype._getErrorDataForFailedRequest=function(t,i,r){if(i){var u=i.status;if(u===c.Unauthorized||u===c.Forbidden)return new n.Errors.UnauthorizedDataError(t,i);if(u===c.NotFound&&(!r||lt(i)))return new n.Errors.NotFoundDataError(t,i)}return new n.Errors.FetchDataError(t,i)},t.prototype._onFetchCompleted=function(n,t,r){var f=this,e=this._pollFrequency!==o.Never;n&&t&&e&&!this._pollingTask&&(this._pollingTask={name:"poll data set: "+this._name,scheduledTask:function(){f._pollData()},recurring:!1,isAsync:!0,delayInMs:s(this._name,u.fast),silent:!0});r===this._currentFetchDeferred&&(this._currentFetchDeferred=i,this._reschedulePolling(!0))},t.prototype._reschedulePolling=
function(t){this._pollingTask&&(t&&(this._pollCount=0),n.Base.Scheduler.scheduleTask(this._pollingTask))},t.prototype._shouldAcceptFetchResult=function(n){if(this._lastCompletedFetchStart){var t=n>this._lastCompletedFetchStart,i=this._lastForcedFetchStart&&n<this._lastForcedFetchStart;return t&&!i}return!0},t.prototype._acceptFetchResult=function(n,t){this.dataSet.merge(n.data,{type:n.type,fetchStart:t,preserveNewItemsOrdering:this._preserveNewItemsOrdering});var r=this.dataSet;r.navigationMetadata(n.navigationMetadata||i);r.partialErrors(n.partialErrors||[]);this._lastCompletedFetchStart=t;this._lastFetchState=n.fetchState;this._merged=!0;this._expiry=b()+s(this._name,u.slow)*3;$(r).trigger("mergeComplete")},t.prototype._determinePollingInterval=function(){return u.normal},t.prototype._pollData=function(){var t,i,r,e,o,h=n.Base.Diagnostics;this._isDisposed||(this._currentFetchDeferred||f||(this._pollCount++,this._isFastPollNeeded()?(t=!0,o="Client side locking or mutation flags detected",
i=u.fast):(t=!0,o="Poll is needed",i=this._determinePollingInterval()),i&&(r=s(this._name,i)),t&&(e=Math.ceil(r/s(this._name,u.fast)),t=this._pollCount%e==0)),t?(this._currentFetchDeferred=l(),this._fetchData(!0)):this._reschedulePolling())},t.prototype._isFastPollNeeded=function(){return this._fastPollingRefCount>0||this.dataSet.hasUnmergedClientChanges()},t.prototype._getLoaderOptionFunction=function(n){var t;return this._loaderOptions&&(t=this._loaderOptions[n]),!t&&y&&(t=y[n]),t||st[n]},__decorate([n.Composition.ProxyCompatibilityMode],t)}();k=function(){function n(){}return n.getData=function(n,t){var i,u,e,f;return nt(n)&&(t=n,n=t.dataSetName||t.uri),i=r[n],i?(f=i.getCachedOrInFlightData(t),u=f.promise,e=f.fetchingSameData):i=ft(n,t),u||(u=i.debounceServerFetch(e,t.forceCacheRefresh)),u},n.forceRefresh=function(n){var t=r[n];if(t)return t.forceRefresh();throw new Error("Unknown data set name.");},n.getDataSet=function(n,t,u,f,e){var o=r[n],h=!1,c={initialData:u,dataSetLifetime:f,
atomizationOptions:e,uri:undefined},s;if(typeof t=="boolean"?h=t:typeof t=="string"&&(h=!0,c.type=t),o&&f&&f!==o.dataSet.lifetime)throw new Error("Cannot modify data set lifetime once data set has been created.");return!o&&h&&(o=ft(n,c)),s=o?o.dataSet:i,s&&u&&s.merge(u),s},n.hasRequestInFlight=function(n){var t=r[n];return t&&t.hasRequestInFlight},n.disposeDataSet=function(n){var t=r[n];t&&(t.dispose(),delete r[n])},n.setFastPolling=function(n,t){var i=r[n];if(i)i.setFastPolling(t);else throw new Error("Data set has not yet been accessed.");},n.pausePolling=function(){f++},n.resumePolling=function(){f>0&&f--},n.setDefaultLoaderOptions=function(n){y=n},n.setPollingIntervals=function(n,t){nt(n)&&(t=n,n=i);t=at(t);n?p[n]=t:rt=t},n._internal={setDefaultPollingIntervals:function(n){w=n}},n}();t.Loader=k,function(n){var t;(function(n){function t(){Object.getOwnPropertyNames(r).forEach(function(n){var t=r[n];t&&(t.dispose(),delete r[n])})}n.disposeAllCachedDataSetsForTests=t})(t=n.Internal||(n.
Internal={}))}(k=t.Loader||(t.Loader={}))})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=t.Loader,s="GET",f=1e4,r="",h={needBothOptions:r,minimumPoll:r,incompatibleOptions:r},u=FxImpl.getErrorMap(h),e=function(){function r(t){t.atomizationOptions&&!t.entityTypeName?u.needBothOptions():!t.atomizationOptions&&t.entityTypeName&&(t.atomizationOptions={});this._dataType=t.entityTypeName;this._uriForParams=t.sourceUri;this._httpMethod=t.httpMethod;this._polls=!!t.poll;this._pollInterval=t.pollInterval||null;this._serializeParams=t.serializeParams;this._supplyData=t.supplyData;this._atomizationOptions=t.atomizationOptions;this._processServerResponse=t.processServerResponse;this._preservesClientOrder=!!t.pollPreservesClientOrdering;this._setAuthHeader=t.setAuthorizationHeader;n.Base.ProxiedObservables.markNonSerializable(this);this._polls&&this._pollInterval!==null&&this._pollInterval<f&&u.minimumPoll(f);this._setAuthHeader!==undefined&&
this._supplyData&&u.incompatibleOptions()}return Object.defineProperty(r.prototype,"doesPoll",{get:function(){return this._polls},enumerable:!0,configurable:!0}),r.prototype.serializeParams=function(n){return this._serializeParams?this._serializeParams(n):this._uriForParams(n)},r.prototype.loadDataSetForParams=function(r,u,f){var h=this,o={uri:this._uriForParams?this._uriForParams(u):null,type:this._dataType,httpMethod:this._httpMethod||s,pollFrequency:this._polls?n.Data.PollFrequency.Normal:n.Data.PollFrequency.Never,atomizationOptions:this._atomizationOptions,dataSetLifetime:f,preserveNewItemsOrdering:!this._preservesClientOrder,setAuthorizationHeader:this._setAuthHeader,loaderOptions:{processResult:[t.DataProvider.DataContractJsonSerializer.processResult]}},e=this._pollInterval,c;return this._polls&&e!==null&&i.setPollingIntervals(r,{slowPollingInterval:e,pollingInterval:e,fastPollingInterval:e}),this._supplyData&&(o.loaderOptions.fetchData=function(n,t,i,r,e){return h._supplyData(e,
t,r,i,u,f)}),this._processServerResponse&&(c=function(n,t){var i=h._processServerResponse(t.data);return i&&(t.data=i.data,t.navigationMetadata=i.navigationMetadata,t.partialErrors=i.partialErrors),!0},o.loaderOptions.processResult.unshift(c)),this.loadDataSet(r,o)},r.prototype.loadDataSet=function(n,t){var u=i.getData(n,t),r=u.then(function(n,t){return t});return r.dataSetName=n,r},r.prototype.refreshDataSet=function(n){return i.forceRefresh(n.dataSetName)},r.prototype.disposeDataSet=function(n){i.disposeDataSet(n.dataSetName)},r.prototype.getLoadedDataSet=function(n){var t=i.getDataSet(n);return t&&t.data?t:null},r.prototype.isLoadingDataSet=function(n){return i.hasRequestInFlight(n)},__decorate([n.Composition.ProxyCompatibilityMode],r)}(),o;t.DataCacheLoader=e;o=function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.establishDataSet=function(n,t,r,u){return this._dataType?i.getDataSet(n,this._dataType,r,u,this._atomizationOptions):i.getDataSet(n,!0,r,u,this._atomizationOptions)}
,t}(e);t.DataCacheLoader2=o})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Add=0]="Add";n[n.Update=1]="Update"})(n.EditKind||(n.EditKind={}));var t=n.EditKind})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=0,i=function(){function n(n){var r=this,i,u;this._referrerUniqueId=0;i=n.onEntryDisposed;this._referrerPropertyName="_objectCache_"+ ++t;this._serializeKey=n.serializeKey;this._supplyValue=n.supplyValue;this._tryFindValueInRelatedCache=n.tryFindValueInRelatedCache;this._entries=new FxImpl.Data.RefCountCache({evictionDelay:n.evictionDelay,extendEntryLifetimes:n.extendEntryLifetimes,onEntryDisposed:function(n,t){r._telemetryCollector&&r._telemetryCollector.recordEviction(t);n.lifetime&&n.lifetime.dispose();i&&i(n.value,n.key)}});u=n;u.collectEfficiencyTelemetry&&(this._telemetryCollector=new FxImpl.Data.ObjectCacheTelemetryCollector)}return n.prototype.getValue=
function(n,t){var i=this,r=this._serializeKey(n),s=t?this._getOrCreateReferrerId(t):null,f,u,e,o;return this._telemetryCollector&&(f=this._entries.hasEntry(r)),e=function(){var t=new FxImpl.TriggerableLifetimeManager,r,f;return i._tryFindValueInRelatedCache&&(f=i._tryFindValueInRelatedCache(n,t),f&&(r=f.value,u=!0)),u||(r=i._supplyValue(n,t)),{key:n,value:r,lifetime:t}},o=this._entries.getEntry(r,s,e).value,this._telemetryCollector&&this._telemetryCollector.recordCacheRead(r,f||u),o},n.prototype.insertValueIfNotPresent=function(n,t,i){var r=this._serializeKey(n),u=this._getOrCreateReferrerId(i);this._entries.getEntry(r,u,function(){return{key:n,value:t,lifetime:null}})},n.prototype.hasEntry=function(n){var t=this._serializeKey(n);return this._entries.hasEntry(t)},n.prototype.dissociateEntry=function(n,t){var r=this._serializeKey(n),i=this._getOrCreateReferrerId(t);i&&this._entries.dissociateEntry(r,i)},n.prototype.immediatelyEvictEntry=function(n){var t=this._serializeKey(n);this._entries.
immediatelyEvictEntry(t)},n.prototype.forEachEntry=function(n){this._entries.forEachEntry(function(t,i){n(i.key,i.value)})},n.prototype.dispose=function(){this._entries.dispose()},n.prototype._getOrCreateReferrerId=function(n){var r=this,t=n,i=t[this._referrerPropertyName];return this._referrerPropertyName in t||(t[this._referrerPropertyName]=i="referrer"+ ++this._referrerUniqueId,n.registerForDispose(function(){delete t[r._referrerPropertyName];r._entries.disposeReferrer(i);i=null})),i},n}();n.ObjectCache=i})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=n.Base.Utilities.clone,r=function(r){function u(n){r.call(this,n);this._navigationOptions=n.navigation?i(n.navigation):null}return __extends(u,r),u.prototype.createView=function(n,i){return new t.QueryView(this,n,i)},u.prototype.createNavigator=function(n){return this.createNavigatorWithOptions(n,null)},u.prototype.createNavigatorWithOptions=function(n,i){var u=this._navigationOptions,
f,r,e;if(u)return f={},r=this.createView(n),e=i&&i.createMapping?i.createMapping(n,r.items):r.items,u.loadBySkipTake&&(f.loadBySkipTake=function(n,t,i,f,e,o){return u.loadBySkipTake(r,t,i,f,e,o)}),u.loadByContinuationToken&&(f.loadByContinuationToken=function(n,t,i,f,e){return u.loadByContinuationToken(r,t,i,f,e)}),new t.RemoteDataNavigator(n,e,r.metadata,f,r.partialErrors);throw new Error("Cannot create a DataNavigator, because the QueryCache has no navigation options configured.");},Object.defineProperty(u.prototype,"navigationOptions",{get:function(){return this._navigationOptions},enumerable:!0,configurable:!0}),u.prototype._findMatchingEntity=function(n,t){var i;return this._forEachEntry(function(r,u,f){if(f&&!i){var e=ko.unwrap(f.data);e&&(i=e.first(function(i){return n(i,t)}))}}),i},u.prototype._getDataFromDataSet=function(n){var t=n.data;if(!ko.isObservable(t)||!Array.isArray(t()))throw new Error("DataSets used with QueryCache must contain an observable-wrapped array.");return n.
data},__decorate([n.Composition.ProxyCompatibilityMode],u)}(FxImpl.Data.DataCache);t.QueryCache=r})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var r=ko.observable,u=ko.observableArray,i=ko.computed,f=function(t){function f(n,f,e){var o=this,s,h;t.call(this,n,f,e||{});this._items=u();this._metadata=r(null);s=i(function(){var i=o._loadedCacheEntry(),n,t;if(i)if(n=i.data,ko.isObservable(n)){if(t=n(),!Array.isArray(t))throw new Error("DataSets used with QueryView must contain arrays.");o._items(t)}else throw new Error("DataSets used with QueryView must contain observable data.");else o._items([])});h=i(function(){var n=o._loadedCacheEntry();n?o._metadata(n.navigationMetadata()||null):o._metadata(null)});f.registerForDispose([s,h])}return __extends(f,t),Object.defineProperty(f.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"metadata",{get:function(){return this._metadata}
,enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"data",{get:function(){return this._items},enumerable:!0,configurable:!0}),__decorate([n.Composition.ProxyCompatibilityMode],f)}(FxImpl.Data.DataView);t.QueryView=f})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";function t(n,t){var i=t?encodeURIComponent:null;return function(t){switch(typeof t){case"string":case"number":return n.format({id:t},i);default:return n.format(t,i)}}}n.uriFormatter=t})(t=n.Data||(n.Data={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";function l(n){var r,t,l,i,c,e;return n.continuationToken&&n.continuationToken.length?(r=new o.UriBuilder(n.continuationToken),r.query.removeParameter("_"),r.query.toString()):(t=new o.QueryStringBuilder,l=[],n.totalCount&&t.setParameter("$count",!0),s(n.skip)||t.setParameter("$skip",n.skip),s(n.take)||t.setParameter("$top",n.take),n.selectedProperties&&n.selectedProperties.
length&&t.setParameter("$select",n.selectedProperties.map(function(n){return f(n.name)}).join(",")),n.sortOrder&&n.sortOrder.length&&(i=[],n.sortOrder.forEach(function(n){var t=f(n.property.name);n.direction===0?i.push(t+" desc"):i.push(t)}),t.setParameter("$orderby",i.join(","))),n.searchText&&n.searchText.length&&(c=n.searchText.trim(),c.length&&t.setParameter("$search",n.searchText)),n.filterExpression&&(e=new u(h()),e.serializeExpression(n.filterExpression),t.setParameter("$filter",e.toString())),t.toString()||"?")}function f(n){var t;return n&&n.length>0&&(t=n.charAt(0).toUpperCase(),n.length>1&&(t+=n.substring(1))),t}function h(n){n===void 0&&(n={});var r=new u({}),i="serialize";for(var t in r)t.length>i.length&&i===t.substring(0,i.length)&&(t=t.substring(i.length),n[t]=!0);return n}function a(n){return{data:n.items,navigationMetadata:{totalItemCount:n.count,continuationToken:n.nextPageLink}}}var e=MsPortalFx,o=e.Base,v=n.Data,s=e.isNullOrUndefined,i="",c={filterNoType:i,filterInvalidType:
i,filterNotSupported:i,andOperands:i,orOperands:i,addOperands:i,subtractOperands:i,multiplyOperands:i,divideOperands:i,moduloOperands:i},r=n.getErrorMap(c),u;t.serializeODataQueryParams=l;u=function(){function n(n){this._allowed=n;this._buffer=[]}return n.prototype.toString=function(){var n="",t=this._buffer.length;return t&&(t>1?(n=this._buffer.join(""),this._buffer=[n]):n=this._buffer[0]),n},n.prototype.serializeExpression=function(n){var t=n.type,i;t&&t.length||r.filterNoType();this._allowed[t]||r.filterInvalidType(t);i=this["serialize"+t];i||r.filterNotSupported(n.type);i.call(this,n)},n.prototype.serializeEquals=function(n){this.serializeExpression(n.left);this._buffer.push(" eq ");this.serializeExpression(n.right)},n.prototype.serializeNotEquals=function(n){this.serializeExpression(n.left);this._buffer.push(" ne ");this.serializeExpression(n.right)},n.prototype.serializeGreaterThan=function(n){this.serializeExpression(n.left);this._buffer.push(" gt ");this.serializeExpression(n.right)}
,n.prototype.serializeGreaterThanOrEquals=function(n){this.serializeExpression(n.left);this._buffer.push(" ge ");this.serializeExpression(n.right)},n.prototype.serializeLessThan=function(n){this.serializeExpression(n.left);this._buffer.push(" lt ");this.serializeExpression(n.right)},n.prototype.serializeLessThanOrEquals=function(n){this.serializeExpression(n.left);this._buffer.push(" le ");this.serializeExpression(n.right)},n.prototype.serializeAnd=function(n){var t=n.expressions,i;for(t.length<=1&&r.andOperands(),this.serializeExpression(t[0]),i=1;i<t.length;i++)this._buffer.push(" and "),this.serializeExpression(t[i])},n.prototype.serializeOr=function(n){var t=n.expressions,i;for(t.length<=1&&r.orOperands(),this.serializeExpression(t[0]),i=1;i<t.length;i++)this._buffer.push(" or "),this.serializeExpression(t[i])},n.prototype.serializeNot=function(n){this._buffer.push("not ");this.serializeExpression(n.expression)},n.prototype.serializeAdd=function(n){var t=n.expressions,i;for(t.length<=
1&&r.addOperands,this.serializeExpression(t[0]),i=1;i<t.length;i++)this._buffer.push(" add "),this.serializeExpression(t[i])},n.prototype.serializeSubtract=function(n){var t=n.expressions,i;for(t.length<=1&&r.subtractOperands(),this.serializeExpression(t[0]),i=1;i<t.length;i++)this._buffer.push(" sub "),this.serializeExpression(t[i])},n.prototype.serializeMultiply=function(n){var t=n.expressions,i;for(t.length<=1&&r.multiplyOperands(),this.serializeExpression(t[0]),i=1;i<t.length;i++)this._buffer.push(" mul "),this.serializeExpression(t[i])},n.prototype.serializeDivide=function(n){var t=n.expressions,i;for(t.length<=1&&r.divideOperands(),this.serializeExpression(t[0]),i=1;i<t.length;i++)this._buffer.push(" div "),this.serializeExpression(t[i])},n.prototype.serializeModulo=function(n){var t=n.expressions,i;for(t.length<=1&&r.moduloOperands(),this.serializeExpression(t[0]),i=1;i<t.length;i++)this._buffer.push(" mod "),this.serializeExpression(t[i])},n.prototype.serializeNegate=function(n)
{this._buffer.push("-");this.serializeExpression(n.expression)},n.prototype.serializeGroup=function(n){this._buffer.push("(");this.serializeExpression(n.expression);this._buffer.push(")")},n.prototype.serializeBoolean=function(n){this._buffer.push(n.value.toString())},n.prototype.serializeGuid=function(n){this._buffer.push(n.value)},n.prototype.serializeDecimal=function(n){this._buffer.push(n.value)},n.prototype.serializeDouble=function(n){this._buffer.push(n.value.toString())},n.prototype.serializeInteger=function(n){this._buffer.push(n.value.toString())},n.prototype.serializeString=function(n){this._buffer.push("'");this._buffer.push(n.value);this._buffer.push("'")},n.prototype.serializeNull=function(){this._buffer.push("null")},n.prototype.serializeIdentifier=function(n){this._buffer.push(f(n.name))},n.prototype.serializeRound=function(n){this._buffer.push("round(");this.serializeExpression(n.expression);this._buffer.push(")")},n.prototype.serializeFloor=function(n){this._buffer.push(
"floor(");this.serializeExpression(n.expression);this._buffer.push(")")},n.prototype.serializeCeiling=function(n){this._buffer.push("ceiling(");this.serializeExpression(n.expression);this._buffer.push(")")},n.prototype.serializeStartsWith=function(n){this._buffer.push("startswith(");this.serializeExpression(n.expression);this.serializeExpression(n.start);this._buffer.push(")")},n.prototype.serializeEndsWith=function(n){this._buffer.push("endswith(");this.serializeExpression(n.expression);this.serializeExpression(n.end);this._buffer.push(")")},n.prototype.serializeContains=function(n){var t=this._buffer;t.push("contains(");this.serializeExpression(n.expression);t.push(",");this.serializeExpression(n.value);t.push(")")},n.prototype.serializeTrim=function(n){this._buffer.push("trim()");this.serializeExpression(n.expression);this._buffer.push(")")},n.prototype.serializeToUpper=function(n){this._buffer.push("toupper(");this.serializeExpression(n.expression);this._buffer.push(")")},n.prototype.
serializeToLower=function(n){this._buffer.push("tolower(");this.serializeExpression(n.expression);this._buffer.push(")")},n.prototype.serializeIndexOf=function(n){var t=this._buffer;t.push(".indexof(");this.serializeExpression(n.expression);t.push(",");this.serializeExpression(n.value);t.push(")")},n.prototype.serializeSubString=function(n){var t=this._buffer;t.push("substring(");this.serializeExpression(n.expression);t.push(",");this.serializeExpression(n.start);n.count&&(t.push(","),this.serializeExpression(n.count));t.push(")")},n.prototype.serializeConcat=function(n){var t=this._buffer;t.push("concat(");this.serializeExpression(n.expression);t.push(",");this.serializeExpression(n.value);t.push(")")},n.prototype.serializeYear=function(n){this._buffer.push("year(");this.serializeExpression(n.expression);this._buffer.push(")")},n.prototype.serializeMonth=function(n){this._buffer.push("month(");this.serializeExpression(n.expression);this._buffer.push(")")},n.prototype.serializeDay=function(
n){this._buffer.push("day(");this.serializeExpression(n.expression);this._buffer.push(")")},n.prototype.serializeHour=function(n){this._buffer.push("hour(");this.serializeExpression(n.expression);this._buffer.push(")")},n.prototype.serializeMinute=function(n){this._buffer.push("minute(");this.serializeExpression(n.expression);this._buffer.push(")")},n.prototype.serializeSecond=function(n){this._buffer.push("second(");this.serializeExpression(n.expression);this._buffer.push(")")},n.prototype.serializeNow=function(){this._buffer.push("now()")},n}();t.allowedExpressions=h;t.processServerResponse=a})(i=t.OData||(t.OData={}))})(t=n.Data||(n.Data={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";function f(n){t.logFeatureAdoptionTelemetryEndpoint.invoke(r.client,i.Constants.Shell,n)}var i=MsPortalFx.Base,r=i.Rpc.Internal,u=n.Constants.RpcMethods;t.logFeatureAdoptionTelemetryEndpoint=new r.FuncEndPointDefinition(u.logFeatureAdoptionTelemetry);t.traceFeature=f})(t=n.FeatureAdoption||
(n.FeatureAdoption={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){var t;(function(n){"use strict";var r=MsPortalFx.Base,u=r.Rpc.Internal,t=FxImpl.Constants.RpcMethods,i=u.ActionEndPointDefinition;n.updateTenantInfoEndPoint=new i(t.updateTenantInfo);n.updateSubscriptionInfoEndPoint=new i(t.updateSubscriptionInfo);n.getRegisteredResourceProviderInfoEndPoint=new i(t.getRegisteredResourceProviderInfo)})(t=n.Azure||(n.Azure={}))})(t=n.Internal||(n.Internal={}))}(HubsExtension||(HubsExtension={})),function(n){var t;(function(n){"use strict";function g(n,t,i){var r=n[t.toLowerCase()];return r?(i(r),!0):!1}function nt(n,t,i,r){var u=n[t.toLowerCase()],f;return u&&(f=u.kinds[i.toLowerCase()],f)?(r(u,f),!0):!1}function tt(n,t,u){var s=function(n,t){var e=u||window.location.protocol==="https:"?v:a,f;return e.test(n)?{type:2,data:n,options:{isLogo:!0}}:y.test(n)?{type:1,data:n,options:{isLogo:!0}}:(t=(t||"").toLowerCase(),r[t]||(f=i.Utilities.getCurrentCallStack(!0),p.warning("Invalid resource type metadata ("+
t+"), icon must be inline SVG or a URL: "+n.substr(0,50)+"\n"+f),r[t]=!0),null)},h=t&&t.icon,c=n&&n.resourceType,f,e,o;return h&&(f=s(h,c+":"+t.kind),f)?f:(e=n&&n.icon,e&&(o=s(e,c),o))?o:null}var i=MsPortalFx.Base,it=window,a=/^(https\:\/\/|http\:\/\/|\/\/)/i,v=/^(https\:\/\/|\/\/)/i,y=/^(\<svg(\>|\ )|\<\?xml\ ([a-z][^(\=|\ |\")]*\=\"(?:[^\"\\]|\\.)*?\"\ ?)*\?\>[\s]*\<svg(\>|\ ))/i,p=new i.Diagnostics.Log("MsPortalFx/Observables/AzureObservables"),r={},t=ko.observable,w=function(){function n(){}return n}(),u,f,e,o,b,s,h,c,l,k,d;n.Subscription=w;u=function(){function n(){}return n}();n.SubscriptionPolicies=u;f=function(){function n(){}return n}();n.SubscriptionList=f;e=function(){function n(){}return n}();n.TenantInfo=e;o=function(){function n(){}return n}();n.Tenant=o,function(n){n[n.Locked=0]="Locked";n[n.Unlocked=1]="Unlocked"}(n.ResourceLockState||(n.ResourceLockState={}));b=n.ResourceLockState;s=function(){function n(){this.regionPicker={regionId:t()}}return n}();n.RegionPickerDataModel=
s;h=function(){function n(){this.subscriptionPicker={subscriptionId:t(),subscriptionName:t()}}return n}();n.SubscriptionPickerDataModel=h;c=function(){function n(){this.resourceGroup={resourceGroupName:t(),subscriptionId:t()}}return n}();n.ResourceGroupDataModel=c;l=function(){function n(){this.resourceGroupPicker={resourceGroupName:t(),resourceGroupLocation:t(),subscriptionId:t(),isNewResourceGroup:t()}}return n}();n.ResourceGroupPickerDataModel=l,function(n){var t=i.Constants.ExtensionNames,r,u,f;(function(n){n.PricingSummaryBlade={displayText:MsPortalFx.Resources.Strings.Services.Gallery.viewPricingSummaryLabel,bladeName:"PricingSummaryBlade",bladeExtension:t.Marketplace};n.LegalTermsBlade={bladeName:"LegalTermsBlade",bladeExtension:t.Marketplace};n.ChannelType={directEA:"DirectEA",indirectEA:"IndirectEA",direct:"Direct",csp:"CSP"}})(r=n.Constants||(n.Constants={})),function(n){n[n.Success=0]="Success";n[n.CostDataNotAvailable=1]="CostDataNotAvailable";n[n.Partial=2]="Partial";n[n.BatchFailed=
3]="BatchFailed";n[n.AuthFailure=4]="AuthFailure";n[n.SubscriptionException=5]="SubscriptionException";n[n.SubscriptionNotFound=6]="SubscriptionNotFound";n[n.SubscriptionNotActive=7]="SubscriptionNotActive";n[n.SubscriptionIsInvalid=8]="SubscriptionIsInvalid";n[n.NotSupportedInBillingRegion=9]="NotSupportedInBillingRegion";n[n.SubscriptionPricingUnavailable=10]="SubscriptionPricingUnavailable";n[n.SuccessAsRetailForEa=12]="SuccessAsRetailForEa";n[n.NotSupportedInCurrentEnvironment=13]="NotSupportedInCurrentEnvironment"}(n.SpecCostQueryResultStatusCode||(n.SpecCostQueryResultStatusCode={}));u=n.SpecCostQueryResultStatusCode,function(n){n[n.Success=0]="Success";n[n.PricingException=1]="PricingException";n[n.NotSupportedInBillingRegion=2]="NotSupportedInBillingRegion";n[n.NotAvailableForSubscription=3]="NotAvailableForSubscription";n[n.SuccessAsRetailForEa=4]="SuccessAsRetailForEa";n[n.MeterNotFound=5]="MeterNotFound"}(n.SpecCostQueryResultSpecStatusCode||(n.SpecCostQueryResultSpecStatusCode=
{}));f=n.SpecCostQueryResultSpecStatusCode}(k=n.Pricing||(n.Pricing={})),function(n){n.defaultVisibility="default";n.hiddenVisibility="hidden"}(d=n.KindMetadataVisibility||(n.KindMetadataVisibility={}));n.withResourceType=g;n.withResourceTypeKind=nt;n.getResourceKindIconAsImage=tt})(t=n.Azure||(n.Azure={}))}(HubsExtension||(HubsExtension={})),function(n){var t;(function(n){var t;(function(n){"use strict";n.CellWidth=85;n.CellHeight=85;n.CellSpacingWidth=5;n.CellSpacingHeight=5;n.GridSpacingWidth=n.CellWidth+n.CellSpacingWidth;n.GridSpacingHeight=n.CellHeight+n.CellSpacingHeight})(t=n.AzureGrid||(n.AzureGrid={}))})(t=n.Widgets||(n.Widgets={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.None=0]="None";n[n.Fill=1]="Fill"})(n.ThumbnailStretch||(n.ThumbnailStretch={}));var t=n.ThumbnailStretch})(t=n.PartGallery||(n.PartGallery={}))})(t=n.Widgets||(n.Widgets={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";
(function(n){n[n.Theme=0]="Theme";n[n.Blue=1]="Blue";n[n.Green=2]="Green";n[n.Orange=3]="Orange";n[n.Pink=4]="Pink";n[n.Purple=5]="Purple";n[n.Azure=6]="Azure";n[n.Dark=7]="Dark";n[n.Red=8]="Red"})(n.PartColor||(n.PartColor={}));var t=n.PartColor})(t=n.Parts||(n.Parts={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Custom=0]="Custom";n[n.CollectionSummary=1]="CollectionSummary";n[n.Error=3]="Error";n[n.ItemSummary=4]="ItemSummary";n[n.Settings=7]="Settings";n[n.SingleSetting=8]="SingleSetting";n[n.LogStream=11]="LogStream";n[n.Grid=14]="Grid";n[n.Editor=15]="Editor";n[n.DiffEditor=16]="DiffEditor";n[n.Provisioning=17]="Provisioning";n[n.Unavailable=18]="Unavailable";n[n.Create=19]="Create";n[n.Button=20]="Button";n[n.QuickStart=21]="QuickStart";n[n.Asset=22]="Asset";n[n.InfoList=23]="InfoList";n[n.Properties=24]="Properties";n[n.Collection=25]="Collection";n[n.Chart=26]="Chart";n[n.SingleValueGauge=27]="SingleValueGauge";n[n.Donut=28]="Donut";
n[n.QuotaGauge=29]="QuotaGauge";n[n.ResourceSummary=30]="ResourceSummary";n[n.Frame=31]="Frame"})(n.PartKind||(n.PartKind={}));var t=n.PartKind})(t=n.Parts||(n.Parts={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Mini=0]="Mini";n[n.Small=1]="Small";n[n.Normal=2]="Normal";n[n.Wide=3]="Wide";n[n.Tall=4]="Tall";n[n.HeroWide=5]="HeroWide";n[n.HeroTall=6]="HeroTall";n[n.HeroWideFitHeight=7]="HeroWideFitHeight";n[n.FullWidthFitHeight=8]="FullWidthFitHeight";n[n.FitToContainer=9]="FitToContainer";n[n.Large=10]="Large";n[n.Hero=11]="Hero";n[n.Custom=99]="Custom"})(n.PartSize||(n.PartSize={}));var t=n.PartSize})(t=n.Parts||(n.Parts={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function u(n,t){var i=function(n,t,i){return n<0?-1:n===0?0:Math.max(0,n*t+(n-1)*i)};return{width:i(n,r.CellWidth,r.CellSpacingWidth),height:i(t,r.CellHeight,r.CellSpacingHeight)}}function f(n,t){var i=function(n,t,i){return Math.ceil(n/(t+i)
)};return{colSpan:i(n,r.CellWidth,r.CellSpacingWidth),rowSpan:i(t,r.CellHeight,r.CellSpacingHeight)}}var i=n.Parts.PartSize,r=n.Widgets.AzureGrid,e;(function(t){function o(n,t){var i=function(n){return Math.ceil(Math.min(Math.max(n,1),25))};return u(i(n),i(t))}function s(u,e){var o=n.find(t.AllSizes,function(n){var t=n&&n.size;return n&&t.width===u&&t.height===e});return o||(o=r(i.Custom),o.size={width:u,height:e},o.span=f(u,e)),o}function h(){return r(i.Normal)}function r(i){return n.find(t.AllSizes,function(n){return n&&n.name===i})}function e(n){return function(t){return t===n}}function c(n){var t=e(n),r=[i.Mini,i.Small,i.Normal,i.Wide,i.Tall,i.Large,i.HeroWide,i.HeroTall,i.Hero,i.Custom];return r.some(t)}function l(n){var t=e(n),r=[i.HeroWideFitHeight,i.FullWidthFitHeight,i.FitToContainer];return r.some(t)}function a(n){var t=e(n),r=[i.FullWidthFitHeight,i.FitToContainer];return r.some(t)}t.AllSizes=function(){var t=[],n=function(n,r,f){t[n]={name:n,css:"fxs-tilesize-"+i[n].toLowerCase(
),size:u(r,f),span:{colSpan:r,rowSpan:f}}};return n(i.Mini,1,1),n(i.Small,2,1),n(i.Normal,2,2),n(i.Wide,4,2),n(i.Tall,2,4),n(i.HeroWide,6,4),n(i.HeroTall,4,6),n(i.HeroWideFitHeight,6,0),n(i.FullWidthFitHeight,-1,0),n(i.FitToContainer,-1,-1),n(i.Large,4,4),n(i.Hero,6,6),n(i.Custom,0,0),t}();t.AllCssClasses=t.AllSizes.map(function(n){return n.css});t.getGridPixelSize=o;t.getCorrespondingStandardSize=s;t.getDefaultSize=h;t.getSize=r;t.isFixedSize=c;t.isVariableSize=l;t.isAdaptiveWidth=a})(e=t.PartSizeHelper||(t.PartSizeHelper={}))})(t=n.Parts||(n.Parts={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Ready=0]="Ready";n[n.Failed=1]="Failed"})(n.PartState||(n.PartState={}));var t=n.PartState})(t=n.Parts||(n.Parts={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Fixed=0]="Fixed";n[n.Programmatic=1]="Programmatic";n[n.User=2]="User"})(n.ResizeMode||(n.ResizeMode={}));var t=n.ResizeMode})(t=n.Parts||(n.
Parts={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function i(n,t,i){var f=u.Utilities.clone(n);return r.addAssetExpansion(f,t(f,i)),f}function f(n,t,r,u){var f=i(n,r,u);return t.push(f),f}var u=n.Base,r,e;(function(n){function r(t){return t.hasOwnProperty(n.assetDetailsPropertyName)&&t[n.assetDetailsPropertyName]!==undefined}function u(t){return t.hasOwnProperty(n.assetDetailsPropertyName)&&t[n.assetDetailsPropertyName]}function f(n,r){var u=r.icon,f=[r,r.title,r.description,u,r.assetId,r.assetType||""];t.forEach(function(t,r){i(n,t,f[r])})}function e(n){r(n)&&t.forEach(function(t){i(n,t,undefined)})}n.assetDetailsPropertyPrefix="$$MSPORTALFX";n.assetDetailsPropertyName=n.assetDetailsPropertyPrefix+"$assetDetails";n.titlePropertyName=n.assetDetailsPropertyName+"$title";n.descriptionPropertyName=n.assetDetailsPropertyName+"$description";n.iconPropertyName=n.assetDetailsPropertyName+"$icon";n.assetTypeStringPropertyName=n.assetDetailsPropertyName+"$assetTypeString";
n.assetIdPropertyName=n.assetDetailsPropertyName+"$assetId";var t=[n.assetDetailsPropertyName,n.titlePropertyName,n.descriptionPropertyName,n.iconPropertyName,n.assetIdPropertyName,n.assetTypeStringPropertyName],i=function(n,t,i){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,writable:!1,value:i})};n.isAssetExpanded=r;n.getAssetExpansion=u;n.addAssetExpansion=f;n.removeAssetExpansion=e})(r=t.AssetExpansion||(t.AssetExpansion={}));t.assetExpandItem=i;t.assetExpandItemAndAddToResultSet=f,function(n){function t(n,t,r,u){var f=n.map(function(n){return i(n,r,u)});return t(f()),f.subscribe(t)}n.connectDataSet=t}(e=t.DataSetAssetExpansionMapper||(t.DataSetAssetExpansionMapper={}))})(t=n.Services||(n.Services={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(){function n(){}return n.subscribeDataSet=function(n,t,i,r){n().forEach(function(n,i){t(n,i,r)});var u="Subscription does not handle ";return n.subscribeArrayEdits(null,function(n){n=ko.
utils.adjustArrayEdits(n);n.forEach(function(n){switch(n.status){case"added":if(t)t(n.value,n.index,r);else throw new Error(u+"insert.");break;case"deleted":if(i)i(n.value,n.index,r);else throw new Error(u+"remove.");}})})},n.insertItem=function(n,t,i){n.splice(i,0,t)},n.removeItem=function(n,t,i){n.splice(i,1)},n}();n.DataSetSubscription=t})(t=n.Services||(n.Services={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){"use strict";var t,u,i,f,r;n.noSubCreateCategoryId="hidden_nosubcreate";t=ko.observable,function(n){n.GalleryParametersKey="galleryParameters";n.GalleryOptionsKey="galleryOptions"}(u=n.Constants||(n.Constants={}));i=function(){function n(){}return n.prototype.galleryCreatePreCheck=function(){return null},n}();n.BaseGalleryServiceViewModel=i,function(n){n[n.template=0]="template";n[n.fragment=1]="fragment";n[n.custom=3]="custom";n[n.metadata=4]="metadata"}(n.ArtifactType||(n.ArtifactType={}));f=n.ArtifactType;r=function(){function n(){this.
galleryParameters={selectedTemplateId:t(),templateJson:t(),subscriptionId:t(),resourceGroupName:t(),resourceGroupLocation:t(),resourceProviders:t(),primaryResourceId:t(),deploymentName:t()}}return n}();n.GalleryDataModel=r})(t=n.Gallery||(n.Gallery={}))})(t=n.Services||(n.Services={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function r(){return i.Rpc.Internal.client.acquireObject(FxImpl.Constants.RpcMethods.getSettings,i.Constants.Shell,null).then(function(n){return n.getValue()})}var i=n.Base;t.getSettings=r})(t=n.Services||(n.Services={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function f(n){return{trace:n,traceBrowserInfo:u,flush:function(){return h}}}function a(n,t){return n?new l(n,t):f(u)}function v(){return f(function(t){t.actionModifier!==n.Base.Diagnostics.Telemetry.ActionModifier.Start&&console.log("[PERF] "+JSON.stringify(t))})}var r=n,e=r.Base,o=e.EventTypes,i=window,s=5e3,h=n.Helpers.resolve(),u=r.noop,c=
r.forEachKey,l=function(){function n(n,t){function f(n){n&&u.execute([n],n.optional)}function r(n){c(n,function(n,t){f({timestamp:Date.now(),source:"BrowserInfo",action:n,data:t})})}i.location.search&&n.indexOf("?")===-1&&(n+=i.location.search);var u=FxImpl.getStandardDebouncer(n,s,!0,t);this.trace=f;this.traceBrowserInfo=function(){function s(){var n=t.height,u=t.width,f=i.innerHeight,e=i.innerWidth;r({ScreenHeight:n,ScreenResolution:u+" x "+n,ScreenWidth:u,WindowHeight:f,WindowResolution:e+" x "+f,WindowWidth:e})}var t=i.screen||{},n=i.navigator||{},f=t.availHeight,e=t.availWidth,u;r({AppName:n.appName,AppVersion:n.appVersion,CpuClass:n.cpuClass,Language:n.language,Location:i.location.href,Platform:n.platform,ScreenAvailableHeight:f,ScreenAvailableResolution:e+" x "+f,ScreenAvailableWidth:e,ScreenColorDepth:t.colorDepth});s();u=0;$(i).on(o.resize,function(){i.clearTimeout(u);u=i.setTimeout(s,1e4)});r({SystemLanguage:n.systemLanguage,UserAgent:n.userAgent,UserLanguage:n.userLanguage})}
;this.flush=function(){return u.flush()}}return n}();t.getTelemetryEventProcessor=a;t.getConsoleTelemetryEventProcessor=v})(t=n.Services||(n.Services={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function o(t,i){if(r(u(t))||r(u(i)))throw new Error("compareIds requires ids for comparison.");return n.deepEquals(t,i,!0)}var r=n.isNullOrUndefined,e=n.initObservable,i=n.initObservableArray,u=ko.utils.peekObservable,f;t.compareIds=o;f=function(){function t(n,t){t===void 0&&(t={});this._lifetime=n.createChildLifetime();this._msPortalFxSelectableSet=!0;this.dynamicSelectionProvider=t.dynamicSelectionProvider;this.commandGroupProvider=t.commandGroupProvider;this.selectionMode=t.selectionMode||2;this.activationMode=t.activationMode||2;this.selectedIds=i(t.selectedIds);this.selectedAll=e(t.selectedAll,!1);this.unselectedIds=i(t.unselectedIds);this.activatedIds=i(t.activatedIds)}return t.prototype.dispose=function(){this._lifetime&&
(this._lifetime.dispose(),this._lifetime=null)},Object.defineProperty(t.prototype,"lifetime",{get:function(){return this._lifetime},enumerable:!0,configurable:!0}),__decorate([n.Composition.ProxyCompatibilityMode],t)}();t.SelectableSet=f})(i=t.Selection2||(t.Selection2={}))})(i=t.Internal||(t.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function c(t,i){if(i){var u=t.peek(),r=u.slice();n.pushUnique(r,i,null,!0);r.length!==u.length&&t(r)}}var l=n,u=l.isUndefined,o=l.isNullOrUndefined,s=ko.unwrap,i=ko.observable,f=ko.observableArray,e=ko.computed,r="added",h="deleted",a="_lifetime",v=FxImpl.TriggerableLifetimeManager,w=window.fx.environment.isDevelopmentMode,p=function(){function t(t,l,y,p,w,b,k){var d=this,nt,g;if(this.selectedItems=f(),this.activatedItems=f(),this.itemsWithChildEdits=f(),this.itemsArePinnable=i(!0),this._msPortalFxCurrentCommands=i(),this._isDisposed=!1,ko.isObservable(t)&&typeof t!="object"||
(l=t.itemMatchesSelection,y=t.createSelection,p=t.initialState,w=t.supplyCommands,b=t.keepDeselectedItemsActivated,k=t.leaveSelectionOnDeactivation,t=t.items),l&&!y)throw new Error("Invalid Parameters.  If itemMatchesSelection function is defined then a createSelection item factory must be provided.");if(y&&!l)throw new Error("Invalid Parameters.  If a createSelection factory function has been provided there must be a matching itemMatchesSelection function.");nt=this._lifetime=new v;this._msPortalFxHasCreateSelection=!0;l||y||(l=function(n,t){return n===t},y=function(n){return n},this._msPortalFxHasCreateSelection=!1);g=function(n,t){return ko.ignoreDependencies(function(){return l(n,t)})};this.itemMatchesSelection=g;this.createSelection=y;this._msPortalFxFindDataItem=function(i,r){var u=!(r&&r.length),f=u?g:function(t,i){var u=y(t);return n.find(r,function(t){return!n.deepEquals(u[t],i[t])})===undefined};return t().first(function(n){return f(n,i)})};this._msPortalFxSupplyCommands=w?function(
n){var t=w(n);return d._msPortalFxCurrentCommands(t),t}:undefined;this._msPortalFxCursor=i(null);this._msPortalFxDelayedBladeSelection=i();var tt,lt=this,at=function(n){return n.data===tt},ft=function(n){return n.some(function(n){return g(tt,n)})},et=function(){return ft(d.activatedItems.peek())},ot=function(){return ft(d.selectedItems.peek())},vt=function(n){return function(){return lt.itemsWithChildEdits().some(function(t){return g(n,t.item)})}},rt=e(nt,function(){for(var u,o,v,s,r=rt?rt.peek():[],h=r.map(function(n,t){return t}),c=[],l=t(),n,f=0,y=l.length;f<y;f++)tt=l[f],u=r.firstIndex(at),u>=0?(n=r[u],h[u]=-1,o=et(),v=o||ot(),n.isActivated(o),n.isSelected(v)):(s=nt.createChildLifetime(),n={data:tt,isSelected:i(ot()),isActivated:i(et()),hasChildEdits:e(s,{read:vt(tt),write:function(){throw new Error("'hasChildEdits' is a read only.");}})},n[a]=s),c.push(n);return h.forEach(function(n){if(n>=0){var t=r[n],i=t&&t[a];i&&i.dispose()}}),c});this.selectableItems=f(rt());rt.subscribe(nt,function(
n){(d.selectableItems().length!==0||n.length!==0)&&d.selectableItems.splice.apply(d.selectableItems,[0,d.selectableItems().length].concat(n))});var ut=this.selectableItems(),st=function(n){var i=d.selectedItems().first(function(t){return g(n.data,t)}),f=d.activatedItems().first(function(t){return g(n.data,t)}),e=d.selectableItems().indexOf(n)<0,r,u,t;!e&&n.isSelected()?i||(r=function(n){o(n)||d.selectedItems.splice(0,0,n)},f||!d._createDelayedBladeSelection?(u=f||y(n.data),r(u)):(t=d._createDelayedBladeSelection(n.data),t&&t.preventActivation!==!0&&t.selectedValuePromise.then(function(){var t=d._isDisposed||!n.isSelected()||!d.selectableItems().first(function(t){return n===t});t||r(u)}))):(i&&d.selectedItems.remove(i),b||n.isActivated(!1))},ht=function(n){var u=d.selectedItems().first(function(t){return g(n.data,t)}),i=d.activatedItems().first(function(t){return g(n.data,t)}),f=d.selectableItems().indexOf(n)<0,r,t;!f&&n.isActivated()?i||(u||!d._createDelayedBladeSelection?(r=u||y(n.data),
o(r)||d.activatedItems.splice(0,0,r)):(t=d._createDelayedBladeSelection(n.data),t&&t.preventActivation!==!0&&d._msPortalFxDelayedBladeSelection(t))):(i&&d.activatedItems.remove(i),k||n.isSelected(!1))},it,ct=function(){it&&it.dispose();it=nt.createChildLifetime();ut.forEach(function(n){n.isSelected.subscribe(it,function(){st(n)});n.isActivated.subscribe(it,function(){ht(n)})})};this.selectableItems.subscribeArrayEdits(nt,function(n){n.forEach(function(n){if(u(n.moved)&&!o(n.value))switch(n.status){case r:case h:st(n.value);ht(n.value)}});ct()});ct();this.selectedItems.subscribeArrayEdits(nt,function(n){n.forEach(function(n){if(u(n.moved))switch(n.status){case r:case h:ut.some(function(t){return g(t.data,n.value)?(t.isSelected(n.status===r),!0):!1})}})});this.activatedItems.subscribeArrayEdits(nt,function(n){n.forEach(function(n){if(u(n.moved))switch(n.status){case r:case h:ut.some(function(t){return g(t.data,n.value)?(t.isActivated(n.status===r),!0):!1})}})});p&&(c(this.selectedItems,s(
p.selectedItems)),c(this.activatedItems,s(p.activatedItems)),c(this.itemsWithChildEdits,s(p.itemsWithChildEdits)))}return t.prototype.activateAllSelectedItems=function(){this.activatedItems(this.selectedItems.slice(0))},t.prototype.dispose=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null);this._isDisposed=!0},t.prototype._setCreateDelayedBladeSelection=function(n){var t=this;this._createDelayedBladeSelection=n;this._msPortalFxCreateSelectionAsync=function(n){var i=t._createDelayedBladeSelection(n);return i?i.selectedValuePromise:Q(null)};this.createSelection=null},t}(),y;t.SelectableSet=p;y=function(){function n(n){var t=this;n===void 0&&(n={});var o=!1,r=i(n.selectedValue),f=this,s=this._lifetime=new v;f.lock=function(){o=!0};f.setInternalSelectedValue=function(n){r(n)};f.isLocked=function(){return o};this.selectedValue=e(s,{read:function(){return r()},write:function(n){r(n)}});this.isSelected=i(!!n.isSelected);this.isCommandSelected=i(!!n.isCommandSelected);this.
hasChildEdits=i(!1);this.isActivated=i(!!n.isActivated);this.isClickable=ko.pureComputed(function(){return!t.isSelected()});this.value=e(s,{read:function(){return t.isSelected()?t.selectedValue():undefined},write:function(n){if(u(n))t.isSelected(!1),t.isActivated(!1);else throw new Error("You may only write the value 'undefined' to a Selectable's 'value' property.");}})}return n.prototype.dispose=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null)},n.prototype.setIsSelected=function(n,t){n&&n.container&&n.container.selectable?this.isSelected(!!n.container.selectable.isSelected):this.isSelected(t)},n.prototype.onClick=function(){this.isSelected(!0)},n}();t.Selectable=y})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function r(n,t,i){return{extension:n,detailBlade:t,detailBladeInputs:i}}function u(n,t,i){return{extension:n,assetType:t,detailBladeInputs:i}}function f(t,r){return!t!=!r?!1:(t=t||{detailBladeInputs:
null},r=r||{detailBladeInputs:null},!n.deepEquals(t.detailBladeInputs||{},r.detailBladeInputs||{})||(t.extension||"")!==(r.extension||""))?!1:(t.detailBlade||"")!==(r.detailBlade||"")?!1:(t.assetType||"")!==(r.assetType||"")?!1:(t.resourceId||"")!==(r.resourceId||"")?!1:i.isEqualCloudName(t.cloudName||"",r.cloudName||"")?!0:!1}var i=FxImpl.Extension;t.getBladeSelection=r;t.getAssetSelection=u;t.equalDynamicSelections=f})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";function t(n,t,i,r){return{cloudName:n,extension:t,assetType:i,detailBladeInputs:r}}function i(n,t,i,r){return{cloudName:n,extension:t,detailBlade:i,detailBladeInputs:r}}n.getAssetSelection=t;n.getBladeSelection=i})(t=n.ViewModels||(n.ViewModels={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){var t;(function(n){"use strict";var r=!1,t=ko.observableArray,i=ko.utils.peekObservable,u=function(){function n(n,i){this._disposables=[];this._selectableSets=t([
]);this._selectableSetMap={};this._subs=[];this._syncing=[null];this.selectableItems=t([]);this.selectedItems=t();this.activatedItems=t();this.itemsWithChildEdits=t();this._getSetName=n;this._initComputeds();this._initSubs();i&&this._initState(i)}return n.prototype.registerSelectableSet=function(n,t){if(!n)throw new Error("Invalid Parameters. 'selectableSet' cannot be null or falsy .");if(!t)throw new Error("Invalid Parameters. 'name' cannnot be falsy.");if(this._selectableSets.peek().some(function(t){return t===n}))throw new Error("The selectable set is already registered.");if(this._selectableSetMap[t])throw new Error("A selectable set is already registered under the given name: "+t+".");this._selectableSetMap[t]=n;this._selectableSets.push(n);this._attachSet(n,t)},n.prototype.unregisterSelectableSet=function(n){var i,t;if(!n)throw new Error("Invalid Parameters. Cannot be null or undefined.");if(typeof n=="string"?t=n:i=n,t)if(this._selectableSetMap[t])i=this._selectableSetMap[t];else
throw new Error("No selectable set was registered with the name: "+t+".");this._detachSet(i,!0);this._selectableSets.remove(i);delete this._selectableSetMap[t]},n.prototype.dispose=function(){for(var n;n=this._disposables.pop();)n.dispose();for(this._disposables=null;this._subs.length;)this._detachSet(this._subs[this._subs.length-1].selectableSet,!1)},n.prototype._initComputeds=function(){var n=this;this._disposables.push(ko.computed(function(){var t=n._selectableSets().map(function(n){return n.selectableItems()});n.selectableItems(Array.prototype.concat.apply([],t))}))},n.prototype._initSubs=function(){var n=this;this._disposables.push(this.activatedItems.subscribe(function(t){n._syncItemsToChildSets(t,function(n,t){return n.activatedItems(t)})}));this._disposables.push(this.selectedItems.subscribe(function(t){n._syncItemsToChildSets(t,function(n,t){return n.selectedItems(t)})}))},n.prototype._initState=function(n){n.selectedItems&&this.selectedItems(i(n.selectedItems));n.activatedItems&&
this.activatedItems(i(n.activatedItems))},n.prototype._attachSet=function(n,t){var i=this._createSyncToParentArray(n.selectedItems,this.selectedItems,t,!0),r=this._createSyncToParentArray(n.activatedItems,this.activatedItems,t,!0);this._syncItemsToChildSets(this.selectedItems(),function(n,t){return n.selectedItems(t)},t);this._syncItemsToChildSets(this.activatedItems(),function(n,t){return n.activatedItems(t)},t);this._subs.push({selectableSet:n,subscriptions:[r,i]})},n.prototype._detachSet=function(n,t){var i=this._subs.first(function(t){return t.selectableSet===n});i&&this._subs.splice(this._subs.indexOf(i),1);t&&(this._removeItems(n.selectedItems,this.selectedItems),this._removeItems(n.activatedItems,this.activatedItems));i.subscriptions.forEach(function(n){return n.dispose()})},n.prototype._removeItems=function(n,t){t.removeAll(n())},n.prototype._syncItemsToChildSets=function(n,t,i){var e=this,u={},r,f;if(n.forEach(function(n){var i=e._getSetName(n),t=u[i];t||(u[i]=t=[]);t.push(n)}
),i)r=this._selectableSetMap[i],r&&u[i]&&this._guardedSync(i,function(){return t(r,u[i]||[])});else for(f in this._selectableSetMap)r=this._selectableSetMap[f],r&&this._guardedSync(f,function(){return t(r,u[f]||[])})},n.prototype._createSyncToParentArray=function(n,t,i){var r=n.peek();return r.length&&this._guardedSync(i,function(){t.push.apply(t,r)}),n.subscribe(function(n){_this._guardedSync(i,function(){var i=t.peek();t.valueWillMutate();try{i.length=0;i.push.apply(i,n)}finally{t.valueHasMutated()}})})},n.prototype._guardedSync=function(n,t){if(this._syncing[0]!==n){this._syncing.unshift(n);try{t()}finally{var i=this._syncing.shift();if(i!==n)throw new Error("Unexpected sync guard encountered: "+i+". Expected: "+n);}}},n}();n.MultiplexingSelectableSet=u})(t=n.Internal||(n.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=function(n){function t(t){t===void 0&&(t={});n.call(
this,t);this.delayedBladeSelection=i()}return __extends(t,n),t}(n.ViewModels.Selectable);t.Selectable=r})(i=t.Internal||(t.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n,t){n._setCreateDelayedBladeSelection(t)}n.setCreateDelayedBladeSelection=t})(t=n.SelectableSet||(n.SelectableSet={}))})(t=n.Internal||(n.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=function(){function i(n){this._createdLifetimeManager=!1;this.controlType=t.ControlType.Invalid;n?(this._lifetimeManager=n.createChildLifetime(),this._lifetimeManager.registerForDispose(this)):(this._createdLifetimeManager=!0,this._lifetimeManager=new FxImpl.TriggerableLifetimeManager);this._disposed=!1}return i.prototype.dispose=function(){this._createdLifetimeManager&&this._lifetimeManager.
dispose();this._disposed=!0},Object.defineProperty(i.prototype,"lifetimeManager",{get:function(){return this._lifetimeManager},enumerable:!0,configurable:!0}),i.prototype.populateFromObject=function(n){var r=this,t=n;for(var i in t)t.hasOwnProperty(i)&&t[i]!==undefined&&(r[i]=t[i])},i.prototype._addDisposablesToCleanUp=function(n){this.lifetimeManager.registerForDispose(n)},__decorate([n.Composition.ProxyCompatibilityMode],i)}();i.ViewModel=r})(r=i.Base||(i.Base={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=n.initObservable,r=ko.observable,u=function(n){function t(t,u){t&&t.createChildLifetime||(t=undefined,u=arguments[0]);n.call(this,t);u===!1||u===!0?u={loading:r(u)}:(u===null||u===undefined)&&(u={});this.disabled=i(u.disabled,!1);this.loading=i(u.loading,!1)}return __extends(t,n),t}(n.ViewModels.Controls.Base.ViewModel);t.ViewModel=u})(i=
t.Loadable||(t.Loadable={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=function(n){function t(t){n.call(this,t);this.name=null;this.value=i();this.dirty=i()}return __extends(t,n),t}(n.Loadable.ViewModel);t.ViewModel=r})(t=n.EditableControl||(n.EditableControl={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,u=ko.observableArray,r;t.DefaultDelayValidationTimeout=500;r=function(n){function t(t){var r=this;n.call(this,t);this.enableValidation=i(!0);this.delayValidationTimeout=i(0);this.validationState=i(0);this.validators=u();this.valid=ko.computed(function(){return!r.enableValidation()||r.validators().length===0||r.enableValidation()&&r.validators().length>0&&(r.validationState(
)===0||r.validationState()===2)})}return __extends(t,n),t}(n.EditableControl.ViewModel);t.ViewModel=r})(t=n.ValidatableControl||(n.ValidatableControl={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var r=ko.observable,i;t.DefaultValidationDelay=500;i=function(i){function u(){i.apply(this,arguments);this.delayValidationTimeout=r(t.DefaultValidationDelay);this.valueUpdateTrigger=n.ValueUpdateTrigger.Default}return __extends(u,i),u}(n.ValidatableControl.ViewModel);t.ViewModel=i})(t=n.TypableControl||(n.TypableControl={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var r=ko.observable,i,u,f,e;(function(n){n[n.LeftTop=3]="LeftTop";n[n.RightTop=5]="RightTop";n[n.LeftBottom=10]="LeftBottom";n[n.RightBottom=
12]="RightBottom"})(t.PositioningAlignment||(t.PositioningAlignment={}));i=t.PositioningAlignment,function(n){n[n.BottomRight=0]="BottomRight";n[n.TopRight=1]="TopRight";n[n.BottomLeft=2]="BottomLeft";n[n.TopLeft=3]="TopLeft"}(t.DropDownPositioning||(t.DropDownPositioning={}));u=t.DropDownPositioning,function(n){n[n.Default=0]="Default";n[n.Full=1]="Full";n[n.MinWidgetMaxContent=2]="MinWidgetMaxContent"}(t.DropDownWidth||(t.DropDownWidth={}));f=t.DropDownWidth;e=function(n){function t(t){n.call(this,t);this.popupAlignment=i.RightTop;this.inputAlignment=i.RightBottom;this.dropDownPositioning=r(u.BottomRight);this.dropDownWidth=r(f.Full)}return __extends(t,n),t}(n.ValidatableControl.ViewModel);t.ViewModel=e})(i=t.EditableCombo||(t.EditableCombo={}))})(t=n.Forms||(n.Forms={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";var u=n.ViewModels,r=u.Forms,i=ko.observable,f,e,o;(
function(n){n[n.Top=0]="Top";n[n.Left=1]="Left";n[n.Hidden=2]="Hidden"})(t.LabelPosition||(t.LabelPosition={}));f=t.LabelPosition,function(n){n[n.Bottom=0]="Bottom";n[n.Right=1]="Right"}(t.SubLabelPosition||(t.SubLabelPosition={}));e=t.SubLabelPosition,function(t){var u;(function(t){var u=function(n){function t(t,u){n.call(this,t);t.registerForDispose(this);u=u||{};this.label=u.label||i(null);this.subLabel=u.subLabel;this.labelPosition=u.labelPosition||i(r.LabelPosition.Top);this.subLabelPosition=u.subLabelPosition||i(r.SubLabelPosition.Bottom);this.infoBalloonContent=u.infoBalloonContent||i(null);this.infoBalloonLinkContent=u.infoBalloonLinkContent||i(null);this.hideValidationCheck=u.hideValidationCheck||!1}return __extends(t,n),t}(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=u})(u=t.LabelAndBalloon||(t.LabelAndBalloon={}))}(o=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;
(function(t){var i;(function(t){var i;(function(i){"use strict";var o=n,c=o.Base,e=c.Diagnostics,u=o.isNullOrUndefined,r=ko.observable,l=ko.observableArray,f=ko.computed,s=e.LogEntryLevel.Error,h=window.navigator.userAgent,a=!/MSIE /i.test(h)&&/Trident[\/]/i.test(h)&&!/Edge\//i.test(h),v=function(t){function i(i,o,h,c){var v=this,a=null,y=null,p=null;u(o)||o.valid&&o.sections?!u(o)&&o.valid&&o.sections&&(a=o):c=o;typeof h=="string"?y=h:h&&(p=h);h&&c&&c.defaultValue&&e.Log.writeEntry(s,"Forms","Both edit scope and default value are set.  Forms should only specify one of the two.  The default value will be ignored.");c=c||{};t.call(this,i,c);this._options=c;this._form=a;this.controlType=n.ViewModels.ControlType.Invalid;this.enableValidation=r(!1);this.valid=r(!0);this.validate=r(0);this.delayValidationTimeout=r(n.ViewModels.Controls.ValidatableControl.DefaultDelayValidationTimeout);this.performValidation=r(null);this.ensureValidation=r(0);this.validations=c.validations||l([]);this.defaultValue=
c.defaultValue||r(null);this.initialValue=r(null);this._previousEditScope=null;this.telemetryKeys=c.telemetryKeys;this.enabled=r(!0);this.disabled(!this.enabled());this.enabled.subscribe(this.lifetimeManager,function(n){var t=!n;v.disabled()!==t&&v.disabled(t)});this.disabled.subscribe(this.lifetimeManager,function(n){var t=!n;v.enabled()!==t&&v.enabled(t)});u(a)?(this.value=r(this.defaultValue()),this.initialValue(this.defaultValue()),this.dirty=f(function(){return!1}),this.enableValidation(!0)):y?this._setEditScopeAccessors(a._createEditScopeAccessorFromPath(y),a):p?this._setEditScopeAccessors(p,a):this.value=r(this.defaultValue());this._msPortalFxClearValidation=r();this._msPortalFxTriggerValidation=r();this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(i,t),i.prototype._setEditScopeAccessors=function(n){if(u(this._editScopeAccessors))if(n.createdByBaseFormClass)this._editScopeAccessors=n,this._initializeFieldStateObservables();else{e.Log.writeEntry(
s,"MsPortalFx.ViewModels.Forms.Field.EditScopeAccessorsNotCreatedByFormFactory","Field._setEditScopeAccessors only accepts EditScopeAccessors created by the Form.createEditScopeAccessors factory method.");throw new Error("Field._setEditScopeAccessors only accepts EditScopeAccessors created by the Form.createEditScopeAccessors factory method.");}else{e.Log.writeEntry(s,"MsPortalFx.ViewModels.Forms.Field.SetEditScopeAccessorsCanOnlyBeCalledOnce","Field._setEditScopeAccessors can only be called once.");throw new Error("Field._setEditScopeAccessors can only be called once.");}},i.prototype.clearValidation=function(){if(this._msPortalFxClearValidation())return this._msPortalFxClearValidation()();Q()},i.prototype.triggerValidation=function(){if(this._msPortalFxTriggerValidation())return this._msPortalFxTriggerValidation()();var n=Q.defer(),t=this._msPortalFxTriggerValidation.subscribe(this.lifetimeManager,function(i){i().then(n.resolve).catch(n.reject).finally(function(){return t.dispose()})}
);return n.promise},i.prototype._initializeFieldStateObservables=function(){var n=this,t,i,e,r=this._editScopeAccessors;this.initialValue=f(this.lifetimeManager,function(){var i;return t&&t.dispose(),t=n.lifetimeManager.createChildLifetime(),i=r.getOriginalObservable(t),i?i():n.defaultValue()});this.value=f(this.lifetimeManager,{read:function(){var t,e,f;return i&&i.dispose(),i=n.lifetimeManager.createChildLifetime(),t=r.getEditableObservable(i),e=n.defaultValue.peek(),n._form&&(f=n._form.editScope(),n._previousEditScope!==f&&(n.enableValidation(!1),n._previousEditScope=f)),u(t)?e:t()},write:function(t){e&&e.dispose();e=n.lifetimeManager.createChildLifetime();var i=r.getEditableObservable(e);if(i)i(t);else if(!(a&&!t))throw new Error("Form should not allow edits until an EditScope is loaded.");}});this.dirty=f(this.lifetimeManager,function(){return!o.deepEquals(n.value(),n.initialValue())});this._enableValidationReactor=f(this.lifetimeManager,function(){if(n._form)var u=n._form.editScope(
);n.enableValidation(!!(r.getOriginalObservable(t)&&r.getEditableObservable(i)))})},i}(t.LabelAndBalloon.ViewModel);i.ViewModel=v})(i=t.Input||(t.Input={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=function(n){function t(t,i,r,u){var f=this;n.call(this,t,i,r,u);this.empty=ko.computed(function(){return!f.value()})}return __extends(t,n),t.prototype.dispose=function(){this.empty&&this.empty.dispose();n.prototype.dispose.call(this)},t}(n.Input.ViewModel);t.ViewModel=i})(t=n.Nullable||(n.Nullable={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=function(n){function t(t,r,u,f){n.call(this,t,r,u,f);this.emptyValueText=
this._options.emptyValueText||i("");this.editing=i(!1)}return __extends(t,n),t}(n.Nullable.ViewModel);t.ViewModel=r})(t=n.Editable||(n.Editable={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=function(t){function i(i,u,f,e){t.call(this,i,u,f,e);this.valueUpdateTrigger=this._options.valueUpdateTrigger||n.ViewModels.Controls.ValueUpdateTrigger.Default;this.delayValidationTimeout=this._options.delayValidationTimeout||r(500)}return __extends(i,t),i}(t.Editable.ViewModel);i.ViewModel=u})(i=t.Typable||(t.Typable={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.ViewModels.Controls.Forms.EditableCombo,u=r.PositioningAlignment,
f=ko.observable,e=function(n){function t(t,i,e,o){n.call(this,t,i,e,o);this.dropDownWidth=f(r.DropDownWidth.Full);this.popupAlignment=u.LeftTop;this.inputAlignment=u.LeftBottom}return __extends(t,n),t}(t.Editable.ViewModel);i.ViewModel=e})(i=t.EditableComboBox||(t.EditableComboBox={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function s(t,u,f){f===void 0&&(f=".");var s,h,e;try{for(u=u.replace(/\[/g,f).replace(/\]/g,""),u=u.charAt(0)===f?u.substr(1):u,s=u.split(f),e=o(t)[s[0]],h=1;h<s.length;h++)e=o(e)[s[h]]}catch(c){throw new Error("The 'path' parameter does not map to a value on the 'data' parameter.");}if(n.isNullOrUndefined(e)||!ko.isObservable(e)){i.writeEntry(r.Error,"MsPortalFx.ViewModels.Forms.EditScopeAccessors.InvalidObservablePath","'observablePath' does not identify a non-null observable (observablePath: "+u+").");throw new
Error("'observablePath' does not identify a non-null observable.");}return e}var e=n.Base.Diagnostics,i=e.Log,r=e.LogEntryLevel,c=ko.observableArray,o=ko.unwrap,u=ko.computed,l=window,a=l.fx.environment.isDevelopmentMode,f,h;(function(n){n[n.Original=0]="Original";n[n.Editable=1]="Editable"})(t.EditScopeObservableType||(t.EditScopeObservableType={}));f=t.EditScopeObservableType;h=function(){function t(n,t,i){var r=this;this.sections=c();t&&(this.editScope=t);this._getNestedData=i;n.registerForDispose(this);this._lifetimeManager=n.createChildLifetime();this.valid=u(function(){return!r.sections().some(function(n){return!n.valid()})});this._lifetimeManager.registerForDispose(this.valid);this.createFieldValueAccessor=function(n){var i,t;return typeof n=="string"?(i=n,t=function(n){return s(n,i)}):t=n,this.createCustomEditScopeAccessor(t)}}return Object.defineProperty(t.prototype,"editScope",{get:function(){if(!this._editScope)throw new Error("The 'editScope' property needs to be set before the Form instance can be used.");
return this._editScope},set:function(n){if(this._editScope)throw new Error("The 'editScope' property should be only set once.");this._editScope=n},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._lifetimeManager&&(this._lifetimeManager.dispose(),this._lifetimeManager=null)},t.prototype._createEditScopeAccessorFromPath=function(n){var t=function(t){return s(t,n)};return this._createEditScopeAccessorFromAccessorFunction(t,!0)},t.prototype.createEditScopeAccessor=function(n){var t,i,r,u;return n.writeToEditScope?(r=n,u=this._sanitizeAccessorOptions(r),this._createEditScopeAccessorFromOptions(u)):(t=n,i=this._sanitizeAccessorFunction(t),this._createEditScopeAccessorFromAccessorFunction(i,!0))},t.prototype.createCustomEditScopeAccessor=function(n){var t,i;return n.writeToEditScope?(i=n,this._createEditScopeAccessorFromOptions(i)):(t=n,this._createEditScopeAccessorFromAccessorFunction(t,!1))},t.prototype._sanitizeAccessorFunction=function(n){return this._sanitizeAccessorLambda(
n)},t.prototype._sanitizeAccessorOptions=function(n){return{readFromEditScope:this._sanitizeAccessorLambda(n.readFromEditScope),writeToEditScope:this._sanitizeAccessorLambda(n.writeToEditScope)}},t.prototype._sanitizeAccessorLambda=function(n){return n},t._logEditScopeAccessorError=function(n){i.writeEntry(r.Error,"EditScopeAccessor",n)},t.prototype._createEditScopeAccessorFromAccessorFunction=function(n,t){var u=this;return{getOriginalObservable:function(t){var e=u.editScope(),o,s,h;if(e&&(s=e.getOriginal(e.root),h=u._getNestedData?u._getNestedData(s):s,o=n(h,t,f.Original),!o)){i.writeEntry(r.Error,"MsPortalFx.ViewModels.Form.MissingOriginalFieldObservable","EditScope data doesn't have an original observable for this form field.");throw new Error("EditScope data doesn't have an original observable for this form field.");}return o},getEditableObservable:function(t){var s=u.editScope(),e,o,h;if(s&&(o=s.root,h=u._getNestedData?u._getNestedData(o):o,e=n(h,t,f.Editable),!e)){i.writeEntry(r.
Error,"MsPortalFx.ViewModels.Form.MissingEditableFieldObservable","EditScope data doesn't have an editable observable for this form field.");throw new Error("EditScope data doesn't have an editable observable for this form field.");}return e},createdByBaseFormClass:!0,returnsObservablesFromEditScope:t}},t.prototype._createEditScopeAccessorFromOptions=function(n){var t=this;return{getOriginalObservable:function(i){if(!t.editScope())return null;var r=u(function(){return n.readFromEditScope(t.editScope().getOriginal(t.editScope().root))});return i.registerForDispose(r),r},getEditableObservable:function(i){if(!t.editScope())return null;var r=u({read:function(){return n.readFromEditScope(t.editScope().root)},write:function(i){n.writeToEditScope(t.editScope().root,i)}});return i.registerForDispose(r),r},createdByBaseFormClass:!0,returnsObservablesFromEditScope:!1}},__decorate([n.Composition.ProxyCompatibilityMode],t)}();t.ViewModel=h})(i=t.Form||(t.Form={}))})(i=t.Forms||(t.Forms={}))})(t=n.
ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n,u=ko.observableArray,f=function(n){function t(t,i,f,e){n.call(this,t,i,f,e);this.groups=this._options.groups||u([]);this.groups().length===0||this.groups()[0].options().length===0||r.isNullOrUndefined(this.defaultValue())&&this.defaultValue(this.groups()[0].options()[0].value)}return __extends(t,n),t}(t.Input.ViewModel);i.ViewModel=f})(i=t.Groups||(t.Groups={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observableArray,r=function(n){function t(t,r,u,f){n.call(this,t,r,u,f);this.options=this._options.options||i([])}return __extends(t,n),t}(n.Input.ViewModel);t.ViewModel=r})(t=n.Options||(n.Options={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||
(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=n,r=ko.observable,f=function(n){function t(t,i,f,e){var o=e||{};u.isNullOrUndefined(i)||typeof i.createEditScopeAccessor=="function"||(o=i);n.call(this,t,i,f,e);this.min=o.min||r(0);this.max=o.max||r(10);this.step=o.step||r(1);this.showStepMarkers=o.showStepMarkers||r(!0)}return __extends(t,n),t}(t.Input.ViewModel);i.ViewModel=f})(i=t.Slider||(t.Slider={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var f=ko.observableArray,r=n.initObservable,e=function(){function n(n,t,i,u){this.text=r(n);this.value=r(t);this.selected=r(i,!1);this.disabled=r(u,!1)}return n}(),u;i.ItemValue=e;u=function(n){function t(){n.apply(this,arguments);this.label=null;this.
values=f()}return __extends(t,n),t}(t.ValidatableControl.ViewModel);i.ViewModel=u})(i=t.ItemList||(t.ItemList={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,f=ko.pureComputed,o=f(function(){return!0}),r,e,u;(function(n){n[n.None=0]="None";n[n.Pending=1]="Pending";n[n.Success=2]="Success";n[n.Failure=3]="Failure"})(t.Status||(t.Status={}));r=t.Status;e=function(n){function t(t,u,f,e){t&&t.createChildLifetime||(t=undefined,u=arguments[0],f=arguments[1],e=arguments[2]);n.call(this,t);this.text=i(u||"");this.visible=i(!0);this.afterExecute=null;this.status=i(r.None);this.error=i(null);this.handler=i(null);this.attach(f,e)}return __extends(t,n),t.prototype.execute=function(){var n=this,u=!1,t,i,f;try{if(this.error(null),this.status(r.Pending),i=this.handler(),!i)throw new Error("Command does not have handler.");f=i.execute();t=Q(f).then(
function(){u=!0})}catch(e){t=Q.reject(e)}return t.finally(function(t){u?n.status(r.Success):(n.error(t),n.status(r.Failure));n.afterExecute&&n.afterExecute()})},t.prototype.attach=function(n,t){if(n){var i=new u(n,t);this.attachHandler(i)}},t.prototype.attachHandler=function(n){this.handler(n)},t.prototype.detach=function(){this.handler(null)},t}(n.Loadable.ViewModel);t.ViewModel=e;u=function(){function n(n,t,i){this.execute=i?n.bind(i):n;this.canExecute=t?f(t,i):o}return n}();t.DelegatingHandler=u})(t=n.Command||(n.Command={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){var r;(function(r){"use strict";var e=n.ViewModels,s=e.Controls,o=ko.observable,l=ko.observableArray,u=ko.computed,h=n.isNullOrWhiteSpace,f=n.Resources.Strings,a=n.disposeDisposable,v=function(i){function r(r,e){var y=this,w,a,p;if(i.call(this,r),this.selectedItems=l(),this._gridItems=null,this._options=null,this.
_assetName=o(),this._assetTypeDisplayName=o(),this.affectedItemsLabel=o(f.DeleteAssetConfirmation.affectedItemsLabel),this.controlType=t.ControlType.DeleteAssetConfirmation,this._options=e,w=this.lifetimeManager,this._assetTypeDisplayName(this._options.assetTypeDisplayName),a=this._options.grid,a){var b=a.selectableRowExtensionOptions,k=b?n.ViewModels.Controls.Lists.Grid.Extensions.SelectableRow:null,v=this.grid=new s.Lists.Grid.ViewModel(w,a.items,k,b);v.columns=a.columns;v.noRowsMessage=a.noRowsMessage;v.showHeader=n.isNullOrUndefined(a.showHeader)?!0:a.showHeader;b&&(this.selectedItems=v.selectableData.selectedItems);this._gridItems=v.items;this._addDisposablesToCleanUp(v)}p=this._assetName;this._addDisposablesToCleanUp([this.confirmationEditor=new c(w,p),this.warning=u(function(){return y._onUpdateWarningText(p())}),this.confirmationLabel=u(function(){return y._onUpdateConfirmationLabel(y._assetTypeDisplayName())}),this.valid=u(function(){var n=p(),t=y.confirmationEditor.textBox.valid(
);return h(n)?!1:t}),])}return __extends(r,i),r.prototype._onUpdateWarningText=function(n){return f.DeleteAssetConfirmation.warningText.format(n)},r.prototype._onUpdateConfirmationLabel=function(n){return f.DeleteAssetConfirmation.confirmationLabel.format(n)},r.prototype._selectAll=function(){this.grid&&this.grid.selectableData&&this.grid.selectableData.selectableItems().forEach(function(n){return n.isSelected(!0)})},r}(i.Loadable.ViewModel),c;r.ViewModel=v;c=function(){function n(n,t){var i=this.textBox=new e.Forms.TextBox.ViewModel(n);i.disabled(!0);i.valueUpdateTrigger=s.ValueUpdateTrigger.Input;this._disposables=[i,u(function(){var n=t();h(n)?(i.disabled(!0),i.validations([])):(i.disabled(!1),i.validations([new e.EqualsValidation(n,f.DeleteAssetConfirmation.assetNameValidationFailureMessage.format(n))]),i.value(""))}),]}return n.prototype.dispose=function(){a(this._disposables)},n}()})(r=i.DeleteAssetConfirmation||(i.DeleteAssetConfirmation={}))})(i=t.Controls||(t.Controls={}))})(t=
n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=function(t){function i(i){t.call(this,i);this.galleryItem=r();this.bladeSelection=r();this.bannerClicked=r();this.createClicked=r();this.controlType=n.ControlType.HeroBanner;this.cloudName=FxImpl.Extension.selfCloudName}return __extends(i,t),i}(t.Loadable.ViewModel);i.ViewModel=u})(i=t.HeroBanner||(t.HeroBanner={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=function(n){function i(i){n.call(this,i);this.controlType=t.ControlType.HotSpot}return __extends(i,n),i}(n.ViewModels.Controls.Base.ViewModel);i.BaseViewModel=r})(r=i.HotSpot||(i.HotSpot={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;
(function(i){var r;(function(i){"use strict";var r=n.ViewModels.Controls.HotSpot.BaseViewModel,u=function(n){function i(i){n.call(this,i);this.selectable=t.Part.createSelectableViewModel();this.clickableDuringCustomize=!1}return __extends(i,n),i}(r);i.ViewModel=u})(r=i.HotSpot||(i.HotSpot={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,u=function(n){function i(i,u){n.call(this,i);this.controlType=t.ControlType.LinkHotSpot;this.clickableLink=u?u.clickableLink:r()}return __extends(i,n),i}(n.ViewModels.Controls.HotSpot.BaseViewModel);i.LinkViewModel=u})(r=i.HotSpot||(i.HotSpot={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r,u;(function(n){n[n.Small=0]="Small";n[n.Normal=1]="Normal"}
)(t.Size||(t.Size={}));r=t.Size;u=function(n){function t(t,u){n.call(this,t,!1);this.image=u?u.image:i();this.text=u?u.text:i();this.size=u&&u.size?u.size:i(r.Normal)}return __extends(t,n),t}(n.Loadable.ViewModel);t.BaseViewModel=u})(t=n.InfoBox||(n.InfoBox={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=function(n){function t(t){var i=this;t===void 0&&(t={});n.call(this,t);this.isClickable&&this.isClickable.dispose();this.isClickable=ko.pureComputed(function(){return i.isSelected()&&!!i.selectedValue()})}return __extends(t,n),t}(n.ViewModels.Selectable),u=function(n){function i(i,u,f,e){n.call(this,i,e);this.controlType=t.ControlType.InfoBox;this.selectable=new r({isSelected:u&&u.isSelected})}return __extends(i,n),i}(i.BaseViewModel);i.ViewModel=u})(r=i.InfoBox||(i.InfoBox={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels=
{}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=function(t){function r(r,u){t.call(this,r,u);this.controlType=n.ControlType.LinkInfoBox;this.clickableLink=u?u.clickableLink:i()}return __extends(r,t),r}(t.BaseViewModel);t.LinkViewModel=r})(i=t.InfoBox||(t.InfoBox={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(t){var i;(function(i){"use strict";var r=ko.observable,u,f;(function(n){n[n.Default=0]="Default";n[n.ComingSoon=1]="ComingSoon";n[n.NoSubscription=2]="NoSubscription";n[n.Unauthorized=3]="Unauthorized"})(i.ImageType||(i.ImageType={}));u=i.ImageType;f=function(t){function i(i){t.call(this,i);this.header=r("");this.title=r("");this.description=r("");this.callToActionText=r("");this.callToActionUri=r("");this.callToSecondaryActionText=r("");this.callToSecondaryActionUri=r("");this.imageType=r(
u.Default);this.controlType=n.ControlType.Notice}return __extends(i,t),i}(t.Loadable.ViewModel);i.ViewModel=f})(i=t.Notice||(t.Notice={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,c=ko.observableArray,e,u,f,o,s,h;(function(n){n[n.Sequential=0]="Sequential";n[n.NonSequential=1]="NonSequential"})(i.WizardMode||(i.WizardMode={}));e=i.WizardMode,function(n){n[n.Form=0]="Form";n[n.Selector=1]="Selector"}(i.StepType||(i.StepType={}));u=i.StepType;f=function(){function t(t,i,f,e,o){this.description=r("");this.iconUri=r();this.status=r();this.stepId=t;this.stepType=n.isNullOrUndefined(i)?u.Form:i;this.title=r(f);this.formBlade=e;this.extension=o}return t}();i.WizardStepBase=f;o=function(t){function i(i,u){i&&i.createChildLifetime||(i=undefined,u=arguments[0]);t.call(this,i);this.controlType=n.ViewModels.ControlType.Wizard;this.mode=e.Sequential;
this.steps=c();this.selection=r();this.savedState=r();this.currentState=r();this.stepOutput=r();this.beginExecuteCommand=r();this._autoOpenFirstStep=!1;u&&u.currentState!==undefined?this.savedState(u.currentState):this._autoOpenFirstStep=!0}return __extends(i,t),i.prototype.initialize=function(){this._autoOpenFirstStep&&(this.savedState({stepStatuses:[]}),this._autoOpenFirstStep=!1)},i}(t.Loadable.ViewModel);i.ViewModel=o;s=function(n){function t(t,i,r,f,e,o){n.call(this,t,u.Form,i,r,o);this.status(f);this.isOptional=!!e}return __extends(t,n),t}(f);i.WizardStep=s;h=function(n){function t(t,i,f,e){n.call(this,t,u.Selector,i,f,e);this.value=r();this.defaultValue=r();this.displayText=r("");this.locked=r(!1);this.infoBalloonText=r("");this.lockedBalloonText=r("")}return __extends(t,n),t}(f);i.SelectorStep=h})(i=t.Wizard||(t.Wizard={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;
(function(t){"use strict";var i=ko.observable,f,e,r,u,o;(function(n){n[n.Top=0]="Top";n[n.Right=1]="Right";n[n.Bottom=2]="Bottom";n[n.Left=3]="Left"})(t.Position||(t.Position={}));f=t.Position;e=function(){function n(n,t){this.linkText=n||"";this.linkUri=t||""}return n}();t.Link=e;r=function(){function n(n,t){this.preferred=n||0;this.alternate=t||0}return n}();t.Offset=r;u=function(){function n(n,t,i,r){this.top=n||0;this.left=t||0;this.width=i||0;this.height=r||0}return n}();t.Box=u;o=function(n){function t(t){n.call(this,t);this.visible=i(!1);this.box=i(new u);this.content=i("");this.link=i();this.position=i(f.Top);this.horizontalOffset=new r;this.verticalOffset=new r;this.appendTo="body";this.closeOtherBalloons=!1}return __extends(t,n),t}(n.Loadable.ViewModel);t.ViewModel=o})(t=n.Balloon||(n.Balloon={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";
var r=ko.observable,f,u;(function(n){n[n.Normal=0]="Normal";n[n.Emphasized=1]="Emphasized";n[n.Strong=2]="Strong"})(i.Emphasis||(i.Emphasis={}));f=i.Emphasis;u=function(t){function i(i){t.call(this,i);this.max=r(2e5);this.wrap=r(!0);this.click=$.noop;this.clear=new n.ViewModels.Controls.Command.ViewModel(i,"");this.scrollbars=!0;this.write=r();this.writeLine=r();this.writeText=r();this.writeTextLine=r();this.writeTextArray=r();this.write.extend({notify:"always"});this.writeLine.extend({notify:"always"});this.writeText.extend({notify:"always"});this.writeTextLine.extend({notify:"always"});this.writeTextArray.extend({notify:"always"})}return __extends(i,t),i}(t.Loadable.ViewModel);i.ViewModel=u})(i=t.TextStream||(t.TextStream={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,f=ko.observableArray,e,u;(function(n){n[n.Text=0]="Text";n[
n.Information=1]="Information";n[n.Success=2]="Success";n[n.Warning=3]="Warning";n[n.Error=4]="Error"})(i.LogItemType||(i.LogItemType={}));e=i.LogItemType;u=function(t){function i(i){t.call(this,i);this.controlType=n.ViewModels.ControlType.LogStream;this.paused=r(!1);this.filters=f();this.log=r();this.logItem=r();this.logItems=r();this.log.extend({notify:"always"});this.logItem.extend({notify:"always"});this.logItems.extend({notify:"always"})}return __extends(i,t),i}(t.TextStream.ViewModel);i.ViewModel=u})(i=t.LogStream||(t.LogStream={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=function(t){function i(i){var f=this;t.call(this,i);this.controlType=n.ViewModels.ControlType.Console;this.isReady=r(!1);this.prompt=r("> ");this.clear=new n.ViewModels.Controls.Command.ViewModel(i);this.command=r("");this.text=r("");this.info=r("");this.
success=r("");this.warning=r("");this.error=r("");this.command.extend({notify:"always"});this.text.extend({notify:"always"});this.info.extend({notify:"always"});this.success.extend({notify:"always"});this.warning.extend({notify:"always"});this.error.extend({notify:"always"});var u=i.createChildLifetime(),e=[];["command","text","info","success","warning","error"].forEach(function(n){f[n].subscribe(u,function(t){e.push({type:n,data:t})})});this.isReady.subscribe(u,function(){u.dispose();e.forEach(function(n){f[n.type](n.data)})})}return __extends(i,t),i}(t.Loadable.ViewModel);i.ViewModel=u})(i=t.Console||(t.Console={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var u=n,r=ko.observable,e,o,f;(function(n){n[n.TextBackground=1]="TextBackground";n[n.Text=2]="Text";n[n.Debug=3]="Debug";n[n.Informational=4]="Informational";n[n.Warning=5]=
"Warning";n[n.Error=6]="Error";n[n.Black=101]="Black";n[n.DarkBlue=102]="DarkBlue";n[n.Blue=103]="Blue";n[n.Green=104]="Green";n[n.Cyan=105]="Cyan";n[n.DarkGreen=106]="DarkGreen";n[n.DarkCyan=107]="DarkCyan";n[n.Gray=108]="Gray";n[n.DarkRed=109]="DarkRed";n[n.DarkMagenta=110]="DarkMagenta";n[n.DarkYellow=111]="DarkYellow";n[n.DarkGray=112]="DarkGray";n[n.Red=113]="Red";n[n.Magenta=114]="Magenta";n[n.Yellow=115]="Yellow";n[n.White=116]="White";n[n.LightSteelBlue=201]="LightSteelBlue";n[n.LightCyan=202]="LightCyan";n[n.Violet=203]="Violet";n[n.Moccasin=204]="Moccasin";n[n.PaleGreen=205]="PaleGreen";n[n.Bisque=206]="Bisque";n[n.LightGray=207]="LightGray";n[n.PaleVioletRed=208]="PaleVioletRed";n[n.DarkSeaGreen=209]="DarkSeaGreen";n[n.OrangeRed=210]="OrangeRed";n[n.DarkOrange=211]="DarkOrange";n[n.WhiteSmoke=212]="WhiteSmoke";n[n.PowerShellBackground=213]="PowerShellBackground"})(i.Color||(i.Color={}));e=i.Color,function(n){n[n.Enter=1]="Enter";n[n.Tab=2]="Tab";n[n.ShiftTab=3]="ShiftTab";n[
n.Cancel=4]="Cancel"}(i.CommandMode||(i.CommandMode={}));o=i.CommandMode;f=function(n){function t(t,i){n.call(this,t);this.controlType=u.ViewModels.ControlType.ConsoleV2;u.isNullOrUndefined(i)&&(i={});this.command=i.command||r();this.write=i.write||r(null);this.progress=i.progress||r(null);this.prompt=i.prompt||r({text:"> "});this.input=i.input||r({text:"",position:0});this.maxLines=i.maxLines||r(200);this.colorPalette=i.colorPalette;this.clear=i.clear||new u.ViewModels.Controls.Command.ViewModel(t)}return __extends(t,n),t}(t.Base.ViewModel);i.ViewModel=f})(r=i.ConsoleV2||(i.ConsoleV2={}))})(i=t.Unsupported||(t.Unsupported={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,u,f;(function(n){n[n.Auto=1]="Auto";n[n.Yes=2]="Yes";n[n.No=3]="No"})(i.Scroll||(i.Scroll={}));u=i.Scroll;f=function(t){function i(i,f){t.call(
this,i);this.controlType=n.ViewModels.ControlType.IFrame;this.src=f.src;this.scrolling=f.scrolling||u.Auto;this.postMessage=f.postMessage||r("Initialized");this.receiveMessage=f.receiveMessage||r()}return __extends(i,t),i}(t.Base.ViewModel);i.ViewModel=f})(r=i.IFrame||(i.IFrame={}))})(i=t.Internal||(t.Internal={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,u=function(t){function i(i,u){t.call(this,i);this.controlIsReady=r(!1);this.controlType=n.ViewModels.ControlType.IFrameV2;this.src=u.src;this.postMessage=u.postMessage||r();this.receiveMessage=u.receiveMessage||r()}return __extends(i,t),i}(t.Base.ViewModel);i.ViewModel=u})(r=i.IFrameV2||(i.IFrameV2={}))})(i=t.Internal||(t.Internal={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(
t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var f=n.ViewModels,u=f.Controls.Command.ViewModel,r=ko.observable,h=ko.observableArray,e,c,o,s;(function(n){n[n.NotLoading=0]="NotLoading";n[n.Loading=1]="Loading";n[n.Failed=2]="Failed"})(i.QueryLoadingStatus||(i.QueryLoadingStatus={}));e=i.QueryLoadingStatus,function(n){n[n.Operator=0]="Operator";n[n.Operand=1]="Operand"}(i.CallbackMethodType||(i.CallbackMethodType={}));c=i.CallbackMethodType;o=function(){function n(){}return Object.defineProperty(n,"Group",{get:function(){return"group"},enumerable:!0,configurable:!0}),Object.defineProperty(n,"Predicate",{get:function(){return"predicate"},enumerable:!0,configurable:!0}),n}();i.QueryExpressionType=o;s=function(n){function t(t,i){t&&t.createChildLifetime||(t=undefined,i=arguments[0]);n.call(this,t);this.controlType=f.ControlType.QueryBuilder;this.schema=r(i);this.title=r("");this.query=r(null);this.queryViewModel=r();this.savedQuery=r(null);this.callback=null;this.
showHeader=r(!0);this.showFooter=r(!0);this.add=new u(t);this.insert=new u(t);this.remove=new u(t);this.group=new u(t);this.ungroup=new u(t);this.save=new u(t);this.queryLoading=r({status:e.NotLoading});this._msPortalFxOperandControls=h()}return __extends(t,n),t}(t.Loadable.ViewModel);i.ViewModel=s})(r=i.QueryBuilder||(i.QueryBuilder={}))})(i=t.Data||(t.Data={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u,f;(function(n){n[n.Info=0]="Info";n[n.Validation=2]="Validation"})(i.Type||(i.Type={}));u=i.Type;f=function(t){function i(i){t.call(this,i);this.type=u.Info;this.position=r(n.ViewModels.Controls.Balloon.Position.Top);this.content=r("");this.link=r();this.balloonVisible=r(!1);this.stopClickPropagation=r(!0);this.controlType=n.ViewModels.ControlType.DockedBalloon}return __extends(i,t),i}(t.Loadable.ViewModel);i.ViewModel=f})(i=t.
DockedBalloon||(t.DockedBalloon={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";function o(n){u.push(n)}function s(){return u}var i=n.ViewModels.Controls.Command.Status,r=ko.observable,e,f,u;(function(n){n[n.None=0]="None"})(t.Extensions||(t.Extensions={}));e=t.Extensions;f=function(){function t(n){this.handler=r(n);this.status=r(i.None);this.error=r(null);this.errorMessage=r(null)}return t.prototype.execute=function(t){var r=n.Helpers.Deferred(),s=this.handler(),e=this.status,o=this.error,u=this.errorMessage,f;return e(i.Pending),o(null),u(null),s?s(t).then(function(n){e(i.Success);r.resolve(n)},function(n){e(i.Failure);o(n);n&&(n.message?u(n.message):n.toString&&u(n.toString()));r.reject(n)}):(f=new Error("Command is not available for execution."),r.reject(f),o(f),u(f.message)),r.promise()},t}();t.ExtensionCommand=f;u=[];t.registerExtensionSetup=
o;t.getExtensionSetups=s})(i=t.Editor||(t.Editor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n.ViewModels.Controls.Documents.Editor.ExtensionCommand,i=ko.observable,f=ko.observableArray,e=function(){function n(n,t,u){this.id=i(n||-1);this.lastUpdatedDate=i(null);this.publishedDate=i(null);this.parentId=i(-1);this.threadId=i(-1);this.author=i(u);this.content=i(t||"");this.canDelete=i(!1);this.isEditable=i(!1);this.save=new r}return n}(),u;t.DiscussionCommentViewModel=e;u=function(){function n(n,t){this.id=i(n||-1);this.lastUpdatedDate=i(null);this.publishedDate=i(null);this.comments=f(t);this.save=new r;this.addComment=new r;this.deleteComment=new r}return n}();t.DiscussionThreadViewModel=u})(i=t.DiscussionThread||(t.DiscussionThread={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||
(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.Helpers,s=ko.observable,o=r.resolve(),u,f,e;(function(n){n[n.Discussion=1]="Discussion"})(i.Extensions||(i.Extensions={}));u=i.Extensions;f=function(n){function t(t,i,r){n.call(this,t,i);this.position=s(r)}return __extends(t,n),t}(n.ViewModels.Controls.Documents.DiscussionThread.DiscussionThreadViewModel);i.EditorThreadViewModel=f;e=function(){function i(n){var t=this;this._lifetimeManager=new FxImpl.TriggerableLifetimeManager;this.options=n;this._attachAddThreadHandler();n.threads.subscribeArrayAdds(this._lifetimeManager,function(n){t._addThreadHandlers(n)});n.threads().forEach(function(n){t._addThreadHandlers(n)})}return i.prototype.dispose=function(){this.options=null;this._lifetimeManager.dispose()},i.prototype._attachAddThreadHandler=function(){var i=this.options,r;i.addThread||(i.addThread=
new n.ViewModels.Controls.Documents.Editor.ExtensionCommand);r=function(n){var r,u;return r=new t.DiscussionThread.DiscussionCommentViewModel(-1,"",i.author()),r.canDelete(!0),r.isEditable(!0),u=new f(-(new Date).getTime(),[r],n),i.threads.push(u),o};i.addThread.handler(r)},i.prototype._addThreadHandlers=function(n){var t=this;this._attachSaveThreadHandler(n);this._attachAddCommentHandler(n);this._attachDeleteCommentHandler(n);n.comments().forEach(function(n){t._attachSaveCommentHandler(n)})},i.prototype._attachSaveThreadHandler=function(n){var t=this,i=function(i){var u=t.options,f;return u.saveThread&&(f=u.saveThread(i,n,u.containerName),f)?f:r.reject("No save handler found.")};n.save.handler(i)},i.prototype._attachAddCommentHandler=function(n){var i=this,r=function(){var r;return r=new t.DiscussionThread.DiscussionCommentViewModel(-1,"",i.options.author()),r.canDelete(!0),r.isEditable(!0),r.threadId(n.id()),i._attachSaveCommentHandler(r),n.comments.push(r),o};n.addComment.handler(r)}
,i.prototype._attachDeleteCommentHandler=function(n){var t=this,i=function(i){var u,f=n.comments().first(function(n){return n.id()===i}),e=t.options;return f&&e.deleteComment&&(u=e.deleteComment(n.id(),i),u)?u.then(function(){n.comments.remove(f)}):r.reject("No save handler found.")};n.deleteComment.handler(i)},i.prototype._attachSaveCommentHandler=function(n){var t=this,i=function(i){var f=t.options,u;return f.saveComment&&(u=f.saveComment(i,n),u)?u:r.reject("No save handler found.")};n.save.handler(i)},i}();i.DiscussionCommandHandler=e;i.registerExtensionSetup(function(n,t){var i;return(n&u.Discussion)!==u.None&&!!t.discussion?(i=new e(t.discussion),[i]):null})})(i=t.Editor||(t.Editor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAH5SURBVDhPpVJNaxNRFD3vzbyZaRqbtIGEkBYXVpeK0m6sdCWIv0JEUBctBcGFf0Nw41bBbYu4Utx0U1ChihWFQgraNqTVmKT5mpnM8943MxHswq8zDO/j3nvuufddsfS0pvEfkMn6zzhGoElPGGn0gggdP/55Hww12Y6LFbfXatomGjYGQ6AfRjiZVzhXdlHK2hgj4347wPsDHx/rPpQl4FoUKERMcGt1TytLYhBqTE/YuDGXR4VWxrfuEJ4SyKhY6Fc6P3z1HdVGACchMRaf5M3kbdxZmBwFMx69bWF9p5ucgELGwsrFSZyaUhQT3xmCfqBxcy6HLGsjpLXapNKSsdQouWM11y/kjGL2M+nYpZRVvEWrP8T9jQYOSS437tOhj9UPbcxPe7h2Pm98itSbhDcm0EJjvxWiTPJPeBJ3LxXgUPoHRDRbcHDl9DiRRSaAUWuHSE+mBEXNeFntmAtBn0vBnMDIpI/3DjU6xZN3LTgkYdREz5F4sd3F6y8945Di8mwGZ4uu2XcGEd7s9rD8rIat+sC8DsM8o20KEri3OIVKTuH59hG61FiPZmBA0g86ET43fexSmRZl5VlIYQi40xOuxNUzWTzebKJH0lMfXqSU4FHggUsHKMVokPiReITZHCv6M/zsDL8pxf1NMEMm82Gk/Srv9wB+ALD6wSjYZ9JHAAAAAElFTkSuQmCC",
e,u;(function(n){n[n.None=0]="None";n[n.Add=1]="Add";n[n.Delete=2]="Delete";n[n.Edit=3]="Edit"})(t.DiffBlockChangeType||(t.DiffBlockChangeType={}));e=t.DiffBlockChangeType;u=function(t){function u(i,f,e){i&&i.createChildLifetime||(i=undefined,f=arguments[0],e=arguments[1]);t.call(this,i);this.controlType=n.ViewModels.ControlType.DiffView;this.blocks=r(f);this.discussionOptions=e?e:u.getDefaultDiscussionOptions();this.lifetimeManager.registerForDispose(new n.ViewModels.Controls.Documents.Editor.DiscussionCommandHandler(this.discussionOptions))}return __extends(u,t),u.getDefaultDiscussionOptions=function(){var n=i({id:i("0"),displayName:i("me"),image:i("")});return{enabled:i(!0),addIcon:i(f),addIconOnLeft:i(!0),threads:r(),author:n}},u}(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=u})(i=t.DiffView||(t.DiffView={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){
var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var f=n.ViewModels,r=f.Controls,e=n.Helpers,o=r.Documents.DiffView,s=r.Documents.Editor,i=ko.observable,u=ko.observableArray,l=15,h,c;(function(n){n[n.Name=0]="Name";n[n.Path=1]="Path";n[n.Type=2]="Type"})(t.DiffListGroupBy||(t.DiffListGroupBy={}));h=t.DiffListGroupBy;c=function(n){function t(t,r,e,s,c,a){t&&t.createChildLifetime||(t=undefined,r=arguments[0],e=arguments[1],s=arguments[2],c=arguments[3],a=arguments[4]);n.call(this,t);this.controlType=f.ControlType.DiffList;r=r||[];this.items=u(r);this.fetchDiff=e;this.groupBy=i(s||h.Name);this.expandLimit=i(c||l);this.expandAll=i(r.length<=this.expandLimit());this.filterPath=i("");this.diffViewModels=u();this.discussionOptions=a?a:o.ViewModel.getDefaultDiscussionOptions();this._ensureFetchCommand();this._ensureItemClickCommand()}return __extends(t,n),t.prototype._ensureFetchCommand=function(){var n=this,i=function(t){var i;return n.fetchDiff&&(i=n.fetchDiff(t.name(),t.
path()),i)?i.then(function(i){return i.blocks?(n.diffViewModels.push(n._createDiffViewModel(n.lifetimeManager,t.path()+t.name(),i.blocks,i.threads)),null):i}):e.reject("No fetch handler found.")},t=function(n){n.fetch||(n.fetch=new s.ExtensionCommand(i))};this.items().forEach(function(n){t(n)});this.items.subscribeArrayAdds(this.lifetimeManager,function(n){t(n)})},t.prototype._ensureItemClickCommand=function(){var n=this,t=function(t){return n.itemClick&&n.itemClick(t.name(),t.path()),e.resolve()};this.click=new s.ExtensionCommand(t)},t.prototype._createDiffViewModel=function(n,t,i,r){var f=this.discussionOptions,e={containerName:t,author:f.author,addIcon:f.addIcon,enabled:f.enabled,addIconOnLeft:f.addIconOnLeft,saveThread:f.saveThread,saveComment:f.saveComment,deleteComment:f.deleteComment,threads:u(r||[])};return new o.ViewModel(n,i,e)},t}(r.Loadable.ViewModel);t.ViewModel=c})(i=t.DiffList||(t.DiffList={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||
(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,e=n.ViewModels.Controls.Documents,u=function(n){function t(t,i,u,f,e,o){n.call(this,t,i,u);this.itemName=r(f||null);this.itemPath=r(e||null);this.isSystemMessage=r(o===!0)}return __extends(t,n),t}(e.Editor.EditorThreadViewModel),f;i.TimelineThreadViewModel=u;f=function(i){function f(t,u,f,e,o){t&&t.createChildLifetime||(t=undefined,u=arguments[0],f=arguments[1],e=arguments[2],o=arguments[3]);i.call(this,t);this.controlType=n.ViewModels.ControlType.DiscussionTimeline;this.discussionOptions=u;this.sortChronologically=r(f!==!1);this.showSystemMessages=r(e!==!1);this.groupFormat=r(o||"M");this.lifetimeManager.registerForDispose(new n.ViewModels.Controls.Documents.Editor.DiscussionCommandHandler(this.discussionOptions));this._ensureItemClickCommand()}return __extends(f,i),f.prototype.addNewThread=function(){var r=this.discussionOptions.
threads().first(function(n){return n.id()<0}),n,i;r||(n=new t.DiscussionThread.DiscussionCommentViewModel(-1,"",this.discussionOptions.author()),n.canDelete(!0),n.isEditable(!0),i=new u(-(new Date).getTime(),[n]),this.discussionOptions.threads.push(i))},f.prototype._ensureItemClickCommand=function(){var i=this,r=function(t){return i.itemClick&&i.itemClick(t.itemPath(),t.position()),n.Helpers.resolve()};this.click=new t.Editor.ExtensionCommand(r)},f}(n.ViewModels.Controls.Loadable.ViewModel);i.ViewModel=f})(i=t.DiscussionTimeline||(t.DiscussionTimeline={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n.ViewModels.Controls.Command.ViewModel,i=ko.observable,f=ko.observableArray,e,o,u;(function(n){n[n.Text=0]="Text";n[n.Custom=1]="Custom";n[n.Bat=2]="Bat";n[n.CoffeeScript=3]="CoffeeScript";n[n.Cpp=
4]="Cpp";n[n.CSharp=5]="CSharp";n[n.CSHtml=6]="CSHtml";n[n.Css=7]="Css";n[n.FSharp=8]="FSharp";n[n.Handlebars=9]="Handlebars";n[n.Html=10]="Html";n[n.Ini=11]="Ini";n[n.Jade=12]="Jade";n[n.Java=13]="Java";n[n.JavaScript=14]="JavaScript";n[n.JSHtm=15]="JSHtm";n[n.Json=16]="Json";n[n.Less=17]="Less";n[n.Lua=18]="Lua";n[n.MarkDown=19]="MarkDown";n[n.Php=20]="Php";n[n.PowerShell=21]="PowerShell";n[n.Python=22]="Python";n[n.Ruby=23]="Ruby";n[n.TypeScript=24]="TypeScript";n[n.VisualBasic=25]="VisualBasic";n[n.Xaml=26]="Xaml";n[n.Xml=27]="Xml"})(t.ContentType||(t.ContentType={}));e=t.ContentType,function(n){n[n.Ignore=0]="Ignore";n[n.Info=1]="Info";n[n.Warning=2]="Warning";n[n.Error=3]="Error"}(t.MarkerSeverity||(t.MarkerSeverity={}));o=t.MarkerSeverity;u=function(u){function e(e,o,s,h,c,l,a,v){h===void 0&&(h={});c===void 0&&(c=null);l===void 0&&(l=t.Extensions.None);a===void 0&&(a=null);v===void 0&&(v=null);e&&e.createChildLifetime||(e=undefined,o=arguments[0],s=arguments[1],h=arguments[2],c=
arguments[3],l=arguments[4],a=arguments[5],v=arguments[6]);u.call(this,e);this.controlType=n.ViewModels.ControlType.Editor;this.contentType=i(o);this.customContentType=i(c);this.content=i(s);this.contentUri=i();this.selectedContent=i("");this.selectedRange=i({startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1});this.markers=f();this.position=i({lineNumber:1,column:1});this.options=i(h);this.dirty=i(!1);this.visible=i(!0);this.save=new r(e,"");this.refresh=new r(e,"");this.autoSaveTimeout=i(0);this.extensions=l;this.extensionOptions=a;this.configuration=v;this.content.extend({notify:"always"});this._setupExtensions()}return __extends(e,u),e.prototype._setupExtensions=function(){for(var i,f=t.getExtensionSetups(),r,n=0,u=f.length;n<u;n++)i=f[n],i&&(r=i(this.extensions,this.extensionOptions),r&&this._addDisposablesToCleanUp(r))},e}(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=u})(i=t.Editor||(t.Editor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={})
)})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=function(i){function u(u,f,e,o,s,h,c){s===void 0&&(s={});h===void 0&&(h=t.Editor.Extensions.None);c===void 0&&(c=null);u&&u.createChildLifetime?i.call(this,u,f,o,s,null,h,c):(u=undefined,f=arguments[0],e=arguments[1],o=arguments[2],s=arguments[3],h=arguments[4],c=arguments[5],s===void 0&&(s={}),h===void 0&&(h=t.Editor.Extensions.None),c===void 0&&(c=null),i.call(this,f,o,s,null,h,c));this.controlType=n.ViewModels.ControlType.DiffEditor;this.originalContent=r(e);this.originalContent.extend({notify:"always"})}return __extends(u,i),u}(n.ViewModels.Controls.Documents.Editor.ViewModel);i.ViewModel=u})(i=t.DiffEditor||(t.DiffEditor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var
i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,u,r;(function(n){n[n.Initial=0]="Initial";n[n.Hover=1]="Hover";n[n.Active=2]="Active"})(t.MouseState||(t.MouseState={}));u=t.MouseState;r=function(t){function r(r){t.call(this,r);this.submit=!1;this.selector=i();this.click=$.noop;this.uri=i();this.text=i();this.visible=i(!0);this.isDefault=i(!1);this.controlType=n.ViewModels.ControlType.Button}return __extends(r,t),r}(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=r})(i=t.Button||(t.Button={}))})(i=t.Forms||(t.Forms={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=n.ViewModels.Forms.Base.LabelAndBalloon,u=function(t){function r(r,u){t.call(this,r,u);this.value=i();this.controlType=n.ViewModels.ControlType.CopyableLabel}return __extends(r,t),r}(r.ViewModel);t.ViewModel=
u})(i=t.CopyableLabel||(t.CopyableLabel={}))})(i=t.Forms||(t.Forms={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=function(t){function r(r){t.call(this,r);this.formatString=i("D");this.controlType=n.ViewModels.ControlType.pcDateTimeCombo;this.value(null)}return __extends(r,t),r}(n.ViewModels.Controls.Forms.EditableCombo.ViewModel);t.ViewModel=r})(i=t.DateTimeCombo||(t.DateTimeCombo={}))})(i=t.Forms||(t.Forms={}))})(i=t.Controls||(t.Controls={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,f,u;(function(n){n[n.Invalid=0]="Invalid";n[n.Pending=1]="Pending";n[n.Uploading=2]="Uploading";n[n.Paused=3]="Paused";n[n.Complete=
4]="Complete"})(i.UploadStatus||(i.UploadStatus={}));f=i.UploadStatus;u=function(t){function i(i){t.call(this,i);this.accept="";this.maxFiles=1;this.sizeLimit=209715200;this.showProgressBars=r(!0);this.files=r([]);this.controlType=n.ViewModels.ControlType.FileUpload}return __extends(i,t),i}(t.ValidatableControl.ViewModel);i.ViewModel=u})(r=i.FileUpload||(i.FileUpload={}))})(i=t.Forms||(t.Forms={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,u=ko.observableArray,f=function(t){function i(i){t.call(this,i);this.groupInfos=[];this.itemsDataArray=[];this.areItemsInitialized=r(!1);this.items=u();this.controlType=n.ViewModels.ControlType.pcGroupDropDown}return __extends(i,t),i}(t.ValidatableControl.ViewModel);i.ViewModel=f})(r=i.GroupDropDown||(i.GroupDropDown={}))})(i=t.Forms||(t.Forms={}))})(i=t.Controls||(t.Controls=
{}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.SpinnerSmall=0]="SpinnerSmall"})(n.Type||(n.Type={}));var t=n.Type})(t=n.ProgressOverlay||(n.ProgressOverlay={}))})(t=n.Forms||(n.Forms={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r;(function(i){var r;(function(i){"use strict";var r=ko.observable,u=function(i){function u(u,f,e){u&&u.createChildLifetime||(u=undefined,f=arguments[0],e=arguments[1]);i.call(this,u);this.controlType=n.ViewModels.ControlType.pcSelector;this.label=r("");this.defaultValue=r();this.showValue=r(!0);this.displayText=r("");this.icon=r();this.locked=r(!1);this.infoBalloonText=r("");this.lockedBalloonText=r("");this.infoBalloonLink=r(new n.ViewModels.Controls.Balloon.Link);this.selectable=new t.Selectable(
{allowUnselect:!1,selectedValue:e!==undefined?e:null,isSelected:f&&f.selectable&&f.selectable.isSelected,isActivated:f&&f.selectable&&f.selectable.isActivated})}return __extends(u,i),u.prototype.dispose=function(){this.selectable&&this.selectable.dispose();i.prototype.dispose.call(this)},u}(n.ViewModels.Controls.ValidatableControl.ViewModel);i.ViewModel=u})(r=i.Selector||(i.Selector={}))})(r=i.Forms||(i.Forms={}))})(r=i.Controls||(i.Controls={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var f=ko.observable,e,r,u;(function(n){n[n.Default=0]="Default";n[n.AfterKeyDown=1]="AfterKeyDown";n[n.KeyPress=2]="KeyPress";n[n.Blur=3]="Blur";n[n.Input=4]="Input"})(i.ValueUpdateTrigger||(i.ValueUpdateTrigger={}));e=i.ValueUpdateTrigger;r=function(){function n(){this.enterPressed=$.noop}return n}();i.Events=r;u=function(t){function i(i){t.call(
this,i);this.placeholder=f();this.events=new r;this.controlType=n.ViewModels.ControlType.pcTextBox;var u=this.valid;this.valid=ko.computed(i,{read:u,write:function(){}})}return __extends(i,t),i}(t.TypableControl.ViewModel);i.ViewModel=u})(r=i.TextBox||(i.TextBox={}))})(i=t.Forms||(t.Forms={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.SortableColumn=1]="SortableColumn";n[n.SelectableRow=2]="SelectableRow";n[n.RightClickableRow=4]="RightClickableRow";n[n.Groupable=8]="Groupable";n[n.EditableRow=16]="EditableRow";n[n.Filterable=32]="Filterable";n[n.ReorderRow=64]="ReorderRow";n[n.ContextMenuShortcut=128]="ContextMenuShortcut";n[n.Pageable=256]="Pageable";n[n.Hierarchical=512]="Hierarchical";n[n.Scrollable=1024]="Scrollable";n[n.Hoverable=2048]="Hoverable";n[n.ResizableColumn=4096]="ResizableColumn"})(n.Extensions||
(n.Extensions={}));var t=n.Extensions})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={}));GroupDropDown=MsPortalFx.ViewModels.Forms.GroupDropDown,function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t,i;(function(n){n[n.Html=1]="Html";n[n.Text=2]="Text";n[n.ShortTime=100]="ShortTime";n[n.LongTime=101]="LongTime";n[n.ShortDate=102]="ShortDate";n[n.LongDate=103]="LongDate";n[n.MonthDay=104]="MonthDay";n[n.YearMonth=105]="YearMonth";n[n.CustomDate=106]="CustomDate";n[n.Uri=107]="Uri";n[n.Icon=108]="Icon";n[n.IconLookup=109]="IconLookup";n[n.TextLookup=110]="TextLookup";n[n.SvgIcon=111]="SvgIcon";n[n.SvgIconLookup=112]="SvgIconLookup";n[n.PercentageBar=113]="PercentageBar";n[n.Number=114]="Number";n[n.HtmlBindings=1e3]="HtmlBindings"})(n.Format||(n.Format={}));t=n.Format,function(n){n[n.Default=0]="Default";n[n.CheckBox=1]="CheckBox";n[n.TextBox=
2]="TextBox";n[n.MultiselectDropDown=3]="MultiselectDropDown";n[n.CheckBoxRowSelection=4]="CheckBoxRowSelection";n[n.DropDown=5]="DropDown";n[n.GroupDropDown=6]="GroupDropDown"}(n.HtmlBindingsType||(n.HtmlBindingsType={}));i=n.HtmlBindingsType})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Bottom=0]="Bottom";n[n.Top=1]="Top"})(n.EditableRowPlacement||(n.EditableRowPlacement={}));var t=n.EditableRowPlacement})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Default=0]="Default";n[n.DateTime=1]="DateTime";n[n.SettingListGroupOrder=9999]="SettingListGroupOrder"}
)(n.SortFunction||(n.SortFunction={}));var t=n.SortFunction})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Sequential=0]="Sequential";n[n.Pageable=1]="Pageable"})(n.PageableType||(n.PageableType={}));var t=n.PageableType})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t,i;(function(n){n[n.Off=0]="Off";n[n.Single=1]="Single";n[n.Multiple=2]="Multiple";n[n.MultipleToggle=3]="MultipleToggle"})(n.RowSelectionMode||(n.RowSelectionMode={}));t=n.RowSelectionMode,function(n){n[n.Default=0]="Default";n[n.Checked=1]="Checked"}(n.SelectionStyle||(n.SelectionStyle={}));i=n.
SelectionStyle})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Unsorted=0]="Unsorted";n[n.Ascending=1]="Ascending";n[n.Descending=2]="Descending"})(n.SortOrder||(n.SortOrder={}));var t=n.SortOrder})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";function p(n,t){return s(function(){var i=t(),r=i?i():[];n.splice.apply(n,[0,n().length].concat(r))})}function h(n,t){return t(n)}function c(n){var t=n();if(!t)throw new Error("An editable grid should block interaction until an EditScope has been loaded.");return t}var w=n.Base,a=w.Diagnostics,r=ko.observable,o=ko.observableArray,
s=ko.computed,v=ko.ignoreDependencies,l=n.ViewModels,i=l.Controls.Lists.Grid.Extensions,u=$.extend,y=n.disposeDisposable,f="",b={itemsSuppliedWithEditableRow:f,editScopeRoot:f,pageableEditableRowMismatch:f,pageableScrollableMismatch:f,missingValidDataNavigator:f,itemsSuppliedWithPageableExtensionWithDataNav:f,blockInteractionUntilEditScopeLoads:f,itemsSuppliedWithScrollableExtensionWithDataNav:f,sortCallbackWithDataNav:f,loadBySkipTakeMissing:f,loadByContinuationTokenMissing:f,scrollableEditableRowMismatch:f},e=FxImpl.getErrorMap(b),k=function(f){function w(a,y,w,b){var k=this,nt,li,ai,vi,yi,pt,pi,bt,kt,tt,ut,wt,dt,ft,ct,lt,gt,ni,ti,ri,ui;a&&a.createChildLifetime||(a=undefined,y=arguments[0],w=arguments[1],b=arguments[2]);f.call(this,a);this.controlType=l.ControlType.pcGrid;this.addEmptyRow=r();this.summary=r();this.columns=o();this.resetCallback=r();this.noRowsMessage=r(n.Resources.Strings.ViewModels.Controls.noRowsMessage);this.sortByList=o();this.showHeader=!0;this._resetHandler=null;
this._addCreatedLocked=!1;this._pendingResetCallbackPromise=null;this._pendingResetCallbackSubscription=null;var it=this.items=y||o(),at=this.createdItems=o(),d=b||{},g=this.extensionsOptions={},rt=[],fi=w&i.ContextMenuShortcut,et=w&i.EditableRow,ei=w&i.Filterable,oi=w&i.Groupable,si=w&i.Hierarchical,hi=w&i.Hoverable,vt=w&i.Pageable,ci=w&i.ReorderRow,yt=w&i.ResizableColumn,ot=w&i.RightClickableRow,st=w&i.Scrollable,ht=w&i.SelectableRow,ii=w&i.SortableColumn;yt||(w|=yt=i.ResizableColumn);et&&(w|=ht=i.SelectableRow,w|=ot=i.RightClickableRow);fi&&(w|=ot=i.RightClickableRow);ot&&(w|=ht=i.SelectableRow);ht&&(w|=ot=i.RightClickableRow);this.extensions=w;et&&(nt=g.editableRow=u({},d.editableRow));ei&&(li=g.filterable=u({},d.filterable));oi&&(ai=g.groupable=u({},d.groupable));si&&(vi=g.hierarchical=u({},d.hierarchical));hi&&(yi=g.hoverable=u({},d.hoverable));vt&&(pt=g.pageable=u({},d.pageable));ci&&(pi=g.reorderRow=u({},d.reorderRow));yt&&(bt=g.resizableColumn=u({},d.resizableColumn));ot&&(g.controlCommands=
d.controlCommands);st&&(kt=g.scrollable=u({},d.scrollable));ht&&(tt=g.selectableRow=u({},d.selectableRow),g.onRowClicked=d.onRowClicked);ii&&(ut=g.sortableColumn=u({},d.sortableColumn));et&&(wt=nt.editScope,wt&&y&&e.itemsSuppliedWithEditableRow(),wt&&(this._editScope=wt,nt.editScope=null,nt.getItems||(nt.getItems=function(n){return ko.isObservable(n.root)&&Array.isArray(n.root())&&n.root.splice||e.editScopeRoot(),n.root}),rt.push(p(it,function(){var n=k._editScope();return n&&h(n,nt.getItems)})),rt.push(p(at,function(){var n=k._editScope();return n&&n.getCreated(h(n,nt.getItems))})),dt=s(function(){return!!k._editScope()}),rt.push(dt),u(nt,{create:function(){return k._create(c(k._editScope),nt.getItems)},addCreated:function(n){k._addCreated(c(k._editScope),nt.getItems,n)},markForDelete:function(n){k._markForDelete(c(k._editScope),n)},enableValidation:dt}),nt.enableRowAdd!==!1&&this._addInitialCreatedRow(this._editScope,nt.getItems)));vt&&(et&&e.pageableEditableRowMismatch(),st&&e.pageableScrollableMismatch(
),ft=pt.dataNavigator,ft||e.missingValidDataNavigator(),ft&&y&&e.itemsSuppliedWithPageableExtensionWithDataNav(),ct=pt.type,ct!==t.PageableType.Pageable&&ct===t.PageableType.Sequential,ct!==t.PageableType.Sequential||ft.loadByContinuationToken||e.loadByContinuationTokenMissing(),ct!==t.PageableType.Pageable||ft.loadBySkipTake||e.loadBySkipTakeMissing(),this._resetHandler=function(){return k.reset()},ft.addResetNavigationListener(this._resetHandler));yt&&st&&!bt.resizeToPercent&&(bt.resizeToPercent=r(!1));ii&&(lt=ut.dataNavigator,lt||(lt=ut.dataNavigator=vt&&pt.dataNavigator||st&&kt.dataNavigator),lt&&ut.sortCallback&&e.sortCallbackWithDataNav(),lt||ut.sortCallback||(ut.sortCallback=function(i){var r=it().slice(0);i&&i.length&&r&&r.length&&r.sort(function(r,u){var f=0;return i.some(function(i){var e=r[i.itemKey],o=u[i.itemKey];return f=n.Util.compare(e,o),f&&i.sortOrder===t.SortOrder.Descending&&(f=-f),f!==0}),f});it(r)}));st&&(et&&e.scrollableEditableRowMismatch(),vt&&e.pageableScrollableMismatch(
),gt=kt.dataNavigator,gt&&(y&&e.itemsSuppliedWithScrollableExtensionWithDataNav(),this._resetHandler=function(){return k.reset()},gt.addResetNavigationListener(this._resetHandler)));ht&&(ni=it,n.isUndefined(tt.selectionMode)&&(tt.selectionMode=t.RowSelectionMode.Single),n.isUndefined(tt.leaveSelectionOnDeactivation)&&(tt.leaveSelectionOnDeactivation=tt.selectionMode!==t.RowSelectionMode.Single),at&&(ti=s(function(){return it().concat(at())}),ni=ti,rt.push(ti)),this.selectableData=new l.SelectableSet(ni,tt.itemMatchesSelection,tt.createSelection,tt.initialSelection,tt.supplyCommands,!0,tt.leaveSelectionOnDeactivation));ri=it.map(this.lifetimeManager,function(n,t){return v(function(){return k._createMetadataForItem(n,t)})});ui=at.map(this.lifetimeManager,function(n,t){return v(function(){return k._createMetadataForItem(n,t)})});this.rowMetadata=o();rt.push(s(function(){k.rowMetadata(ri().concat(ui()))}));this._addDisposablesToCleanUp(rt)}return __extends(w,f),w.prototype.getRowMetadata=function(
n){return this.rowMetadata().first(function(t){return t.item===n})},w.prototype.reset=function(){var t=this,i=this.resetCallback(),n;return i?Q(i()):(this._pendingResetCallbackPromise||(n=Q.defer(),this._pendingResetCallbackPromise=n.promise,this._pendingResetCallbackSubscription=this.resetCallback.subscribe(function(i){i&&(t._pendingResetCallbackPromise?Q(i()).then(function(t){n.resolve(t)},function(t){n.reject(t)}).finally(function(){y(t._pendingResetCallbackSubscription);t._pendingResetCallbackSubscription=null;t._pendingResetCallbackPromise=null}):n.reject())})),this._pendingResetCallbackPromise)},w.prototype.dispose=function(){if(this._resetHandler){var n=this.extensionsOptions.pageable;n&&n.dataNavigator&&n.dataNavigator.removeResetNavigationListener(this._resetHandler);this._resetHandler=null}this._pendingResetCallbackSubscription=null;this._pendingResetCallbackPromise&&(this._pendingResetCallbackPromise=null);y(this._pendingResetCallbackSubscription,this.selectableData);f.prototype.
dispose.call(this)},w.prototype._createMetadataForItem=function(n,t){var u={item:t,cssClass:r("")},e,f;return this.extensions&i.EditableRow&&(e=this.extensionsOptions.editableRow,e&&(u.editState=c(this._editScope).getEditState(t))),this.extensions&i.SelectableRow&&(f=this.extensionsOptions.selectableRow,u.selected=r(!1),u.disabled=r(!1),u.activated=r(null),u.activatedInfo=r(null),u.useDefaultActivation=r(!0),f&&f.linkProvider&&(u.link=f.linkProvider(n,t))),this.extensions&i.Groupable&&(u.groupId=r("")),u},w.prototype._create=function(t,i){var r=t.create(h(t,i)),u=this.extensionsOptions.editableRow;return u&&u.created&&u.created(r),this.addEmptyRow(r),n.Helpers.resolve(r)},w.prototype._addCreated=function(n,t,i){if(!this._addCreatedLocked)try{this._addCreatedLocked=!0;var r=this.createdItems().some(function(n){return n&&i&&n===i});i&&!r&&n.addCreated(i,h(n,t))}finally{this._addCreatedLocked=!1}},w.prototype._markForDelete=function(n,t){var r=function(n){return n===t},i=this.items().first(
r);if(i){n.markForDelete(i);return}if(i=this.createdItems().first(r),i){n.revert(i);return}a.Log.writeEntry(a.LogEntryLevel.Error,"Shell","The item marked for deletion could not be found.")},w.prototype._addInitialCreatedRow=function(n,t){var f=this,i=function(n){f._create(n,t)},r=n(),u;r?i(r):u=n.subscribe(function(n){n&&(i(n),u.dispose())})},w}(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=k})(i=t.Grid||(t.Grid={}))})(i=t.Lists||(t.Lists={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,s=ko.observableArray,u,e,f,o;(function(n){n[n.Selectable=1]="Selectable";n[n.Groupable=2]="Groupable";n[n.ContextMenu=4]="ContextMenu";n[n.Filterable=8]="Filterable"})(i.Extensions||(i.Extensions={}));u=i.Extensions,function(n){n[n.Collection=0]="Collection";n[n.Ascending=1]="Ascending";n[n.Descending=2]="Descending"}(i.
GroupOrder||(i.GroupOrder={}));e=i.GroupOrder,function(n){n[n.Single=0]="Single";n[n.Multiple=1]="Multiple"}(i.SelectionMode||(i.SelectionMode={}));f=i.SelectionMode;o=function(t){function i(i,o,h){o===void 0&&(o=0);h===void 0&&(h={});i&&i.createChildLifetime||(i=undefined,o=arguments[0],h=arguments[1],o===void 0&&(o=0),h===void 0&&(h={}));t.call(this,i);this.controlType=n.ViewModels.ControlType.pcListView;this.items=s();this.events=$.noop;this.noItemsMessage=r("");this.extensions=o;this.extensionOptions=h;this.extensions&u.Selectable&&(this.extensionOptions.selectable||(this.extensionOptions.selectable={}),(this.extensionOptions.selectable.selectionMode===undefined||this.extensionOptions.selectable.selectionMode===null)&&(this.extensionOptions.selectable.selectionMode=f.Single),this.extensionOptions.selectable.selectedItem||this.extensionOptions.selectable.selectionMode!==f.Single||(this.extensionOptions.selectable.selectedItem=r()),this.extensionOptions.selectable.selection||(this.extensionOptions.
selectable.selection=new n.ViewModels.SelectableSet(this.items)),(this.extensionOptions.selectable.activateOnSelected===undefined||this.extensionOptions.selectable.activateOnSelected===null)&&(this.extensionOptions.selectable.activateOnSelected=!0));this.extensions&u.Groupable&&(this.extensionOptions.groupable||(this.extensionOptions.groupable={}),this.extensionOptions.groupable.groupKey||(this.extensionOptions.groupable.groupKey=r("")),this.extensionOptions.groupable.headerTemplate||(this.extensionOptions.groupable.headerTemplate=null),this.extensionOptions.groupable.groups||(this.extensionOptions.groupable.groups=null),this.extensionOptions.groupable.noGroupLabel||(this.extensionOptions.groupable.noGroupLabel=""),this.extensionOptions.groupable.order||(this.extensionOptions.groupable.order=r(e.Collection)))}return __extends(i,t),i}(t.Loadable.ViewModel);i.ViewModel=o})(r=i.ListView||(i.ListView={}))})(i=t.Lists||(t.Lists={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels=
{}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=function(t){function i(i,r,u){i&&i.createChildLifetime?t.call(this,i,r,u):(i=undefined,r=arguments[0],u=arguments[1],t.call(this,r,u));this.controlType=n.ViewModels.ControlType.Gallery}return __extends(i,t),i}(t.ListView.ViewModel);i.ViewModel=r})(i=t.Gallery||(t.Gallery={}))})(i=t.Lists||(t.Lists={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,u,f;(function(n){n[n.Selectable=1]="Selectable";n[n.OnDemandLoadable=2]="OnDemandLoadable";n[n.RightClickable=4]="RightClickable";n[n.LoadableByContinuationToken=8]="LoadableByContinuationToken"})(t.Extensions||(t.Extensions={}));u=t.Extensions;f=function(t){function f(u,f,e,o){u&&u.createChildLifetime||(u=undefined,
f=arguments[0],e=arguments[1],o=arguments[2]);t.call(this,u);this.controlType=n.ViewModels.ControlType.pcTreeView;this.padding=i(16);this.alwaysExpanded=i(!1);this.htmlTemplates=[];this.toggleNodeCallback=i();this._tokenStorage={};this.pathSeparator="/";this.items=f||r();this.extensions=e||0;this.extensionsOptions=o;this._processItems(this.items);this._selectableExists&&this._setupSelectable();this._loadableExists&&this._setupOnDemandLoadable()}return __extends(f,t),f.prototype.loadMoreNode=function(n,t){return this.extensionsOptions.loadableByContinuationToken.loadMoreNode(n,t)},f.prototype.syncToken=function(n,t){this._tokenStorage[n]=t},f.prototype.getTokenByPath=function(n){return this._tokenStorage[n]},f.prototype.dispose=function(){t.prototype.dispose.call(this)},f.prototype.expandNode=function(n){var t=this.toggleNodeCallback();t&&t(n,!0)},f.prototype.collapseNode=function(n){var t=this.toggleNodeCallback();t&&t(n,!1)},f.prototype.toggleNode=function(n,t){t===undefined&&(t=!n.metadata.
expanded());var i=this.toggleNodeCallback();i&&i(n,t)},Object.defineProperty(f.prototype,"_selectableExists",{get:function(){return(this.extensions&u.Selectable)>0&&!!this.extensionsOptions.selectable},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"_loadableExists",{get:function(){return(this.extensions&u.OnDemandLoadable)>0&&!!this.extensionsOptions.onDemandLoadable},enumerable:!0,configurable:!0}),f.prototype._processItems=function(n){var t=this;n().forEach(function(n){t._processItem(n)});n.subscribeArrayAdds(this.lifetimeManager,function(n){t._processItem(n)});this.lifetimeManager.registerForDispose(n.subscribe(function(n){n.forEach(function(n){t._processItem(n)})}))},f.prototype._processItem=function(n){n.metadata||(n.metadata={});n.metadata.disabled||(n.metadata.disabled=i(!1));n.metadata.expanded||(n.metadata.expanded=i(!1));this._selectableExists&&!n.metadata.selected&&(n.metadata.selected=i(!1));this._selectableExists&&!n.metadata.selectable&&(n.metadata.selectable=
i(!0));this._selectableExists&&!n.metadata.focused&&(n.metadata.focused=i(!1));this._loadableExists&&!n.metadata.loadable&&(n.metadata.loadable=i());n.items||(n.items=r());this._processItems(n.items)},f.prototype._setupSelectable=function(){var n=this;this.selectableData={selectedItem:i(),selectedPath:i()};this.lifetimeManager.registerForDispose(this.selectableData.selectedPath.subscribe(function(t){var i=n._findItemByPath(n.items,t,n.pathSeparator);i&&n.selectableData.selectedItem(n.extensionsOptions.selectable.createSelection(i,t))}))},f.prototype._setupOnDemandLoadable=function(){var n=this;this.onDemandLoadableData={loadingPath:i()};this.onDemandLoadableData.loadingPath.extend({notify:"always"});this.lifetimeManager.registerForDispose(this.onDemandLoadableData.loadingPath.subscribe(function(t){var i=n._findItemByPath(n.items,t,n.pathSeparator);i&&n.extensionsOptions.onDemandLoadable.loadItem(i,t)}))},f.prototype._findItemByPath=function(n,t,i){var u,o,s,e,h=n,f=null;if(t)for(e=t.split(
i),u=0,o=e.length;u<o;u++)if(s=e[u].toLowerCase(),f=h().filter(function(n){return s===n.text().toLowerCase()})[0],f)h=f.items||r();else break;return f},__decorate([n.Composition.ProxyCompatibilityMode],f)}(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=f})(i=t.TreeView||(t.TreeView={}))})(i=t.Lists||(t.Lists={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.initObservable,u=function(t){function i(i,u){u===void 0&&(u={});t.call(this,i);this.controlType=n.ViewModels.ControlType.Markdown;this.markdown=r(u.markdown,"")}return __extends(i,t),i}(t.Base.ViewModel);i.ViewModel=u})(i=t.Markdown||(t.Markdown={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=function(t){function i(i,r){t.call(this,i);this.controlType=
n.ViewModels.ControlType.PartPinner;this.options=r}return __extends(i,t),i}(t.Base.ViewModel);i.ViewModel=r})(i=t.PartPinner||(t.PartPinner={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=function(t){function i(i){t.call(this,i);this.show=r(!1);this.darkText=r(!1);this.controlType=n.ViewModels.ControlType.PreviewTag}return __extends(i,t),i}(t.Base.ViewModel);i.ViewModel=u})(i=t.PreviewTag||(t.PreviewTag={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=function(t){function i(i){t.call(this,i);this.autoRefreshContent=!0;this.refreshContainerOnResize=!0;this.scrollIntoViewVertical=!0;this.scrollIntoViewHorizontal=!0;this.fitContainer=!1;this.controlType=n.ViewModels.ControlType.Scrollbar}return __extends(
i,t),i}(t.Loadable.ViewModel);i.ViewModel=r})(i=t.Scrollbar||(t.Scrollbar={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.initObservable,u=n.initValue,f=function(t){function i(i,f){t.call(this,i);this.controlType=n.ViewModels.ControlType.SearchBox;this.defaultText=f.defaultText;this.submit=f.submit;this.update=f.update;this.placeholder=r(f.placeholder,n.Resources.Strings.ViewModels.Controls.search);this.updateFrequency=u(f.updateFrequency,400);this._msPortalFxresetTrigger=r()}return __extends(i,t),i.prototype.reset=function(){if(this._msPortalFxresetTrigger())return this._msPortalFxresetTrigger()();Q()},i}(t.Base.ViewModel);i.ViewModel=f})(i=t.SearchBox||(t.SearchBox={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";
var r=ko.observable,e=ko.observableArray,u,f;(function(n){n[n.Small=2]="Small";n[n.Large=3]="Large"})(i.Size||(i.Size={}));u=i.Size;f=function(t){function i(i){t.call(this,i);this.items=e([]);this.maxItems=r();this.size=r(u.Small);this.controlType=n.ViewModels.ControlType.Settings}return __extends(i,t),i}(t.Loadable.ViewModel);i.ViewModel=f})(i=t.Settings||(t.Settings={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=function(t){function i(i,r){r===void 0&&(r={});t.call(this,i);this.controlType=n.ViewModels.ControlType.SimpleButton;this.onClick=r.onClick;this.text=r.text||"";this.disabled=r.disabled||!1;this.primary=r.primary||!1}return __extends(i,t),i}(t.Base.ViewModel);i.ViewModel=r})(i=t.SimpleButton||(t.SimpleButton={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(
t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,f=ko.observableArray,u=function(t){function i(i){t.call(this,i);this.value=r();this.unit=r();this.caption=r();this.infoBalloon=r();this.hideInfoBalloon=r(!1);this.controlType=n.ViewModels.ControlType.SingleSetting}return __extends(i,t),i}(t.Loadable.ViewModel);i.ViewModel=u})(i=t.SingleSetting||(t.SingleSetting={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.initObservableArray,f,u;(function(n){n[n.Orange=0]="Orange";n[n.DarkOrchid=1]="DarkOrchid";n[n.YellowGreen=2]="YellowGreen";n[n.MediumBlue=3]="MediumBlue"})(i.Colors||(i.Colors={}));f=i.Colors;u=function(t){function i(i,u){u===void 0&&(u={});t.call(this,i);this.controlType=n.ViewModels.ControlType.SpecComparisonTable;this.headers=r(u.headers,[]);this.rows=r(u.rows,[])}return __extends(i,t),i}(t.Base.ViewModel);i.ViewModel=
u})(i=t.SpecComparisonTable||(t.SpecComparisonTable={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=function(t){function i(i,r){r===void 0&&(r={});t.call(this,i);this.controlType=n.ViewModels.ControlType.TextBlock;this.text=r.text||""}return __extends(i,t),i}(t.Base.ViewModel);i.ViewModel=r})(i=t.TextBlock||(t.TextBlock={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,u=function(t){function i(i,u){u===void 0&&(u={});t.call(this,i);this.controlType=n.ViewModels.ControlType.TerminalEmulator;this.input=r().extend({notify:"always"});this.write=r().extend({notify:"always"});this.resize=u.resize||r({cols:100,rows:80})}return __extends(i,t),i}(t.Base.ViewModel);i.ViewModel=u})
(r=i.TerminalEmulator||(i.TerminalEmulator={}))})(i=t.Unsupported||(t.Unsupported={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=ko.computed,i=[],e="azc-validatableControl-none",o="azc-validatableControl-invalid",s="azc-validatableControl-pending",u="azc-validatableControl-valid-validated",h="data-validatable-control-valid",l="data-validatable-control-validation-state",f,c;i[0]="none";i[1]="invalid";i[2]="valid";i[3]="pending";f=function(){function t(){this._destroyIds=[]}return t.prototype._checkExistsOrRegisterDestroyId=function(n){var t=this._destroyIds.indexOf(n)<0;return t&&this._destroyIds.push(n),!t},t.prototype.isDestroyed=function(){return this._destroyIds.length>0},t.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(null)||(this._errorMessage&&(this._errorMessage.dispose(),this._errorMessage=null),this._disposeSubscriptions(
))},t.prototype.initialize=function(n,t){var i=this;this._element=n;this._validatable={enableValidation:t.enableValidation,valid:t.valid,validationState:t.validationState,validators:t.validators};this._errorMessage||(this._errorMessage=r(function(){var u="",r=i._validatable.validators(),n,t;if(r)for(n=0;n<r.length;n++)if(t=r[n],!t.valid()&&t.message()){u=t.message();break}return u}));this._subscriptions||this._initializeSubscriptions()},t.prototype.onErrorMessageChanged=function(){},t.prototype.onValidationStateChanged=function(){},t.prototype._initializeSubscriptions=function(){var n=this;this._subscriptions=this._subscriptions||[];this._disposeSubscriptions();this.onValidationStateChanged(this._validatable.validationState());this._subscriptions.push(this._validatable.validationState.subscribe(function(t){n.onValidationStateChanged(t)}));this.onErrorMessageChanged(this._errorMessage());this._subscriptions.push(this._errorMessage.subscribe(function(t){n.onErrorMessageChanged(t)}))},t.prototype.
_disposeSubscriptions=function(){var t=this._subscriptions;this._subscriptions=[];t&&n.disposeDisposable(t)},t}();t.ValidationPlacementBase=f;c=function(n){function t(){n.apply(this,arguments);this._input=null;this._valid=r($.noop)}return __extends(t,n),t.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(n.prototype.dispose.call(this),this._element&&this._element.removeClass([e,o,s,u].join(" ")),this._input&&this._input.removeAttr(h),this._valid&&(this._valid.dispose(),this._valid=null))},t.prototype.initialize=function(t,i){var f=this;n.prototype.initialize.call(this,t,i);this._valid=r(function(){return f._validatable.enableValidation()&&f._validatable.validators().length>0&&f._validatable.validationState()===2});this._subscriptions.push(this._valid.subscribe(function(n){f._element.toggleClass(u,n)}));this._input=this._element.find("input, select, textarea");this._validatable.validationState.notifySubscribers(this._validatable.validationState());
this._setValidationAttribute(this._validatable.validationState())},t.prototype.onValidationStateChanged=function(n){this._element.toggleClass(e,n===0);this._element.toggleClass(o,n===1);this._element.toggleClass(s,n===3);this._element.toggleClass(u,this._valid());this._setValidationAttribute(n)},t.prototype._setValidationAttribute=function(n){this._input&&(this._input.attr(h,n===2||this._validatable.validators().length===0),this._input.attr(l,i[n]))},t}(f);t.Css=c})(i=t.ValidationPlacements||(t.ValidationPlacements={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function e(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var vt=n.Base,yt=vt.Diagnostics,i=n.isNullOrUndefined,s=ko.observable,pt=new yt.Log("MsPortalFx.ViewModels.Controls.Validators"),u=jQuery,r=function(){function n(n){var t=this;this.message=s(n);this.validationState=
s(0);this.validate=s();this.isEmptyValid=s(!1);this.valid=ko.computed(function(){return t.validationState()===2});this._sub=this.validate.subscribe(function(n){t.validationState(t._validate(n))})}return n.prototype.dispose=function(){this._sub&&(this._sub.dispose(),this._sub=null)},n.prototype._validate=function(){return 0},n}(),f,h,y,p,a,w,b,k,d,g,nt,o,tt,it,rt,c,v,ut,ft,et,ot,l,st,ht,ct,lt,at;t.Validator=r;t.escapeRegExpOperators=e;f=function(n){function t(t,i){n.call(this,i||"The value must match the expression '"+t+"'.");this._expression=t}return __extends(t,n),t.prototype._validate=function(n){return(i(n)||u.trim(n)==="")&&this.isEmptyValid()?2:this._expression.test(n||"")?2:1},t}(r);t.Match=f;h=function(n){function t(t,i){n.call(this,i||"The value must not match the expression '"+t+"'.");this._expression=t}return __extends(t,n),t.prototype._validate=function(n){return(i(n)||u.trim(n)==="")&&this.isEmptyValid()?2:this._expression.test(n||"")?1:2},t}(r);t.NotMatch=h;y=function(n){function t(
t,i){n.call(this,new RegExp(e(t),"i"),i||"The value must contain at least one case insensitive match of '"+t+"'.")}return __extends(t,n),t}(f);t.Contains=y;p=function(n){function t(t,i){n.call(this,new RegExp(e(t),"i"),i||"The value must not contain a case insensitive match of '"+t+"'.")}return __extends(t,n),t}(h);t.NotContains=p;a=function(n){function t(t,i){n.call(this,new RegExp("["+e(t)+"]",""),i||"The value must contain at least one character from '"+t+"'.")}return __extends(t,n),t}(f);t.ContainsCharacters=a;w=function(n){function t(t,i){n.call(this,new RegExp("["+e(t)+"]",""),i||"The value must not contain characters from '"+t+"'.")}return __extends(t,n),t}(h);t.NotContainsCharacters=w;b=function(n){function t(t){n.call(this,/[0-9]/,t||"The value must have at least one digit from 0 to 9.")}return __extends(t,n),t}(f);t.HasDigit=b;k=function(n){function t(t){n.call(this,/[A-Za-z]/,t||"The value must have at least one upper or lower case letter from A to Z or a to z.")}return __extends(
t,n),t}(f);t.HasLetter=k;d=function(n){function t(t){n.call(this,/[A-Z]/,t||"The value must have at least one upper case letter from A to Z.")}return __extends(t,n),t}(f);t.HasUpperCaseLetter=d;g=function(n){function t(t){n.call(this,/[a-z]/,t||"The value must have at least one lower case letter from a to z.")}return __extends(t,n),t}(f);t.HasLowerCaseLetter=g;nt=function(n){function t(t){n.call(this,"!@#$%^&*()_+-={}|[]\\:\";'<>,.?/~`",t||"The value must contain at least one punctuation character from '!@#$%^&*()_+-={}|[]\\:\";'<>,.?/~`'.")}return __extends(t,n),t}(a);t.HasPunctuation=nt;o=function(n){function t(t,i){n.call(this,i);this._compareTo=u.isFunction(t)?t:function(){return t}}return __extends(t,n),t.prototype._validate=function(n){return this._compare(n,this._compareTo())?2:1},t.prototype._compare=function(){return!1},t}(r);t.Compare=o;tt=function(n){function t(t,i){n.call(this,t,i||"The value must equal the provided value.")}return __extends(t,n),t.prototype._compare=function(
n,t){return n===t},t}(o);t.Equals=tt;it=function(n){function t(t,i){n.call(this,t,i||"The value must equal the provided value.")}return __extends(t,n),t.prototype._compare=function(n,t){return n.toLowerCase()===t.toLowerCase()},t}(o);t.CaseInsensitiveCompare=it;rt=function(n){function t(t,i){n.call(this,t,i||"The value must equal the provided value.")}return __extends(t,n),t.prototype._compare=function(n,t){return n.toLocaleLowerCase()===t.toLocaleLowerCase()},t}(o);t.LocaleAwareCaseInsensitiveCompare=rt;c=function(n){function t(t,i,r){n.call(this,r||"The value must be between "+t+" and "+i+" characters long.");this._min=t;this._max=i}return __extends(t,n),t.prototype._validate=function(n){var t,r;return(n=u.trim(n),(i(n)||u.trim(n)==="")&&this.isEmptyValid())?2:(t=0,i(n)||(t=n.length),r=0,i(this._min)||(r=this._min),t>=r&&(i(this._max)||t<=this._max))?2:1},t}(r);t.LengthRange=c;v=function(n){function t(t,i){n.call(this,t,null,i||"The value must have a length of at least "+t+".")}return __extends(
t,n),t}(c);t.MinLength=v;ut=function(n){function t(t,i){n.call(this,0,t,i||"The value must have a length of at most "+t+".")}return __extends(t,n),t}(c);t.MaxLength=ut;ft=function(n){function t(t){n.call(this,1,t||"The value should not be empty.")}return __extends(t,n),t}(v);t.Required=ft;et=function(n){function t(t){n.call(this,t||"The input value must be a non-null value.")}return __extends(t,n),t.prototype._validate=function(n){return i(n)?1:2},t}(r);t.NotNull=et;ot=function(n){function t(t){n.call(this,t||"The input value must be a number.")}return __extends(t,n),t.prototype._validate=function(n){return(i(n)||u.trim(n)==="")&&this.isEmptyValid()?2:!i(n)&&n!==""?isNaN(+n)?1:2:1},t}(r);t.Numeric=ot;l=function(n){function t(t,i,r){var e=t,f;u.isFunction(t)||(e=function(){return t});f=i;u.isFunction(i)||(f=function(){return i});n.call(this,r||"The value must be between "+e()+" and "+f()+".");this.min=e;this.max=f}return __extends(t,n),t.prototype._validate=function(n){var t;return(i(n)||
u.trim(n)==="")&&this.isEmptyValid()?2:(i(n)||n==="")&&i(this.min())&&i(this.max())?2:!i(n)&&(typeof n=="string"||typeof n=="number")&&n!==""&&(t=+n,!isNaN(t))?!i(this.min())&&t<this.min()?1:!i(this.max())&&t>this.max()?1:2:1},t}(r);t.ValueRange=l;st=function(n){function t(t,i){n.call(this,t,null,i||"The value must be at least "+t+".")}return __extends(t,n),t}(l);t.MinValue=st;ht=function(n){function t(t,i){n.call(this,null,t,i||"The value must be at most "+t+".")}return __extends(t,n),t}(l);t.MaxValue=ht;ct=function(){function n(n,t){this.promise=n;this.asyncRequestId=t}return n}();lt=function(t){function i(n,i,r){t.call(this,n);this._validationHandler=i;this._context=r||null;this._pendingAsyncRequests=[];this._latestValidationAsyncRequestId=null}return __extends(i,t),i.prototype._validate=function(t){var r=this,u=!1,i;return this._validationHandler?(this._latestValidationAsyncRequestId=n.getUniqueId(),i=this._validationHandler(t,this._context),!i)?(pt.error("Extension validation handler did not return a promise"),
3):(this._pendingAsyncRequests.push(new ct(i,this._latestValidationAsyncRequestId)),i.then(function(n){r._updateValidationResult(i,n,2)},function(n){r._updateValidationResult(i,n,1)}).finally(function(){u=!0}),u)?(this._removePendingAsyncRequest(i),this.validationState()):3:2},i.prototype._updateResult=function(n,t){n&&this.message(n);this.validationState(t)},i.prototype._updateValidationResult=function(n,t,i){var r;r=this._pendingAsyncRequests.length<=1?this._pendingAsyncRequests.pop():this._removePendingAsyncRequest(n);r&&r.asyncRequestId===this._latestValidationAsyncRequestId&&this._updateResult(t,i)},i.prototype._removePendingAsyncRequest=function(n){for(var t=0,i=-1,r=null,t=0;t<this._pendingAsyncRequests.length;t++)if(this._pendingAsyncRequests[t].promise===n){i=t;break}return i>=0?(r=this._pendingAsyncRequests[i],this._pendingAsyncRequests.splice(i,1),r):null},i}(r);t.CustomAsyncValidator=lt;at=function(n){function t(t){n.call(this,t||"The value is invalid.")}return __extends(t,
n),t.prototype._validate=function(){return 1},t}(r);t.Invalid=at})(i=t.Validators||(t.Validators={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Default=0]="Default";n[n.AfterKeyDown=1]="AfterKeyDown";n[n.KeyPress=2]="KeyPress";n[n.Blur=3]="Blur";n[n.Input=4]="Input"})(n.ValueUpdateTrigger||(n.ValueUpdateTrigger={}));var t=n.ValueUpdateTrigger})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,u=ko.observableArray,ht=n.shallowCopyFromObject,ct=0,e,a,lt,at,vt,c,w,yt,pt,b,wt,k,bt,kt,v,yi,dt,gt,d,ni,y,ti,ii,l,ri,ui,fi,ei,oi,g,si,nt,o,tt,hi,s,f,it,p,rt,ut,h,ft,et,ci,ot,st,li,ai,vi;(function(n){n[n.Line=0]="Line";n[n.Area=1]="Area";n[n.Scatter=2]="Scatter";n[n.StackedBar=3]="StackedBar";n[
n.GroupedBar=4]="GroupedBar";n[n.SplitBar=5]="SplitBar";n[n.StackedArea=6]="StackedArea"})(i.ChartType||(i.ChartType={}));e=i.ChartType,function(n){n[n.Linear=0]="Linear";n[n.Monotone=1]="Monotone";n[n.StepAfter=2]="StepAfter"}(i.Interpolation||(i.Interpolation={}));a=i.Interpolation,function(n){n[n.Solid=0]="Solid";n[n.Dotted=1]="Dotted";n[n.Dashed=2]="Dashed";n[n.Trendline=3]="Trendline";n[n.UsageThreshold=4]="UsageThreshold";n[n.WarningThreshold=5]="WarningThreshold"}(i.LineStyle||(i.LineStyle={}));lt=i.LineStyle,function(n){n[n.ShowLineWithPoints=0]="ShowLineWithPoints";n[n.HideLine=1]="HideLine";n[n.ShowLineWithXHoverPoint=2]="ShowLineWithXHoverPoint"}(i.LineState||(i.LineState={}));at=i.LineState,function(n){n[n.Solid=0]="Solid";n[n.CrossHatching=1]="CrossHatching";n[n.DiagonalHatching=2]="DiagonalHatching";n[n.DottedHatching=3]="DottedHatching"}(i.AreaHatchingPattern||(i.AreaHatchingPattern={}));vt=i.AreaHatchingPattern,function(n){n[n.Stacked=0]="Stacked";n[n.Grouped=1]="Grouped";
n[n.Split=2]="Split"}(i.BarChartType||(i.BarChartType={}));c=i.BarChartType,function(n){n[n.None=0]="None";n[n.Top=1]="Top";n[n.Right=2]="Right";n[n.Bottom=3]="Bottom";n[n.Left=4]="Left"}(i.AxisPosition||(i.AxisPosition={}));w=i.AxisPosition,function(n){n[n.All=0]="All";n[n.XSlider_Off=1]="XSlider_Off";n[n.XSlider_noCallout=2]="XSlider_noCallout";n[n.ChartArea_Off=4]="ChartArea_Off";n[n.ChartArea_noClick=8]="ChartArea_noClick";n[n.ChartArea_noHover=16]="ChartArea_noHover"}(i.InteractionBehavior||(i.InteractionBehavior={}));yt=i.InteractionBehavior,function(n){n[n.None=0]="None";n[n.Top=1]="Top";n[n.Right=2]="Right";n[n.Bottom=3]="Bottom";n[n.Left=4]="Left"}(i.LegendPosition||(i.LegendPosition={}));pt=i.LegendPosition,function(n){n[n.Max=0]="Max";n[n.Min=1]="Min";n[n.First=2]="First";n[n.Last=3]="Last";n[n.Every=4]="Every";n[n.Custom=5]="Custom"}(i.DataLabelContext||(i.DataLabelContext={}));b=i.DataLabelContext,function(n){n[n.Callout=0]="Callout";n[n.Badge=1]="Badge"}(i.DataLabelStyle||
(i.DataLabelStyle={}));wt=i.DataLabelStyle,function(n){n[n.Ordinal=0]="Ordinal";n[n.Linear=1]="Linear";n[n.Time=2]="Time"}(i.Scale||(i.Scale={}));k=i.Scale,function(n){n[n.None=0]="None";n[n.Low=1]="Low";n[n.High=2]="High"}(i.AxisLabelPosition||(i.AxisLabelPosition={}));bt=i.AxisLabelPosition,function(n){n[n.GreaterThan=0]="GreaterThan";n[n.LessThan=1]="LessThan"}(i.ConditionOperator||(i.ConditionOperator={}));kt=i.ConditionOperator,function(n){n[n.General=0]="General";n[n.HorizontalLine=1]="HorizontalLine";n[n.VerticalLine=2]="VerticalLine";n[n.Uniform=3]="Uniform"}(i.SeriesType||(i.SeriesType={}));v=i.SeriesType,function(n){n[n.Default=0]="Default";n[n.Point=2]="Point";n[n.MultiplePointsSingleSeries=3]="MultiplePointsSingleSeries";n[n.MultiplePointsMultipleSeries=4]="MultiplePointsMultipleSeries"}(i.MetricRuleScope||(i.MetricRuleScope={}));yi=i.MetricRuleScope,function(n){n[n.AllTogether=0]="AllTogether";n[n.AllSeparately=1]="AllSeparately";n[n.SingleSeries=2]="SingleSeries"}(i.MetricRuleAggregationScope||
(i.MetricRuleAggregationScope={}));dt=i.MetricRuleAggregationScope,function(n){n[n.CurrentXValue=0]="CurrentXValue";n[n.CurrentYValue=1]="CurrentYValue";n[n.MinY=2]="MinY";n[n.MaxY=3]="MaxY";n[n.AverageY=4]="AverageY";n[n.SumY=5]="SumY";n[n.Count=6]="Count";n[n.CustomValue=7]="CustomValue"}(i.MetricRuleAggregationType||(i.MetricRuleAggregationType={}));gt=i.MetricRuleAggregationType;d=function(){function n(){this.context=r(b.Max);this.style=r(wt.Callout);this.formatter=r(null)}return n}();i.DataLabel=d;ni=function(n){function t(){n.apply(this,arguments);this.chartItems=u();this.context=r(b.Custom)}return __extends(t,n),t}(d);i.CustomDataLabel=ni;y=function(){function t(t,i){this.name=r("");this.scale=r(k.Ordinal);this.reverseDomain=r(!1);this.ticks=r(0);this.position=r(w.Bottom);this.positionIndex=r(0);this.showAxis=r(!0);this.autoScaleUnit=r(!0);this.showName=r(!1);this.showLabel=r(bt.Low);this.labelPadding=r(50);this.rotateLabel=r(0);this.showAxisLine=r(!1);this.showTickMarks=r(!1);this.
showGridLines=r(!1);this.inputFormat=r("");this.outputFormat=r("");this.formatOptions=r(null);this.xSliderOutputFormat=r(null);this.xSliderFormatOptions=r(null);this.displayLabelFormatter=r("");this.xSliderCalloutDisplayFormatter=r("");this.min=r(null);this.max=r(null);this.unit=r(n.UnitConversion.Unit.None);this.displaySIUnit=r(!1);this.defaultAxisPadding=r(null);this.customAxisPadding=r(null);t&&this.position(t);i&&this.scale(i)}return t}();i.Axis=y;ti=function(){function n(n,t,i,r,u,f,e){this.years=n;this.months=t;this.days=i||0;this.hours=r||0;this.minutes=u||0;this.seconds=f||0;this.milliseconds=e||0}return n}();i.DateSpan=ti;ii=function(){function n(n){this.value=n}return n}();i.NumberSpan=ii;l=function(){function n(){this.type=r(v.General);this.name=r(String(ct=ct+1&65535))}return n}();i.SeriesBase=l;ri=function(n){function t(){n.apply(this,arguments);this.values=u();this.xAxisName=r("");this.yAxisName=r("")}return __extends(t,n),t}(l);i.Series=ri;ui=function(n){function t(){n.apply(
this,arguments);this.type=r(v.Uniform);this.startXValue=r(null);this.span=r(null);this.yValues=u();this.xAxisName=r("");this.yAxisName=r("")}return __extends(t,n),t}(l);i.UniformSeries=ui;fi=function(n){function t(){n.apply(this,arguments);this.type=r(v.HorizontalLine);this.value=r(null);this.axisName=r("")}return __extends(t,n),t}(l);i.LineSeries=fi;ei=function(){function n(n){n?this._initOptions(n):this._initLegacyDefaults()}return n.prototype._initOptions=function(n){ht(this,n,["scope","scopeSeriesName","metrics"])},n.prototype._initLegacyDefaults=function(){this.scope=r(null);this.scopeSeriesName=r(null);this.metrics=u()},n}();i.MetricRule=ei;oi=function(){function n(n){n?this._initOptions(n):this._initLegacyDefaults()}return n.prototype._initOptions=function(n){ht(this,n,["aggregationScope","aggregationType","aggregationSeriesName","showBarColor","colorCode","hatchingPattern","formatOptions","title","unit","customValue","defaultInfoBalloon"])},n.prototype._initLegacyDefaults=function(
){this.aggregationScope=r(dt.SingleSeries);this.aggregationType=r(gt.AverageY);this.aggregationSeriesName=r(null);this.showBarColor=r(!0);this.colorCode=r(null);this.hatchingPattern=r(null);this.outputFormat=r(null);this.formatOptions=r(null);this.title=r(null);this.unit=r(null);this.customValue=r(null);this.defaultInfoBalloon=r(null)},n}();i.MetricRuleMetric=oi;g=function(){function n(){this.chartViewIndex=r(null);this.seriesViewIndex=r(null)}return n}();i.SeriesId=g;si=function(n){function t(){n.apply(this,arguments);this.chartItems=u()}return __extends(t,n),t}(g);i.SeriesSubset=si;nt=function(){function n(){}return n}();i.Events=nt;o=function(){function n(){}return n}();i.SeriesChartEvents=o;tt=function(){function n(){}return n}();i.BarChartEvents=tt;hi=function(){function n(){this.seriesName=r("");this.conditionOperator=r(kt.GreaterThan);this.interpolation=r(a.Linear)}return n}();i.RenderingCondition=hi;s=function(){function n(){this.seriesName=r("");this.displayName=r("");this.cssClass=
r("");this.dataLabels=u();this.showTooltip=r(!1);this.tooltipFormatter=r("Series: '{0}' Point: {1} Value: {2}");this.renderingConditions=u();this.selectable=r(!0);this.hoverable=r(!0);this.hideFromLegend=r(!1);this.autoGenerated=!1}return n}();i.SeriesView=s;f=Object.create(null);it=function(n){function t(){n.apply(this,arguments);this.interpolation=r(a.Linear);this.lineStyle=r(lt.Solid);this.showTooltip=r(!1);this.showDataPoints=r(!0)}return __extends(t,n),t}(s);i.LineChartSeriesView=it;p=function(n){function t(){n.apply(this,arguments);this.interpolation=r(a.Linear);this.areaHatchingPattern=r(vt.Solid);this.showTooltip=r(!1)}return __extends(t,n),t}(s);i.AreaChartSeriesView=p;rt=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(p);i.StackedAreaChartSeriesView=rt;ut=function(n){function t(){n.apply(this,arguments);this.radius=r(2);this.showTooltip=r(!1)}return __extends(t,n),t}(s);i.ScatterChartSeriesView=ut;h=function(){function n(){this.chartType=r(undefined);
this.seriesView=u()}return n.prototype.newSeriesView=function(){return null},n}();i.View=h;ft=function(n){function t(){n.apply(this,arguments);this.chartType=r(t.defaultChartType);this.seriesView=u();this.events=new o}return __extends(t,n),t.prototype.newSeriesView=function(n){return f[this.chartType()](n)},t.defaultChartType=e.Line,t}(h);i.LineChartView=ft;f[ft.defaultChartType]=function(n){var t=new it;return n&&t.seriesName(n.name()),t};et=function(n){function t(){n.apply(this,arguments);this.chartType=r(t.defaultChartType);this.seriesView=u();this.events=new o}return __extends(t,n),t.prototype.newSeriesView=function(n){return f[this.chartType()](n)},t.defaultChartType=e.Area,t}(h);i.AreaChartView=et;f[et.defaultChartType]=function(n){var t=new p;return n&&t.seriesName(n.name()),t};ci=function(){function n(){this.enableSparseSeries=r(!0);this.chartType=r(undefined);this.seriesView=u()}return n.prototype.newSeriesView=function(){return null},n}();i.StackedChartView=ci;ot=function(){function n(
){this.chartType=r(n.defaultChartType);this.seriesView=u();this.events=new o;this.lineState=r(at.ShowLineWithPoints);this.enableSparseSeries=r(!0)}return n.prototype.newSeriesView=function(n){return f[this.chartType()](n)},n.defaultChartType=e.StackedArea,n}();i.StackedAreaChartView=ot;f[ot.defaultChartType]=function(n){var t=new rt;return n&&t.seriesName(n.name()),t};st=function(n){function t(){n.apply(this,arguments);this.chartType=r(t.defaultChartType);this.seriesView=u();this.events=new o}return __extends(t,n),t.prototype.newSeriesView=function(n){return f[this.chartType()](n)},t.defaultChartType=e.Scatter,t}(h);i.ScatterChartView=st;f[st.defaultChartType]=function(n){var t=new ut;return n&&t.seriesName(n.name()),t};li=function(n){function t(t){n.call(this);this.barPaddingRatio=r(.3);this.enableSparseSeries=r(!0);this.barChartType=r(c.Stacked);this.xAxisSpan=r(null);this.events=new tt;this.barChartType(t);switch(t){case c.Stacked:this.chartType(e.StackedBar);break;case c.Grouped:this.
chartType(e.GroupedBar);break;case c.Split:this.chartType(e.SplitBar)}}return __extends(t,n),t.prototype.newSeriesView=function(n){return f[this.chartType()](n)},t}(h);i.BarChartView=li;f[e.StackedBar]=f[e.GroupedBar]=f[e.SplitBar]=function(n){var t=new s;return n&&t.seriesName(n.name()),t};ai=function(){function n(n,t){this.xValue=n;this.yValue=t}return n}();i.ChartItem=ai;vi=function(t){function i(f){var e=this;t.call(this,f);this.title=r("");this.showTitle=r(!1);this.width=r(0);this.height=r(0);this.noDataMessage="No data to display";this.series=u();this.xAxis=new y;this.yAxis=new y(w.Left,k.Linear);this.secondaryXAxes=u();this.secondaryYAxes=u();this.views=u();this.legendPosition=r(pt.None);this.interactionBehavior=r(yt.All);this.autogenerateSeriesViews=r(!0);this.events=new nt;this.seriesSelections=u();this.seriesHovers=u();this.hoveredID=u();this.metricsRules=u();this.enableTrackXSlider=r();this.xSliderCoordinate=r();this.xSliderFilterHoverThreshold=r();this.metrics=new n.ViewModels.
Controls.Visualization.Metrics.ViewModel(f);this.controlType=n.ViewModels.ControlType.Chart;this.xAxis.showTickMarks(!0);this.yAxis.labelPadding(i.defaultYAxisLabelPadding);ko.reactor(this.lifetimeManager,function(){if(e.autogenerateSeriesViews()){var n=e.series()||[],t=e.views();t.forEach(function(t){var r=t.seriesView.peek(),u=r.filter(function(n){return n.autoGenerated}),f=u.filter(function(t){return n.some(function(n){return n.name.peek()===t.seriesName.peek()})}),e=u.filter(function(n){return f.indexOf(n)<0}),o=n.filter(function(n){var t=n.name();return!f.some(function(n){return t===n.seriesName.peek()})});e.forEach(function(n){return r.remove(n)});o.forEach(function(n){var u=i.getDefaultSeriesViewCreator(t.chartType())(n,t);u.autoGenerated=!0;r.push(u)});t.seriesView(r)})}})}return __extends(i,t),i.getDefaultSeriesViewCreator=function(n){return f[n]},i.defaultYAxisLabelPadding=38,i}(t.Loadable.ViewModel);i.ViewModel=vi})(r=i.Chart||(i.Chart={}))})(i=t.Visualization||(t.Visualization=
{}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){var r;(function(i){"use strict";var u=n,s=ko.observable,h=ko.observableArray,f,r,e,o;(function(n){n[n.Circle=1]="Circle"})(i.EntityType||(i.EntityType={}));f=i.EntityType;r=function(){function n(n){this.entityType=n}return n}();i.Entity=r;e=function(n){function t(t){n.call(this,f.Circle);this.accesses=t.accesses;this.location=t.location;this.cssColorClass=t.cssColorClass;this.city=t.city;this.country=t.country}return __extends(t,n),t}(r);i.Circle=e;o=function(n){function t(t,i){n.call(this,t);this.controlType=u.ViewModels.ControlType.MapV2;u.isNullOrUndefined(i)&&(i={});this.entities=i.entities||h();this.showMetrics=i.showMetrics||s(!0)}return __extends(t,n),t}(t.Base.ViewModel);i.ViewModel=o})(r=i.MapV2||(i.MapV2={}))})(r=i.Unsupported||(i.Unsupported={}))})(i=t.Visualization||(t.Visualization={
}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,s,u,h,f,c,e,o,l,a,v;t.RelatedBandOverflowId="RelatedBandOverflowId";t.DependantBandOverflowId="DependantBandOverflowId";t.InternalBandOverflowId="InternalBandOverflowId";t.LinkedBandOverflowId="LinkedBandOverflowId";t.SmallSizeOverflowId="SmallSizeOverflowId",function(n){n[n.Small=0]="Small";n[n.Large=1]="Large"}(t.Size||(t.Size={}));s=t.Size,function(n){n[n.None=0]="None";n[n.Default=1]="Default";n[n.Info=2]="Info";n[n.Overflow=3]="Overflow";n[n.Resource=4]="Resource";n[n.ResourceGroup=5]="ResourceGroup";n[n.Website=6]="Website";n[n.ScaleGroup=7]="ScaleGroup";n[n.Sites=8]="Sites";n[n.DatabaseServer=9]="DatabaseServer";n[n.Database=10]="Database";n[n.TFSProject=11]="TFSProject";n[n.TFSAccount=12]="TFSAccount";n[n.VirtualMachine=13]="VirtualMachine";
n[n.Disks=14]="Disks";n[n.Nics=15]="Nics";n[n.IPAddress=16]="IPAddress";n[n.AvailabilitySet=17]="AvailabilitySet";n[n.ADAccount=18]="ADAccount"}(t.ResourceIconType||(t.ResourceIconType={}));u=t.ResourceIconType,function(n){n[n.None=0]="None";n[n.ResourceGroup=1]="ResourceGroup";n[n.Related=2]="Related";n[n.Dependant=3]="Dependant";n[n.Internal=4]="Internal";n[n.Linked=5]="Linked"}(t.ResourceBand||(t.ResourceBand={}));h=t.ResourceBand,function(n){n[n.None=0]="None";n[n.Success=1]="Success";n[n.Warning=2]="Warning";n[n.Error=3]="Error";n[n.Information=4]="Information";n[n.Stopped=5]="Stopped";n[n.Canceled=6]="Canceled";n[n.Critical=7]="Critical";n[n.Disabled=8]="Disabled";n[n.Failed=9]="Failed";n[n.Pending=10]="Pending";n[n.Unknown=11]="Unknown"}(t.ResourceStatus||(t.ResourceStatus={}));f=t.ResourceStatus;c=function(){function n(){this.name=i("");this.id=i("");this.description=i("");this.descriptionUri=i("");this.type=i("");this.iconType=i(u.Resource);this.count=i(1);this.resourceGroupName=
i("");this.status=i(f.Success);this.statusMessage=i("");this.relatedResources=r();this.dependantResources=r();this.internalResources=r();this.linkedResources=r();this.icon=i()}return n}();t.Resource=c;e=function(){function n(){this.name=i("");this.id=i("");this.iconType=i(u.ResourceGroup);this.icon=i();this.resources=r();this.linkedResources=r()}return n}();t.ResourceGroup=e;o=function(){function n(){this.resourceClick=null;this.resourceMouseEnter=null;this.resourceMouseLeave=null;this.resourceOverflowClick=null;this.plotAreaClick=null}return n}();t.Events=o;l=function(){function n(){this.name="";this.id="";this.description="";this.type="";this.iconType=u.None;this.count=1;this.resourceGroupName="";this.status=f.None;this.statusMessage=""}return n}();t.EventData=l;a=function(){function n(){this.name="";this.id="";this.resourceGroupName="";this.type="";this.iconType=u.None;this.resourceBand=h.Internal}return n}();t.ResourceOverflowEventData=a;v=function(t){function u(u,f){u&&u.createChildLifetime||
(u=undefined,f=arguments[0]);t.call(this,u);this.controlType=n.ViewModels.ControlType.CsmTopology;this.resourceGroup=i(new e);this.showResourceView=i(!1);this.resourceInFocus=i("");this.items=r();this.contextMenuOption={commandGroup:null,commandGroupOwner:null};this.size=i(s.Large);this.width=i(535);this.height=i(355);this.events=new o;var h=function(n,t){return n.id()===t.id},c=function(n){var t={};return t.id=n.id(),t},l=null;f&&(f.createSelection&&(c=f.createSelection),f.itemMatchesSelection&&(h=f.itemMatchesSelection),f.initialSelection&&(l=f.initialSelection));this.selection=new n.ViewModels.SelectableSet(this.items,h,c,l)}return __extends(u,t),u.prototype.dispose=function(){this.selection.dispose();t.prototype.dispose.call(this)},u}(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=v})(i=t.CsmTopology||(t.CsmTopology={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var
t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,u=ko.observableArray,f,e;(function(n){n[n.Auto=0]="Auto";n[n.CenterOnlySmall=1]="CenterOnlySmall";n[n.CenterOnlyMedium=2]="CenterOnlyMedium";n[n.CenterOnlyLarge=3]="CenterOnlyLarge";n[n.Small=4]="Small";n[n.Medium=5]="Medium";n[n.MediumLarge=6]="MediumLarge";n[n.Large=7]="Large"})(i.GaugeSize||(i.GaugeSize={}));f=i.GaugeSize;e=function(t){function i(i){t.call(this,i);this.gaugeSize=r(f.Auto);this.groupInfos=u();this.itemsDataArray=u();this.itemSetting=r();this.resetItems=r(!0);this.valueInitialized=!1;this.total=r(100);this.startOffset=r(-90);this.totalFormat=r("{0}");this.unitFormat=r("");this.infoFormat=r("");this.numberFormatOptions=r({minimumFractionDigits:0,maximumFractionDigits:1});this.hoverInfoFormat=r("{0} {1}{2}");this.selectedInfoFormat=r("{0}/{1}{2}");this.hoveredUnit=r("%");this.disableSelectOnClick=r(!1);this.showCenter=r(!0);this._msPortalFxRerenderTrigger=r(0);this.controlType=
n.ViewModels.ControlType.Donut}return __extends(i,t),i.prototype.render=function(){this._msPortalFxRerenderTrigger(this._msPortalFxRerenderTrigger.peek()+1)},i}(t.Loadable.ViewModel);i.ViewModel=e})(r=i.Donut||(i.Donut={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,u=ko.observableArray,f=function(){function n(n){this.limit=i();this.cssClass=i();this.limit(n)}return n}(),r;t.Threshold=f;r=function(t){function r(r){t.call(this,r);this.value=i();this.unit=i();this.caption=i();this.footerValue=i();this.footerUnit=i();this.footerCaption=i();this.gaugeValue=i(0);this.gaugeMaxValue=i(100);this.gaugePresentationArc=i(270);this.gaugeThresholds=u();this.controlType=n.ViewModels.ControlType.Gauge}return __extends(r,t),r}(n.ViewModels.Controls.SingleSetting.ViewModel);t.ViewModel=
r})(i=t.Gauge||(t.Gauge={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,h=ko.observableArray,c=n.Base.Internal,l=n.Helpers,a=n.ViewModels,v=c.ObservableMap,y=a.SelectableSet,et=l.resolve,p=l.reject,w=ko.unwrap,u=et(),e,b,k,d,g,nt,ot,tt,it,o,st,rt,f,s,ut,ft;(function(n){n[n.None=0]="None";n[n.Horizontal=1]="Horizontal";n[n.Vertical=2]="Vertical"})(i.GraphScrollBars||(i.GraphScrollBars={}));e=i.GraphScrollBars,function(n){n[n.AlwaysVisible=0]="AlwaysVisible";n[n.AlwaysHidden=1]="AlwaysHidden";n[n.AppearWhenNodesOutsideOfTheView=2]="AppearWhenNodesOutsideOfTheView"}(i.GraphScrollBarsVisibilityMode||(i.GraphScrollBarsVisibilityMode={}));b=i.GraphScrollBarsVisibilityMode,function(n){n[n.Blade=0]="Blade";n[n.Document=1]="Document";n[n.Document2=2]="Document2";n[n.Document3=3]=
"Document3"}(i.GraphEditorSkinStyle||(i.GraphEditorSkinStyle={}));k=i.GraphEditorSkinStyle,function(n){n[n.NodeCenter=0]="NodeCenter";n[n.NodePort=1]="NodePort"}(i.EdgeConnectionStrategy||(i.EdgeConnectionStrategy={}));d=i.EdgeConnectionStrategy,function(n){n[n.None=0]="None";n[n.MoveEntities=1]="MoveEntities";n[n.AddRemoveEntities=2]="AddRemoveEntities"}(i.GraphEditorCapabilities||(i.GraphEditorCapabilities={}));g=i.GraphEditorCapabilities,function(n){n[n.Rebuild=0]="Rebuild";n[n.Incremental=1]="Incremental"}(i.EntityRenderMode||(i.EntityRenderMode={}));nt=i.EntityRenderMode,function(n){n[n.Normal=1]="Normal";n[n.Strong=2]="Strong"}(i.EdgeStrength||(i.EdgeStrength={}));ot=i.EdgeStrength,function(n){n[n.Single=1]="Single";n[n.Double=2]="Double"}(i.EdgeType||(i.EdgeType={}));tt=i.EdgeType,function(n){n[n.Solid=1]="Solid";n[n.Dotted=2]="Dotted";n[n.Dashed=3]="Dashed"}(i.EdgeStyle||(i.EdgeStyle={}));it=i.EdgeStyle,function(n){n[n.None=1]="None";n[n.Arrow=2]="Arrow";n[n.Circle=3]="Circle"}
(i.EdgeMarker||(i.EdgeMarker={}));o=i.EdgeMarker,function(n){n[n.GraphNode=0]="GraphNode";n[n.GraphEdge=1]="GraphEdge"}(i.GraphEntityType||(i.GraphEntityType={}));st=i.GraphEntityType;rt=function(){function n(n,t,i,r,u){u===void 0&&(u=null);this.id=n;this.entityType=t;this.detailBlade=i;this.detailBladeInputs=r;u&&(this.extension=u)}return n}();i.SelectedGraphEntity=rt;f=function(){function t(t){t===void 0&&(t=n.getUniqueId());this.commandGroup=r("");this.selected=r(!1);this.selectable=r(!0);this.id=r(t);this.dimmed=r(!1)}return t}();i.GraphEntity=f;s=function(n){function t(t,i){n.call(this);this.strength=r(1);this.type=r(tt.Single);this.style=r(it.Solid);this.startMarker=r(o.Circle);this.endMarker=r(o.Arrow);this.startNodePadding=r(7);this.endNodePadding=r(7);this.selectable(!1);this.startNodeId=r(t.id());this.endNodeId=r(i.id())}return __extends(t,n),t}(f);i.GraphEdge=s;ut=function(n){function t(t){var i,r;(n.call(this),this.extensionViewModel=null,this.extensionTemplate="",this.detailBlade=
null,this.detailBladeInputs=null,this.initialRect={x:0,y:0,height:85,width:85},i=this.initialRect,t)&&(r=undefined,t.x!==r&&(i.x=t.x),t.y!==r&&(i.y=t.y),t.height!==r&&(i.height=t.height),t.width!==r&&(i.width=t.width))}return __extends(t,n),t}(f);i.GraphNode=ut;ft=function(n){function t(f,o){var l=this,w;o===void 0&&(o=k.Blade);n.call(this,f);this.scrollBars=r(e.Horizontal|e.Vertical);this.scrollBarsVisibilityMode=r(b.AlwaysVisible);this.edgeConnectionStrategy=r(d.NodeCenter);this.editorCapabilities=r(g.None);this.graphNodes=new v;this.edges=new v;this.gridResolution=r(10);this.widgetAttached=r(!1);this.layoutChanged=r(0);this.getLayoutNoOverlaps=r(null);this.setNodeRects=r(function(){throw new Error("Function called before widget was initialized.");});this.getNodeRects=r(function(n){n===void 0&&(n=[]);throw new Error("Function called before widget was initialized.");});this.rectSelectionMode=r(!1);this.entityRenderMode=r(nt.Rebuild);this.zoomToFit=r(function(){return u});this.zoomToFitPadding=
r(100);this.zoomIn=r(function(){return u});this.zoomOut=r(function(){return u});this.zoomTo100Percent=r(function(){return u});this.focusOnNode=r(function(){return Q(!0)});this.focusOnEdge=r(function(){return Q(!0)});this.bringRectIntoView=r(function(){return Q(!0)});this.disableMouseWheelZoom=r(!1);this.enableLineage=r(!1);this.controlType=a.ControlType.Graph;this.styleSkin=o;var tt=new c.ObservableMapUnion(this.lifetimeManager,this.graphNodes,this.edges),it=t.itemMatchesSelection,rt=t.createSelection;this.selectableSet=new y(h(),it,rt);w=this.selectableSet;this.selection=new y(h(),it,rt);w.selectedItems.subscribe(f,function(n){var t=[];n.forEach(function(n){var i=tt.lookup(n.id);i&&t.push(i)});l.selection.selectedItems(t)});w.activatedItems.subscribe(f,function(n){var t=[];n.forEach(function(n){var i=tt.lookup(n.id);i&&t.push(i)});l.selection.activatedItems(t)});this.addEdge=function(n){return u.then(function(){try{var i=l.graphNodes,t,u,f;if(n)if(i.lookup(n.startNodeId))if(i.lookup(n.
endNodeId))u={id:r(n.startNodeId)},f={id:r(n.endNodeId)},t=new s(u,f),l.edges.put(t.id(),t);else throw"The edge end node is not present in the list of the view model graph nodes.";else throw"The edge start node is not present in the list of the view model graph nodes.";else throw"The edge is null or undefined.";}catch(e){return p(e)}})};this.deleteEntities=function(n,t){return u.then(function(){try{i.GraphEntitiesDeletion.run(l,n,t)}catch(r){return p(r)}})}}return __extends(t,n),t.itemMatchesSelection=function(n,t){return w(n.id)===w(t.id)},t.createSelection=function(n){return n},t}(t.Loadable.ViewModel);i.ViewModel=ft})(r=i.Graph||(i.Graph={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=function(){function t(){}return t.run=function(t,i,r){if(i.length>0||r.length>0){var f=new n.Base.
Internal.ObservableMap,u=new n.Base.Internal.ObservableMap;i.forEach(function(n){if(t.graphNodes.lookup(n.id))u.put(n.id,n);else throw"The node "+n.id+" is not present at the graphNodes map.";});r.forEach(function(n){if(t.edges.lookup(n.id))f.put(n.id,n);else throw"The edge "+n.id+" is not present at the edges map.";});(f.count>0||u.count>0)&&t.edges.modify(function(){t.edges.toArray().forEach(function(n){(u.lookup(n.startNodeId())||u.lookup(n.endNodeId()))&&f.put(n.id(),{id:n.id()});f.lookup(n.id())&&t.edges.remove(n.id())})});u.count>0&&t.graphNodes.modify(function(){u.forEach(function(n){t.graphNodes.remove(n.id)})});f.dispose();u.dispose()}},t}();t.GraphEntitiesDeletion=i})(i=t.Graph||(t.Graph={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,a=70,v=120,y=16,p=16,o,f,
w,s,h,u,c,e,l;(function(n){n[n.HexagonLayout=1]="HexagonLayout"})(i.Extensions||(i.Extensions={}));o=i.Extensions;f=function(){function n(n,t){this.latitude=n;this.longitude=t}return n}();i.Location=f,function(n){n[n.Solid=0]="Solid";n[n.AnimatedDashed=1]="AnimatedDashed"}(i.LinkType||(i.LinkType={}));w=i.LinkType;s=function(){function n(){this.id="";this.location=new f(0,0);this.metadata=new u}return n}();i.Item=s,function(n){n[n.Source=0]="Source";n[n.Target=1]="Target";n[n.IconOnly=2]="IconOnly"}(i.ItemType||(i.ItemType={}));h=i.ItemType;u=function(){function n(){this.icon=r({type:0,data:"",palette:0});this.iconWidth=r(p);this.iconHeight=r(y)}return n}();i.ItemMetadata=u;c=function(n){function t(){n.apply(this,arguments);this.type=h.Target;this.text=r("");this.hasFill=r(!1);this.itemScale=r(1)}return __extends(t,n),t}(u);i.HexagonLayoutItemMetadata=c;e=function(){function n(){}return n}();i.Events=e;l=function(t){function i(i,u,f,s){u===void 0&&(u=r([]));f===void 0&&(f=0);s===void 0&&
(s={});i&&i.createChildLifetime||(i=undefined,u=arguments[0],f=arguments[1],s=arguments[2],u===void 0&&(u=r([])),f===void 0&&(f=0),s===void 0&&(s={}));t.call(this,i);this.controlType=n.ViewModels.ControlType.Map;this.events=new e;this.width=r(505);this.height=r(319);this.items=u;this.extensions=f;this.extensionOptions=s;this.extensions&o.HexagonLayout&&(this.extensionOptions.hexagonLayout=$.extend(this._getDefaultOptions(),this.extensionOptions.hexagonLayout))}return __extends(i,t),i.prototype.dispose=function(){t.prototype.dispose.call(this)},i.prototype._getDefaultOptions=function(){return{showLinks:r(!1),links:r(),rows:r(a),columns:r(v)}},i}(t.Loadable.ViewModel);i.ViewModel=l})(r=i.Map||(i.Map={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,h=ko.observableArray,f,e,
u,c,o,s;(function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium";n[n.Large=2]="Large";n[n.XLarge=3]="XLarge";n[n.ExtraSmall=4]="ExtraSmall"})(i.Size||(i.Size={}));f=i.Size,function(n){n[n.Horizontal=0]="Horizontal";n[n.Vertical=1]="Vertical"}(i.Orientation||(i.Orientation={}));e=i.Orientation,function(n){n[n.Top=1]="Top";n[n.Left=2]="Left";n[n.Right=4]="Right";n[n.Bottom=8]="Bottom"}(i.Alignment||(i.Alignment={}));u=i.Alignment,function(n){n[n.Solid=0]="Solid";n[n.CrossHatching=1]="CrossHatching";n[n.DiagonalHatching=2]="DiagonalHatching";n[n.DottedHatching=3]="DottedHatching"}(i.HatchingPattern||(i.HatchingPattern={}));c=i.HatchingPattern;o=function(t){function i(){t.apply(this,arguments);this.barCssClass=r("");this.showBarColor=r(!0);this.hatchingPattern=r(n.ViewModels.Controls.Visualization.Metrics.HatchingPattern.Solid);this.unitAlignment=r(u.Right);this.captionAlignment=r(u.Top);this.hide=r(!1);this.prioritized=r(!1)}return __extends(i,t),i}(n.ViewModels.Controls.SingleSetting.ViewModel);
i.SingleMetric=o;s=function(t){function i(i){t.call(this,i);this.items=h();this.orientation=r(e.Horizontal);this.size=r(f.Large);this.visible=r(!0);this.controlType=n.ViewModels.ControlType.Metrics}return __extends(i,t),i}(t.Loadable.ViewModel);i.ViewModel=s})(r=i.Metrics||(i.Metrics={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=n.initObservable,u,f;(function(n){n[n.Inside=0]="Inside";n[n.Outside=1]="Outside"})(i.LabelPosition||(i.LabelPosition={}));u=i.LabelPosition;f=function(t){function i(i,f){t.call(this,i);this.controlType=n.ViewModels.ControlType.RangeSelection;f=f||{};this.labelPosition=r(f.labelPosition,u.Outside);this.rangeSelection=r(f.rangeSelection)}return __extends(i,t),i}(t.Base.ViewModel);i.ViewModel=f})(r=i.RangeSelection||(i.RangeSelection={}))})(i=t.Visualization||
(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r;(function(i){"use strict";var e=n.ViewModels.Controls.DockedBalloon,o=n.Base.Images.StatusBadge,r=n.initObservable,s=n.initObservableArray,u=n.initValue,h=function(n){function t(t,i){n.call(this,t);i=i||{};this.id=u(i.id,"");this.text=u(i.text,"");this.xValue=u(i.xValue,null);this.icon=r(i.icon,o.Info());this.className=r(i.className,"");this.coordinate=r(i.coordinate);this.visible=r(i.visible,!1)}return __extends(t,n),t}(n.ViewModels.Controls.Base.ViewModel),f;i.Badge=h;f=function(i){function u(t,u){i.call(this,t);u=u||{};this.badges=s(u.badges);this.height=r(u.height,10);this.balloon=r(u.balloon,new e.ViewModel(this.lifetimeManager));this.visible=r(u.visible,!1);this.selectableSet=r(null);this.controlType=n.ViewModels.ControlType.PairedTimelineBadges}return __extends(u,i),u.prototype.pushAllBadges=
function(n,i,r,u){i===void 0&&(i=!1);this.badges(n);i&&this.selectableSet(new t.SelectableSet(this.badges,r,u))},u}(n.ViewModels.Controls.Base.ViewModel);i.ViewModel=f})(r=i.PairedTimelineBadges||(i.PairedTimelineBadges={}))})(r=i.Visualization||(i.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var o=n.ViewModels.Controls,u=o.Visualization,s=u.Chart,f=u.Metrics,h=u.RangeSelection,c=u.PairedTimelineBadges,r=ko.observable,l=function(n){function t(t,i){n.call(this,t);this.id=i;this.chart=new s.ViewModel(t);this.chartHeight=r(1);this.noDataMessage=r("");this.cssClass=r("");this.chart.disabled=this.disabled;this.buttonSelectables=[]}return __extends(t,n),t.prototype.dispose=function(){n.prototype.dispose.call(this);this.chart.dispose()},t}(t.Loadable.ViewModel),e;i.PairedTimelineChart=l;e=function(t){function i(i,u,e,o,s)
{t.call(this,i);this.controlType=n.ViewModels.ControlType.PairedTimeline;this.ptCharts=u;this.extensionOptions=e;this.enableMetricsRules=r(!1);this.enableRangeSelection=r(!1);this.metricsOptions={orientation:r(f.Orientation.Vertical),size:r(f.Size.ExtraSmall),visible:r(!0),disabled:r(!1),loading:r(!1)};this.buttonOptions=[{enabled:r(!1),text:r(""),visibility:r(1)}];this.rangeSelectionViewModel=new h.ViewModel(i,o);this.badgesViewModel=new c.ViewModel(i,s)}return __extends(i,t),i}(t.Loadable.ViewModel);i.ViewModel=e})(r=i.PairedTimeline||(i.PairedTimeline={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var o=n.Base.Diagnostics,u=new o.Log("MsPortalFx/ViewModels/Controls/ProgressBar"),f=ko.observable,r,e;(function(n){n[n.InProgress=0]="InProgress";n[n.Error=1]="Error";n[n.Warning=2]="Warning";
n[n.Success=3]="Success";n[n.Indeterminate=4]="Indeterminate";n[n.IndeterminateVertical=5]="IndeterminateVertical"})(i.StatusType||(i.StatusType={}));r=i.StatusType;e=function(t){function i(i){var e=this;t.call(this,i);this.valuePercentage=f(0);this.status=f(r.InProgress);this.controlType=n.ViewModels.ControlType.ProgressBar;this.valuePercentage.subscribe(i,function(n){e.status()!==r.Indeterminate&&((isNaN(n)||n===null)&&u.error("View model valuePercentage is "+n+" which is not number."),(n>100||n<0)&&u.error("View model valuePercentage is "+n+" which is not between 0 to 100."))})}return __extends(i,t),i}(t.Loadable.ViewModel);i.ViewModel=e})(r=i.ProgressBar||(i.ProgressBar={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,u,f,e;(function(n){n[n.Triangle=0]="Triangle";n[
n.Circle=1]="Circle"})(i.ErrorWarningShape||(i.ErrorWarningShape={}));u=i.ErrorWarningShape,function(n){n[n.Auto=0]="Auto";n[n.CenterOnlySmall=1]="CenterOnlySmall";n[n.CenterOnlyMedium=2]="CenterOnlyMedium";n[n.CenterOnlyLarge=3]="CenterOnlyLarge";n[n.Small=4]="Small";n[n.Medium=5]="Medium";n[n.MediumLarge=6]="MediumLarge";n[n.Large=7]="Large"}(i.GaugeSize||(i.GaugeSize={}));f=i.GaugeSize;e=function(t){function i(i){t.call(this,i);this.errorWarningShape=r(u.Triangle);this.gaugeSize=r(f.Auto);this.instance=r(55);this.instanceQuota=r(65);this.total=r(75);this.totalQuota=r(80);this.totalCaption=r("total is {2}");this.showCenter=r(!0);this.omitTotal=r(!1);this.noQuota=r(!1);this.maximum=r(100);this.startOffset=r(-90);this.unit=r("%");this.valueDisplayFormat=r("{0}");this.hideTick=r(!1);this.controlType=n.ViewModels.ControlType.QuotaGauge}return __extends(i,t),i}(t.Loadable.ViewModel);i.ViewModel=e})(r=i.QuotaGauge||(i.QuotaGauge={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||
(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observableArray,u=n.shallowCopyFromObject,f=0,o=function(){function n(n){var n=$.extend(this._getDefaultOptions(),n);this._initOptions(n)}return n.prototype._getDefaultOptions=function(){return{name:String(f=f+1&65535),values:r()}},n.prototype._initOptions=function(n){var t=this,i=n;u(t,i,["name","values","viewOptions"])},n}(),e;i.Series=o;e=function(t){function i(i,r){t.call(this,i);this.controlType=n.ViewModels.ControlType.SimpleChart;var r=$.extend(this._getDefaultOptions(),r);this._initOptions(r)}return __extends(i,t),i.prototype._getDefaultOptions=function(){return{series:r([])}},i.prototype._initOptions=function(n){var t=this,i=n;u(t,i,["series","xAxis","yAxis","chartType","viewOptions","metricsRules"])},i}(t.Loadable.ViewModel);i.ViewModel=e})(r=i.SimpleChart||(i.SimpleChart={}))})(i=t.Visualization||
(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r,u;(function(n){n[n.Auto=0]="Auto";n[n.CenterOnlySmall=1]="CenterOnlySmall";n[n.CenterOnlyMedium=2]="CenterOnlyMedium";n[n.CenterOnlyLarge=3]="CenterOnlyLarge";n[n.Icon=4]="Icon";n[n.Tiny=5]="Tiny";n[n.Small=6]="Small";n[n.Medium=7]="Medium";n[n.MediumLarge=8]="MediumLarge";n[n.Large=9]="Large"})(t.GaugeSize||(t.GaugeSize={}));r=t.GaugeSize;u=function(t){function u(u){t.call(this,u);this.gaugeSize=i(r.Auto);this.hideTick=i(!0);this.maximum=i(100);this.startOffset=i(-90);this.unit=i("");this.current=i(55);this.captionDisplayFormat=i("");this.valueDisplayFormat=i("{0}");this.controlType=n.ViewModels.ControlType.SingleValueGauge}return __extends(u,t),u}(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=u})(i=t.SingleValueGauge||(t.SingleValueGauge=
{}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r,u;(function(n){n[n.Auto=0]="Auto";n[n.CenterOnlySmall=1]="CenterOnlySmall";n[n.CenterOnlyMedium=2]="CenterOnlyMedium";n[n.CenterOnlyLarge=3]="CenterOnlyLarge";n[n.Small=4]="Small";n[n.Medium=5]="Medium";n[n.MediumLarge=6]="MediumLarge";n[n.Large=7]="Large"})(t.GaugeSize||(t.GaugeSize={}));r=t.GaugeSize;u=function(t){function u(u){t.call(this,u);this.gaugeSize=i(r.Auto);this.step=i(1);this.maximum=i(8);this.startOffset=i(-90);this.current=i(1);this.centerDisplayFormat=i("{0}");this.captionDisplayFormat=i("");this.controlType=n.ViewModels.ControlType.StepGauge}return __extends(u,t),u}(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=u})(i=t.StepGauge||(t.StepGauge={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.
Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var f=FxImpl.Extension,i=ko.observable,u=n.Resources.Strings,e=412,o,r,s;(function(n){n[n.Text=1]="Text";n[n.Binary=2]="Binary"})(t.Type||(t.Type={}));o=t.Type;r=function(){function n(n,t,i){this.status=n;this.statusCode=t;this.errorMessage=i}return n}();t.Status=r;s=function(){function n(n){var t=this,s,h;this.downloadStatus=i();s=n.addDefaultAuthorizationToken;s&&(this.authorizationOptions={resourceName:s!==!0?n.addDefaultAuthorizationToken.resourceName:""});this.authorizationToken=n.authorizationToken||i("");this.downloadType=n.downloadType||i(o.Text);this.headers=n.headers||i({});this.httpMethod=n.httpMethod||i("GET");this.httpRequestContent=n.httpRequestContent||i("");this.httpRequestContentType=n.httpRequestContentType||i("application/json");this.targetFileName=n.targetFileName||i("");this.targetUri=n.targetUri||
i("");this.errorMessage=n.errorMessage||i("");this.showDownloadProgressDialog=n.showDownloadProgressDialog||i(!1);this.downloadProgressDialogOptions=n.downloadProgressDialogOptions;this.onStart=n.onStart;this.onEnd=n.onEnd;this.authorizationOptions&&(h={resourceName:this.authorizationOptions.resourceName||"",cloudName:f.selfCloudName},f.getRuntime().getAuthorizationToken(h).then(function(n){n&&n.header?t.authorizationToken(n.header):t.downloadStatus(new r(u.FileDownloadCommand.fileDownloadErrorStatus,e,u.FileDownloadCommand.authTokenNotAvailable))},function(n){t.downloadStatus(new r(u.FileDownloadCommand.fileDownloadErrorStatus,e,n))}))}return n}();t.Context=s})(i=t.FileDownload||(t.FileDownload={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){var r;(function(r){"use strict";var f=n.Resources.Strings.FileDownload,u=ko.observable,e=function(i){function r(r,e){r&&r.createChildLifetime||
(r=undefined,e=arguments[0]);i.call(this,r);this.controlType=t.ControlType.FileDownloadButton;this.type=n.ViewModels.Toolbars.ToolbarItemType.FileDownloadButton;this.context=e.context;this.label=e.label||u("");this.disabled=e.disabled||u(!1);this.unauthorizedMessage=e.unauthorizedMessage||u(f.unauthorizedText);this.asLink=e.asLink}return __extends(r,i),r.prototype.unauthorized=function(n){this.unauthorizedMessage(n||f.unauthorizedText);this.disabled(!0)},r}(i.Loadable.ViewModel);r.ViewModel=e})(r=i.FileDownloadButton||(i.FileDownloadButton={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var u,f,r;(function(n){n[n.PlayReady=0]="PlayReady";n[n.Widevine=1]="Widevine";n[n.AES=2]="AES"})(i.ProtectionType||(i.ProtectionType={}));u=i.ProtectionType,function(n){n[n.Smooth=0]="Smooth";n[n.Dash=1]="Dash";n[n.HLS=2]="HLS";n[n.ProgressiveMP4=
3]="ProgressiveMP4"}(i.StreamingFormatMimeType||(i.StreamingFormatMimeType={}));f=i.StreamingFormatMimeType;r=function(t){function i(i,r){t.call(this,i);this.controlType=n.ViewModels.ControlType.MediaPlayer;r=r||{source:{url:""}};this.autoplay=r.autoplay||!1;this.controls=r.controls||!0;this.poster=r.poster||"";this.logo=r.logo||{enabled:!1};this.source=r.source}return __extends(i,t),i}(t.Base.ViewModel);i.ViewModel=r})(r=i.AzureMediaPlayer||(i.AzureMediaPlayer={}))})(i=t.Unsupported||(t.Unsupported={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=n.initObservable,r=function(){function n(n,t){this.uri=n;this.target=i(t,"_blank")}return n}();t.ClickableLink=r})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){"use strict";var u=n.Composition.Selectable,f=u.Selectable2,i=MsPortalFx.ViewModels,r=window,t;(function(n){var t;(function(n){var e=i.Controls,o=MsPortalFx.
ViewModels.Controls.Lists.Grid.SortOrder,t=ko.observable,r=ko.observableArray,s,u;n.SortOrder=o,function(n){n[n.Default=0]="Default";n[n.DateTime=1]="DateTime";n[n.SupportFirst=9999]="SupportFirst"}(n.SortFunction||(n.SortFunction={}));s=n.SortFunction;u=function(n){function u(u,e){function c(n){if(h.has(n))return h.get(n);var t=new f(n);return h.set(n,t),t}var a=this;n.call(this,u);this.groups=r();this.controlType=i.ControlType.Menu;this.groupSortFunction=e;var o=this._msPortalFxData={items:r(),selectableMap:t(),options:t()},v=o.items,s=o.selectableMap,l=o.options,h=new MsPortalFx.Map;this.groups.subscribe(u,function(n){var t={},u=MsPortalFx.mapMany(n,function(n){return n.items.map(function(i){var r=i.id,u,f;if(!r)throw new Error("Invalid item. No id specified. Item: '"+ko.toJSON(i)+"'.");if(t[r])throw new Error("Multiple items specified with the same id '"+r+"'.");return u=[i.displayText,n.displayText].concat(i.keywords).concat(n.keywords).filter(function(n){return!!n}).join(" "),f=$.
extend({group:n.displayText,aggregatedKeywords:u},i),t[r]=c(i),f})}),r=l(),i=r&&r.overview;i&&(t[i.id]=c(i));s(t);v(u)});this.setOptions=function(n){var t=n.overview,i;t&&(i=$.extend({},s()),i[t.id]=c(t),s(i));l(n)};this.setDefaultId=function(n){a.setOptions({defaultId:n})}}return __extends(u,n),u}(e.Base.ViewModel);n.ViewModel=u})(t=n.Menu||(n.Menu={}))})(t=n.Controls||(n.Controls={}));r.define("Fx/Controls/Menu",[],function(){return t.Menu});r.define("MsPortalFx/Controls/Menu",[],function(){return t.Menu})}(FxImpl||(FxImpl={})),function(n){"use strict";var i=window,t;(function(t){var i;(function(t){var i=MsPortalFx.ViewModels.Controls.HotSpot.BaseViewModel,r=function(t){function i(i,r,u){t.call(this,i);r&&(this.selectable=new n.Composition.Selectable.Selectable2(r));this.clickableDuringCustomize=!!u}return __extends(i,t),i}(i);t.ViewModel2=r})(i=t.HotSpot||(t.HotSpot={}))})(t=n.Controls||(n.Controls={}));i.define("Fx/Controls/HotSpot",[],function(){return t.HotSpot})}(FxImpl||(FxImpl=
{})),function(n){var t;(function(t){"use strict";var r=ko.computed,i=ko.observable,f=ko.observableArray,e=ko.utils.arrayPushAll,v=window,y=jQuery,u=function(t){function u(u,o,s,h,c,l){var a=this;l===void 0&&(l=null);t.call(this,u);this.enableValidation=i(!1);this.valid=i(!0);this.validate=i(0);this.label=i();this.labelPosition=i();this.validations=f();this.delayValidationTimeout=i(n.ViewModels.Controls.ValidatableControl.DefaultDelayValidationTimeout);this.enabled=i(!0);this.infoBalloonContent=i(c);this.initialValue=r(function(){var n=o.getOriginalObservable();return n?n():l});this.value=r({read:function(){var n=o.getEditableObservable();return n?n():l},write:function(n){var t=o.getEditableObservable();if(t)t(n);else throw new Error("Form should not allow edits until an EditScope is loaded.");}});this.label(s);this.labelPosition(n.ViewModels.Forms.LabelPosition.Top);h&&e(this.validations,h);c&&(this.infoBalloonContent=i(c));this.dirty=r(function(){return a.value()!==a.initialValue()});
this._enableValidationReactor=r(function(){a.enableValidation(!!(o.getOriginalObservable()&&o.getEditableObservable()))});this.performValidation=i(null);this.ensureValidation=i(0);this._msPortalFxClearValidation=i();this._msPortalFxTriggerValidation=i()}return __extends(u,t),u.prototype.dispose=function(){this.initialValue&&this.initialValue.dispose();this.value&&this.value.dispose();this.dirty&&this.dirty.dispose();this._enableValidationReactor&&(this._enableValidationReactor.dispose(),this._enableValidationReactor=null);t.prototype.dispose.call(this)},u.prototype.clearValidation=function(){if(this._msPortalFxClearValidation())return this._msPortalFxClearValidation()();Q()},u.prototype.triggerValidation=function(){if(this._msPortalFxTriggerValidation())return this._msPortalFxTriggerValidation()();var n=Q.defer(),t=this._msPortalFxTriggerValidation.subscribe(this.lifetimeManager,function(i){i().then(n.resolve).catch(n.reject).finally(function(){return t.dispose()})});return n.promise},
u}(n.ViewModels.Controls.Loadable.ViewModel),o,s,h,c,l,a;t.Field=u;o=function(n){function t(t,i,u,f,e){var o=this;n.call(this,t,i,u,f,e);this.empty=r(function(){return!o.value()})}return __extends(t,n),t.prototype.dispose=function(){this.empty&&this.empty.dispose();n.prototype.dispose.call(this)},t}(u);t.NullableField=o;s=function(n){function t(t,r,u,f,e){n.call(this,t,r,u,f,e);this.editing=i(!1)}return __extends(t,n),t}(o);t.EditableField=s;h=function(n){function t(t,i,r,u,o,s){n.call(this,t,i,r,o,s,u.length===0||u[0].options().length===0?undefined:u[0].options()[0].value);this.groups=f();e(this.groups,u)}return __extends(t,n),t}(u);t.GroupsField=h;c=function(n){function t(t,i,r,u,o,s){if(u.length===0)throw new Error("'values' array must contain one or more FormOption values.");n.call(this,t,i,r,o,s,u[0].value);this.options=f();e(this.options,u)}return __extends(t,n),t}(u);t.OptionsField=c;l=function(n){function t(t,r,u,f,e,o,s,h,c,l){r===void 0&&(r=null);u===void 0&&(u=null);f===void
0&&(f=0);e===void 0&&(e=10);o===void 0&&(o=[]);s===void 0&&(s=!1);h===void 0&&(h=null);c===void 0&&(c=null);l===void 0&&(l=1);n.call(this,t,r,u,o,h,c);this.showStepMarkers=i(s);this.min=i(f);this.max=i(e);this.step=i(l)}return __extends(t,n),t}(u);t.SliderBaseField=l;a=function(t){function r(r,u,f,e,o){t.call(this,r,u,f,e,o);this.editing=i(!1);this.valueUpdateTrigger=n.ViewModels.Controls.ValueUpdateTrigger.Default}return __extends(r,t),r}(s);t.TypableField=a})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=n.ViewModels.Controls.Forms.EditableCombo,r=i.PositioningAlignment,u=ko.observable,f=function(n){function t(t,f,e,o,s,h){n.call(this,t,f,e,o,h);this.dropDownWidth=u(i.DropDownWidth.Full);this.emptyValueText=u(s);this.popupAlignment=r.LeftTop;this.inputAlignment=r.LeftBottom}return __extends(t,n),t}(t.EditableField);t.EditableComboField=f})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){
var t;(function(n){var t;(function(n){"use strict";var i=ko.observable,t=ko.isObservable,r=function(){function n(n,r){this.text=t(n)?n:i(n);this.value=t(r)?r():r}return n}(),u;n.Option=r;u=function(n){function r(r,u,f){n.call(this,r,u);f!==undefined&&(this.disabled=t(f)?f:i(f))}return __extends(r,n),r}(r);n.DisablableOption=u})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observable,i=function(n){function i(i,r,u,f){n.call(this,i,r,u);f!==undefined&&(this.selected=ko.isObservable(f)?f:t(f))}return __extends(i,n),i}(n.DisablableOption);n.SelectableOption=i})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Invalid=0]="Invalid";n[n.Section=1]="Section";n[n.TextBox=2]="TextBox";n[n.DropDown=3]="DropDown";n[n.OptionsGroup=4]="OptionsGroup";n[n.Password=5]="Password";n[n.
Slider=6]="Slider";n[n.CheckBox=7]="CheckBox";n[n.MultiselectDropDown=8]="MultiselectDropDown";n[n.RangeSlider=9]="RangeSlider";n[n.NumericTextBox=10]="NumericTextBox";n[n.Selector=11]="Selector";n[n.FilterCombo=12]="FilterCombo";n[n.MultiLineTextBox=13]="MultiLineTextBox";n[n.DateTimeCombo=14]="DateTimeCombo";n[n.DynamicSection=15]="DynamicSection";n[n.Attachment=16]="Attachment";n[n.StringList=17]="StringList";n[n.HtmlEditor=18]="HtmlEditor";n[n.History=19]="History";n[n.ArtifactLinks=20]="ArtifactLinks";n[n.Splitter=21]="Splitter";n[n.TriStateCheckBox=22]="TriStateCheckBox";n[n.CustomHtml=23]="CustomHtml";n[n.TimePicker=24]="TimePicker";n[n.DatePicker=25]="DatePicker";n[n.DateTimePicker=26]="DateTimePicker";n[n.DateTimeRangePicker=27]="DateTimeRangePicker";n[n.FileUpload=28]="FileUpload";n[n.OAuthButton=29]="OAuthButton";n[n.TokenComboBox=30]="TokenComboBox";n[n.QueryBuilder=31]="QueryBuilder";n[n.DockedBalloon=32]="DockedBalloon";n[n.DiffEditor=33]="DiffEditor";n[n.DiffList=34]="DiffList";
n[n.DiffView=35]="DiffView";n[n.DiscussionTimeline=36]="DiscussionTimeline";n[n.Editor=37]="Editor";n[n.Button=38]="Button";n[n.pcCheckBox=39]="pcCheckBox";n[n.CopyableLabel=40]="CopyableLabel";n[n.pcDateTimeCombo=41]="pcDateTimeCombo";n[n.pcDropDown=42]="pcDropDown";n[n.pcFilterCombo=43]="pcFilterCombo";n[n.pcGroupDropDown=44]="pcGroupDropDown";n[n.pcMultiLineTextBox=45]="pcMultiLineTextBox";n[n.pcMultiselectDropDown=46]="pcMultiselectDropDown";n[n.pcNumericTextBox=47]="pcNumericTextBox";n[n.pcOptionPicker=48]="pcOptionPicker";n[n.pcPassword=49]="pcPassword";n[n.pcRangeSlider=50]="pcRangeSlider";n[n.pcSelector=51]="pcSelector";n[n.pcSlider=52]="pcSlider";n[n.pcTextBox=53]="pcTextBox";n[n.pcGrid=54]="pcGrid";n[n.Gallery=55]="Gallery";n[n.pcListView=56]="pcListView";n[n.pcTreeView=57]="pcTreeView";n[n.LogStream=58]="LogStream";n[n.Scrollbar=59]="Scrollbar";n[n.Settings=60]="Settings";n[n.SingleSetting=61]="SingleSetting";n[n.Toolbar=62]="Toolbar";n[n.Chart=63]="Chart";n[n.CsmTopology=64]=
"CsmTopology";n[n.Donut=65]="Donut";n[n.Gauge=66]="Gauge";n[n.Graph=67]="Graph";n[n.Map=68]="Map";n[n.Metrics=69]="Metrics";n[n.PairedTimeline=70]="PairedTimeline";n[n.ProgressBar=71]="ProgressBar";n[n.QuotaGauge=72]="QuotaGauge";n[n.SingleValueGauge=73]="SingleValueGauge";n[n.StepGauge=74]="StepGauge";n[n.Console=75]="Console";n[n.DeleteAssetConfirmation=76]="DeleteAssetConfirmation";n[n.HeroBanner=77]="HeroBanner";n[n.InfoBox=78]="InfoBox";n[n.Notice=79]="Notice";n[n.Picker=80]="Picker";n[n.FileUploadWidget=81]="FileUploadWidget";n[n.FileDownloadButton=82]="FileDownloadButton";n[n.CreatorAndSelector=83]="CreatorAndSelector";n[n.HotSpot=84]="HotSpot";n[n.CreatorAndSelectorV2=85]="CreatorAndSelectorV2";n[n.RangeSelection=86]="RangeSelection";n[n.LinkInfoBox=87]="LinkInfoBox";n[n.LinkHotSpot=88]="LinkHotSpot";n[n.PreviewTag=89]="PreviewTag";n[n.ConsoleV2=90]="ConsoleV2";n[n.CustomValueSlider=91]="CustomValueSlider";n[n.DayPicker=92]="DayPicker";n[n.SearchBox=93]="SearchBox";n[n.PairedTimelineBadges=
94]="PairedTimelineBadges";n[n.SpecComparisonTable=95]="SpecComparisonTable";n[n.MapV2=96]="MapV2";n[n.SimpleChart=97]="SimpleChart";n[n.GroupDropDown=98]="GroupDropDown";n[n.DurationPicker=99]="DurationPicker";n[n.SimpleButton=100]="SimpleButton";n[n.TextBlock=101]="TextBlock";n[n.TerminalEmulator=102]="TerminalEmulator";n[n.Grid2=103]="Grid2";n[n.List2=104]="List2";n[n.Tree2=105]="Tree2";n[n.AsyncFileUpload=106]="AsyncFileUpload";n[n.Wizard=107]="Wizard";n[n.IFrame=108]="IFrame";n[n.MediaPlayer=109]="MediaPlayer";n[n.Markdown=110]="Markdown";n[n.CustomRangeSlider=111]="CustomRangeSlider";n[n.PartPinner=112]="PartPinner";n[n.IFrameV2=113]="IFrameV2";n[n.ResourceFilter=114]="ResourceFilter";n[n.Menu=115]="Menu";n[n.Video=116]="Video";n[n.CustomControl=117]="CustomControl"})(n.ControlType||(n.ControlType={}));var t=n.ControlType})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";(function(n){n[n.Invalid=0]="Invalid";n[n.Required=
1]="Required";n[n.RegExMatch=2]="RegExMatch";n[n.NotRegExMatch=3]="NotRegExMatch";n[n.Contains=4]="Contains";n[n.NotContains=5]="NotContains";n[n.ContainsCharacters=6]="ContainsCharacters";n[n.NotContainsCharacters=7]="NotContainsCharacters";n[n.HasDigit=8]="HasDigit";n[n.HasLetter=9]="HasLetter";n[n.HasUpperCaseLetter=10]="HasUpperCaseLetter";n[n.HasLowerCaseLetter=11]="HasLowerCaseLetter";n[n.HasPunctuation=12]="HasPunctuation";n[n.Equals=13]="Equals";n[n.LengthRange=14]="LengthRange";n[n.MinLength=15]="MinLength";n[n.MaxLength=16]="MaxLength";n[n.Numeric=17]="Numeric";n[n.Range=18]="Range";n[n.MinValue=19]="MinValue";n[n.MaxValue=20]="MaxValue";n[n.Custom=21]="Custom";n[n.CaseInsensitiveComparison=22]="CaseInsensitiveComparison";n[n.LocaleAwareCaseInsensitiveComparison=23]="LocaleAwareCaseInsensitiveComparison";n[n.Uri=24]="Uri"})(n.FormValidationType||(n.FormValidationType={}));var t=n.FormValidationType})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n)
{var t;(function(n){"use strict";function t(n){var t=typeof n!="string";return t&&(n=undefined),{valid:t,message:n}}function i(n){return Q(t(n))}n.getValidationResult=t;n.getValidationResultPromise=i;var r=function(){function n(n){this.type=n}return n}();n.Validation=r})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=ko.observable,i=function(n){function i(i,r){n.call(this,i);this.message=r;this.isEmptyValid=t(!1)}return __extends(i,n),i}(n.Validation);n.StaticMessageValidation=i})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i,r){t.call(this,n.FormValidationType.CaseInsensitiveComparison,r);this.compareTo=i}return __extends(i,t),i}(n.StaticMessageValidation);n.CaseInsensitiveComparisonValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(
i,r){t.call(this,n.FormValidationType.ContainsCharacters,r);this.characters=i}return __extends(i,t),i}(n.StaticMessageValidation);n.ContainsCharactersValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i,r){t.call(this,n.FormValidationType.Contains,r);this.searchString=i}return __extends(i,t),i}(n.StaticMessageValidation);n.ContainsValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i,r){t.call(this,n.FormValidationType.Custom);this.message=i;this.validate=r}return __extends(i,t),i}(n.Validation);n.CustomValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i,r){t.call(this,n.FormValidationType.Equals,r);this.compareTo=i}return __extends(i,t),i}(n.StaticMessageValidation);n.EqualsValidation=
t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i){t.call(this,n.FormValidationType.HasDigit,i)}return __extends(i,t),i}(n.StaticMessageValidation);n.HasDigitValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i){t.call(this,n.FormValidationType.HasLetter,i)}return __extends(i,t),i}(n.StaticMessageValidation);n.HasLetterValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i){t.call(this,n.FormValidationType.HasLowerCaseLetter,i)}return __extends(i,t),i}(n.StaticMessageValidation);n.HasLowerCaseLetterValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i){t.call(this,n.FormValidationType.HasPunctuation,
i)}return __extends(i,t),i}(n.StaticMessageValidation);n.HasPunctuationValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i){t.call(this,n.FormValidationType.HasUpperCaseLetter,i)}return __extends(i,t),i}(n.StaticMessageValidation);n.HasUpperCaseLetterValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i){t.call(this,n.FormValidationType.Invalid,i)}return __extends(i,t),i}(n.StaticMessageValidation);n.InvalidValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i,r,u){t.call(this,n.FormValidationType.LengthRange,u);this.min=i;this.max=r}return __extends(i,t),i}(n.StaticMessageValidation);n.LengthRangeValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n)
{var t;(function(n){"use strict";var t=function(t){function i(i,r){t.call(this,n.FormValidationType.LocaleAwareCaseInsensitiveComparison,r);this.compareTo=i}return __extends(i,t),i}(n.StaticMessageValidation);n.LocaleAwareCaseInsensitiveComparisonValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i,r){t.call(this,n.FormValidationType.MaxLength,r);this.max=i}return __extends(i,t),i}(n.StaticMessageValidation);n.MaxLengthValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i,r){t.call(this,n.FormValidationType.MaxValue,r);this.max=i}return __extends(i,t),i}(n.StaticMessageValidation);n.MaxValueValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i,r){t.call(this,n.FormValidationType.MinLength,
r);this.min=i}return __extends(i,t),i}(n.StaticMessageValidation);n.MinLengthValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i,r){t.call(this,n.FormValidationType.MinValue,r);this.min=i}return __extends(i,t),i}(n.StaticMessageValidation);n.MinValueValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i,r){t.call(this,n.FormValidationType.NotContainsCharacters,r);this.characters=i}return __extends(i,t),i}(n.StaticMessageValidation);n.NotContainsCharactersValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i,r){t.call(this,n.FormValidationType.NotContains,r);this.searchString=i}return __extends(i,t),i}(n.StaticMessageValidation);n.NotContainsValidation=t})(t=n.ViewModels||(n.ViewModels={})
)}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i,r){t.call(this,n.FormValidationType.NotRegExMatch,r);this.pattern=i}return __extends(i,t),i}(n.StaticMessageValidation);n.NotRegExMatchValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i){t.call(this,n.FormValidationType.Numeric,i)}return __extends(i,t),i}(n.StaticMessageValidation);n.NumericValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i,r,u){t.call(this,n.FormValidationType.Range,u);this.min=i;this.max=r}return __extends(i,t),i}(n.StaticMessageValidation);n.RangeValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i,r){t.call(this,n.FormValidationType.RegExMatch,r);this.pattern=
i}return __extends(i,t),i}(n.StaticMessageValidation);n.RegExMatchValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i){t.call(this,n.FormValidationType.Required,i)}return __extends(i,t),i}(n.StaticMessageValidation);n.RequiredValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=function(t){function i(i,r){t.call(this,n.FormValidationType.Uri,i);this.options=r||{}}return __extends(i,t),i}(n.StaticMessageValidation);n.UriValidation=t})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t;(function(n){var t,i,u,f,e,o,s,h,c,l,a,v,y,r,p,w,b,k,d;(function(n){n[n.Html=1]="Html";n[n.Text=2]="Text";n[n.Uri=107]="Uri";n[n.Icon=108]="Icon";n[n.IconLookup=109]="IconLookup";n[n.TextLookup=110]="TextLookup";
n[n.SvgIcon=111]="SvgIcon";n[n.SvgIconLookup=112]="SvgIconLookup";n[n.Date=113]="Date";n[n.Number=114]="Number";n[n.HtmlTemplate=1e3]="HtmlTemplate";n[n.CheckBox=1001]="CheckBox";n[n.TextBox=1002]="TextBox";n[n.MultiselectDropDown=1003]="MultiselectDropDown";n[n.CheckBoxRowSelection=1004]="CheckBoxRowSelection";n[n.DropDown=1005]="DropDown"})(n.FormatType||(n.FormatType={}));t=n.FormatType;i=function(){function n(n){this.type=n}return n}();n.BaseFormat=i;u=function(n){function i(i){i===void 0&&(i={});n.call(this,t.Html)}return __extends(i,n),i}(i);n.Html=u;f=function(n){function i(i){i===void 0&&(i={});n.call(this,t.Text)}return __extends(i,n),i}(i);n.Text=f;e=function(n){function i(i){i===void 0&&(i={});n.call(this,t.Date);this.dateFormat=i.dateFormat}return __extends(i,n),i}(i);n.Date=e;o=function(n){function i(i){i===void 0&&(i={});n.call(this,t.Number);this.numberFormat=i.numberFormat}return __extends(i,n),i}(i);n.Number=o;s=function(n){function i(){n.call(this,t.Uri)}return __extends(
i,n),i}(i);n.Uri=s;h=function(n){function i(){n.call(this,t.Icon)}return __extends(i,n),i}(i);n.Icon=h;c=function(n){function i(i){i===void 0&&(i={});n.call(this,t.IconLookup);this.iconLookup=i.iconLookup}return __extends(i,n),i}(i);n.IconLookup=c;l=function(n){function i(i){i===void 0&&(i={});n.call(this,t.TextLookup);this.textLookup=i.textLookup}return __extends(i,n),i}(i);n.TextLookup=l;a=function(n){function i(i){n.call(this,t.SvgIcon);i&&(this.height=i.height,this.width=i.width)}return __extends(i,n),i}(i);n.SvgIcon=a;v=function(n){function i(i){i===void 0&&(i={});n.call(this,t.SvgIconLookup);this.svgIconLookup=i.svgIconLookup;this.height=i.height;this.width=i.width}return __extends(i,n),i}(i);n.SvgIconLookup=v;y=function(n){function i(i){i===void 0&&(i={});n.call(this,t.HtmlTemplate);this.template=i.template}return __extends(i,n),i}(i);n.HtmlTemplate=y;r=function(n){function t(t,i){i===void 0&&(i={});n.call(this,t);this.label=i.label;this.validations=i.validations;this.validate=i.
validate;this.infoBalloonContent=i.infoBalloonContent}return __extends(t,n),t}(i);n.FieldFormat=r;p=function(n){function i(i){i===void 0&&(i={});n.call(this,t.CheckBox,i)}return __extends(i,n),i}(r);n.CheckBox=p;w=function(n){function i(i){i===void 0&&(i={});n.call(this,t.TextBox,i);this.emptyValueText=i.emptyValueText}return __extends(i,n),i}(r);n.TextBox=w;b=function(n){function i(i){i===void 0&&(i={});n.call(this,t.MultiselectDropDown,i);this.displaySeparator=i.displaySeparator;this.groups=i.groups;this.maxSelectAllowed=i.maxSelectAllowed;this.multiItemsDisplayFormat=i.multiItemsDisplayFormat;this.multiItemsMaxDisplayFormat=i.multiItemsMaxDisplayFormat;this.multiselect=i.multiselect;this.valueSeparator=i.valueSeparator}return __extends(i,n),i}(r);n.MultiselectDropDown=b;k=function(n){function i(i){i===void 0&&(i={});n.call(this,t.CheckBoxRowSelection,i)}return __extends(i,n),i}(r);n.CheckBoxRowSelection=k;d=function(n){function i(i){i===void 0&&(i={});n.call(this,t.DropDown,i);this.
options=i.options}return __extends(i,n),i}(r);n.DropDown=d})(t=n.Formatters||(n.Formatters={}))})(t=n.Grid2||(n.Grid2={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var i=MsPortalFx.ViewModels.Internal.Selection2,r=i.SelectableSet,u=MsPortalFx.initValue,f=function(n){function t(t,i){n.call(this,t,i);this.enabled=u(i.enabled,!0)}return __extends(t,n),t}(r),t;n.SelectionViewModel=f;t=function(n){function t(t,i){i===void 0&&(i={});n.call(this,t,i);this.dataNavigator=i.dataNavigator;this.loading=ko.observable(!1)}return __extends(t,n),t}(MsPortalFx.ViewModels.Controls.Loadable.ViewModel);n.ViewModel=t})(t=n.Base||(n.Base={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(t){"use strict";function p(
n,t,i){return FxImpl.FileUpload.getUploadInfos(n,t,i)}function w(n,t,i){return FxImpl.FileUpload.getResumableUploadInfos(n,t,i)}function b(n,t,i){return FxImpl.FileUpload.getAsyncUploadTasks(n,t,i)}function k(n,t,i){return FxImpl.FileUpload.invokeUploadAction(n,t,i)}function d(n,t,i){return FxImpl.FileUpload.getNextChunk(n,t,i)}var r=ko.observable,f,u,o,y,i,e,s,h,c,l,a,v;t.defaultFullFileUploadMaxSize=2097152;t.defaultFullFileUploadChunkSize=t.defaultFullFileUploadMaxSize;t.defaultStreamFileUploadMaxSize=10737418240;t.defaultStreamFileUploadChunkSize=1048576;t.defaultBlobStoreUploadMaxSize=53687091200;t.defaultBlobStoreUploadChunkSize=t.defaultFullFileUploadMaxSize;t.pageBlobPageSize=512;t.defaultResumableTrackingChunkSize=t.defaultBlobStoreUploadChunkSize*4;f=n.Resources.Strings.FileUpload,function(n){n[n.Full=0]="Full";n[n.Stream=1]="Stream";n[n.BlockBlobStore=2]="BlockBlobStore";n[n.PageBlobStore=3]="PageBlobStore";n[n.AppendBlobStore=4]="AppendBlobStore";n[n.FileService=5]="FileService"}
(t.UploadType||(t.UploadType={}));u=t.UploadType,function(n){n[n.Default=0]="Default";n[n.Text=1]="Text";n[n.ArrayBuffer=2]="ArrayBuffer";n[n.DataUri=3]="DataUri"}(t.ContentType||(t.ContentType={}));o=t.ContentType,function(n){n[n.Invalid=0]="Invalid";n[n.Pending=1]="Pending";n[n.Uploading=2]="Uploading";n[n.Paused=3]="Paused";n[n.Complete=4]="Complete";n[n.Canceled=5]="Canceled";n[n.Aborted=6]="Aborted"}(t.UploadStatus||(t.UploadStatus={}));y=t.UploadStatus,function(n){n[n.None=0]="None";n[n.Pause=1]="Pause";n[n.Resume=2]="Resume";n[n.Cancel=3]="Cancel";n[n.Dispose=4]="Dispose";n[n.AddUploadTasks=5]="AddUploadTasks";n[n.ResetUploadTasks=6]="ResetUploadTasks";n[n.Complete=7]="Complete";n[n.Abort=8]="Abort";n[n.GetNextChunk=9]="GetNextChunk"}(t.UploadAction||(t.UploadAction={}));i=t.UploadAction;t.getUploadInfos=p;t.getResumableUploadInfos=w;t.getAsyncUploadTasks=b;t.invokeUploadAction=k;t.getNextChunk=d;e=function(){function n(){this.type=u.Full;this.contentType=o.Default;this.encoding=
null;this.maxFileSize=t.defaultFullFileUploadMaxSize;this.chunkSize=t.defaultFullFileUploadChunkSize;this.category=null;this.uploadTarget=null;this.notificationBlade=null;this.resumable=!1;this.disableNotifications=!1}return n}();t.FullFileUploadContext=e;s=function(n){function i(){n.call(this);this.type=u.Stream;this.maxFileSize=t.defaultStreamFileUploadMaxSize;this.chunkSize=t.defaultStreamFileUploadChunkSize}return __extends(i,n),i}(e);t.StreamFileUploadContext=s;h=function(n){function i(){n.call(this);this.sasUriCommand=r();this.type=u.BlockBlobStore;this.maxFileSize=t.defaultBlobStoreUploadMaxSize;this.chunkSize=t.defaultBlobStoreUploadChunkSize;this.context=r();this.addFilenameToSasUri=r(!1);this.useDefaultFileInfoContext=r(!0)}return __extends(i,n),i}(e);t.BlobStoreFileUploadContext=h;c=function(){function n(){this.uploadResult=r(null);this._msPortalFxUploadAction=r(i.None);this._msPortalFxActionTrigger=r(0)}return n.prototype.resume=function(){this._msPortalFxUploadAction(i.Resume);
this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n.prototype.pause=function(){this._msPortalFxUploadAction(i.Pause);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n.prototype.cancel=function(){this._msPortalFxUploadAction(i.Cancel);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n.prototype.dispose=function(){this._msPortalFxUploadAction(i.Dispose);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n}();t.UploadTask=c;l=function(){function n(n){this.uploadInfo=n}return n.prototype.resume=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},i.Resume)},n.prototype.pause=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},i.Pause)},n.prototype.cancel=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},i.Cancel)},n.prototype.complete=function(){var n=this.uploadInfo;
return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},i.Complete)},n.prototype.abort=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},i.Abort)},n.prototype.dispose=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},i.Dispose)},n.prototype.getNextChunk=function(n,t){var i=this.uploadInfo;if(i.type()!==u.Stream)throw new Error(f.notSupported);return FxImpl.FileUpload.getNextChunk({id:i.id(),name:i.name},n,t)},n}();t.AsyncUploadTask=l;a=function(){function n(n,t,i){this.uploadInfo=n;this._msPortalFxActionCallback=r(t);this._msPortalFxGetNextChunkCallback=r(i)}return n.prototype.resume=function(n){return this._invoke(i.Resume,n)},n.prototype.pause=function(){return this._invoke(i.Pause)},n.prototype.cancel=function(){return this._invoke(i.Cancel)},n.prototype.complete=function(){return this._invoke(i.Complete)},n.prototype.abort=function(n){return this._invoke(i.Abort,n)},n.prototype.
dispose=function(){return this._invoke(i.Dispose)},n.prototype.getNextChunk=function(n,t){if(this._msPortalFxGetNextChunkCallback()){var i=this.uploadInfo;return this._msPortalFxGetNextChunkCallback()({id:i.id(),name:i.name},n,t)}return Q.reject(f.notReady)},n.prototype._invoke=function(n,t){if(this._msPortalFxActionCallback()){var i=this.uploadInfo;return this._msPortalFxActionCallback()([{id:i.id(),name:i.name}],n,t)}return Q.reject(f.notReady)},n}();t.AsyncUploadWidgetTask=a;v=function(){function n(n){this.id=n.id;this.name=n.name;this.mimetype=n.mimetype;this.size=n.size;this.valid=r(!0)}return n}();t.SelectedFile=v})(i=t.FileUpload||(t.FileUpload={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function e(n,r,u){var f=u?{uploadKey:n,action:r,context:u}:{uploadKey:n,action:r};return t.uploadActionEndPoint.invoke(i.client,"fx",f)}function f(n,t,u){var f=Q.defer();return i.client.acquireObject(r,"fx",{uploadKeys:t,category:
u}).then(function(t){n.registerForDispose(t);var i=t.getValue();f.resolve(i.uploads)}),f.promise}function o(n,t,u){var f=Q.defer();return i.client.acquireObject(r,"fx",{uploadKeys:t,category:u,resumable:!0}).then(function(t){n.registerForDispose(t);var i=t.getValue();f.resolve(i.uploads)}),f.promise}function s(n,t,i){var r=Q.defer();return f(n,t,i).then(function(n){var t=[];n&&n.length>0&&(t=n.map(function(n){return new u.AsyncUploadTask(n)}));r.resolve(t)}),r.promise}function h(t,i,r){var f;return(i!==undefined||r!==undefined)&&(f={startByte:i,chunkSize:r}),n.FileUpload.invokeUploadAction(t,u.UploadAction.GetNextChunk,f)}var u=MsPortalFx.ViewModels.FileUpload,i=MsPortalFx.Base.Rpc.Internal,r="FxImpl.FileUpload.getUploadInfos";t.getUploadInfosEndPoint=new i.ProxiedObjectTypeDefinition(r);t.uploadActionEndPoint=new i.ActionEndPointDefinition("FxImpl.FileUpload.uploadActionMethodName");t.invokeUploadAction=e;t.getUploadInfos=f;t.getResumableUploadInfos=o;t.getAsyncUploadTasks=s;t.getNextChunk=
h})(t=n.FileUpload||(n.FileUpload={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,f=FxImpl.Extension,u=n.Resources.Strings.FileDownloadCommand,e,r,o;(function(n){n[n.Text=1]="Text";n[n.Binary=2]="Binary"})(t.Type||(t.Type={}));e=t.Type;r=function(n){function t(t,i,r){n.call(this,t,i,r)}return __extends(t,n),t}(n.ViewModels.Controls.FileDownload.Status);t.Status=r;o=function(){function n(n){var t=this,o,s,h;this.downloadStatus=i();o=412;s=n.addDefaultAuthorizationToken;s&&(this.authorizationOptions={resourceName:s!==!0?n.addDefaultAuthorizationToken.resourceName:""});this.authorizationToken=n.authorizationToken||i("");this.downloadType=n.downloadType||i(e.Text);this.headers=n.headers||i({});this.httpMethod=n.httpMethod||i("GET");this.httpRequestContent=n.httpRequestContent||i("");this.httpRequestContentType=n.httpRequestContentType||i("application/json");this.targetFileName=n.targetFileName||i("");this.targetUri=n.targetUri||
i("");this.errorMessage=n.errorMessage||i("");this.showDownloadProgressDialog=n.showDownloadProgressDialog||i(!1);this.downloadProgressDialogOptions=n.downloadProgressDialogOptions;this.onStart=n.onStart;this.onEnd=n.onEnd;this.authorizationOptions&&(h={resourceName:this.authorizationOptions.resourceName||"",cloudName:f.selfCloudName},f.getRuntime().getAuthorizationToken(h).then(function(n){n&&n.header?t.authorizationToken(n.header):t.downloadStatus(new r(u.fileDownloadErrorStatus,o,u.authTokenNotAvailable))},function(n){t.downloadStatus(new r(u.fileDownloadErrorStatus,o,n))}))}return n}();t.Context=o})(i=t.FileDownload||(t.FileDownload={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=function(t){function i(i,r,u,f){t.call(this,i,r,u,f);this.controlType=n.ViewModels.ControlType.CheckBox;this.inlineLabel=this._options.inlineLabel||!1}return __extends(i,t),i}(t.Base.Input.ViewModel);
i.ViewModel=r})(i=t.CheckBox||(t.CheckBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=function(t){function i(i,u){t.call(this,i,u);this.controlType=n.ViewModels.ControlType.CustomHtml;this.htmlTemplate=u.htmlTemplate;this.innerViewModel=u.innerViewModel;this.validate=r(0);this.valid=r(!0);this.dirty=r(!1);this.loading=r(!1);this._msPortalFxClearValidation=r();this._msPortalFxTriggerValidation=r()}return __extends(i,t),i.prototype.clearValidation=function(){return this._msPortalFxClearValidation()?this._msPortalFxClearValidation()():Q()},i.prototype.triggerValidation=function(){if(this._msPortalFxTriggerValidation())return this._msPortalFxTriggerValidation()();var n=Q.defer(),t=this._msPortalFxTriggerValidation.subscribe(this.lifetimeManager,function(i){i().then(n.resolve).catch(n.reject).finally(function(){return t.dispose()})});
return n.promise},i}(t.Base.LabelAndBalloon.ViewModel);i.ViewModel=u})(i=t.CustomHtml||(t.CustomHtml={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n,u=ko.observable,f=ko.observableArray,e=function(t){function i(i,e,o,s){var h=s||{};r.isNullOrUndefined(e)||typeof e.createEditScopeAccessor=="function"||(h=e);t.call(this,i,e,o,s);this.controlType=n.ViewModels.ControlType.CustomValueSlider;this.showStepMarkers=h.showStepMarkers||u(!0);this.customValues=h.customValues||f([1,2,3,4,5,6,7,8,9,10])}return __extends(i,t),i}(t.Base.Input.ViewModel);i.ViewModel=e})(i=t.CustomValueSlider||(t.CustomValueSlider={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.computed,u=function(t){function i(i,u,f,e){var o=this,s=e||{},h;n.
isNullOrUndefined(u)||typeof u.createEditScopeAccessor=="function"||(s=u);t.call(this,i,u,f,e);this.valueSeparator=";";this.controlType=n.ViewModels.ControlType.CustomRangeSlider;this.showStepMarkers=s.showStepMarkers||s.showStepMarkers===!1?s.showStepMarkers:!0;this.customValues=s.customValues;h=this.valueSeparator;this.start=r(i,{read:function(){var i=o.value()?o.value():"",n=i.split(h),t;return n.length===2&&(t=parseInt(n[0],10)),t},write:function(n){o.value(n+h+o.end())}});this.end=r(i,{read:function(){var i=o.value()?o.value():"",n=i.split(h),t;return n.length===2&&(t=parseInt(n[1],10)),t},write:function(n){o.value(o.start()+h+n)}})}return __extends(i,t),i}(t.Base.Input.ViewModel);i.ViewModel=u})(i=t.CustomRangeSlider||(t.CustomRangeSlider={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=function(t){function i(i,u,f,e){t.call(this,
i,u,f,e);this.controlType=n.ViewModels.ControlType.DatePicker;var o=this._options;this.enabledDateTimeRange=o.enabledDateTimeRange||r(new n.DateUtil.DateTimeRange);this.allowEmpty=!!o.allowEmpty;this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(i,t),i.prototype._setEditScopeAccessors=function(n){var i=this;t.prototype._setEditScopeAccessors.call(this,n);ko.isComputed(this.dirty)&&this.dirty.dispose();this.dirty=ko.computed(this.lifetimeManager,function(){var n=i.value(),t=i.initialValue();return!n&&!t?!1:!n||!t?!0:n.getFullYear()!==t.getFullYear()||n.getMonth()!==t.getMonth()||n.getDate()!==t.getDate()})},i}(t.Base.EditableComboBox.ViewModel);i.ViewModel=u})(i=t.DatePicker||(t.DatePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n.DateUtil.DateTimeRange,i=ko.observable,u=function(t){function u(
u,f,e,o){t.call(this,u,f,e,o);this.controlType=n.ViewModels.ControlType.DateTimeCombo;this.formatString=this._options.formatString||i("D");this.enabledDateTimeRange=this._options.enabledDateTimeRange||i(new r);this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(u,t),u.prototype._setEditScopeAccessors=function(n,i){var r=this;t.prototype._setEditScopeAccessors.call(this,n,i);ko.isComputed(this.dirty)&&this.dirty.dispose();this.dirty=ko.computed(function(){var n=r.value(),t=r.initialValue();return!n&&!t?!1:!n||!t?!0:n.getTime()!==t.getTime()})},u}(n.ViewModels.Forms.Base.EditableComboBox.ViewModel);t.ViewModel=u})(i=t.DateTimeComboBox||(t.DateTimeComboBox={}))})(i=t.Forms||(t.Forms={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=Math.floor,f=function(t){function i(i,u,f,e){var o,s;t.call(this,
i,u,f,e);this.showSeconds=!0;this.controlType=n.ViewModels.ControlType.DateTimePicker;o=this._options;this.enabledDateTimeRange=o.enabledDateTimeRange||r(new n.DateUtil.DateTimeRange);this.showTimezoneDropdown=o.showTimezoneDropdown||r(!1);this.timezoneOffset=o.timezoneOffset||this.value()&&r(-this.value().getTimezoneOffset())||r(-(new Date).getTimezoneOffset());this.allowEmpty=!!o.allowEmpty;this.emptyTimeValueText=o.emptyTimeValueText||r("");s=o.showSeconds;n.isNullOrUndefined(s)||(this.showSeconds=s);this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(i,t),i.prototype._setEditScopeAccessors=function(n){var i=this;t.prototype._setEditScopeAccessors.call(this,n);ko.isComputed(this.dirty)&&this.dirty.dispose();this.dirty=ko.computed(this.lifetimeManager,function(){var n=i.value(),t=i.initialValue();return!n&&!t?!1:!n||!t?!0:u(n.getTime()/1e3)!==u(t.getTime()/1e3)})},i}(t.Base.EditableComboBox.ViewModel);i.ViewModel=f})(i=t.DateTimePicker||(t.DateTimePicker=
{}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var f=n.DateUtil.DateTimeRange,r=ko.observable,u=Math.floor,e=function(t){function i(i,u,e,o){t.call(this,i,u,e,o);this.controlType=n.ViewModels.ControlType.DateTimeRangePicker;var s=this._options;this.startDateTimeEnabledRange=s.startDateTimeEnabledRange||r(new f);this.endDateTimeEnabledRange=s.endDateTimeEnabledRange||r(new f);this.showTimezoneDropdown=s.showTimezoneDropdown||r(!1);this.timezoneOffset=s.timezoneOffset||r(-(new Date).getTimezoneOffset());this.displayFieldsInline=s.displayFieldsInline||r(!1);this.emptyValueText=s.emptyValueText||r("");this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(i,t),i.prototype._setEditScopeAccessors=function(n){var i=this;t.prototype._setEditScopeAccessors.call(this,n);ko.isComputed(this.dirty)&&this.dirty.dispose();this.dirty=ko.
computed(this.lifetimeManager,function(){var n=i.value(),t=i.initialValue();return!n&&!t?!1:!n||!t?!0:u(n.startDateTime().getTime()/1e3)!==u(t.startDateTime().getTime()/1e3)||u(n.endDateTime().getTime()/1e3)!==u(t.endDateTime().getTime()/1e3)})},i}(t.Base.EditableComboBox.ViewModel);i.ViewModel=e})(i=t.DateTimeRangePicker||(t.DateTimeRangePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=function(t){function i(i,r,u,f){t.call(this,i,r,u,f);this.controlType=n.ViewModels.ControlType.DayPicker}return __extends(i,t),i}(n.ViewModels.Forms.Base.Editable.ViewModel);t.ViewModel=i})(i=t.DayPicker||(t.DayPicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=function(t){function i(i,r,u,f){t.call(this,i,r,u,f);this.controlType=
n.ViewModels.ControlType.DropDown}return __extends(i,t),i}(t.Base.Options.ViewModel);i.ViewModel=r})(i=t.DropDown||(t.DropDown={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=ko.observable,i=ko.observableArray,r=function(t){function r(r,u,f,e){t.call(this,r,u,f,e);this.controlType=n.ViewModels.ControlType.GroupDropDown;var o=this._options;this.items=o.items||i();this.filter=o.filter||!1;this.customFilter=o.customFilter;this.filterPlaceholder=o.filterPlaceholder||"";this.multiselect=o.multiselect||!1;this.selectAll=o.selectAll||!1;this.selectAllOverride=o.selectAllOverride}return __extends(r,t),r}(n.ViewModels.Forms.Base.Input.ViewModel);t.ViewModel=r})(i=t.GroupDropDown||(t.GroupDropDown={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(
t){"use strict";var i=function(t){function i(i,r,u,f){t.call(this,i,r,u,f);this.controlType=n.ViewModels.ControlType.DurationPicker}return __extends(i,t),i}(n.ViewModels.Forms.Base.Editable.ViewModel);t.ViewModel=i})(i=t.DurationPicker||(t.DurationPicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";function g(n,t){var u=n.items();if(u.length===1){for(var i=u[0],f=[],r=[];i;)f.push(new s(i.text(),i.value)),i.children&&(r=r.concat(i.children.map(function(n){return n.text(i.text()+t+n.text()),n}))),i=r.shift();n.items(f)}}function w(n){return(n.text()||"").toLocaleLowerCase()}function nt(n,t){var i=w(n),r=w(t);return i===r?0:i>r&&1||-1}function tt(n){return n.sort(nt)}function c(n,t,i){var r=n[i];r?~r.indexOf(t)||r.push(t):n[i]=[t]}function l(n,t,i,r){var o,u,f,e;for(r===void 0&&(r=" "),o=t.length,u=0;u<o;u++)for(f=t[u],n.addWord(f,i),e=u+1;e<o;e++)f=f+r+
t[e],n.addWord(f,i)}function it(n,t,i,r){l(n,t.split(" "),i);l(n,t.split(r),i,r)}function rt(n){var t={},i=[];return n.forEach(function(n){var r=n.text();t.hasOwnProperty(r)||(t[r]=i.push(n))}),i}function k(n){return n?(t=n.lineMatches).concat.apply(t,n.children.map(k)):[];var t}var o=ko.observable,y=ko.observableArray,p=ko.computed,s=function(n){function t(t,i,r){n.call(this,t,i);this.children=r||[]}return __extends(t,n),t}(t.Option),u,f,h,e,a,b,v,r,d;i.HierarchicalFormOptionItem=s;u=function(){function n(n){this.children=[];this.lineMatches=[];this._value=n&&n.toLocaleLowerCase()}return n.prototype.getChild=function(n){return this.children.first(function(t){return t._value===n.toLocaleLowerCase()})},n.prototype.matchesValue=function(n){return this._value&&this._value===n.toLocaleLowerCase()},n}();i.Node=u;f=function(){function t(n,t,i){var r=this;this._filterInProgress=!1;this._disposables=[];n.registerForDispose(this);this._viewModel=t;this._filterOptions=i;ko.reactor(n,function(){r.
_filterInProgress=!0;var n=r.filterData(t.filterText());t.filterInProgress(r._viewModel.items().length!==n.length);t.filteredItems(n);r._filterInProgress=!1})}return t.prototype.dispose=function(){this._disposables&&(n.disposeDisposable(this._disposables),this._disposables=void 0)},t.prototype.filterData=function(n){return this._viewModel.items().filter(function(t){var i;return ko.unwrap(t.doNotFilter)||(i=t.text())&&!!~i.toLowerCase().indexOf(n.toLowerCase())})},t.prototype._setfilteredItems=function(n){this._viewModel.filteredItems(n)},t}();i.SearchFilter=f;h=function(n){function t(t,i,r){var u=r.delimiter||"\\";i.items.subscribe(function(){g(i,u)}).callback([]);n.call(this,t,i,r)}return __extends(t,n),t}(f);i.TreeSearchFilter=h;e=function(){function n(n,t,i){var u=this;this._filterInProgress=!1;this._directMatchDictionary={};this._viewModel=t;this._filterOptions=i;this._prefixTree=new r;p(n,function(){u._filterInProgress||(u._directMatchDictionary={},u._prefixTree=new r,u._setFilteredItems(
u._viewModel.items()))});t.filterText.subscribe(n,function(n){u._filterInProgress=!0;var i=u.filterData(n);t.filterInProgress(u._viewModel.items().length!==i.length);t.filteredItems(i);u._filterInProgress=!1})}return n.prototype.filterData=function(n){var r=this,t=[],i={};return this._prefixTree.getMatches(n).forEach(function(n){i[n]||(t=t.concat(r._directMatchDictionary[n]),i[n]=!0)}),tt(t)},n.prototype._setFilteredItems=function(n){var t=this;n.forEach(function(n){return t._addToSearchOnInitialize(n,n.text())});this._viewModel.filteredItems(n);this._viewModel.filterText("")},n.prototype._addToSearchOnInitialize=function(n,t){c(this._directMatchDictionary,n,t);l(this._prefixTree,t.split(" "),t)},n.prototype._setfilteredItems=function(n){this._viewModel.filteredItems(n)},n}();i.SearchFilterPrefixTree=e;a=function(n){function t(t,i,u){n.call(this,t,i,u);this._childPrefixTree=new r;this._childMatchDictionary={}}return __extends(t,n),t.prototype.filterData=function(n){var t=this._prefixTree.
getMatches(n),i=this._childPrefixTree.getMatches(n);return rt(this._processMatches(t,i))},t.prototype._setFilteredItems=function(t){if(this._directMatchDictionary={},this._childMatchDictionary={},this._childPrefixTree=new r,t.length===1){var i=this._filterOptions;i.delimiter||(i.delimiter="\\");t=this._flattenTree(t[0]);this._viewModel.items(t)}n.prototype._setFilteredItems.call(this,t)},t.prototype._addToSearchOnInitialize=function(){},t.prototype._processMatch=function(n,t){var i=this,r=[],u=[],f,e;return n.forEach(function(n){t[n]||(r.push(i._directMatchDictionary[n]||[]),u.push(i._childMatchDictionary[n]||[]),t[n]=!0)}),{filteredResults:(f=[]).concat.apply(f,r),filteredChildResults:(e=[]).concat.apply(e,u),isResultProcessed:t}},t.prototype._processMatches=function(n,t){var i=this._processMatch(n,{}),r=this._processMatch(t,i.isResultProcessed);return[].concat(i.filteredResults,r.filteredResults,i.filteredChildResults,r.filteredChildResults)},t.prototype._flattenTree=function(n){for(
var i=this,t=n,f=[],r=[],e=function(){var e=new s("",""),o=t===n;u._updateCurrentItem(e,e,t.text(),t.text(),o?0:1);c(o?u._directMatchDictionary:u._childMatchDictionary,e,e.text());f.push(e);t.children&&(r=r.concat(t.children.map(function(n){var r=n.text(),u=t.text()+i._filterOptions.delimiter+r;return i._updateCurrentItem(n,t,r,u,0),c(i._directMatchDictionary,e,t.text()),n})));t=r.shift()},u=this;t;)e();return f},t.prototype._updateCurrentItem=function(n,t,i,r,u){var f=u===0&&this._prefixTree||u===1&&this._childPrefixTree;f&&it(f,i,r,this._filterOptions.delimiter);n.text(n.value=r)},t}(e);i.TreeSearchFilterPrefixTree=a;b=[function(n,t,i){var r=i.algorithmType===1?e:f;return new r(n,t,i)},function(n,t,i){var r=i.algorithmType===1?a:h;return new r(n,t,i)}];v=function(){function n(){}return n.prototype.getSearchFilter=function(n,t,i){i||(t.filterOptions=i={datasetType:0});var r=b[i.datasetType];return r?r(n,t,i):null},n}();i.FilterFactory=v;r=function(){function n(){this._root=new u}return n.
prototype.addWord=function(n,t){var i=this._root.lineMatches;n.split("").reduce(function(n,t){var i=n.getChild(t);return i||n.children.push(i=new u(t)),i},this._root);~i.indexOf(t)||i.push(t)},n.prototype.getMatches=function(n){var t=this._root,i,r=n.split("").first(function(n){return i=t.getChild(n),!i||!(t=i)});return r?k(t):[]},n}();i.PrefixTree=r;d=function(t){function i(i,r,u,f){var e,s,h;t.call(this,i,r,u,f);this.filteredItems=y([]);this.filterText=o("");this.noRowsMessage=o("");this.filterInProgress=o(!1);this.controlType=n.ViewModels.ControlType.FilterCombo;e=this._options;e.options||(e.options=y());s=this.value();s&&this.filterText(s);h=this._values=e.options;this.populated=p(i,function(){return!!h().length});(new v).getSearchFilter(i,this,this._options.filterOptions)}return __extends(i,t),Object.defineProperty(i.prototype,"items",{get:function(){return this._values},enumerable:!0,configurable:!0}),__decorate([n.Composition.ProxyCompatibilityMode],i)}(t.Base.EditableComboBox.ViewModel);
i.ViewModel=d})(i=t.FilterComboBox||(t.FilterComboBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=function(t){function i(i,r,u,f){t.call(this,i,r,u,f);this.controlType=n.ViewModels.ControlType.HtmlEditor}return __extends(i,t),i}(t.Base.Editable.ViewModel);i.ViewModel=r})(i=t.HtmlEditor||(t.HtmlEditor={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=function(t){function i(i,u,f,e){t.call(this,i,u,f,e);this.controlType=n.ViewModels.ControlType.MultiLineTextBox;this.rows=this._options.rows||r(7)}return __extends(i,t),i}(t.Base.Typable.ViewModel);i.ViewModel=u})(i=t.MultiLineTextBox||(t.MultiLineTextBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})
),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=function(t){function i(i,u,f,e){t.call(this,i,u,f,e);this.controlType=n.ViewModels.ControlType.MultiselectDropDown;var o=this._options;this.valueInitialized=!1;this.valueSeparator=";";this.popupShown=r(!1);this.multiselect=o.multiselect||r(!0);this.showSelectAll=o.showSelectAll||r(!1);this.showTotal=o.showTotal||!1;this.formatSetting=o.formatSetting||null;this.maxSelectAllowed=o.maxSelectAllowed||r();this.multiItemsDisplayFormat=o.multiItemsDisplayFormat||r("");this.multiItemsMaxDisplayFormat=o.multiItemsMaxDisplayFormat||r("");this.filter=o.filter;this.filterPlaceholder=o.filterPlaceholder;this.customFilter=o.customFilter}return __extends(i,t),i}(t.Base.Groups.ViewModel);i.ViewModel=u})(i=t.MultiSelectDropDown||(t.MultiSelectDropDown={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){
var i;(function(i){"use strict";var u=n.initValue,r=n.initObservable,e=ko.observable,f=function(t){function i(i,f,e,o){t.call(this,i,f,e,o);this.controlType=n.ViewModels.ControlType.NumericTextBox;var s=this._options;this.min=r(s.min,null);this.max=r(s.max,null);this.decimalPoint=r(s.decimalPoint,2);this.invalidText=u(s.invalidText,n.Resources.Strings.NumericTextBox.invalidText);this.placeholder=r(s.placeholder,null);this.allowEmpty=u(s.allowEmpty,!1)}return __extends(i,t),i}(t.Base.Typable.ViewModel);i.ViewModel=f})(i=t.NumericTextBox||(t.NumericTextBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=function(t){function i(i,u,f,e){t.call(this,i,u,f,e);this.controlType=n.ViewModels.ControlType.OAuthButton;var o=this._options;this.requestUrl=o.requestUrl||r(null);this.buttonText=o.buttonText||r(null);this.popupWidth=o.popupWidth||r(null);
this.popupHeight=o.popupHeight||r(null)}return __extends(i,t),i}(t.Base.Input.ViewModel);i.ViewModel=u})(i=t.OAuthButton||(t.OAuthButton={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=function(t){function i(i,r,u,f){t.call(this,i,r,u,f);this.controlType=n.ViewModels.ControlType.OptionsGroup;f=this._options;this.sizeToContent=f.sizeToContent!==undefined?f.sizeToContent:!0;this.radioButtonStyle=!!f.radioButtonStyle;this.singleItemPerLine=!!f.singleItemPerLine}return __extends(i,t),i}(t.Base.Options.ViewModel);i.ViewModel=r})(i=t.OptionsGroup||(t.OptionsGroup={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=function(t){function i(i,u,f,e){t.call(this,i,u,f,e);this.controlType=n.ViewModels.ControlType.
Password;this.emptyValueText=this._options.emptyValueText||r()}return __extends(i,t),i}(t.Base.Editable.ViewModel);i.ViewModel=u})(i=t.PasswordBox||(t.PasswordBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.computed,u=function(t){function i(i,u,f,e){var o=this;t.call(this,i,u,f,e);this.controlType=n.ViewModels.ControlType.RangeSlider;this.valueSeparator=";";this.start=r(this.lifetimeManager,{read:function(){var u=o.value()?o.value():"",t=u.split(o.valueSeparator),i=o.min(),r=i,n=NaN;return t.length===2&&(n=parseFloat(t[0]),isNaN(n)||(r=n)),Math.max(r,i)},write:function(n){o.value(n+o.valueSeparator+o.end())}});this.end=r(this.lifetimeManager,{read:function(){var u=o.value()?o.value():"",t=u.split(o.valueSeparator),i=o.max(),r=i,n=NaN;return t.length===2&&(n=parseFloat(t[1]),isNaN(n)||(r=n)),Math.min(r,i)},write:function(n){o.value(o.start()+o.
valueSeparator+n)}})}return __extends(i,t),i}(t.Base.Slider.ViewModel);i.ViewModel=u})(i=t.RangeSlider||(t.RangeSlider={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=n,r=ko.unwrap,i=ko.observable,s=ko.observableArray,h=ko.computed,f,e,o;(function(n){n[n.Column=0]="Column";n[n.Default=1]="Default";n[n.Dependent=2]="Dependent";n[n.Row=3]="Row";n[n.Tabs=4]="Tabs";n[n.Wrapper=5]="Wrapper"})(t.SectionStyle||(t.SectionStyle={}));f=t.SectionStyle,function(n){n[n.Line=0]="Line";n[n.Block=1]="Block"}(t.TabStyle||(t.TabStyle={}));e=t.TabStyle;o=function(n){function t(t,o){var c=this;n.call(this,t);this.active=i(!1);this.children=s();this.dirty=i(!1);this.name=i();this.width=i();this.submit=i();this.populateSection=i();this.style=i(f.Default);this.valid=i(!0);this.validate=null;this.tabSection=i();this.tabHasBeenLoaded=i(!1);this.cssClass=i();this.controlType=
u.ViewModels.ControlType.DynamicSection;u.isNullOrUndefined(o)&&(o={});this.name=o.name||this.name;this.children=o.children||this.children;this.submit=o.submit||this.submit;this.populateSection=o.populateSection||this.populateSection;this.style=o.style||this.style;this.width=o.width||this.width;this.cssClass=ko.isObservable(o.cssClass)?o.cssClass:i(o.cssClass)||this.cssClass;this.minHeight=o.minHeight;this.tabStyle=o.tabStyle||e.Line;h(this.lifetimeManager,function(){var n=c.children(),f=n.some(function(n){var t=r(n);return t.dirty?t.dirty():!1}),t,i,u;c.tabSection&&c.tabSection()&&(t=c.tabSection().children().some(function(n){var t=r(n);return t.dirty?t.dirty():!1}));i=n.some(function(n){var t=r(n);return t.valid?!t.valid():!1});u=n.some(function(n){var t=r(n);return t.loading?t.loading():!1});c.dirty(f||t);c.valid(!i);c.loading(u)})}return __extends(t,n),t.prototype.clearValidation=function(){var n=[];return this.children().forEach(function(t){var i=t.clearValidation();i&&n.push(i)}),
Q.all(n)},t.prototype.triggerValidation=function(){var n=[];return this.children().forEach(function(t){if(typeof t.triggerValidation=="function"){var i=t.triggerValidation();i&&n.push(i)}}),Q.all(n)},t}(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=o})(i=t.Section||(t.Section={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){var r;(function(r){"use strict";var u=ko.observable,f=function(t){function i(i,r,f,e){var s=this,o;t.call(this,i,r,f,e);this.defaultValue=u();this.showValue=u(!0);this.displayText=u("");this.icon=u();this.locked=u(!1);this.infoBalloonText=u("");this.lockedBalloonText=u("");this.controlType=n.ViewModels.ControlType.Selector;o=this._options;this.defaultValue=o.defaultValue||u();this.showValue=o.showValue||u(!0);this.displayText=o.displayText||u("");this.icon=o.icon||u();this.locked=o.locked||u(!1);this.infoBalloonText=o.infoBalloonText||u("");this.lockedBalloonText=
o.lockedBalloonText||u("");this.infoBalloonLink=o.infoBalloonLink||u(new n.ViewModels.Controls.Balloon.Link);this.isDefault=ko.computed(i,function(){return s.defaultValue()===s.value()})}return __extends(i,t),i}(i.Base.Editable.ViewModel),e,o;r.ViewModelBase=f;e=function(i){function r(r,u,f,e){var o=this;i.call(this,r,u,f,e);this.selectable=new t.Selectable({allowUnselect:!1,selectedValue:this._options.selectedValue||!0,isSelected:this._options.initialState&&this._options.initialState.selectable&&this._options.initialState.selectable.isSelected,isActivated:this._options.initialState&&this._options.initialState.selectable&&this._options.initialState.selectable.isActivated});this.dirty=ko.pureComputed(function(){return!n.deepEquals(o.value(),o.initialValue())})}return __extends(r,i),r}(f);r.ViewModel=e;o=function(t){function i(i,r,u,f){t.call(this,i,r,u,f);this.controlType=n.ViewModels.ControlType.Selector;this.selectable=new FxImpl.Composition.Selectable.Selectable2({supplyBladeReference:
f.supplyBladeReference})}return __extends(i,t),i}(f);r.ViewModel2=o})(r=i.Selector||(i.Selector={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=n.Resources.Strings.ViewModels.Controls.CreatorAndSelector,f,e;(function(n){n[n.CreateOnly=0]="CreateOnly";n[n.SelectOnly=1]="SelectOnly";n[n.CreateOrSelect=2]="CreateOrSelect"})(i.Mode||(i.Mode={}));f=i.Mode;e=function(t){function i(i,e,o,s){t.call(this,i,e,o,s);this.textBoxLabel=r("");this.selectExistingLinkDisplayText=r("");this.createNewLinkDisplayText=r("");this.controlType=n.ViewModels.ControlType.CreatorAndSelector;var h=this._options;this.createNew=h.createNew||r(!0);this.textBoxLabel=h.textBoxLabel||r("");this.selectExistingLinkDisplayText=h.selectExistingLinkDisplayText||r(u.selectExisting);this.createNewLinkDisplayText=h.createNewLinkDisplayText||r(u.createNew);this.displayMode=h.displayMode||
r(f.CreateOrSelect)}return __extends(i,t),i}(t.Selector.ViewModel);i.ViewModel=e})(i=t.CreatorAndSelector||(t.CreatorAndSelector={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=n.Resources.Strings.ViewModels.Controls.CreatorAndSelector,f=n.ViewModels,e,o;(function(n){n[n.CreateOnly=0]="CreateOnly";n[n.SelectOnly=1]="SelectOnly";n[n.CreateOrSelect=2]="CreateOrSelect"})(i.Mode||(i.Mode={}));e=i.Mode;o=function(n){function t(t,i,o,s){var l=this,c,h;i||(s={defaultValue:r({value:"",createNew:!0})});!i||i.valid&&i.sections||(c=i.defaultValue,c?c()||c({value:"",createNew:!0}):c=r({value:"",createNew:!0}));n.call(this,t,i,o,s);this.controlType=f.ControlType.CreatorAndSelectorV2;i.valid&&i.sections&&(this.dirty=ko.pureComputed(function(){var n=l.value(),t=l.initialValue();return!n||!t?n!==t:t.value!==n.value||t.createNew!==n.createNew}));h=this.
_options;this.textBoxLabel=h.textBoxLabel||r("");this.selectExistingLinkDisplayText=h.selectExistingLinkDisplayText||r(u.selectExisting);this.createNewLinkDisplayText=h.createNewLinkDisplayText||r(u.createNew);this.displayMode=h.displayMode||r(e.CreateOrSelect);this.valueUpdateTrigger=h.valueUpdateTrigger||f.Controls.ValueUpdateTrigger.Input}return __extends(t,n),t}(t.Selector.ViewModel);i.ViewModel=o})(i=t.CreatorAndSelectorV2||(t.CreatorAndSelectorV2={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var o=MsPortalFx.Resources.Strings.ViewModels.Controls.CreatorAndComboBox,e=MsPortalFx.ViewModels.Forms,s=e.FilterComboBox,r=e.Section,t=ko.observable,f=ko.observableArray,h=ko.reactor,u=undefined,l,i,c;(function(n){n[n.UseExisting=0]="UseExisting";n[n.CreateNew=1]="CreateNew"})(n.Mode||(n.Mode={}));l=n.Mode,function(n){n[n.UseExisting=0]="UseExisting";n[n.CreateNew=
1]="CreateNew";n[n.Both=2]="Both"}(n.AllowedMode||(n.AllowedMode={}));i=n.AllowedMode;c=function(n){function c(c,l){var k=this,a=l.filterComboOptions=MsPortalFx.Base.Utilities.extend({},l&&l.filterComboOptions),rt=l.children,d=a.filterOptions,g=d&&d.algorithmType,p,w,b,ft;if(l.allowedMode||(l.allowedMode=t(i.Both)),g&&g!==0)throw new Error("CreatorAndComboBox does not support any algorithmType besides the default");var v,nt,tt,it=[nt={text:t(o.createNew),value:!0},tt={text:t(o.useExisting),value:!1}],ut={label:a.label,options:v=f(it),defaultValue:t(!0),validations:f([new MsPortalFx.ViewModels.RequiredValidation]),radioButtonStyle:!0,infoBalloonContent:a.infoBalloonContent,infoBalloonLinkContent:a.infoBalloonLinkContent},y=new e.OptionsGroup.ViewModel(c,ut);a.label=u;a.labelPosition=u;a.infoBalloonContent=u;a.infoBalloonLinkContent=u;p=l.accessor?new s.ViewModel(c,l.form,l.accessor,a):new s.ViewModel(c,a);w=new r.ViewModel(c,{children:rt,style:t(r.SectionStyle.Default)});b=new r.ViewModel(
c,{children:f([p]),style:t(r.SectionStyle.Default)});l.children=f([y]);ft="";h(c,function(){var n=l.children;n().length>1&&n.pop();y.value()?n.push(w):n.push(b)});n.call(this,c,l);this.control=p;this.createOrSelectControl=y;this.allowedMode=l.allowedMode;this._newSection=w;this._selectSection=b;this._options=l;h(c,function(){switch(l.allowedMode()){case i.CreateNew:v([nt]);k.toggleNewOrExisting();break;case i.UseExisting:v([tt]);k.toggleNewOrExisting();break;default:v(it)}})}return __extends(c,n),c.prototype.toggleNewOrExisting=function(n){var r=this.createOrSelectControl.value,f=this._options.allowedMode(),t=n===u?!r():!!n;switch(f){case i.CreateNew:t=!0;break;case i.UseExisting:t=!1}r(t)},c}(r.ViewModel);n.ViewModel=c})(t=n.CreatorAndComboBox||(n.CreatorAndComboBox={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=function(t){function i(i,r,u,f){t.call(this,
i,r,u,f);this.controlType=n.ViewModels.ControlType.Slider}return __extends(i,t),i}(t.Base.Slider.ViewModel);i.ViewModel=r})(i=t.Slider||(t.Slider={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=ko.observable,i,r;(function(n){n[n.Primary=0]="Primary";n[n.Secondary=1]="Secondary";n[n.Both=2]="Both"})(t.Panes||(t.Panes={}));i=t.Panes;r=function(t){function r(r,f){t.call(this,r);this.controlType=n.ViewModels.ControlType.Splitter;var f=f||{};this.primaryPaneSize=f.primaryPaneSize||300;this.showPanes=f.showPanes||u(i.Both);this.vertical=f.vertical||!1;this.reversed=f.reversed||!1;this.minPaneSizes=f.minPaneSizes||{primaryPaneSize:0,secondaryPaneSize:0}}return __extends(r,t),r}(n.ViewModels.Controls.Base.ViewModel);t.ViewModel=r})(i=t.Splitter||(t.Splitter={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={
})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,f=ko.observableArray,u=ko.computed,e=function(n){function i(i,e){var o=this;n.call(this,i);this.disabled=r(!1);this.loading=r(!1);this.controlType=t.ControlType.Section;this.validate=r(0);this.fields=f();this._subs=[];this.dirty=u(function(){return o.fields().some(function(n){return n.dirty()})});this.valid=u(function(){var n=o.fields().some(function(n){return!n.valid()});return!n});this._subs.push(this.validate.subscribe(function(n){o.fields().forEach(function(t){t.validate(n)})}));e&&ko.utils.arrayPushAll(this.fields,e)}return __extends(i,n),i.prototype.dispose=function(){this._subs.length>0&&(this._subs.forEach(function(n){n.dispose()}),this._subs=[]);this.dirty&&this.dirty.dispose();this.valid&&this.valid.dispose()},i.prototype.clearValidation=function(){var n=[];return this.fields().forEach(function(t){var i=t.clearValidation();i&&n.push(i)}),Q.all(n)},i.prototype.triggerValidation=
function(){var n=[];return this.fields().forEach(function(t){var i=t.triggerValidation();i&&n.push(i)}),Q.all(n)},i}(n.ViewModels.Controls.Base.ViewModel);i.ViewModel=e})(r=i.StaticSection||(i.StaticSection={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=function(){function t(t,r){r===void 0&&(r={});this.separator=r.separator||i(";");this.viewModel=new n.ViewModels.Forms.FilterComboBox.ViewModel(t,r.viewModel)}return t}(),u;t.StringListBoxNewValueOptions=r;u=function(t){function u(u,f,e,o){t.call(this,u,f,e,o);this.controlType=n.ViewModels.ControlType.StringList;var s=this._options;this.values=s.values||i([]);this.selected=s.selected||i(null);this.newValueOptions=new r(u,s.newValueOptions);this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(u,t),u.prototype._setEditScopeAccessors=
function(n,i){var r=this,u;t.prototype._setEditScopeAccessors.call(this,n,i);u=this.dirty;ko.isComputed(u)&&u.dispose();this.dirty=ko.pureComputed(function(){return!r._compareValues(r.value(),r.initialValue())})},u.prototype._getUniqueValues=function(n){var t=n.slice(0);return t.sort(function(n,t){return n.localeCompareIgnoreCase(t)}),t.reduce(function(n,t){return(n.length===0||t.localeCompareIgnoreCase(n[n.length-1])!==0)&&n.push(t),n},[])},u.prototype._compareValues=function(n,t){var r,u,i;if(n&&!t||!n&&t)return!1;if(!n&&!t)return!0;if(r=this._getUniqueValues(n),u=this._getUniqueValues(t),r.length!==u.length)return!1;for(i=0;i<r.length;i++)if(r[i].localeCompareIgnoreCase(u[i])!==0)return!1;return!0},u}(n.ViewModels.Forms.Base.Editable.ViewModel);t.ViewModel=u})(i=t.StringListBox||(t.StringListBox={}))})(i=t.Forms||(t.Forms={}))})(i=t.Vso||(t.Vso={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i)
{"use strict";var r=function(t){function i(i,r,u,f){t.call(this,i,r,u,f);this.controlType=n.ViewModels.ControlType.TextBox;this.readonly=this._options.readonly||!1;this.actionHandler=f?f.actionHandler:r?r.actionHandler:null;this.actionsEnabled=ko.observable(!0)}return __extends(i,t),i}(t.Base.Typable.ViewModel);i.ViewModel=r})(i=t.TextBox||(t.TextBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=ko.observable,r=Math.floor,f=function(t){function i(i,r,f,e){var o,s;t.call(this,i,r,f,e);this.showSeconds=!0;this.controlType=n.ViewModels.ControlType.TimePicker;o=this._options;this.enabledDateTimeRange=o.enabledDateTimeRange||u(new n.DateUtil.DateTimeRange);this.allowEmpty=!!o.allowEmpty;s=this._options.showSeconds;n.isNullOrUndefined(s)||(this.showSeconds=s);this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(i,t),i.
prototype._setEditScopeAccessors=function(n){var i=this;t.prototype._setEditScopeAccessors.call(this,n);ko.isComputed(this.dirty)&&this.dirty.dispose();this.dirty=ko.computed(this.lifetimeManager,function(){var n=i.value(),t=i.initialValue();return!n&&!t?!1:!n||!t?!0:r(n.getTime()/1e3)!==r(t.getTime()/1e3)})},i}(t.Base.EditableComboBox.ViewModel);i.ViewModel=f})(i=t.TimePicker||(t.TimePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var o=n.ViewModels.FileUpload,r=o.UploadAction,s=n.Base.Utilities,h=n.isNullOrUndefined,u=n.Resources.Strings.FileUpload,f=ko.observable,e=ko.observableArray,c=function(t){function i(i,r,u,o){var l=this,c;t.call(this,i,r,u,o);this.controlType=n.ViewModels.ControlType.AsyncFileUpload;c=this._options;this.accept=c.accept||null;this.allowedFileExtensions=c.allowedFileExtensions||null;this.maxFiles=c.maxFiles||1;this.uploadContext=
c.uploadContext||f();this.selectedFiles=e([]);this.uploadTasks=e([]);this.autoAddUploadTasks=s.isNullOrUndefined(c.autoAddUploadTasks)?!0:c.autoAddUploadTasks;this._msPortalFxUploadActionCallback=f(null);h(r)||r.valid&&r.sections||(this.dirty=ko.computed(function(){return!n.deepEquals(l.value(),l.initialValue())}))}return __extends(i,t),i.prototype.addUploadTasks=function(n){var t=this._msPortalFxUploadActionCallback(),i=n.map(function(n){return{id:n.id,name:n.name}});return t?t(i,r.AddUploadTasks):Q.reject(u.notReady)},i.prototype.resetUploadTasks=function(){var n=this._msPortalFxUploadActionCallback();return n?n([],r.ResetUploadTasks):Q.reject(u.notReady)},i}(t.Base.Editable.ViewModel);i.ViewModel=c})(i=t.AsyncFileUpload||(t.AsyncFileUpload={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var e=2097152,l=e,a=209715200,v=1048576,y=53687091200,p=e,r=ko.observable,
f,o,w,u,s,h,c;(function(n){n[n.Full=0]="Full";n[n.Stream=1]="Stream";n[n.BlobStore=2]="BlobStore"})(i.FileUploadType||(i.FileUploadType={}));f=i.FileUploadType,function(n){n[n.Default=0]="Default";n[n.Text=1]="Text";n[n.ArrayBuffer=2]="ArrayBuffer";n[n.DataUri=3]="DataUri"}(i.ContentType||(i.ContentType={}));o=i.ContentType,function(n){n[n.Invalid=0]="Invalid";n[n.Pending=1]="Pending";n[n.Uploading=2]="Uploading";n[n.Paused=3]="Paused";n[n.Complete=4]="Complete";n[n.Canceled=5]="Canceled"}(i.UploadStatus||(i.UploadStatus={}));w=i.UploadStatus;u=function(){function n(){this.type=f.Full;this.contentType=o.Default;this.encoding=null;this.maxFileSize=e;this.chunkSize=l}return n}();i.FullFileUploadContext=u;s=function(n){function t(){n.call(this);this.type=f.Stream;this.maxFileSize=a;this.chunkSize=v}return __extends(t,n),t}(u);i.StreamFileUploadContext=s;h=function(n){function t(){n.call(this);this.context=r();this.sasUriCommand=r();this.type=f.BlobStore;this.maxFileSize=y;this.chunkSize=p;
this.skipSasUriUpdateWithSelectedFile=r(!1)}return __extends(t,n),t}(u);i.BlobStoreFileUploadContext=h;c=function(t){function i(i,f,e,o){t.call(this,i,f,e,o);this.controlType=n.ViewModels.ControlType.FileUploadWidget;var s=this._options;this.accept=s.accept||"";this.maxFiles=s.maxFiles||1;this.uploadContext=s.uploadContext||r(new u);this.cancelAllUploads=s.cancelAllUploads||r(!1);this.showProgressBars=s.showProgressBars||r(!0);this.files=r([])}return __extends(i,t),i}(t.Base.Editable.ViewModel);i.ViewModel=c})(i=t.FileUpload||(t.FileUpload={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=ko.observableArray,f,e;(function(n){n[n.Allow=0]="Allow";n[n.Disallow=1]="Disallow";n[n.Ignore=2]="Ignore"})(i.UnrecognizedTokenBehavior||(i.UnrecognizedTokenBehavior={}));f=i.UnrecognizedTokenBehavior;e=function(t){function i(i,e,o,s){t.call(this,i,e,
o,s);this.tokenStartAndEndCharacters=r({tokenStart:"[",tokenEnd:"]"});this.items=u();this.unrecognizedTokenBehavior=r(f.Disallow);this.removeTokenOnDelete=r(!1);this.valueKey=r("name");this.columns=u();this.rowsCount=r(7);this.defaultColumnWidth=r("150px");this.noRowsMessage=r("");this.controlType=n.ViewModels.ControlType.TokenComboBox;this._setDefaults(this._options)}return __extends(i,t),i.prototype._setDefaults=function(n){for(var t in n)this[t]=n[t]||this[t]},i}(t.Base.Editable.ViewModel);i.ViewModel=e})(i=t.TokenComboBox||(t.TokenComboBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=ko.observable,f,r;(function(n){n[n.Unchecked=0]="Unchecked";n[n.Checked=1]="Checked";n[n.Indeterminate=2]="Indeterminate"})(i.Value||(i.Value={}));f=i.Value;r=function(t){function i(i,r,f,e){t.call(this,i,r,f,e);this.controlType=n.ViewModels.ControlType.TriStateCheckBox;
var o=this._options;this.inlineLabel=o.inlineLabel||!1;this.canUserSetIndeterminate=o.canUserSetIndeterminate||u(!0)}return __extends(i,t),i}(t.Base.Input.ViewModel);i.ViewModel=r})(i=t.TriStateCheckBox||(t.TriStateCheckBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){"use strict";var o=n.ViewModels,tt=o.FileDownload,it=tt.Context,h=n.Base.Images,r=ko.observable,c=ko.observableArray,u,s,l,f,a,e,v,y,p,w,b,k,d,g,nt;(function(n){n[n.None=0]="None";n[n.Group=1]="Group";n[n.OpenLinkButton=2]="OpenLinkButton";n[n.OpenBladeButton=3]="OpenBladeButton";n[n.CommandButton=4]="CommandButton";n[n.DialogButton=5]="DialogButton";n[n.ToggleButton=6]="ToggleButton";n[n.FileDownloadButton=7]="FileDownloadButton";n[n.FileUploadButton=8]="FileUploadButton";n[n.OAuthButton=9]="OAuthButton";n[n.OpenBladeButton2=10]="OpenBladeButton2"})(i.ToolbarItemType||(i.ToolbarItemType={}));u=i.ToolbarItemType;s=function(
){function n(n){if(this.type=u.None,this.disabled=r(!1),this.unauthorizedMessage=r(),!u[n])throw new Error("Invalid toolbar item type specified.");this.type=n}return n.prototype.unauthorized=function(n){n||(n="No access");this.unauthorizedMessage(n)},n}();i.ToolbarItem=s;l=function(n){function t(t){n.call(this,t);this.showLabels=r(!1);this.items=c();this.controlType=o.ControlType.Toolbar}return __extends(t,n),t.prototype.setItems=function(n){this.items(n)},t}(t.Controls.Loadable.ViewModel);i.Toolbar=l;f=function(n){function t(t){n.call(this,t);this.label=r();this.icon=r({type:1,data:""})}return __extends(t,n),t}(s);i.ToolbarButton=f;a=function(n){function t(t){n.call(this,u.Group);this.items=t}return __extends(t,n),t}(s);i.ToolbarGroup=a;e=function(n){function t(t){n.call(this,t)}return __extends(t,n),t}(f);i.ExecutableButtonBase=e;v=function(n){function t(){n.call(this,u.CommandButton);this.commandContext=r()}return __extends(t,n),t}(e);i.CommandButton=v;y=function(n){function t(t){n.
call(this,u.ToggleButton);this.checked=r(!1);this.commandContext=r();this.optionGroupName=t}return __extends(t,n),t}(e);i.ToggleButton=y;p=function(n){function t(){n.call(this,u.DialogButton)}return __extends(t,n),t}(e);i.DialogButton=p;w=function(n){function t(){n.call(this,u.FileUploadButton);this.icon(h.Upload());this.accept="";this.maxFiles=1;this.uploadContext=r(new o.FileUpload.FullFileUploadContext);this.cancelAllUploads=r(!1);this.cancelAllUploadsOnFileSelection=r(!0);this.uploadTasks=c()}return __extends(t,n),t}(f);i.FileUploadButton=w;b=function(n){function t(t){n.call(this,u.FileDownloadButton);this.icon(h.Download());this.context=r(new it(t))}return __extends(t,n),t}(f);i.FileDownloadButton=b;k=function(n){function t(){n.call(this,u.OAuthButton);this.icon(h.Link());this.requestUrl=r(null);this.popupWidth=r(800);this.popupHeight=r(600)}return __extends(t,n),t}(f);i.OAuthButton=k;d=function(n){function t(t){n.call(this,u.OpenBladeButton);var i=this.selectable=new o.Selectable(
t);t||i.selectedValue()!==undefined||i.selectedValue(null)}return __extends(t,n),t}(f);i.OpenBladeButton=d;g=function(n){function t(t){n.call(this,u.OpenBladeButton2);t&&(this.selectable=new FxImpl.Composition.Selectable.Selectable2(t))}return __extends(t,n),t}(f);i.OpenBladeButton2=g;nt=function(n){function i(i,f){f===void 0&&(f="_blank");n.call(this,u.OpenLinkButton);this.clickableLink=new t.ClickableLink(r(i),r(f))}return __extends(i,n),i}(f);i.OpenLinkButton=nt})(i=t.Toolbars||(t.Toolbars={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";function o(n){return!!n&&n.status===u.Completed&&(n.action===i.Next||n.action===i.Complete)}var r=ko.observable,e,u,i,f;(function(n){n[n.Unstyled=0]="Unstyled";n[n.BottomBanner=1]="BottomBanner"})(t.SecondaryLinkStyle||(t.SecondaryLinkStyle={}));e=t.SecondaryLinkStyle;t.isCompleted=o,function(n){n[n.NotStarted=0]="NotStarted";n[n.InProgress=1]="InProgress";
n[n.Error=2]="Error";n[n.Completed=3]="Completed"}(t.Status||(t.Status={}));u=t.Status,function(n){n[n.None=0]="None";n[n.Previous=1]="Previous";n[n.Next=2]="Next";n[n.Skip=3]="Skip";n[n.Complete=4]="Complete";n[n.Cancel=5]="Cancel"}(t.Action||(t.Action={}));i=t.Action;f=function(n){function t(){n.apply(this,arguments);this.valid=r();this.input=r();this.output=r({status:u.InProgress,action:i.None})}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.input(n.input),n.valid!==undefined&&this.valid(n.valid),Q()},t}(n.Controls.Loadable.ViewModel);t.ViewModel=f})(i=t.Base||(t.Base={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=function(n){function t(){n.apply(this,arguments);this.enableErrorInfoBox=i(!0);this._msPortalFxClearGroupValidationMessage=i(function(){});this.asyncValidations=[]}return __extends(t,n),
t.prototype.clearGroupValidationMessage=function(){this._msPortalFxClearGroupValidationMessage()()},t}(n.Base.ViewModel);t.ViewModel=r})(t=n.ErrorInfoBoxActionBar||(n.ErrorInfoBoxActionBar={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r,u;(function(n){n[n.Unstyled=0]="Unstyled";n[n.BottomBanner=1]="BottomBanner"})(t.SecondaryLinkStyle||(t.SecondaryLinkStyle={}));r=t.SecondaryLinkStyle;u=function(n){function t(t,u){n.call(this,t);this.actionInProgress=i(!1);this.input=i();this.isProvisioningBlade=i();this.provisionOnStartboardPart=i();this.masterIsProvisioningPart=i(!1);this.eula=i();this.secondaryLinkDisplayText=i();this.secondaryLinkTriggerValidation=i(!1);this.secondaryLinkStyle=i(r.Unstyled);this.disablePrimaryButton=i(!0);this.triggerSelectAction=i("");this.forceInProgressStatus=i();this.dropDown=i();this.showActionBar=
i(!0);this.actionButtonUri=i();u&&typeof u.hideActionBar=="boolean"&&this.showActionBar(!u.hideActionBar)}return __extends(t,n),t.prototype.onInputsSet=function(t){var i=this;return"actionInProgress"in t&&this.actionInProgress(!!t.actionInProgress),n.prototype.onInputsSet.call(this,t).then(function(){var n,u,f,e,o,s;i.eula(t.eula);n=t.secondaryLinkDisplayText;n&&i.secondaryLinkDisplayText(n);u=t.isProvisioningBlade;u&&i.isProvisioningBlade(u);f=t.input;i.masterIsProvisioningPart(f&&!!f.masterIsProvisioningPart);i.forceInProgressStatus(t.forceInProgressStatus);t.suppressErrorInfoBox&&i.enableErrorInfoBox(!1);i.disablePrimaryButton(!!t.disablePrimaryButton);e=t.secondaryLinkStyle;r[e]&&i.secondaryLinkStyle(e);o=t.dropDown;o&&i.dropDown(o);s=t.secondaryLinkTriggerValidation;s&&i.secondaryLinkTriggerValidation(s)})},t}(n.ErrorInfoBoxActionBar.ViewModel);t.ViewModel=u})(t=n.CreateActionBar||(n.CreateActionBar={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||
(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=t.Base,u=r.Action,f=r.Status,e=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.deleteButtonClick=function(){this._onButtonClicked(!0)},i.prototype.cancelButtonClick=function(){this._onButtonClicked(!1)},i.prototype._onButtonClicked=function(t){var i=t?f.Completed:f.NotStarted,r=t?u.Complete:u.Cancel;this.output({status:i,action:r,userActionId:n.getUniqueId()})},i}(r.ViewModel);i.ViewModel=e})(i=t.DeleteActionBar||(t.DeleteActionBar={}))})(i=t.ActionBars||(t.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.updateButtonClick=function(){},t.prototype.resetButtonClick=function(){},t}(n.Base.ViewModel);t.ViewModel=i})(t=n.FilterActionBar||(n.FilterActionBar=
{}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=n.Base.Utilities,r=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.saveButtonClick=function(){},t.prototype.discardButtonClick=function(){},t}(t.Base.ViewModel);i.ViewModel=r})(i=t.FormActionBar||(t.FormActionBar={}))})(i=t.ActionBars||(t.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=n.Base.SecondaryLinkStyle,u=function(n){function t(){n.apply(this,arguments);this.enableErrorInfoBox=i(!1);this.actionButtonLabel=i();this.actionSummaryHtml=i();this.allowToggleProvisioningLocation=i(!1);this.secondaryLinkDisplayText=i();this.secondaryLinkTriggerValidation=i(!1);this.secondaryLinkStyle=i(r.Unstyled)}return __extends(t,n),t.
prototype.actionButtonClick=function(){},t.prototype.onInputsSet=function(t){var i=this;return n.prototype.onInputsSet.call(this,t).then(function(){var s=t.actionButtonLabel,n,u,f,e,o;s&&i.actionButtonLabel(s);n=t.actionSummaryHtml;n&&i.actionSummaryHtml(n);u=t.allowToggleProvisioningLocation;u&&i.allowToggleProvisioningLocation(u);f=t.secondaryLinkDisplayText;f&&i.secondaryLinkDisplayText(f);e=t.secondaryLinkStyle;r[e]&&i.secondaryLinkStyle(e);o=t.secondaryLinkTriggerValidation;o&&i.secondaryLinkTriggerValidation(o)})},t}(n.ErrorInfoBoxActionBar.ViewModel);t.ViewModel=u})(t=n.GenericActionBar||(n.GenericActionBar={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=function(n){function t(){n.apply(this,arguments);this.triggerSelectAction=i("");this.eula=i();this.showSelectButton=i();this.selectButtonText=i()}return __extends(t,
n),t.prototype.onInputsSet=function(t){"triggerSelectAction"in t&&this.triggerSelectAction(t.triggerSelectAction);this.eula(t.eula);"selectButtonText"in t&&this.selectButtonText(t.selectButtonText);var i=this.showSelectButton;return"showSelectButton"in t?i(!!t.showSelectButton):i()===undefined&&i(!0),n.prototype.onInputsSet.call(this,t)},t}(n.Base.ViewModel);t.ViewModel=r})(t=n.PickerActionBar||(n.PickerActionBar={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){"use strict";var t=function(){function t(t){this.type=n.DialogType.Invalid;this.title=t}return t}();n.Dialog=t})(t=n.Dialogs||(n.Dialogs={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Abort=0]="Abort";n[n.Cancel=1]="Cancel";n[n.Ignore=2]="Ignore";n[n.No=3]="No";n[n.Ok=4]="Ok";n[n.Retry=5]="Retry";n[n.Yes=6]="Yes"})(n.
DialogResult||(n.DialogResult={}));var t=n.DialogResult})(t=n.Dialogs||(n.Dialogs={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Invalid=0]="Invalid";n[n.MessageBox=1]="MessageBox";n[n.ProgressBox=2]="ProgressBox";n[n.Form=3]="Form";n[n.List=4]="List"})(n.DialogType||(n.DialogType={}));var t=n.DialogType})(t=n.Dialogs||(n.Dialogs={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function tt(n){var t=window.fx.environment;return t.extensionName===o.Constants.ExtensionNames.Hubs?l.CloudName.readFromInputs(n):l.selfCloudName}var o=n.Base,f=n.Helpers,c=n.Services.Gallery,l=FxImpl.Extension,a=c.Constants,r=undefined,i=ko.observable,v=ko.toJS,k=o.Constants.ExtensionNames.Hubs,y=new o.Diagnostics.Log("MsPortalFx/ViewModels/ParameterCollection/Internal/Provisioner"),d=a.GalleryParametersKey,
e=a.GalleryOptionsKey,s="",g={provEntityUndefined:s,notEnabled:s,unableToLocatePart:s},h=FxImpl.getErrorMap(g),nt=function(){function n(){this.inputs=i();this.errors=i([])}return n}(),p,w,u,b;t.CollectorBindingInternals=nt;p=function(){function n(){this.outputs=i();this.commit=i()}return n}();t.ProviderBindingInternals=p;w=function(){function i(n){this._provisioningEntity=r;this._data=r;this._options=r;this._executionDeferred=r;this._provisioningCommandSubscription=r;this._mappedOutputs=r;n||h.provEntityUndefined();this._provisioningEntity=n;this._executionDeferred=f.Deferred()}return Object.defineProperty(i.prototype,"mappedOutputs",{get:function(){return this._mappedOutputs},enumerable:!0,configurable:!0}),i.prototype.executeProvisioning=function(n,t){var p=this,i=this._provisioningEntity,tt,it,l,a,rt,u;i.enableProvisioning()||h.notEnabled();var w=n,b=i.executeProvisioning&&i.executeProvisioning.bind(i),k=i.mapOutputsForProvisioning&&i.mapOutputsForProvisioning.bind(i),o=!!b,d=!!k;if(
o&&d)return y.error("Override 'executeProvisioning' or 'mapOutputsForProvisioning', but not both."),f.reject();if(!o){var g=t&&t[e],s=g&&g.galleryItem,nt=s&&s.categoryIds||[];if(nt.length>0&&(tt=c.noSubCreateCategoryId.toLowerCase(),it=nt.some(function(n){return n.toLowerCase()===tt}),it))return y.error("The gallery item '"+s.itemDisplayName+"' requires no subscriptions, which requires custom provisioning. Override 'executeProvisioning'"),f.reject()}return(d&&(n=k(w)),l=i.provisionOnStartboardPart,a=i.privatePcPrBI,l&&l())?(a.masterIsProvisioningPart()?this._mappedOutputs=n:(this._initializeProvisioningEntity(t[e]),rt={provisioningOptions:{originalData:w,data:v(n),options:v(t)}},a.triggerProvisioningInStartboardPart(rt)),f.resolve()):o?(this._traceProvisioningStarted(),u=b(n),u?u.then(function(){p._traceProvisioningEnded(!0)},function(){p._traceProvisioningEnded(!1)}):this._traceProvisioningEnded(r),u):this._beginExecution(n,t)},i.prototype.dispose=function(){var n=this._provisioningCommandSubscription;
n&&!n.isDisposed&&n.dispose()},i.prototype._initializeProvisioningEntity=function(n){var u=n.uiDefinition.markup.reference,t=u.provisioningPartName,i=u.provisioningPartExtension,r;t||i?t&&i||h.unableToLocatePart():(t="ProvisionerPart",i=k);r=this._provisioningEntity.privatePcPrBI;r.provisioningPartName(t);r.provisioningPartExtensionName(i)},i.prototype._beginExecution=function(t,i){var f=this,r;return this._data=t,this._options=i,r=this._provisioningEntity.privatePcPrBI,this._provisioningCommandSubscription=r.provisioningCommand.subscribe(function(n){n.status(u.Idle);f._executeProvisioning(n);var t=f._provisioningCommandSubscription;t&&!t.isDisposed&&t.dispose()}),r.triggerProvisioningCommand(n.getUniqueId()),this._executionDeferred.promise()},i.prototype._executeProvisioning=function(n){var t=this,f,i;n.status(u.InProgress);this._traceProvisioningStarted();f=n.execute({options:this._options,data:this._data});i=this._executionDeferred;f?f.then(function(r){t.deploymentResponse=r;t._provisioningEntity.
privatePcPrBI.provisioningStarted({galleryParameters:t._data.outputParameters[d],configurationOptions:t._options[e],deploymentResponse:r});n.status(u.Succeeded);t._traceProvisioningEnded(!0);i.resolve()},function(){n.status(u.Failed);t._traceProvisioningEnded(!1);i.reject()}):(this._traceProvisioningEnded(r),i.resolve())},i.prototype._createEventBase=function(){var i=this._options,u=i&&i[e],n=u&&u.launchingContext,t={name:r,data:{oldCreateApi:!0}};return n&&(t.name=n.galleryItemId,t.data.launchingContext=n),t},i.prototype._traceProvisioningStarted=function(){return t.ProvisioningTelemetry.traceProvisioningStarted(this._createEventBase())},i.prototype._traceProvisioningEnded=function(n){var f=this._createEventBase(),e=t.ProvisioningTelemetry.ActionModifier,o=t.ProvisioningTelemetry.ProvisioningStatus,i,u;return n===r?(i=e.Succeeded,u=o.NoPromise):n?(i=e.Succeeded,u=o.Resolved):(i=e.Failed,u=o.UnknownFailure),f.actionModifier=i,f.data.provisioningStatus=u,t.ProvisioningTelemetry.traceProvisioningEnded(
f)},__decorate([n.Composition.ProxyCompatibilityMode],i)}();t.Provisioner=w,function(n){n[n.Idle=0]="Idle";n[n.InProgress=1]="InProgress";n[n.Succeeded=2]="Succeeded";n[n.Failed=3]="Failed"}(t.ProvisioningCommandStatus||(t.ProvisioningCommandStatus={}));u=t.ProvisioningCommandStatus;b=function(){function n(){this.triggerProvisioningCommand=i();this.provisioningPartExtensionName=i();this.provisioningPartName=i();this.triggerProvisioningInStartboardPart=i();this.masterIsProvisioningPart=i(!1);this.forceDiscardJourney=i(!0);this.provisioningCommand=i();this.provisioningAttempted=i();this.provisioningStarted=i();this.provisioningCompleted=i()}return n}();t.ProvisioningEntityBindingInternals=b;t.getCloudNameFromInputs=tt})(i=t.Internal||(t.Internal={}))})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";function v(){f.client.
registerRpcEndPoint(u.submitProvisionerTelemetry,{allowedOrigin:null,handler:function(n,t){n.extension=t.srcWindowId;c.trace(n)}})}function y(n){return n||(n={}),n.source=e,n.action=i.ProvisioningStarted,s(o(n)),n}function p(n){return n||(n={}),n.source=e,n.action=i.ProvisioningEnded,s(o(n)),n}function o(n){var t=n.data||{},i=t.launchingContext||{};return i.telemetryId&&(t.telemetryId=i.telemetryId),n}function s(n){f.client.invokeRpc(u.submitProvisionerTelemetry,h.Shell,n)}var r=n.Base,h=r.Constants,u=FxImpl.Constants.RpcMethods,f=r.Rpc.Internal,c=r.Diagnostics.Telemetry,e="Provisioner",i,l,a;(function(n){n.ProvisioningEnded="ProvisioningEnded";n.ProvisioningStarted="ProvisioningStarted"})(i||(i={})),function(n){n.Failed="Failed";n.Succeeded="Succeeded"}(l=t.ActionModifier||(t.ActionModifier={})),function(n){n.NoPromise="NoPromise";n.Resolved="Resolved";n.UnknownFailure="UnknownFailure"}(a=t.ProvisioningStatus||(t.ProvisioningStatus={}));t.registerTelemetrySubmissionHandler=v;t.traceProvisioningStarted=
y;t.traceProvisioningEnded=p})(i=t.ProvisioningTelemetry||(t.ProvisioningTelemetry={}))})(i=t.Internal||(t.Internal={}))})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";function e(n){return typeof n=="function"}var a=n.Base,vt=n.Data,h=n.Helpers,w=n.ViewModels,b=n.Services.Gallery,o=n.ViewModels.ParameterCollection.Internal.ProvisioningTelemetry,k=n.getUniqueId,u=ko.observable,d=ko.toJS,yt=new a.Diagnostics.Log("MsPortalFx/ViewModels/ParameterCollectionV2/Internal/ParameterCollectorImpl"),v="enableProvisioning",g=b.Constants,y=g.GalleryOptionsKey,pt=g.GalleryParametersKey,wt=a.Constants.ExtensionNames.Hubs,p=new a.Diagnostics.Log("MsPortalFx/ViewModels/ParameterCollectionV2/Internal/ProvisionerImpl"),nt="masterIsProvisioningPart",c="parameterCollection",tt="preserveJourney",bt="previousOutputParameters",kt=new a.Diagnostics.Log("MsPortalFx/ViewModels/ParameterCollectionV2/Internal/ParameterProviderImpl"),
it="provisionOnStartboardPart",f="",s=undefined,dt={lifetimeManagerMissing:f,inputsMissing:f,overrideInputParametersMissing:f,dataModelTypeNotRegistered:f,provisionerMissing:f,provBindingInternalsMissing:f,provisioningEntityDisabled:f,insufficientInformation:f,provisionerBindingMissing:f,editScopeImplMissing:f,collectorCallbacksMissing:f,providerAlreadyRegistered:f,noCallbacks:f,overrideOutputParametersRejected:f,optionsMissing:f,privateFpTcBIMissing:f,privatePcPrBIMissing:f},r=FxImpl.getErrorMap(dt),gt=function(){function n(){}return n.createEditScope=function(n,t,i,r){return new rt(n,t,i,r)},n}(),rt,ut,ft,et,ot,st,ht,ct,lt,at,l;i.EditScopeFactory=gt;rt=function(){function i(n,t,i,u){this._editScopeCache=null;this._editScopeView=null;this._editScopeFetchPromise=null;this._haveEditScopeIdPromise=null;this._editScopeId=null;this._initializeMethod=null;this._lifetimeManager=null;this._providerRole=null;this._stubDataModel=null;t||r.lifetimeManagerMissing();this._providerRole=n;this._lifetimeManager=
t;u&&(this._editScopeView=u);this._initializeMethod=i}return Object.defineProperty(i.prototype,"editScope",{get:function(){return this._getEditScopeView().editScope},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataModel",{get:function(){var r=this._getEditScopeView().editScope(),n,i;return!!this._editScopeId&&r?r.root:(n=this.collectorInputs,i=n&&n.inputParameters,i)?(this._stubDataModel||(this._stubDataModel=t.Utilities.parametersToModel(i)),this._stubDataModel):null},enumerable:!0,configurable:!0}),i.prototype.processInputs=function(n){this._editScopeId=n.editScopeId;var t=n.privateFcTpBI,i=t&&t.inputs;return i&&(this.collectorInputs=JSON.parse(JSON.stringify(i))),this._haveEditScopeIdPromise&&this._editScopeId&&this._haveEditScopeIdPromise.resolve(),null},i.prototype.initializeEditScope=function(){this._getEditScopeView()},i.prototype.fetchEditScope=function(){var n=this;return this._editScopeFetchPromise||(this._editScopeFetchPromise=Q(!0).then(function(){return n.
_editScopeId||(n._haveEditScopeIdPromise=Q.defer()),n._haveEditScopeIdPromise}).then(function(){return n._editScopeView.fetchForExistingData(n._editScopeId,n.collectorInputs)}).then(function(){return e(n._initializeMethod)&&n._initializeMethod()})),this._editScopeFetchPromise},i.prototype.initializeDataModel=function(n,t){var e=this,i,u,f;return n||r.inputsMissing(),t||r.overrideInputParametersMissing(),i=h.Deferred(),u=function(t){var r=e._createEditScopeModelFromInputs(t,n.inputMetadata);i.resolve(r)},t?(f=t(n.inputParameters,n.inputMetadata,n.options),f?f.then(function(n){e.collectorInputs=n;u(n.inputParameters)},function(){i.reject()}):u(n.inputParameters)):u(n.inputParameters),i.promise()},i.prototype.discardEditScopeEdits=function(){var n=this._editScopeCache;n&&n.disposeAndDiscardEdits(this._editScopeId,this._editScopeView)},i.prototype._getEditScopeCache=function(){var i=this,n,t;return this._editScopeCache||(n=this._providerRole,t=n&&n.dataModelTypeName,!t||vt.Metadata.getTypeMetadata(
t)||r.dataModelTypeNotRegistered(t),this._editScopeCache=new FxImpl.Data.EditScopeCacheOld({entityTypeName:t,supplyExistingData:function(t){return i.initializeDataModel(t,function(){return n&&e(n.overrideInputParameters)?n.overrideInputParameters(t.inputParameters,t.inputMetadata,t.options):h.resolve(t)})},serializeParams:function(){return"#"}}),this._lifetimeManager.registerForDispose(this._editScopeCache)),this._editScopeCache},i.prototype._getEditScopeView=function(){return this._editScopeView||(this._editScopeView=this._getEditScopeCache().createView(this._lifetimeManager)),this._editScopeView},i.prototype._createEditScopeModelFromInputs=function(n,t){var f={},i,r,e;for(i in n){f[i]={};for(r in n[i])e=n&&n[i]&&n[i][r]||t&&t[i]&&t[i][r]&&t[i][r].defaultValue||"",f[i][r]=u(e)}return f},__decorate([n.Composition.ProxyCompatibilityMode],i)}();ut=function(){function n(){this.inputs=u();this.errors=u([])}return n}();i.CollectorBindingInternals=ut;ft=function(){function n(){this.outputs=u(
);this.commit=u()}return n}();i.ProviderBindingInternals=ft;et=function(){function n(){this.triggerProvisioningCommand=u();this.provisioningPartExtensionName=u();this.provisioningPartName=u();this.triggerProvisioningInStartboardPart=u();this.masterIsProvisioningPart=u(!1);this.forceDiscardJourney=u(!0);this.provisioningCommand=u();this.provisioningAttempted=u();this.provisioningStarted=u();this.provisioningCompleted=u()}return n}();i.ProvisionerBindingInternals=et;ot=function(){function n(){}return n.createParameterCollector=function(n,t,i,r,u){return new st(n,t,i,r,u)},n.confirmCommitSuffix="{0}_confirmCommit",n.tryCommitSuffix="_tryCommit",n}();i.ParameterCollectorFactory=ot;st=function(){function t(n,t,i,f,e){this._providerCallbacks={};this._collectorRole=null;this._editScopeImpl=null;this._lifetimeManager=null;this._options=null;this._privateFcTpBI=null;this._providerCommitSignal=null;this._commitSignalReceived=!1;this._providerOutputsCache=null;i||r.provisionerBindingMissing();t||
r.editScopeImplMissing();f||r.lifetimeManagerMissing();this._collectorRole=n;this._privateFcTpBI=i;this._editScopeImpl=t;this._lifetimeManager=f;this._options=e||{commitWhenSignaled:!1,commitAction:null};this._providerCommitSignal=u();this._providerOutputsCache={}}return t.prototype.processInputs=function(t){var i,r;return t.privateFpTcBI&&(i=t.privateFpTcBI.commit),t.fromProviderBindingInternals&&(i=t.fromProviderBindingInternals.commit),!i||i===this._providerCommitSignal()||(r=w.ParameterCollectionV2.Internal.ParameterCollectorFactory.confirmCommitSuffix,i===r.format(this._providerCommitSignal())?this._deferredProviderDismiss&&(this._deferredProviderDismiss.resolve(),this._deferredProviderDismiss=s,this._commitSignalReceived=!1):(this.providerOutputs=t.privateFpTcBI&&t.privateFpTcBI.outputs||t.fromProviderBindingInternals&&t.fromProviderBindingInternals.outputs,this._commitSignalReceived=!0,this._providerCommitSignal(i),this._options.commitWhenSignaled&&this.commitProviderOutputs(null).
then(this._options.commitAction))),n.Helpers.resolve()},t.prototype.addProvider=function(n,t){t||r.collectorCallbacksMissing();this._providerCallbacks[n]&&r.providerAlreadyRegistered(n);this._providerCallbacks[n]=t},t.prototype.removeProvider=function(n){this._providerCallbacks[n]&&delete this._providerCallbacks[n]},t.prototype.sendInputsToProvider=function(n){var u=this._editScopeImpl.dataModel,i=this._editScopeImpl.collectorInputs,f=i&&i.inputMetadata,o=i&&i.options,t;this._providerCallbacks[n]&&e(this._providerCallbacks[n].createInputParameters)?t=this._providerCallbacks[n].createInputParameters():this._collectorRole?t=this._collectorRole.createInputParameters(n):r.noCallbacks(n);n in this._providerOutputsCache&&(c in t.options||(t.options[c]={}),t.options[c][bt]=this._providerOutputsCache[n]);this._privateFcTpBI.inputs(t)},t.prototype.commitProviderOutputs=function(n){var t=this,i=Q.defer(),r,f=w.ParameterCollectionV2.Internal.ParameterCollectorFactory.tryCommitSuffix,u=function(){
t._commitSignalReceived=!1;t._providerOutputsCache[n]=t.providerOutputs;t._validateProviderOutputs(n).then(function(){t._saveProviderOutputs(n).then(function(){t._providerCommitSignal().indexOf(f)>-1?(t._deferredProviderDismiss=i,t._privateFcTpBI.errors([{errorMessage:null,parameterName:t._providerCommitSignal()}]),t._privateFcTpBI.errors([])):i.resolve()},function(){i.reject()})},function(){i.reject()});r&&r.dispose()};return this._commitSignalReceived?u():r=this._providerCommitSignal.subscribe(this._lifetimeManager,function(){u()}),i.promise},t.prototype._validateProviderOutputs=function(n){var u=this,t=Q.defer(),i,f=this._providerCallbacks[n],o=f&&f.validateOutputParameters,s=this.providerOutputs.outputParameters,r=this._collectorRole;return e(o)?i=o(s):r&&e(r.validateOutputParameters)&&(i=r.validateOutputParameters(n,s)),i?i.then(function(n){n&&n.length>0?(u._privateFcTpBI.errors(n),u._privateFcTpBI.errors([]),t.reject()):t.resolve()},function(){yt.error("A rejected promise was returned by the 'validateOutputParameters' method.Resolve with the validation errors instead.");
t.reject()}):t.resolve(),t.promise},t.prototype._saveProviderOutputs=function(n){var t,i=this._providerCallbacks[n],u=i&&i.saveOutputParameters,f=this.providerOutputs.outputParameters;return(e(u)?t=u(f):this._collectorRole?t=this._collectorRole.saveOutputParameters(n,f):r.noCallbacks(n),t)?t:Q(s)},t}();ht=function(){function n(){}return n.createParameterProvider=function(n,t){return new ct(n,t)},n}();i.ParameterProviderFactory=ht;ct=function(){function i(n,t){this._editScopeImpl=null;this._providerRole=null;this._lastCommitSignal="";t||r.lifetimeManagerMissing();this._providerRole=n;this._editScopeImpl=t}return i.prototype.processInputs=function(n){var u=null,t,i,f,r;return n.privateFcTpBI&&(t=n.privateFcTpBI.errors,t&&t.length>0&&(i=this._lastCommitSignal,f=t.first(function(n){return n.parameterName===i}),t.length===1&&f&&(r=this._lastDiscardEdits,r&&(r(),this._lastDiscardEdits=s),this._privateFpTcBI.commit(i+"_confirmCommit"))),u=this._editScopeImpl.fetchEditScope()),u},i.prototype.getOutputsToCommit=
function(){var o=t.Utilities.modelToParameters(this._editScopeImpl.dataModel),u=this._providerRole,i=u&&u.overrideOutputParameters,f;return e(i)?(i=i&&i.bind(u),f=Q.defer(),i(o).then(function(n){f.resolve({outputParameters:n})},function(){r.overrideOutputParametersRejected()}),f.promise):n.Helpers.resolve({outputParameters:o})},i.prototype.commitOutputs=function(n){var i=this,f,e,h;n||r.optionsMissing();n.privateFpTcBI||r.privateFpTcBIMissing();var t=n.provisioner,u=t&&t.provisionOnStartboardPart,o=t&&t.enableProvisioning();o&&u&&!u()&&!n.privatePcPrBI&&r.privatePcPrBIMissing();f=function(){var r=n.privateFpTcBI;i._lastCommitSignal=k()+"_tryCommit";i._lastDiscardEdits=n.discardEdits;i._privateFpTcBI=r;r.commit(s);r.outputs(t&&t.mappedOutputs||n.provisionerData);r.commit(i._lastCommitSignal);o&&u&&!u()&&n.privatePcPrBI.provisioningAttempted({commitId:k()})};o?(e=t.executeProvisioning(n.provisionerData,this._editScopeImpl.collectorInputs.options),h=n.progressAction,h&&h(e),e?e.then(function(
){f()},function(){kt.error("Provisioning action failed.")}):f()):f()},i}();lt=function(){function n(){}return n.createProvisioner=function(n,t){return new at(n,t)},n}();i.ProvisionerFactory=lt;at=function(){function t(n,t){this.enableProvisioning=u(!1);this.provisionOnStartboardPart=u(!0);this._data=null;this._executionDeferred=null;this._options=null;this._privatePcPrBI=null;this._provisionerRole=null;this._provisioningCommandSubscription=null;n||r.provisionerMissing();t||r.provBindingInternalsMissing();this._provisionerRole=n;this._privatePcPrBI=t;this._executionDeferred=h.Deferred()}return t.prototype.processInputs=function(n){var r,i,t;return this.provisionOnStartboardPart(n.provisionOnStartboardPart),this._privatePcPrBI.masterIsProvisioningPart(n.masterIsProvisioningPart),r=n.privateFcTpBI,i=r&&r.inputs,i&&(c in i.options&&i.options[c]&&(t=i.options[c],v in t&&t[v]&&this.enableProvisioning(!0),it in t?this.provisionOnStartboardPart(t[it]):this.provisionOnStartboardPart(n.provisionOnStartboardPart),
nt in t?this._privatePcPrBI.masterIsProvisioningPart(t[nt]):this._privatePcPrBI.masterIsProvisioningPart(n.masterIsProvisioningPart),tt in t&&this._privatePcPrBI.forceDiscardJourney(!t[tt])),v in i.options&&i.options[v]&&this.enableProvisioning(!0)),null},t.prototype.executeProvisioning=function(n,t){var i=this,f,nt,a,u;this.enableProvisioning()||r.provisioningEntityDisabled();var o=this._provisionerRole,v=n,w=e(o.executeCustomProvisioning),k=e(o.mapOutputsForProvisioning);if(w&&k)return p.error("You can only override 'executeCustomProvisioning' or 'mapOutputsForProvisioning', but not both."),h.reject();if(w)return this._traceProvisioningStarted(),f=o.executeCustomProvisioning(n.outputParameters,t),f?f.then(function(){i._traceProvisioningEnded(!0)},function(){i._traceProvisioningEnded(!1)}):this._traceProvisioningEnded(s),f;var g=t&&t[y],c=g&&g.galleryItem,l=c&&c.categoryIds;return l&&l.length>0&&(nt=l.some(function(n){return n.toLowerCase()===b.noSubCreateCategoryId.toLowerCase()}),nt)?
(p.error("No custom provisioning is implemented. The gallery item '"+c.itemDisplayName+"' requires no subscriptions, which requires custom provisioning. You need to override 'executeCustomProvisioning'"),h.reject()):k?(a=this._provisionerRole.mapOutputsForProvisioning(v.outputParameters,t),u=h.Deferred(),a?a.then(function(r){if(n.outputParameters=r,i.provisionOnStartboardPart()){if(!i._privatePcPrBI.masterIsProvisioningPart()){i._initializeProvisioningEntity(t[y]);var f={provisioningOptions:{originalData:v,data:d(n),options:d(t)}};i._privatePcPrBI.triggerProvisioningInStartboardPart(f)}u.resolve()}else i._beginExecution(n,t).then(function(){u.resolve()},function(){u.reject()})},function(){p.error("The promise returned by 'mapOutputsForProvisioning' should not be rejected.");u.reject()}):(p.error("'mapOutputsForProvisioning' did not return a promise."),u.reject()),u.promise()):this._beginExecution(n,t)},t.prototype._initializeProvisioningEntity=function(n){var t=n.uiDefinition.markup.reference,
i=t.provisioningPartName,u=t.provisioningPartExtension;i||u?t.provisioningPartName&&t.provisioningPartExtension||r.insufficientInformation():(i="ProvisionerPart",u=wt);this._privatePcPrBI.provisioningPartName(i);this._privatePcPrBI.provisioningPartExtensionName(u)},t.prototype._beginExecution=function(t,i){var r=this;return this._data=t,this._options=i,this._provisioningCommandSubscription=this._privatePcPrBI.provisioningCommand.subscribe(function(n){n.status(l.Idle);r._executeProvisioning(n);r._provisioningCommandSubscription&&!r._provisioningCommandSubscription.isDisposed&&r._provisioningCommandSubscription.dispose()}),this._privatePcPrBI.triggerProvisioningCommand(n.getUniqueId()),this._executionDeferred.promise()},t.prototype._executeProvisioning=function(n){var t=this,i;n.status(l.InProgress);this._traceProvisioningStarted();i=n.execute({options:this._options,data:this._data});i?i.then(function(i){t.deploymentResponse=i;t._privatePcPrBI.provisioningStarted({galleryParameters:t._data.
outputParameters[pt],configurationOptions:t._options[y],deploymentResponse:i});n.status(l.Succeeded);t._traceProvisioningEnded(!0);t._executionDeferred.resolve()},function(){n.status(l.Failed);t._traceProvisioningEnded(!1);t._executionDeferred.reject()}):(this._traceProvisioningEnded(s),this._executionDeferred.resolve())},t.prototype._createEventBase=function(){var r=this._options,i=this._options&&this._options[y],n=i&&i.launchingContext,t={name:s,data:{oldCreateApi:!0}};return n&&(t.name=n.galleryItemId,t.data.launchingContext=n),t},t.prototype._traceProvisioningStarted=function(){return o.traceProvisioningStarted(this._createEventBase())},t.prototype._traceProvisioningEnded=function(n){var r=this._createEventBase(),t,i;return n===s?(t=o.ActionModifier.Succeeded,i=o.ProvisioningStatus.NoPromise):n?(t=o.ActionModifier.Succeeded,i=o.ProvisioningStatus.Resolved):(t=o.ActionModifier.Failed,i=o.ProvisioningStatus.UnknownFailure),r.actionModifier=t,r.data.provisioningStatus=i,o.traceProvisioningEnded(
r)},t}(),function(n){n[n.Idle=0]="Idle";n[n.InProgress=1]="InProgress";n[n.Succeeded=2]="Succeeded";n[n.Failed=3]="Failed"}(i.ProvisioningCommandStatus||(i.ProvisioningCommandStatus={}));l=i.ProvisioningCommandStatus})(i=t.Internal||(t.Internal={}))})(i=t.ParameterCollectionV2||(t.ParameterCollectionV2={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var b=n.Base,f=FxImpl.Extension,k=b.Images,i=ko.observable,d=ko.observableArray,e="The {0} method on MsPortalFx.ViewModels.Command has not been implemented.",g=n.Resources.Strings,o="error",s=412,nt,h,r,c,l,a,v,y,u,p,w,tt;(function(n){n[n.None=0]="None";n[n.Executing=1]="Executing"})(t.CommandStatus||(t.CommandStatus={}));nt=t.CommandStatus,function(n){n[n.Text=1]="Text";n[n.Binary=2]="Binary"}(t.FileDownloadType||(t.FileDownloadType={}));h=t.FileDownloadType;r=function(){function n(){this.enabled=i(!0);this.icon=i();this.text=i()}return n}();t.CommandBase=r;c=function(t){function r(
){t.apply(this,arguments);this.status=i(n.ViewModels.CommandStatus.None);this.dialog=i()}return __extends(r,t),r.prototype.execute=function(){throw new Error(e.format("execute"));},r.prototype.dialogClick=function(){throw new Error(e.format("dialogClick"));},r}(r);t.Command=c;l=function(n){function t(){n.apply(this,arguments);this.navigateUri=i("");this.navigateTarget=i("_blank")}return __extends(t,n),t}(r);t.UriCommand=l;a=function(n){function t(){n.apply(this,arguments);this.navigateUri=i("");this.navigateUriCallback=i(null);this.navigateTarget=i("_blank");this.showUriCallbackConfirmationDialog=i(!1)}return __extends(t,n),t}(r);t.UriCallbackCommand=a;v=function(n){function t(){n.apply(this,arguments);this.listItems=d([]);this.selectedItem=i("")}return __extends(t,n),t}(r);t.ListCommand=v;y=function(n){function t(){n.apply(this,arguments);this.viewModel=i(null)}return __extends(t,n),t}(r);t.DynamicCommand=y;u=function(){function n(n,t,i){this.status=n;this.statusCode=t;this.errorMessage=
i}return n}();t.FileDownloadStatus=u;p=function(n){function t(t){var e=this,r,c;n.call(this);this.targetUri=i("");this.targetUriCallback=i(null);this.httpMethod=i("GET");this.httpRequestContent=i("");this.httpRequestContentType=i("application/json");this.headers=i({});this.authorizationToken=i(null);this.targetFileName=i("");this.errorMessage=i("");this.downloadType=i(h.Text);this.downloadStatus=i();this.showUriCallbackConfirmationDialog=i(!1);this.uriCallbackConfirmationDialogOptions=null;this.showDownloadProgressDialog=i(!1);this.downloadProgressDialogOptions=null;this.icon(k.Download());t===!0?r={resourceName:""}:t&&(r=t.authorizationOptions);r&&(c={resourceName:r.resourceName,cloudName:f.selfCloudName},f.getRuntime().getAuthorizationToken(c).then(function(n){n&&n.header?e.authorizationToken(n.header):e.downloadStatus(new u(o,s,g.FileDownloadCommand.authTokenNotAvailable))},function(n){e.downloadStatus(new u(o,s,n))}))}return __extends(t,n),t}(r);t.FileDownloadCommand=p;w=function(n)
{function i(t){n.call(this);var r=t.selectable;r&&r.selectedValue||(t.selectable=i.createSelectableViewModel())}return __extends(i,n),i.createSelectableViewModel=function(n){return new t.Selectable({selectedValue:arguments.length===1?n:{}})},i}(r);t.OpenBladeCommand=w,function(t){var r;(function(t){function u(n){n.enabled(null);(n.icon||f)(null);(n.text||f)(null)}var r=n.ViewModels,f=i(""),c=function(n){function t(t){n.call(this,t);u(this)}return __extends(t,n),t}(r.OpenBladeCommand),e,o,s,h;t.OpenBladeCommand=c;e=function(n){function t(){n.call(this);u(this)}return __extends(t,n),t}(r.FileDownloadCommand);t.FileDownloadCommand=e;o=function(n){function t(){n.call(this);u(this)}return __extends(t,n),t}(r.Command);t.ExecutableCommand=o;s=function(n){function t(){n.call(this);u(this)}return __extends(t,n),t}(r.UriCallbackCommand);t.UriCallbackCommand=s;h=function(n){function t(){n.call(this);u(this)}return __extends(t,n),t}(r.UriCommand);t.UriCommand=h})(r=t.Dynamic||(t.Dynamic={}))}(tt=t.
Commands||(t.Commands={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=ko.observable,r=function(){function t(){this.title=i();this.shortTitle=i();this.description=i();this.icon=i(n.Base.Images.Shell.DefaultBlade());this.size=i(n.Parts.PartSize.Small)}return t}();t.ButtonPart=r})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){"use strict";var r=ko.observable,u=function(){function n(){this.inputParameters={};this.inputMetadata={};this.options={}}return n}(),t,i;n.ParameterCollectionInput=u;t=function(){function n(){this.outputParameters={}}return n}();n.ParameterCollectionOutput=t;i=function(){function n(){}return n.modelToParameters=function(n){var i={},t,r;for(t in n){t in i||(i[t]={});for(r in n[t])i[t][r]=n[t][r]()||""}return i},n.parametersToModel=function(n){var u={},t,i;for(t in n)for(i in n[t]){if(t in u||(u[t]={}),ko.isObservable(n[t][i])||
ko.isComputed(n[t][i]))throw new Error("Parameters cannot be knockout observables.");u[t][i]?u[t][i](n[t][i]):u[t][i]=r(n[t][i])}return u},n}();n.Models=i})(t=n.ParameterCollection||(n.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var r=ko.unwrap,t="",u={onProviderCommitMissing:t,onCommitSuccessActionMissing:t,onCommitFailedActionMissing:t},i=FxImpl.getErrorMap(u),f=function(){function n(n){this._provisioner=null;this._previousOutputs=null;this._previousCommit="";this._previousDetailBladeOutput=null;this._provisioner=n}return n.prototype.onProviderBindingInternalsReceived=function(n,t,u,f,e,o){var a=this,c;if(f||i.onProviderCommitMissing(),e||i.onCommitSuccessActionMissing(),o||i.onCommitFailedActionMissing(),n){var h=r(n.commit),s=r(n.outputs),l=function(){e();a._provisioner.executeProvisioning(s,t)};!h||h===this._previousCommit||!s||s===this._previousOutputs||
!u||u===this._previousDetailBladeOutput||(this._previousOutputs=s,this._previousCommit=h,c=f(null,s),c?c.then(function(n){n?l():o()},function(){o()}):l())}},n}();n.CollectorBase=f})(t=n.Internal||(n.Internal={}))})(t=n.ParameterCollection||(n.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var f=n.Base,e=n.Helpers,s=f.Utilities,u=undefined,h=ko.observable,o=s.getUniqueId,c=new f.Diagnostics.Log("MsPortalFx/ViewModels/ParameterCollection/ParameterProvider"),i="",l={collectorInputsMissing:i,editScopeIdMissing:i,editScopeViewMissing:i,inputsMissing:i,onInputsReceivedMissing:i,optionsMissing:i,overrideInputParametersMissing:i,privateFpTcBIMissing:i,privatePcPrBIMissing:i,provisionerMissing:i},r=FxImpl.getErrorMap(l),a=function(){function t(n){this._editScopeView=u;this._editScopeFetchPromise=u;this._onInputsReceivedPromise=u;n||r.editScopeViewMissing();this._editScopeView=
n}return t.prototype.fetchEditScope=function(n,t){var i=this;return this._editScopeFetchPromise||(this._editScopeFetchPromise=this._editScopeView.fetchForExistingData(n,t).finally(function(){i._editScopeFetchPromise=u})),this._editScopeFetchPromise},t.prototype.initializeDataModel=function(n,t){n||r.inputsMissing();t||r.overrideInputParametersMissing();var i=e.Deferred();return t(n.inputParameters).then(function(t){var f={},r,u,e;for(r in t){f[r]={};for(u in t[r])e=t&&t[r]&&t[r][u]||n.inputMetadata&&n.inputMetadata[r]&&n.inputMetadata[r][u]&&n.inputMetadata[r][u].defaultValue||"",f[r][u]=h(e)}i.resolve(f)},function(){i.reject()}),i.promise()},t.prototype.onCollectorBindingsReceived=function(t,i,f){var s=this;t||r.collectorInputsMissing();i||r.editScopeIdMissing();f||r.onInputsReceivedMissing();var h="enableProvisioning",o=e.Deferred(),c={enableProvisioning:!1,promise:o.promise()},l=t.options;return h in l&&l[h]&&(c.enableProvisioning=!0),this.fetchEditScope(i,t).then(function(){try{n.deepEquals(
s._previousCollectorInputs,t)||(s._previousCollectorInputs=t,s._onInputsReceivedPromise=f(t));var i=s._onInputsReceivedPromise;i?i.then(function(){o.resolve()},function(){o.reject()}).finally(function(){s._onInputsReceivedPromise=u}):o.resolve()}catch(r){o.reject()}},function(){o.reject()}),c},t.prototype.commitProvider=function(n){var t,i,u,f,e;n||r.optionsMissing();n.privateFpTcBI||r.privateFpTcBIMissing();t=n.provisioner;n.enableProvisioning&&!t&&r.provisionerMissing();i=n.enableProvisioning;!i||n.provisionOnStartboardPart||n.privatePcPrBI||r.privatePcPrBIMissing();u=function(){var u=n.privateFpTcBI,r;u.outputs(t&&t.mappedOutputs||n.provisionerData);n.privateFpTcBI.commit(o());i&&!n.provisionOnStartboardPart&&n.privatePcPrBI.provisioningAttempted({commitId:o()});r=n.discardEdits;r&&r()};i?(f=t.executeProvisioning(n.provisionerData,n.provisionerOptions),e=n.progressAction,e&&e(f),f?f.then(function(){u()},function(){c.error("Provisioning action has failed.")}):u()):u()},t}();t.ProviderBase=
a})(i=t.Internal||(t.Internal={}))})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){"use strict";function s(n,t,i){var r=n&&n.stepStatuses,u=r&&r.length?r[0].status:e.ActionBars.Base.Status.NotStarted;return{stepId:"NoWizardStep",status:u,isFirstStep:!0,isLastStep:!0,isOptional:!1,disabled:!1,allowToggleProvisioningLocation:t,masterIsProvisioningPart:i}}var e=n.ViewModels,u=i.Internal,r=ko.observable,f=" is not implemented",o=function(n){function t(t,i){var c=this;n.call(this,t);this.parameterCollectionErrors=r();this.privateFcTpBI=new u.CollectorBindingInternals;this.savedState=r();this.currentState=r();this.stepInput=r();this.cloudName=r();this._collectorBase=null;this._container=null;FxImpl.ParameterCollection.traceObsolete("PCv1.Command");var e=this.currentState,f={stepStatuses:[]},o=i&&i.content,h=o&&o.savedState;h&&(f=h);e(f);t.selectable.isSelected.subscribe(
t,function(){c.savedState(e())});this.stepInput(s(f,!1,!0));this._container=t;this._collectorBase=new u.CollectorBase(new u.Provisioner(this));this.privatePcPrBI=new u.ProvisioningEntityBindingInternals;this.enableProvisioning=r(!0)}return __extends(t,n),t.prototype.onInputsSet=function(n){var i=this,t;this.cloudName(u.getCloudNameFromInputs(n));t=this.getProviderInputs(null);this.privateFcTpBI.inputs(t);this._collectorBase.onProviderBindingInternalsReceived(n.fromProviderBindingInternals,t&&t.options,n.stepOutput,function(n,t){return i.onProviderCommit(n,t)},function(){i._container.selectable.isSelected(!1)},function(){})},t.prototype.getProviderInputs=function(){throw new Error("'getProviderInputs'"+f);},t.prototype.onProviderCommit=function(){throw new Error("'onProviderCommit'"+f);},t}(t.OpenBladeCommand);i.BaseCommandViewModel=o})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var
i;(function(t){"use strict";var h=n,r=h.ViewModels,l=r.ActionBars.Base,u=r.ParameterCollection.Internal,p=r.ParameterCollectionV2.Internal,a=h.Helpers,f=HubsExtension.Azure.Pricing,c=h.deepEquals,i=ko.observable,w=ko.observableArray,e=undefined,v=p.ParameterCollectorFactory,b=v.confirmCommitSuffix,k=v.tryCommitSuffix,y=h.forEachKey,o="",d={multipleSelectors:o,getProviderInputs:o,onProviderCommit:o,onInputsReceived:o,onCommitError:o},s=FxImpl.getErrorMap(d),g=function(o){function h(n,t,e){var s=this;o.call(this,n);this.editScopeId=i();this.actionInProgress=i(!1);this.eula=i("");this.secondaryLinkDisplayText=i("");this.galleryPricingInfo=i();this.cloudName=i();this._providerBase=null;this._actionBarOutput=null;this._actionInProgressLock=!1;this._baseCollectorInputs=null;this._baseFormContainer=null;this._baseFormSubscriptions=null;this._baseProviderCommit=null;this._baseProviderOutputs=null;this._deferredProviderDismiss=null;this._hotSpotItems=w();this._initialSelectedValue=null;this._previousOutput=
null;this._provisionerInstance=null;this._savedProviderOutputs=null;this._selectableMap={};this._galleryItem=i(null);this._editScopeCache=null;this._editScopeView=null;FxImpl.ParameterCollection.traceObsolete("PCv1.Form");this._editScopeCache=new FxImpl.Data.EditScopeCacheOld({entityTypeName:e,supplyExistingData:function(n){return s._providerBase.initializeDataModel(n,function(n){return s.overrideInputParameters(n)})},serializeParams:function(){return"#"}});n.registerForDispose(this._editScopeCache);this._editScopeView=this._editScopeCache.createView(n);this._providerBase=new u.ProviderBase(this._editScopeView);this.privateFcTpBI=new u.CollectorBindingInternals;this.privateFpTcBI=new u.ProviderBindingInternals;this.privatePcPrBI=new u.ProvisioningEntityBindingInternals;this.editScope=this._editScopeView.editScope;this.enableProvisioning=i(!1);this.provisionOnStartboardPart=i(!0);this.parameterCollectionErrors=i();this.stepInput=i();this.stepOutput=i();var h=t&&t.content||{},a=h.selectable||
{},v=h.secondaryLinkSelectable||{};this._initialSelectedValue=a.selectedValue;this.selectable=new r.Selectable({allowUnselect:!1,selectedValue:this._initialSelectedValue,isSelected:a.isSelected,isActivated:a.isActivated});n.registerForDispose(this.selectable);this.secondaryLinkSelectable=new r.Selectable({allowUnselect:!1,selectedValue:v.selectedValue,isSelected:v.isSelected,isActivated:v.isActivated});n.registerForDispose(this.secondaryLinkSelectable);this.hotSpot=new r.SelectableSet(this._hotSpotItems,function(n,t){return n.selectedValue()===t},function(n){return n.selectedValue()},h.hotSpot);n.registerForDispose(this.hotSpot);this._actionBarOutput=i();this._baseProviderCommit=i();this._baseFormSubscriptions=[];this._baseFormContainer=n;this._provisionerInstance=new u.Provisioner(this);this._savedProviderOutputs={};this._baseFormSubscriptions.push(this._actionBarOutput.subscribe(function(n){var i,u,t;l.isCompleted(n)&&(i=function(){s.actionInProgress(!0);var n=s.getOutputsToCommit(),
t=function(){var n=s._editScopeCache;n.disposeAndDiscardEdits(s.editScopeId(),s._editScopeView)};s._providerBase.commitProvider({enableProvisioning:s.enableProvisioning(),provisioner:s._provisionerInstance,provisionerData:n,provisionerOptions:s._baseCollectorInputs.options,progressAction:function(n){s._baseFormContainer.operations.add(n,{blockUi:!0})},discardEdits:t,privateFpTcBI:s.privateFpTcBI,privatePcPrBI:s.privatePcPrBI,provisionOnStartboardPart:s.provisionOnStartboardPart()})},n.actionButtonClicked&&s.secondaryLinkSelectable.isSelected()?s.secondaryLinkSelectable.selectedValue().detailBlade===f.Constants.LegalTermsBlade.bladeName?(s._actionInProgressLock=!0,s.secondaryLinkSelectable.isSelected(!1),i()):s.secondaryLinkSelectable.isSelected(!1):(u=s.galleryPricingInfo(),t=s._galleryItem(),s.enableProvisioning()&&u&&t&&(t.products.length>0||t.productsWithNoPricing.length>0)?(s.secondaryLinkSelectable.selectedValue(r.getBladeSelection(f.Constants.LegalTermsBlade.bladeExtension,f.Constants.
LegalTermsBlade.bladeName,{galleryPricingInfo:u,galleryItem:t})),s.actionInProgress(!0),s.secondaryLinkSelectable.isSelected(!0)):i()))}));this._baseFormSubscriptions.push(this.selectable.isSelected.subscribe(function(n){n||s._unselectFields()}));this._baseFormSubscriptions.push(this.secondaryLinkSelectable.isSelected.subscribe(function(n){n||s._actionInProgressLock||s.actionInProgress(!1)}));this._baseFormSubscriptions.push(this.selectable.value.subscribe(function(n){s._resetSelectionStateOfSelectors(n)}));this._baseFormSubscriptions.push(this.parameterCollectionErrors.subscribe(function(n){n&&(s.privateFcTpBI.errors(n),s.privateFcTpBI.errors([]))}));this._baseFormSubscriptions.push(this.stepOutput.subscribe(function(n){var t=s._previousOutput;s._previousOutput=n;!c(t,n)&&l.isCompleted(n)&&s._onSelectorComplete(n.stepId).then(function(){s.selectable.isSelected(!1)})}));n.registerForDispose(ko.computed(function(){s.galleryPricingInfo()&&s._galleryItem()?s.secondaryLinkDisplayText(f.Constants.
PricingSummaryBlade.displayText):s.secondaryLinkDisplayText(null)}))}return __extends(h,o),Object.defineProperty(h.prototype,"dataModel",{get:function(){var n=this.editScope();return n&&n.root},enumerable:!0,configurable:!0}),h.prototype.onInputsSet=function(n){var g=this,w=null,s,i,v,h,l,o,y,p,t,a;if(this.cloudName(u.getCloudNameFromInputs(n)),this.editScopeId(n.editScopeId),this.provisionOnStartboardPart(n.provisionOnStartboardPart),this.privatePcPrBI.masterIsProvisioningPart(n.masterIsProvisioningPart),s=n.privateFcTpBI,s){if(i=s.inputs,i){this._baseCollectorInputs=i;v=this._providerBase.onCollectorBindingsReceived(i,this.editScopeId(),function(n){return g.onInputsReceived(n)});this.enableProvisioning(v.enableProvisioning);w=v.promise;var k=i.options,d=k&&k.galleryOptions,nt=d&&d.galleryItem;this._galleryItem(nt||null)}if(h=s.errors,h&&h.length>0){this.onCommitError(h);this.onCommitError([])}}return l=n.privateFpTcBI,l&&(o=l.commit,!o||o===this._baseProviderCommit()||(o===b.format(this.
_baseProviderCommit())?(y=this._deferredProviderDismiss,y&&(y.resolve(),this._deferredProviderDismiss=e)):(this._baseProviderOutputs=l.outputs,this._baseProviderCommit(o)))),p=n.stepOutput,p&&this.stepOutput(p),t=n.output,t&&(a=t&&t.secondaryLinkClicked,!a||a!==this.secondaryLinkDisplayText()||this._previousSecondaryLinkCommitId===t.commitId||(this._previousSecondaryLinkCommitId=t.commitId,this.actionInProgress(!1),this.secondaryLinkSelectable.selectedValue(r.getBladeSelection(f.Constants.PricingSummaryBlade.bladeExtension,f.Constants.PricingSummaryBlade.bladeName,{galleryPricingInfo:this.galleryPricingInfo(),galleryItem:this._galleryItem()})),this.secondaryLinkSelectable.isSelected(!0)),!t.status||a||c(t,this._actionBarOutput())||this._actionBarOutput(t)),w},h.prototype.registerHotSpot=function(n){var t=n.selectable||n,i;this._hotSpotItems.push(t);i=this.hotSpot.selectableItems().first(function(n){return n.data===t});this._baseFormSubscriptions.push.apply(this._baseFormSubscriptions,ko.
utils.twoWayBinding(t.isSelected,i.isActivated))},h.prototype.registerSelector=function(n,t){var r=this,i;this._selectableMap[n]&&s.multipleSelectors();i=t.selectable;this._selectableMap[n]=i;this._initialSelectedValue!==e&&c(this._initialSelectedValue,i.selectedValue())&&i.isSelected(this.selectable.isSelected());this._baseFormSubscriptions.push(i.isSelected.subscribe(function(t){t&&(r._unselectFields(i),r.selectable.selectedValue(i.selectedValue()),r.stepInput({stepId:n,status:l.Status.NotStarted,isLastStep:!1}),r.selectable.isSelected(!0),r._onSelectorLoad(n))}))},h.prototype.overrideInputParameters=function(n){return a.resolve(n)},h.prototype.getProviderInputs=function(){return s.getProviderInputs()||e},h.prototype.onProviderCommit=function(){return s.onProviderCommit()||e},h.prototype.onInputsReceived=function(){return s.onInputsReceived()||e},h.prototype.getOutputsToCommit=function(){var n=t.Models.modelToParameters(this.dataModel);return{outputParameters:n}},h.prototype.onCommitError=
function(){return s.onCommitError()||e},h.prototype.dispose=function(){while(this._baseFormSubscriptions.length){var n=this._baseFormSubscriptions.splice(0,1)[0];n&&!n.isDisposed&&n.dispose()}o.prototype.dispose.call(this)},h.prototype._unselectFields=function(n){y(this._selectableMap,function(t,i){n&&n===i||i.isSelected(!1)})},h.prototype._resetSelectionStateOfSelectors=function(n){var t,i;(y(this._selectableMap,function(r,u){u.isSelected()&&(i=u);c(u.selectedValue(),n)&&(t=u)}),t!==i)&&(i&&i.isSelected(!1),t&&t.isSelected(!0))},h.prototype._onSelectorLoad=function(n){var i=this,t=a.Deferred();return this._providerBase.fetchEditScope(this.editScopeId(),this._baseCollectorInputs).then(function(){var r=i.getProviderInputs(n);i.privateFcTpBI.inputs(r);t.resolve()},function(){t.reject()}),t.promise()},h.prototype._onSelectorComplete=function(n){var t=this,i=a.Deferred(),r=this._baseProviderCommit.subscribe(function(){t._savedProviderOutputs[n]=t._baseProviderOutputs;t.onProviderCommit(n,t.
_baseProviderOutputs).then(function(n){n?t._baseProviderCommit().indexOf(k)>-1?(t._deferredProviderDismiss=i,t.privateFcTpBI.errors([{errorMessage:null,parameterName:t._baseProviderCommit()}]),t.privateFcTpBI.errors([])):i.resolve():i.reject()});r.dispose()});return this._baseFormSubscriptions.push(r),i.promise()},__decorate([n.Composition.ProxyCompatibilityMode],h)}(r.Forms.Form.ViewModel);t.BaseFormViewModel=g})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";function e(n,t,r){var f=n&&n.stepStatuses,e=f&&f.length?f[0].status:u.NotStarted;return i({stepId:"NoWizardStep",status:e,isFirstStep:!0,isLastStep:!0,isOptional:!1,disabled:!1,allowToggleProvisioningLocation:t,masterIsProvisioningPart:r})}var r=n.ViewModels,u=r.ActionBars.Base.Status,i=ko.observable,f=" is not implemented",o=function(n){function o(u,f,o,s){var c;n.call(this);this.editScopeId=i();
this.cloudName=i();this._commit=i();this._baseButtonContainer=null;this._basePartSubscriptions=[];this._baseProviderCommit=null;this._initialLoadComplete=!1;FxImpl.ParameterCollection.traceObsolete("PCv1.GalleryButton");c=f&&f.container;u.selectable=new r.Internal.Selectable({selectedValue:!0,isSelected:!!c&&c.selectable.isSelected});var h={stepStatuses:[]},l=f&&f.content,a=l&&l.currentState;a&&(h=a);this.beginExecuteCommand=i(!1);this.savedState=i(h);this.currentState=i(h);this.stepInput=e(h,o!==!1,s);this.stepOutput=i();this.parameterCollectionErrors=i();this.privateFcTpBI=new t.Internal.CollectorBindingInternals;this._baseButtonContainer=u}return __extends(o,n),o.prototype.onInputsSet=function(n){var i=this,r,f,u;return this.cloudName(t.Internal.getCloudNameFromInputs(n)),this.privateFcTpBI.inputs(this.getProviderInputs(null)),this._initialLoadComplete||(this._basePartSubscriptions.push(this.parameterCollectionErrors.subscribe(function(n){i.privateFcTpBI.errors(n);i.privateFcTpBI.errors(
[])})),this._basePartSubscriptions.push(this.stepOutput.subscribe(function(n){i._processStepOutput(n)})),this._basePartSubscriptions.push(this._baseButtonContainer.selectable.isSelected.subscribe(function(){i.savedState(i.currentState())})),this._initialLoadComplete=!0),n.fromProviderBindingInternals&&(r=n.fromProviderBindingInternals.commit,!r||r===this._baseProviderCommit||(this._baseProviderCommit=r,f=this.onProviderCommit(null,n.fromProviderBindingInternals.outputs),f.then(function(n){n?(i._baseButtonContainer.selectable.isSelected(!1),i._commit(r)):i.parameterCollectionErrors([{errorMessage:"Parameter Collection failed!"}])}))),u=n.stepOutput,u&&this.stepOutput(u),this.savedState()||this.savedState(n.savedState),null},o.prototype.getProviderInputs=function(){throw new Error("'getProviderInputs'"+f);},o.prototype.onProviderCommit=function(){throw new Error("'onProviderCommit'"+f);},o.prototype.dispose=function(){while(this._basePartSubscriptions.length){var n=this._basePartSubscriptions.
splice(0,1)[0];n&&!n.isDisposed&&n.dispose()}},o.prototype._processStepOutput=function(n){n&&(this.currentState({stepStatuses:[{stepId:n.stepId,status:n.status}],selectedStepId:n.stepId}),this.beginExecuteCommand(n.status===u.Completed))},o}(r.ButtonPart);t.BaseGalleryButtonPartViewModel=o})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){"use strict";var v=n.Base,c=n.ViewModels,h=c.Controls,y=h.Lists,u=y.Grid,p=c.Forms.Selector.ViewModel,w=v.Utilities,l=n.getUniqueId,s="infoBalloon",f=undefined,r=ko.observable,b=ko.observableArray,a=window,e="",k={getMatchingItemIndex:e,getColumns:e,itemMatchesSelection:e,createSelection:e,onProviderCommit:e,onInputsReceived:e,onCommitError:e},o=FxImpl.getErrorMap(k),d=function(e){function c(n,o,s,h,c){var l=this,v,a,y;h===void 0&&(h=!1);c===void 0&&(c=null);e.call(this,n);this.editScopeId=r();this.triggerSelectAction=r("");this.multiselectEnabled=
r(!1);this.valid=r(!1);this.showCreateAction=r(!1);this.eula=r("");this.filterPickerItemsParameterName="filterPickerItems";this.pickerItemsParameterName="pickerItems";this.listHeader=r();this.listSubHeader=r();this.isCreateActionResult=r(!1);this._createActionOutputs=null;this.pickerActivationBladeOpener=r(f);this.createActionBladeOpener=r(f);this.itemSelectedByDefault=r();this.filterItems=r();this._filteredItems=[];this._editScopeCache=null;this._editScopeView=null;this._providerBase=null;this._pickerInputCollections=null;this._createActionProviderCommited=null;this._actionBarOutput=null;this._createSelectorField=null;this._selectorOriginalValue=r();this._selectorEditableValue=r();this._createSelectorBladeName=null;this._createSelectorBladeExtension=null;this._throttleUnselectSelectorFieldHandle=null;this._partContainer=null;this.filters=b();FxImpl.ParameterCollection.traceObsolete("PCv1.Picker");this.controlType=t.ControlType.Picker;this.multiselectEnabled(h);v=this._editScopeCache=new
FxImpl.Data.EditScopeCacheOld({supplyExistingData:function(n){return l._providerBase.initializeDataModel(n,function(n){return l.overrideInputParameters(n)})},serializeParams:function(){return"#"}});n.registerForDispose(v);this._editScopeView=v.createView(n);this._providerBase=new i.Internal.ProviderBase(this._editScopeView);this.privateFcTpBI=new i.Internal.CollectorBindingInternals;this.privateFpTcBI=new i.Internal.ProviderBindingInternals;this.parameterCollectionErrors=r();this.stepInput=r();this._partContainer=n;this.createActionSelectorField=r();this._createActionProviderCommited=!1;this.isCreateActionResult(!1);this._actionBarOutput=r();a=u.Extensions.SelectableRow;y=this._getGridExtensionOptions();c?(a=a|u.Extensions.Pageable,w.extend(y,{pageable:{type:u.PageableType.Sequential,dataNavigator:c}}),this.itemsGridViewModel=new u.ViewModel(n,null,a,y)):this.itemsGridViewModel=new u.ViewModel(n,s,a,y);this.itemsGridViewModel.showHeader=!0;this.itemsGridViewModel.columns=this.getColumns(
);n.registerForDispose(this.itemsGridViewModel);this._initializeCreateActionSelector();this._actionBarOutput.subscribe(n,function(n){if(t.ActionBars.Base.isCompleted(n)){var i=l.getOutputsToCommit(),r=function(){var n=v;n.disposeAndDiscardEdits(l.editScopeId(),l._editScopeView)};setTimeout(function(){l._providerBase.commitProvider({enableProvisioning:!1,provisioner:null,provisionerData:i,provisionerOptions:l._pickerInputCollections.options,progressAction:function(n){l._partContainer.operations.add(n,{blockUi:!0})},discardEdits:r,privateFpTcBI:l.privateFpTcBI})},100)}});this.itemSelectedByDefault.subscribe(n,function(n){if(l.multiselectEnabled()&&Array.isArray(n))n.forEach(function(n){var t=l.getMatchingItemIndex(n);l._selectGridItem(t)});else if(n){var t=l.getMatchingItemIndex(n);l._selectGridItem(t)}});this.filterItems.subscribe(n,function(n){l._filterGridItems(n)});this.itemsGridViewModel.items.subscribe(n,function(n){var t,i;l._filterGridItems(l.filterItems());l._runFilters(n);c&&(t=
l.itemSelectedByDefault()||[],t&&Array.isArray(t)?t.forEach(function(n){var t=l.getMatchingItemIndex(n);l._selectGridItem(t)}):t&&(i=l.getMatchingItemIndex(t),l._selectGridItem(i)))});this.parameterCollectionErrors.subscribe(n,function(n){l.privateFcTpBI.errors(n)});this.itemsGridViewModel.selectableData.selectedItems.subscribe(n,function(n){l._onSelectedItemsChanged(n)});this.createActionBladeOpener.subscribe(n,function(n){n?(l._clearThrottleUnselectSelectorFieldHandle(),l.itemsGridViewModel.selectableData.selectedItems([]),l.createActionSelectorField().selectable.isSelected(!0)):l._closeBlade(l.itemsGridViewModel.selectableData.selectedItems())})}return __extends(c,e),c.prototype.initializeCreateSelector=function(n,t,i,r,u){this._selectorOriginalValue(n);this._selectorEditableValue(n);this._createSelectorField.label(t);this._createSelectorBladeName=i;this._createSelectorBladeExtension=r;u&&ko.utils.arrayPushAll(this._createSelectorField.validations,u)},c.prototype.onInputsSet=function(
t){var i=this,e=null,o,r,f,u;if(this.editScopeId(t.editScopeId),t&&t.privateFcTpBI&&t.privateFcTpBI.inputs&&(this._pickerInputCollections=t.privateFcTpBI.inputs,this.stepInput(t.stepInput),o=this._providerBase.onCollectorBindingsReceived(t.privateFcTpBI.inputs,this.editScopeId(),function(n){return i.onInputsReceived(n)}),e=o.promise),t&&t.privateFcTpBI&&t.privateFcTpBI.errors&&t.privateFcTpBI.errors.length>0)this.onCommitError(t.privateFcTpBI.errors);return r=t.privateFpTcBI,f=r&&r.commit,f&&f!==this._createActionProviderCommited&&(this.onProviderCommit(null,r.outputs).then(function(n){n&&(i.isCreateActionResult(!0),i.createActionSelectorField().selectable.isSelected(!1),i._createActionOutputs=r.outputs,i.itemsGridViewModel.selectableData.selectedItems([]),i.valid(!0),i.triggerSelectAction(l()))}),this._createActionProviderCommited=f),u=t.output,u&&u.status&&!n.deepEquals(u,this._actionBarOutput())&&this._actionBarOutput(u),e},c.prototype.overrideInputParameters=function(t){return n.Helpers.
resolve(t)},c.prototype.getParameter=function(n,t,i){return t in i&&n in i[t]?i[t][n]:null},c.prototype.dispose=function(){this._clearThrottleUnselectSelectorFieldHandle();e.prototype.dispose.call(this)},Object.defineProperty(c.prototype,"dataModel",{get:function(){var n=this._editScopeView.editScope();if(n&&!n.isDisposed)return n.root},enumerable:!0,configurable:!0}),c.prototype.getMatchingItemIndex=function(){return o.getMatchingItemIndex()||f},c.prototype.getColumns=function(){return o.getColumns()||f},c.prototype.itemMatchesSelection=function(){return o.itemMatchesSelection()||f},c.prototype.createSelection=function(){return o.createSelection()},c.prototype.getProviderInputs=function(){return this._pickerInputCollections},c.prototype.onProviderCommit=function(){return o.onProviderCommit()||f},c.prototype.onInputsReceived=function(){return o.onInputsReceived()||f},c.prototype.getOutputsToCommit=function(){var n=i.Models.modelToParameters(this.dataModel);return{outputParameters:n}},c.
prototype.onCommitError=function(){o.onCommitError()},c.prototype._onSelectedItemsChanged=function(n){var t=n&&n.length>0,i;if(t){if(this.isCreateActionResult(!1),i=this._runFilters(n),i){this.valid(!1);return}this._closeBlade(n)}this.valid(t)},c.prototype._runFilters=function(n){var t=this,r,i;return!n||n.length<1?!1:(r=!1,i=this.filters&&this.filters(),i&&i.length>0&&i.forEach(function(i){i.getDisabledItems(n).then(function(n){n.forEach(function(n){var i=t.itemsGridViewModel.items().first(function(i){return t.itemMatchesSelection(n.item,i)});i&&(t._disableGridItem(i,n.disabledReason),t.itemsGridViewModel.selectableData.selectedItems.remove(i),r=!0,t._filteredItems.push(n))})})}),r)},c.prototype._closeBlade=function(n){var t=this,i;this._clearThrottleUnselectSelectorFieldHandle();this._throttleUnselectSelectorFieldHandle=a.setTimeout(function(){t.createActionSelectorField()&&t.createActionSelectorField().selectable.isSelected(!1)},0);this.multiselectEnabled()||n.length!==1||(i=this.itemSelectedByDefault(
)&&this.itemMatchesSelection(this.itemsGridViewModel.items()[this.getMatchingItemIndex(this.itemSelectedByDefault())],n[0]),i||this.triggerSelectAction(l()))},c.prototype._clearThrottleUnselectSelectorFieldHandle=function(){this._throttleUnselectSelectorFieldHandle&&(a.clearTimeout(this._throttleUnselectSelectorFieldHandle),this._throttleUnselectSelectorFieldHandle=null)},c.prototype._getGridExtensionOptions=function(){return{selectableRow:{selectionMode:this.multiselectEnabled()?u.RowSelectionMode.Multiple:u.RowSelectionMode.Single,selectionStyle:u.SelectionStyle.Checked,itemMatchesSelection:this.itemMatchesSelection,createSelection:this.createSelection}}},c.prototype._selectGridItem=function(n){if(n!==-1){var t=this.itemsGridViewModel.getRowMetadata(this.itemsGridViewModel.items()[n]);t.selected(!0)}},c.prototype._disableGridItem=function(n,t){if(n){var i=this.itemsGridViewModel.getRowMetadata(n);i.disabled(!0);i.selected(!1);t&&n.hasOwnProperty(s)&&(n[s]?n[s].content(t):(n[s]=new h.
DockedBalloon.ViewModel(this.lifetimeManager),n[s].content(t)))}},c.prototype._initializeCreateActionSelector=function(){var n=this;this._createSelectorField=new p(this._partContainer,{defaultValue:this._selectorOriginalValue});this._createSelectorField.value=this._selectorEditableValue;this.createActionSelectorField(this._createSelectorField);this._createSelectorField.selectable.isSelected.subscribe(function(t){t?n._launchCreateActionBlade():n.createActionBladeOpener(f)})},c.prototype._launchCreateActionBlade=function(){var n=this.getProviderInputs(null);this.privateFcTpBI.inputs(n);this.itemsGridViewModel.selectableData.selectedItems([]);this.createActionBladeOpener({detailBlade:this._createSelectorBladeName,extension:this._createSelectorBladeExtension,detailBladeInputs:{}})},c.prototype._filterGridItems=function(n){var t=this,r=this.itemsGridViewModel.items(),i=this._filteredItems;n&&n.forEach(function(n){var i=t.getMatchingItemIndex(n.id);i!==-1&&t._disableGridItem(r[i],n.reason)});
i&&i.length>0&&i.forEach(function(n){var i=r.first(function(i){return t.itemMatchesSelection(n.item,i)});i&&t._disableGridItem(i,n.disabledReason)})},__decorate([n.Composition.ProxyCompatibilityMode],c)}(h.Loadable.ViewModel);i.BasePickerListViewModel=d})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){"use strict";var c=n.Base,s=n.Helpers,h=n.ViewModels,l=h.Controls.Wizard,v=h.ActionBars.Base,f=undefined,r=null,u=ko.observable,e="",y={getProviderInputs:e,onProviderCommit:e,onInputsReceived:e,onCommitError:e},o=FxImpl.getErrorMap(y),a=h.ParameterCollectionV2.Internal.ParameterCollectorFactory,p=a.confirmCommitSuffix,w=a.tryCommitSuffix,b=function(e){function h(n,f,o){var s=this,h;e.call(this,f&&f.content);this.editScopeId=u();this.eula=u("");this.cloudName=u();this._editScopeCache=r;this._editScopeView=r;this._actionBarOutput=r;this._baseCollectorInputs=r;this._baseProviderCommit=
r;this._baseProviderOutputs=r;this._baseWizardContainer=r;this._baseWizardSubs=r;this._deferredProviderDismiss=r;this._providerBase=r;this._provisionerInstance=r;this._savedProviderOutputs=r;FxImpl.ParameterCollection.traceObsolete("PCv1.Wizard");this.valid=ko.computed(function(){return s.steps().every(function(n){return n.isOptional||n.status()===v.Status.Completed})});n.registerForDispose(this.valid);h=this._editScopeCache=new FxImpl.Data.EditScopeCacheOld({entityTypeName:o,supplyExistingData:function(n){return s._providerBase.initializeDataModel(n,function(n){return s.overrideInputParameters(n)})},serializeParams:function(){return"#"}});n.registerForDispose(h);this._editScopeView=h.createView(n);this._providerBase=new i.Internal.ProviderBase(this._editScopeView);this.enableProvisioning=u(!1);this.provisionOnStartboardPart=u(!0);this.parameterCollectionErrors=u();this.privateFcTpBI=new i.Internal.CollectorBindingInternals;this.privateFpTcBI=new i.Internal.ProviderBindingInternals;this.
privatePcPrBI=new i.Internal.ProvisioningEntityBindingInternals;this._actionBarOutput=u();this._baseProviderCommit=u();this._baseWizardSubs=[];this._baseWizardContainer=n;this._provisionerInstance=new i.Internal.Provisioner(this);this._savedProviderOutputs={};this.complete=function(){return};this._baseWizardSubs.push(this._actionBarOutput.subscribe(function(n){if(t.ActionBars.Base.isCompleted(n)){var i=s.getOutputsToCommit(),r=function(){var n=s._editScopeCache;n.disposeAndDiscardEdits(s.editScopeId(),s._editScopeView)};s._providerBase.commitProvider({enableProvisioning:s.enableProvisioning(),provisioner:s._provisionerInstance,provisionerData:i,provisionerOptions:s._baseCollectorInputs.options,progressAction:function(n){s._baseWizardContainer.operations.add(n,{blockUi:!0})},discardEdits:r,privateFpTcBI:s.privateFpTcBI,privatePcPrBI:s.privatePcPrBI,provisionOnStartboardPart:s.provisionOnStartboardPart()})}}));this._baseWizardSubs.push(this.parameterCollectionErrors.subscribe(function(n)
{s.privateFcTpBI.errors(n)}))}return __extends(h,e),Object.defineProperty(h.prototype,"dataModel",{get:function(){var n=this._editScopeView.editScope();return n&&n.root},enumerable:!0,configurable:!0}),h.prototype.onInputsSet=function(n){var w=this,y=r,e,o,h,s,l,t,a,v,u;if(this.cloudName(i.Internal.getCloudNameFromInputs(n)),this.editScopeId(n.editScopeId),this.provisionOnStartboardPart(n.provisionOnStartboardPart),this.privatePcPrBI.masterIsProvisioningPart(n.masterIsProvisioningPart),e=n.privateFcTpBI,e&&(o=e.inputs,o&&(this._baseCollectorInputs=o,h=this._providerBase.onCollectorBindingsReceived(o,this.editScopeId(),function(n){return w.onInputsReceived(n)}),this.enableProvisioning(h.enableProvisioning),y=h.promise),s=e.errors,s&&s.length>0)){this.onCommitError(s);this.onCommitError([])}return l=n.privateFpTcBI,n.privateFpTcBI&&(t=l.commit,!t||t===this._baseProviderCommit()||(t===p.format(this._baseProviderCommit())?(a=this._deferredProviderDismiss,a&&(a.resolve(),this._deferredProviderDismiss=
f)):(this._baseProviderOutputs=l.outputs,this._baseProviderCommit(t)))),this.initialize(),v=n.stepOutput,v&&this.stepOutput(v),this.savedState()||this.savedState(n.savedState),u=n.output,u&&u.status&&!c.Utilities.deepEquals(u,this._actionBarOutput())&&this._actionBarOutput(u),y},h.prototype.overrideInputParameters=function(n){return s.resolve(n)},h.prototype.getProviderInputs=function(){return o.getProviderInputs()||f},h.prototype.onProviderCommit=function(){return o.onProviderCommit()||f},h.prototype.onInputsReceived=function(){return o.onInputsReceived()||f},h.prototype.getOutputsToCommit=function(){var n=i.Models.modelToParameters(this.dataModel);return{outputParameters:n}},h.prototype.onCommitError=function(){return o.onCommitError()||f},h.prototype.dispose=function(){while(this._baseWizardSubs.length){var n=this._baseWizardSubs.splice(0,1)[0];n&&!n.isDisposed&&n.dispose()}e.prototype.dispose.call(this)},h.prototype.addWizardStep=function(n,t,i,u,f,e,o){this.insertWizardStep(r,n,t,
i,u,f,e,o)},h.prototype.insertWizardStep=function(n,t,i,r,u,f,e,o){var s=new l.WizardStep(t,i,r,e,f,o);s.description(u);s.stepLoad=this._onStepLoad.bind(this);s.stepComplete=this._onStepComplete.bind(this);typeof n=="number"?this.steps.splice(n,0,s):this.steps.push(s)},h.prototype.removeWizardStep=function(n){this.steps.remove(n)},h.prototype.removeWizardStepAt=function(n){return this.steps.splice(n,1)[0]},h.prototype._onStepLoad=function(n){var t=this,i=s.Deferred();return this._providerBase.fetchEditScope(this.editScopeId(),this._baseCollectorInputs).then(function(){var r=t.getProviderInputs(n.stepId);n.stepId in t._savedProviderOutputs&&c.ProxiedObservables.data(r.options,"lastOutputParameters",t._savedProviderOutputs[n.stepId]);t.privateFcTpBI.inputs(r);i.resolve()}),i.promise()},h.prototype._onStepComplete=function(n){var t=this,i=s.Deferred(),u=this._baseProviderCommit.subscribe(function(){t._savedProviderOutputs[n.stepId]=t._baseProviderOutputs;t.onProviderCommit(n.stepId,t._baseProviderOutputs).
then(function(n){n?t._baseProviderCommit().indexOf(w)>-1?(t._deferredProviderDismiss=i,t.privateFcTpBI.errors([{errorMessage:r,parameterName:t._baseProviderCommit()}]),t.privateFcTpBI.errors([])):i.resolve():i.reject()});u.dispose()});return this._baseWizardSubs.push(u),i.promise()},__decorate([n.Composition.ProxyCompatibilityMode],h)}(l.ViewModel);i.BaseWizardViewModel=b})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){"use strict";var i=function(){function n(){this.inputParameters={};this.inputMetadata={};this.options={}}return n}(),t;n.ParameterCollectionInput=i;t=function(){function n(){this.outputParameters={}}return n}();n.ParameterCollectionOutput=t})(t=n.ParameterCollectionV2||(n.ParameterCollectionV2={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){"use strict";var t="parameterCollection",
i="previousOutputParameters",r=ko.observable,u;(function(n){function u(n){var i={},t,r;for(t in n){t in i||(i[t]={});for(r in n[t])i[t][r]=n[t][r]()||""}return i}function f(n){var u={},t,i;for(t in n)for(i in n[t]){if(t in u||(u[t]={}),ko.isObservable(n[t][i])||ko.isComputed(n[t][i]))throw new Error("Parameters cannot be knockout observables.");u[t][i]?u[t][i](n[t][i]):u[t][i]=r(n[t][i])}return u}function e(n){return n&&t in n&&i in n[t]&&!!n[t][i]?n[t][i]:null}n.modelToParameters=u;n.parametersToModel=f;n.getPreviousOutputsFromOptions=e})(u=n.Utilities||(n.Utilities={}))})(t=n.ParameterCollectionV2||(n.ParameterCollectionV2={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){"use strict";function h(n,t){return{stepId:"CommandStep",status:o.Base.Status.NotStarted,isFirstStep:!0,isLastStep:!0,isOptional:!1,disabled:!1,allowToggleProvisioningLocation:n,masterIsProvisioningPart:t}}var e=n.ViewModels,o=e.ActionBars,f=ko.
observable,r="",s={notInitialized:r,alreadySet:r,collectorMissing:r},u=FxImpl.getErrorMap(s),c=function(n){function t(t,r){var u=this;n.call(this,t);this.stepInput=f();this._collectorImpl=null;this._provisionerImpl=null;this._rolesSet=!1;this._baseCommandContainer=null;this._baseCommandInitialState=null;FxImpl.ParameterCollection.traceObsolete("PCv2.Command");this.privateFcTpBI=new i.Internal.CollectorBindingInternals;this.privatePcPrBI=new i.Internal.ProvisionerBindingInternals;this._baseCommandContainer=t;this._baseCommandInitialState=r;this.enableProvisioning=f(!0);this.stepInput(h(!1,!0));t.registerForDispose(t.selectable.isSelected.subscribe(function(n){n&&u._collectorImpl.sendInputsToProvider(null)}))}return __extends(t,n),t.prototype.onInputsSet=function(n){var t=this,i=[];return this._rolesSet||u.notInitialized(),this._collectorImpl&&i.push(this._collectorImpl.processInputs(n)),this._provisionerImpl&&i.push(this._provisionerImpl.processInputs(n)),Q.all(i).then(function(){t._provisionerImpl&&
t.enableProvisioning(t._provisionerImpl.enableProvisioning())})},t.prototype.initializeParameterCollectionRoles=function(n){this._rolesSet&&u.alreadySet();this._extractCommandRoles(n,this._baseCommandContainer);this._rolesSet=!0},t.prototype._extractCommandRoles=function(n,t){var r=this,f=!!n&&n.parameterCollector,e=!!n&&n.provisioner,o;f||u.collectorMissing();o={commitWhenSignaled:!0,commitAction:function(){if(r._provisionerImpl){var n=function(){var n=r.privateFcTpBI.inputs();r._provisionerImpl.executeProvisioning(r._collectorImpl.providerOutputs,n&&n.options)},i={privateFcTpBI:{inputs:r.privateFcTpBI.inputs()}},t=r._provisionerImpl.processInputs(i);t?t.then(n):n()}r._baseCommandContainer.selectable.isSelected(!1)}};this._collectorImpl=i.Internal.ParameterCollectorFactory.createParameterCollector(f,{},this.privateFcTpBI,t,o);e&&(this._provisionerImpl=i.Internal.ProvisionerFactory.createProvisioner(e,this.privatePcPrBI))},t}(t.OpenBladeCommand);i.Command=c})(i=t.ParameterCollectionV2||
(t.ParameterCollectionV2={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){"use strict";var l=n,o=l.ViewModels,s=o.ActionBars.Base,y=o.ParameterCollection.Internal,f=HubsExtension.Azure.Pricing,e=l.deepEquals,u=ko.observable,p=ko.observableArray,a=ko.computed,r=null,v=n.forEachKey,h="",w={setOnce:h,rejected:h,multipleSelectors:h},c=FxImpl.getErrorMap(w),b=function(h){function l(n,c){var l=this,v,y,w;h.call(this,n);this.editScopeId=u();this.actionInProgress=u(!1);this.enableProvisioning=u(!1);this.eula=u("");this.secondaryLinkDisplayText=u("");this.galleryPricingInfo=u();this.cloudName=u();this._collectorImpl=r;this._providerImpl=r;this._provisionerImpl=r;this._parameterCollectionRolesSet=!1;this._actionBarOutput=r;this._actionInProgressLock=!1;this._baseFormContainer=r;this._baseFormInitialState=r;this._hotSpotItems=p();this._initialSelectedValue=r;this._previousOutput=r;this._selectableMap={};this._isValid=u(!1);this.
_galleryItem=u(r);FxImpl.ParameterCollection.traceObsolete("PCv2.Form");v=c&&c.content&&c.content.selectable;y=c&&c.content&&c.content.secondaryLinkSelectable;this._editScopeImpl||(this._editScopeImpl=r);this.privateFcTpBI=new i.Internal.CollectorBindingInternals;this.privateFpTcBI=new i.Internal.ProviderBindingInternals;this.privatePcPrBI=new i.Internal.ProvisionerBindingInternals;this._baseFormContainer=n;this._baseFormInitialState=c;this._initialSelectedValue=v&&v.selectedValue;this._actionBarOutput=u();this.stepInput=u();this.stepOutput=u();w=this.valid;this.valid=a(function(){return l._isValid()&&w()});n.registerForDispose(this.valid);this.selectable=new t.Selectable({allowUnselect:!1,selectedValue:this._initialSelectedValue,isSelected:v&&v.isSelected,isActivated:v&&v.isActivated});n.registerForDispose(this.selectable);this.secondaryLinkSelectable=new t.Selectable({allowUnselect:!1,selectedValue:y&&y.selectedValue,isSelected:y&&y.isSelected,isActivated:y&&y.isActivated});n.registerForDispose(
this.secondaryLinkSelectable);this.hotSpot=new t.SelectableSet(this._hotSpotItems,function(n,t){return n.selectedValue()===t},function(n){return n.selectedValue()},c&&c.content&&c.content.hotSpot);n.registerForDispose(this.hotSpot);n.registerForDispose(this._actionBarOutput.subscribe(function(n){var i,r,t;s.isCompleted(n)&&(i=function(){l.actionInProgress(!0);l._providerImpl.getOutputsToCommit().then(function(n){l._providerImpl.commitOutputs({provisioner:l._provisionerImpl,provisionerData:n,progressAction:function(n){l._baseFormContainer.operations.add(n,{blockUi:!0})},discardEdits:l._editScopeImpl.discardEditScopeEdits.bind(l._editScopeImpl),privateFpTcBI:l.privateFpTcBI,privatePcPrBI:l.privatePcPrBI})})},n.actionButtonClicked&&l.secondaryLinkSelectable.isSelected()?l.secondaryLinkSelectable.selectedValue().detailBlade===f.Constants.LegalTermsBlade.bladeName?(l._actionInProgressLock=!0,l.secondaryLinkSelectable.isSelected(!1),i()):l.secondaryLinkSelectable.isSelected(!1):(r=l.galleryPricingInfo(
),t=l._galleryItem(),l.enableProvisioning()&&r&&t&&(t.products.length>0||t.productsWithNoPricing.length>0)?(l.secondaryLinkSelectable.selectedValue(o.getBladeSelection(f.Constants.LegalTermsBlade.bladeExtension,f.Constants.LegalTermsBlade.bladeName,{galleryPricingInfo:r,galleryItem:t})),l.actionInProgress(!0),l.secondaryLinkSelectable.isSelected(!0)):i()))}));n.registerForDispose(this.selectable.isSelected.subscribe(function(n){n||l._unselectFields()}));n.registerForDispose(this.secondaryLinkSelectable.isSelected.subscribe(function(n){n||l._actionInProgressLock||l.actionInProgress(!1)}));n.registerForDispose(this.stepOutput.subscribe(function(n){var t=l._previousOutput;l._previousOutput=n;!e(t,n)&&s.isCompleted(n)&&l._onSelectorComplete(n.stepId).then(function(){l.selectable.isSelected(!1)})}));n.registerForDispose(a(function(){l.galleryPricingInfo()&&l._galleryItem()?l.secondaryLinkDisplayText(f.Constants.PricingSummaryBlade.displayText):l.secondaryLinkDisplayText(r)}))}return __extends(
l,h),l.prototype.initializeParameterCollectionRoles=function(n){this._parameterCollectionRolesSet&&c.setOnce();this._extractFormRoles(n,this._baseFormContainer);this._parameterCollectionRolesSet=!0},Object.defineProperty(l.prototype,"dataModel",{get:function(){var n=this._editScopeImpl;return n&&n.dataModel||r},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"inputMetadata",{get:function(){var n=this._editScopeImpl,t=n&&n.collectorInputs,i=t&&t.inputMetadata;return i||r},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"parameterCollectionOptions",{get:function(){var n=this._editScopeImpl,t=n&&n.collectorInputs,i=t&&t.options;return i||r},enumerable:!0,configurable:!0}),l.prototype.onFormInputsSet=function(){return r},l.prototype.onInputsSet=function(n){var t=this,i=[],p,l,a,s,v,h;this.cloudName(y.getCloudNameFromInputs(n));this.editScopeId(n.editScopeId);var u=this._editScopeImpl,w=u&&u.collectorInputs,b=w&&w.inputParameters;b&&(p=b);u&&i.push(u.processInputs(
n));l=this._collectorImpl;l&&i.push(l.processInputs(n));a=this._providerImpl;a&&i.push(a.processInputs(n));s=this._provisionerImpl;s&&i.push(s.processInputs(n));v=n.stepOutput;v&&this.stepOutput(v);var k=n.privateFcTpBI,d=k&&k.inputs,g=d&&d.options,nt=g&&g.galleryOptions;return this._galleryItem(nt&&nt.galleryItem||r),n.output&&(h=n.output&&n.output.secondaryLinkClicked,!h||h!==this.secondaryLinkDisplayText()||this._previousSecondaryLinkCommitId===n.output.commitId||(this._previousSecondaryLinkCommitId=n.output.commitId,this.actionInProgress(!1),this.secondaryLinkSelectable.selectedValue(o.getBladeSelection(f.Constants.PricingSummaryBlade.bladeExtension,f.Constants.PricingSummaryBlade.bladeName,{galleryPricingInfo:this.galleryPricingInfo(),galleryItem:this._galleryItem()})),this.secondaryLinkSelectable.isSelected(!0)),!n.output.status||h||e(n.output,this._actionBarOutput())||this._actionBarOutput(n.output)),Q.all(i).then(function(){if(s&&t.enableProvisioning(s.enableProvisioning()),!e(
p,u.collectorInputs.inputParameters)){var n=t.onFormInputsSet(t._baseFormContainer,t._baseFormInitialState);if(n)return n.then(function(){t._isValid(!0)},function(){c.rejected()});t._isValid(!0)}})},l.prototype.dispose=function(){h.prototype.dispose.call(this)},l.prototype.registerHotSpot=function(n){var u=this,t=n.selectable||n,i,r;this._hotSpotItems.push(t);i=this.hotSpot.selectableItems().first(function(n){return n.data===t});r=ko.utils.twoWayBinding(t.isSelected,i.isActivated);r.forEach(function(n){u._baseFormContainer.registerForDispose(n)})},l.prototype.registerSelector=function(n,t,i){i&&this._collectorImpl&&this._collectorImpl.addProvider(n,i);this._registerSelectable(n,t.selectable)},l.prototype.registerInfoBox=function(n,t,i){i&&this._collectorImpl&&this._collectorImpl.addProvider(n,i);this._registerSelectable(n,t.selectable)},l.prototype._registerSelectable=function(n,t){var i=this,r;this._selectableMap[n]&&c.multipleSelectors();this._selectableMap[n]=t;r=this._initialSelectedValue;
r!==undefined&&e(r,t.selectedValue())&&t.isSelected(this.selectable.isSelected());this._baseFormContainer.registerForDispose(t.isSelected.subscribe(function(r){r&&(i._unselectFields(t),i.selectable.selectedValue(t.selectedValue()),i.stepInput({stepId:n,status:s.Status.NotStarted,isLastStep:!1}),i.selectable.isSelected(!0),i._onSelectorLoad(n))}))},l.prototype._extractFormRoles=function(n,t){var e=!!n&&n.parameterCollector,u=!!n&&n.parameterProvider,f=!!n&&n.provisioner,r=this._editScopeImpl;r||(r=this._editScopeImpl=i.Internal.EditScopeFactory.createEditScope(u,t));this.editScope=this._editScopeImpl.editScope;this._providerImpl=i.Internal.ParameterProviderFactory.createParameterProvider(u,r);this._collectorImpl=i.Internal.ParameterCollectorFactory.createParameterCollector(e,r,this.privateFcTpBI,t);f&&(this._provisionerImpl=i.Internal.ProvisionerFactory.createProvisioner(f,this.privatePcPrBI))},l.prototype._unselectFields=function(n){v(this._selectableMap,function(t,i){n&&n===i||i.isSelected(
!1)})},l.prototype._resetSelectionStateOfSelectors=function(n){var t,i;(v(this._selectableMap,function(r,u){u.isSelected()&&(i=u);e(u.selectedValue(),n)&&(t=u)}),t!==i)&&(i&&i.isSelected(!1),t&&t.isSelected(!0))},l.prototype._onSelectorLoad=function(n){var t=this;return this._editScopeImpl.fetchEditScope().then(function(){var i=t._collectorImpl;i&&i.sendInputsToProvider(n)})},l.prototype._onSelectorComplete=function(n){var t=this._collectorImpl;return t?t.commitProviderOutputs(n):Q()},__decorate([n.Composition.ProxyCompatibilityMode],l)}(t.Forms.Form.ViewModel);i.Form=b})(i=t.ParameterCollectionV2||(t.ParameterCollectionV2={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){"use strict";var s=n.ViewModels,f=s.Controls,e=f.Lists.Grid,r=ko.observable,a=ko.observableArray,h=n.deepEquals,c=n.getUniqueId,l=window,u=" is not implemented",o=undefined,v=function(v){function y(n,u,f,s){var h=this,c,l;s===void 0&&(s=!1);v.call(
this,n);this.editScopeId=r();this.eula=r("");this.listHeader=r();this.listSubHeader=r();this.multiselectEnabled=r(!1);this.showCreateAction=r(!1);this.triggerSelectAction=r("");this.valid=r(!1);this.isCreateActionResult=r(!1);this.pickerActivationBladeOpener=r(o);this.createActionBladeOpener=r(o);this.itemSelectedByDefault=r();this.filterItems=r();this.filters=a();this._filteredItems=[];this._createSelectorField=null;this._selectorOriginalValue=r();this._selectorEditableValue=r();this._createSelectorBladeName=null;this._createSelectorBladeExtension=null;this._throttleUnselectSelectorFieldHandle=null;this._collectorImpl=null;this._providerImpl=null;this._parameterCollectionRolesSet=!1;this._basePickerContainer=null;this._basePickerInitialState=null;this._actionBarOutput=null;FxImpl.ParameterCollection.traceObsolete("PCv2.Picker");this.controlType=t.ControlType.Picker;this._editScopeImpl||(this._editScopeImpl=null);this.privateFcTpBI=new i.Internal.CollectorBindingInternals;this.privateFpTcBI=
new i.Internal.ProviderBindingInternals;this.multiselectEnabled(s);this._basePickerContainer=n;this._basePickerInitialState=u;this._actionBarOutput=r();this.createActionSelectorField=r();this.isCreateActionResult(!1);this.stepInput=r();c=e.Extensions.SelectableRow;l=this._getGridExtensionOptions();this.itemsGridViewModel=new e.ViewModel(n,f,c,l);this.itemsGridViewModel.showHeader=!0;this.itemsGridViewModel.columns=this.getColumns();n.registerForDispose(this.itemsGridViewModel);this._initializeCreateActionSelector();this._filterGridItems(this.filterItems());n.registerForDispose(this._actionBarOutput.subscribe(function(n){t.ActionBars.Base.isCompleted(n)&&h._providerImpl.getOutputsToCommit().then(function(n){h._providerImpl.commitOutputs({provisioner:null,provisionerData:n,progressAction:function(n){h._basePickerContainer.operations.add(n,{blockUi:!0})},discardEdits:h._editScopeImpl.discardEditScopeEdits.bind(h._editScopeImpl),privateFpTcBI:h.privateFpTcBI,privatePcPrBI:null})})}));n.registerForDispose(
this.itemSelectedByDefault.subscribe(function(n){if(h.multiselectEnabled())n.forEach(function(n){var t=h.getMatchingItemIndex(n);h._selectGridItem(t)});else if(n){var t=h.getMatchingItemIndex(n);h._selectGridItem(t)}}));n.registerForDispose(this.filters.subscribe(function(){h._filterGridItems(h.filterItems())}));n.registerForDispose(this.filterItems.subscribe(function(n){h._filterGridItems(n)}));n.registerForDispose(this.itemsGridViewModel.items.subscribe(function(n){h._filterGridItems(h.filterItems());h._runFilters(n)}));n.registerForDispose(this.itemsGridViewModel.selectableData.selectedItems.subscribe(function(n){h._onSelectedItemsChanged(n)}));n.registerForDispose(this.createActionBladeOpener.subscribe(function(n){n?(h._clearThrottleUnselectSelectorFieldHandle(),h.itemsGridViewModel.selectableData.selectedItems([]),h.createActionSelectorField().selectable.isSelected(!0)):h._closeBlade(h.itemsGridViewModel.selectableData.selectedItems())}))}return __extends(y,v),y.prototype.initializeCreateSelector=
function(n,t,i,r,u,f){this._selectorOriginalValue(n);this._selectorEditableValue(n);this._createSelectorField.label(t);this._createSelectorBladeName=i;this._createSelectorBladeExtension=r;u&&this._collectorImpl&&this._collectorImpl.addProvider(t,u);f&&ko.utils.arrayPushAll(this._createSelectorField.validations,f)},y.prototype.onPickerInputsSet=function(){return null},y.prototype.onInputsSet=function(n){var e=this,t=Q.defer(),r=[],o,i,u,f;return this.editScopeId(n.editScopeId),i=this._editScopeImpl,i&&(u=i.collectorInputs,u&&u.inputParameters&&(o=u.inputParameters),r.push(i.processInputs(n))),this._collectorImpl&&r.push(this._collectorImpl.processInputs(n)),this._providerImpl&&r.push(this._providerImpl.processInputs(n)),this.stepInput(n.stepInput),f=n.output||{},f.status&&!h(f,this._actionBarOutput())&&this._actionBarOutput(f),Q.all(r).then(function(){if(h(o,i.collectorInputs.inputParameters))t.resolve();else{var n=e.onPickerInputsSet(e._basePickerContainer,e._basePickerInitialState);n?
n.then(function(){t.resolve()},function(){t.reject()}):t.resolve()}},function(){t.reject()}),t.promise},y.prototype.initializeParameterCollectionRoles=function(n){if(this._parameterCollectionRolesSet)throw new Error("The 'parameterCollectionRoles' property should be only set once.");this._extractPickerRoles(n,this._basePickerContainer);this._parameterCollectionRolesSet=!0},Object.defineProperty(y.prototype,"dataModel",{get:function(){return this._editScopeImpl?this._editScopeImpl.dataModel:null},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"inputMetadata",{get:function(){var n=this._editScopeImpl,t=n&&n.collectorInputs;return t&&t.inputMetadata},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"parameterCollectionOptions",{get:function(){var n=this._editScopeImpl,t=n&&n.collectorInputs;return t&&t.options},enumerable:!0,configurable:!0}),y.prototype.getParameter=function(n,t,i){return t in i&&n in i[t]?i[t][n]:null},y.prototype.dispose=function(){this.
_clearThrottleUnselectSelectorFieldHandle();v.prototype.dispose.call(this)},y.prototype.getMatchingItemIndex=function(){throw new Error("'getMatchingItemIndex'"+u);},y.prototype.getColumns=function(){throw new Error("'getColumns'"+u);},y.prototype.itemMatchesSelection=function(){throw new Error("'itemMatchesSelection'"+u);},y.prototype.createSelection=function(){throw new Error("'createSelection'"+u);},y.prototype._extractPickerRoles=function(n,t){var r=this,u=!!n&&n.parameterCollector,f=!!n&&n.parameterProvider,e;this._editScopeImpl||(this._editScopeImpl=i.Internal.EditScopeFactory.createEditScope(f,t,function(){return r.onPickerInputsSet(r._basePickerContainer,r._basePickerInitialState)}));this._editScopeImpl.initializeEditScope();e={commitWhenSignaled:!0,commitAction:function(){r.isCreateActionResult(!0);r.createActionSelectorField().selectable.isSelected(!1);r.itemsGridViewModel.selectableData.selectedItems([]);r.valid(!0);r.triggerSelectAction(c())}};this._providerImpl=i.Internal.
ParameterProviderFactory.createParameterProvider(f,this._editScopeImpl);u&&(this._collectorImpl=i.Internal.ParameterCollectorFactory.createParameterCollector(u,this._editScopeImpl,this.privateFcTpBI,t,e))},y.prototype._onSelectedItemsChanged=function(n){var t=n&&n.length>0,i;if(t){if(this.isCreateActionResult(!1),i=this._runFilters(n),i){this.valid(!1);return}this._closeBlade(n)}this.valid(t)},y.prototype._runFilters=function(n){var t=this,r,i;return!n||n.length<1?!1:(r=!1,i=this.filters&&this.filters(),i&&i.length>0&&i.forEach(function(i){i.getDisabledItems(n).then(function(n){n.forEach(function(n){var i=t.itemsGridViewModel.items().first(function(i){return t.itemMatchesSelection(n.item,i)});i&&(t._disableGridItem(i,n.disabledReason),t.itemsGridViewModel.selectableData.selectedItems.remove(i),r=!0,t._filteredItems.push(n))})})}),r)},y.prototype._closeBlade=function(n){var i=this,t,r;this._clearThrottleUnselectSelectorFieldHandle();this._throttleUnselectSelectorFieldHandle=l.setTimeout(
function(){i.createActionSelectorField()&&i.createActionSelectorField().selectable.isSelected(!1)},0);this.multiselectEnabled()||n.length!==1||(t=this.itemSelectedByDefault(),r=t&&this.itemMatchesSelection(this.itemsGridViewModel.items()[this.getMatchingItemIndex(t)],n[0]),r||this.triggerSelectAction(c()))},y.prototype._clearThrottleUnselectSelectorFieldHandle=function(){this._throttleUnselectSelectorFieldHandle&&(l.clearTimeout(this._throttleUnselectSelectorFieldHandle),this._throttleUnselectSelectorFieldHandle=null)},y.prototype._getGridExtensionOptions=function(){return{selectableRow:{selectionMode:this.multiselectEnabled()?t.Controls.Lists.Grid.RowSelectionMode.Multiple:t.Controls.Lists.Grid.RowSelectionMode.Single,selectionStyle:e.SelectionStyle.Checked,itemMatchesSelection:this.itemMatchesSelection,createSelection:this.createSelection}}},y.prototype._selectGridItem=function(n){if(n!==-1){var t=this.itemsGridViewModel.getRowMetadata(this.itemsGridViewModel.items()[n]);t.selected(!0)}
},y.prototype._disableGridItem=function(n,t){if(n){var i=this.itemsGridViewModel.getRowMetadata(n);i.disabled(!0);t&&n.hasOwnProperty("infoBalloon")&&(n.infoBalloon?n.infoBalloon.content(t):(n.infoBalloon=new f.DockedBalloon.ViewModel(this.lifetimeManager),n.infoBalloon.content(t)))}},y.prototype._initializeCreateActionSelector=function(){var n=this;this._createSelectorField=new s.Forms.Selector.ViewModel(this._basePickerContainer,{defaultValue:this._selectorOriginalValue});this._createSelectorField.value=this._selectorEditableValue;this.createActionSelectorField(this._createSelectorField);this._createSelectorField.selectable.isSelected.subscribe(function(t){t?n._launchCreateActionBlade():n.createActionBladeOpener(o)})},y.prototype._launchCreateActionBlade=function(){this._collectorImpl.sendInputsToProvider(null);this.itemsGridViewModel.selectableData.selectedItems([]);this.createActionBladeOpener({detailBlade:this._createSelectorBladeName,extension:this._createSelectorBladeExtension,detailBladeInputs:
{}})},y.prototype._filterGridItems=function(n){var t=this;n&&n.forEach(function(n){var i=t.getMatchingItemIndex(n.id);i!==-1&&t._disableGridItem(t.itemsGridViewModel.items()[i],n.reason)});this._filteredItems&&this._filteredItems.length>0&&this._filteredItems.forEach(function(n){var i=t.itemsGridViewModel.items().first(function(i){return t.itemMatchesSelection(n.item,i)});i&&t._disableGridItem(i,n.disabledReason)})},y.filterPickerItemsParameterName="filterPickerItems",y.pickerItemsParameterName="pickerItems",__decorate([n.Composition.ProxyCompatibilityMode],y)}(f.Loadable.ViewModel);i.Picker=v})(i=t.ParameterCollectionV2||(t.ParameterCollectionV2={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";var i=n.Base,r=n.Resources.Strings.Pickers.AccessDenied,u=function(){function n(n,t){FxImpl.ParameterCollection.traceObsolete("PCv2.PickerFilter");this._requiredPermission=t;this._mapItemToResourceId=n}return n.
prototype.getDisabledItems=function(n){var t=this,u=[],f=[],e=Q.defer();return n.forEach(function(n){f.push(i.Security.hasPermission(t._mapItemToResourceId(n),[t._requiredPermission]).then(function(t){t||u.push({item:n,disabledReason:r.reasonMessage})}))}),Q.allSettled(f).then(function(){return e.resolve(u)}),e.promise},n}();t.ArmRbacFilter=u})(i=t.PickerFilter||(t.PickerFilter={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){"use strict";function c(){return}var s=n.ViewModels.ParameterCollection.Internal,u=ko.observable,f=n.deepEquals,r=null,e="",h={missingRoles:e,setOnce:e},o=FxImpl.getErrorMap(h),l=function(e){function h(n,f){var o=this;e.call(this,f&&f.content);this.editScopeId=u();this.enableProvisioning=u(!1);this.eula=u("");this.provisionOnStartboardPart=u(!0);this.cloudName=u();this._collectorImpl=r;this._providerImpl=r;this._provisionerImpl=r;this._parameterCollectionRolesSet=!1;this._actionBarOutput=r;this.
_baseWizardContainer=r;this._baseWizardInitialState=r;FxImpl.ParameterCollection.traceObsolete("PCv2.Wizard");this._editScopeImpl||(this._editScopeImpl=r);this.privateFcTpBI=new i.Internal.CollectorBindingInternals;this.privateFpTcBI=new i.Internal.ProviderBindingInternals;this.privatePcPrBI=new i.Internal.ProvisionerBindingInternals;this._baseWizardContainer=n;this._baseWizardInitialState=f;this.complete=c.bind(this);this.valid=ko.computed(function(){return o.steps().every(function(n){return n.isOptional||n.status()===t.ActionBars.Base.Status.Completed})});n.registerForDispose(this.valid);this._actionBarOutput=u();n.registerForDispose(this._actionBarOutput.subscribe(function(n){t.ActionBars.Base.isCompleted(n)&&o._providerImpl.getOutputsToCommit().then(function(n){o._providerImpl.commitOutputs({provisioner:o._provisionerImpl,provisionerData:n,progressAction:function(n){o._baseWizardContainer.operations.add(n,{blockUi:!0})},discardEdits:o._editScopeImpl.discardEditScopeEdits.bind(o._editScopeImpl),
privateFpTcBI:o.privateFpTcBI,privatePcPrBI:o.privatePcPrBI})})}))}return __extends(h,e),h.prototype.onWizardInputsSet=function(){return},h.prototype.onInputsSet=function(n){var t=this,i=Q.defer(),r=[],u;return this.cloudName(s.getCloudNameFromInputs(n)),this._parameterCollectionRolesSet||o.missingRoles(),this.editScopeId(n.editScopeId),this._editScopeImpl&&this._editScopeImpl.collectorInputs&&this._editScopeImpl.collectorInputs.inputParameters&&(u=this._editScopeImpl.collectorInputs.inputParameters),this._editScopeImpl&&r.push(this._editScopeImpl.processInputs(n)),this._collectorImpl&&r.push(this._collectorImpl.processInputs(n)),this._providerImpl&&r.push(this._providerImpl.processInputs(n)),this._provisionerImpl&&r.push(this._provisionerImpl.processInputs(n)),n.stepOutput&&this.stepOutput(n.stepOutput),this.savedState()||this.savedState(n.savedState),n.output&&n.output.status&&!f(n.output,this._actionBarOutput())&&this._actionBarOutput(n.output),Q.all(r).then(function(){if(t._provisionerImpl&&
t.enableProvisioning(t._provisionerImpl.enableProvisioning()),f(u,t._editScopeImpl.collectorInputs.inputParameters))i.resolve();else{var n=t.onWizardInputsSet(t._baseWizardContainer,t._baseWizardInitialState);n?n.then(function(){i.resolve()},function(){i.reject()}):i.resolve()}t.initialize()},function(){i.reject()}),i.promise},h.prototype.initializeParameterCollectionRoles=function(n){this._parameterCollectionRolesSet&&o.setOnce();this._extractWizardRoles(n,this._baseWizardContainer);this._parameterCollectionRolesSet=!0},Object.defineProperty(h.prototype,"dataModel",{get:function(){if(this._editScopeImpl)return this._editScopeImpl.dataModel},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"inputMetadata",{get:function(){if(this._editScopeImpl&&this._editScopeImpl.collectorInputs&&this._editScopeImpl.collectorInputs.inputMetadata)return this._editScopeImpl.collectorInputs.inputMetadata},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"parameterCollectionOptions",
{get:function(){if(this._editScopeImpl&&this._editScopeImpl.collectorInputs&&this._editScopeImpl.collectorInputs.options)return this._editScopeImpl.collectorInputs.options},enumerable:!0,configurable:!0}),h.prototype.addWizardStep=function(n,t,i,u,f,e,o,s){this.insertWizardStep(r,n,t,i,u,f,e,o,s)},h.prototype.insertWizardStep=function(n,i,r,u,f,e,o,s,h){var c=new t.Controls.Wizard.WizardStep(i,r,u,s,o,h);c.description(f);c.stepLoad=this._onStepLoad.bind(this);c.stepComplete=this._onStepComplete.bind(this);typeof n=="number"?this.steps.splice(n,0,c):this.steps.push(c);e&&this._collectorImpl&&this._collectorImpl.addProvider(i,e)},h.prototype.removeWizardStep=function(n){this._collectorImpl&&this._collectorImpl.removeProvider(n.stepId);this.steps.remove(n)},h.prototype.removeWizardStepAt=function(n){return this._collectorImpl&&this._collectorImpl.removeProvider(this.steps()[n].stepId),this.steps.splice(n,1)[0]},h.prototype._extractWizardRoles=function(n,t){var f=!!n&&n.parameterCollector,
r=!!n&&n.parameterProvider,u=!!n&&n.provisioner;this._editScopeImpl||(this._editScopeImpl=i.Internal.EditScopeFactory.createEditScope(r,t));this._editScopeImpl.initializeEditScope();this._collectorImpl=i.Internal.ParameterCollectorFactory.createParameterCollector(f,this._editScopeImpl,this.privateFcTpBI,t);this._providerImpl=i.Internal.ParameterProviderFactory.createParameterProvider(r,this._editScopeImpl);u&&(this._provisionerImpl=i.Internal.ProvisionerFactory.createProvisioner(u,this.privatePcPrBI))},h.prototype._onStepLoad=function(n){var t=this;return this._editScopeImpl.fetchEditScope().then(function(){t._collectorImpl&&t._collectorImpl.sendInputsToProvider(n.stepId)})},h.prototype._onStepComplete=function(n){return this._collectorImpl?this._collectorImpl.commitProviderOutputs(n.stepId):Q()},__decorate([n.Composition.ProxyCompatibilityMode],h)}(t.Controls.Wizard.ViewModel);i.Wizard=l})(i=t.ParameterCollectionV2||(t.ParameterCollectionV2={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||
(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=ko.observable,r=function(){function t(){this.assetType=i();this.assetName=i();this.icon=i();this.assetId=i();this.status=i();this.state=i();this.size=i(n.Parts.PartSize.Small)}return t}();t.AssetPart=r})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var r=t.Controls.Visualization.Chart.InteractionBehavior,i=n.Parts.PartSize,u=ko.observable,f=function(t){function f(f){t.call(this,f);this.size=u(i.Small);this.editButtonText=u(n.Resources.Strings.Part.Chart.editButtonText);var e=this.size,o=this.interactionBehavior;e.subscribe(f,function(n){switch(n){case i.Normal:case i.Small:case i.Wide:o(r.ChartArea_Off|r.XSlider_Off);break;default:o(r.All)}});e.notifySubscribers(e())}return __extends(f,t),f}(n.ViewModels.Controls.Visualization.Chart.ViewModel);t.ChartPart=f})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var
i;(function(t){var i;(function(t){"use strict";function b(n,t,r){var u;switch(n){case i.FullWidthFitHeight:case i.FitToContainer:case i.HeroWideFitHeight:u=w;break;case i.HeroTall:u=p;break;case i.Large:case i.HeroWide:case i.Tall:u=y;break;case i.Wide:case i.Normal:default:u=v}return u=t?u-1:u,r?u-1:u}function k(n){return n===i.Mini||n===i.Small}function d(n){return n===i.Normal||n===i.Wide}var u=ko.observable,o=ko.observableArray,f=ko.computed,e=n,i=e.Parts.PartSize,c=e.ViewModels,l=c.Controls,a=l.Lists,s=a.Grid,v=3,y=9,p=14,w=20,r,h;(function(n){n[n.None=0]="None";n[n.Data=1]="Data";n[n.Rollup=2]="Rollup"})(t.GridMode||(t.GridMode={}));r=t.GridMode;h=function(){function n(n,t){var h=this,c;this.size=u(i.Normal);this.alwaysShowRollupCount=u(!1);this.rollupCount=u();this.rollupCountIconUri=u();this.rollupCountIcon=u();this.rollupCountLabel=u();this._options=null;this._container=null;this._container=n;this._options=t;this.gridMode=u(r.None);this.hasMoreData=u(!1);c=t.selectableRowExtensionOptions?
s.Extensions.SelectableRow:null;this.grid=new s.ViewModel(n,o(),c,t.selectableRowExtensionOptions);this.grid.showHeader=!!t.showHeader;this.grid.columns=o();n.registerForDispose(this.grid);this._options.noRowsMessage&&(this.grid.noRowsMessage||(this.grid.noRowsMessage=u()),f(n,function(){h.grid.noRowsMessage(h._options.noRowsMessage())}));this.selectableData=this.grid.selectableData;this._reactToDataChange(n,this._options.data,function(n){return n===r.Data});this._reactToDataChange(n,this._options.rollupData,function(n){return n===r.Rollup});this._reactToSizeChange();this.noRollupCount=f(n,function(){return e.isNullOrUndefined(h.rollupCount())})}return n.prototype._reactToDataChange=function(n,t,i){var r=this;t&&(t.items.subscribe(n,function(){i(r.gridMode())&&r._updateGrid(t)}),f(n,function(){if(i(r.gridMode())){var n=t.columns();r.grid.columns(n)}}))},n.prototype._reactToSizeChange=function(){var n=this;f(this._container,function(){var t=n.size();n.alwaysShowRollupCount();!k(t)&&(n._options.
data||n._options.rollupData)?n._options.rollupData&&d(t)||n._options.rollupData&&!n._options.data?n.gridMode(r.Rollup):n._options.data&&n.gridMode(r.Data):n.gridMode(r.None);ko.ignoreDependencies(function(){switch(n.gridMode()){case r.Data:n._updateGrid(n._options.data);break;case r.Rollup:n._updateGrid(n._options.rollupData)}})})},n.prototype._updateGrid=function(n){if(n){var t=n.items(),r=this.size(),o=e.Parts.PartSizeHelper.isFixedSize(r),u=o?b(r,this._options.showHeader,this.alwaysShowRollupCount()):t.length;this.hasMoreData(t.length>u);var i=t.slice(0,u),f=this.grid.items.peek(),s=f.length!==i.length||ko.utils.compareArrays(f,i,{sparse:!0}).length>0;s&&this.grid.items(i)}},n}();t.ViewModel=h})(i=t.Collection||(t.Collection={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=ko.observable,r=function(){function t(){this.resourceCount=i(0);this.countIsMinimum=i(!1);this.description=i("");
this.icon=i(n.Base.Images.Shell.DefaultBlade());this.label=i("");this.size=i(n.Parts.PartSize.Normal)}return t}();t.CollectionSummary=r})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=ko.observable,i=function(n){function i(){n.apply(this,arguments);this.createName=t("")}return __extends(i,n),i}(n.ButtonPart);n.CreatePart=i})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=function(t){function r(r){t.call(this,r,n.ViewModels.Controls.Documents.Editor.ContentType.Text,null,null);this.size=i(n.Parts.PartSize.Normal)}return __extends(r,t),r}(n.ViewModels.Controls.Documents.DiffEditor.ViewModel);t.ViewModel=r})(i=t.DiffEditor||(t.DiffEditor={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t)
{"use strict";var i=ko.observable,r=ko.observableArray,u=function(){function t(t){this.groupInfos=r();this.itemsDataArray=r();this.itemSetting=i();this.valueInitialized=!1;this.resetItems=i(!0);this.total=i(null);this.startOffset=i(-90);this.totalFormat=i("{0}");this.unitFormat=i("");this.infoFormat=i("");this.numberFormatOptions=i({minimumFractionDigits:0,maximumFractionDigits:1});this.hoveredUnit=i("%");this.hoverInfoFormat=i("{0} {1}{2}");this.selectedInfoFormat=i("{0}/{1}{2}");this.disableSelectOnClick=i(!1);this.showLegend=i(!0);this.size=i(n.Parts.PartSize.Normal);this._msPortalFxRerenderTrigger=i(0);this.metrics=new n.ViewModels.Controls.Visualization.Metrics.ViewModel(t)}return t.prototype.render=function(){this._msPortalFxRerenderTrigger(this._msPortalFxRerenderTrigger.peek()+1)},t}();t.ViewModel=u})(i=t.Donut||(t.Donut={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(
t){"use strict";var i=ko.observable,r=function(t){function r(r){t.call(this,r,n.ViewModels.Controls.Documents.Editor.ContentType.Text,null);this.size=i(n.Parts.PartSize.Normal)}return __extends(r,t),r}(n.ViewModels.Controls.Documents.Editor.ViewModel);t.ViewModel=r})(i=t.Editor||(t.Editor={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=ko.observableArray,o=ko.isObservable,i=ko.utils.wrap,f="string",r=function(){function n(n,t){this.text=i(n);typeof t===f||o(t)&&typeof t()===f?this.uri=i(t):this.bladeSelection=i(t)}return n}(),e;t.Link=r;e=function(){function t(t){this.sections=u();this.bladeLinks=u();this.selection=new n.ViewModels.SelectableSet(this.bladeLinks,function(n,t){return n.bladeSelection().detailBlade===t.detailBlade},function(n){return n.bladeSelection()},t&&t.content&&t.content.selection)}return t.prototype.dispose=function(){this.selection.
dispose()},t.prototype.addSection=function(n,t,u,f){var o=this,e;e=Array.isArray(u)?new r("",undefined):new r("",u);this.sections.push({title:i(n),description:i(t),selection:e,links:Array.isArray(u)?u:null,icon:f});(Array.isArray(u)?u:[e]).forEach(function(n){n.bladeSelection&&o.bladeLinks.push(n)})},t}();t.ViewModel=e})(i=t.InfoList||(t.InfoList={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function f(n){return typeof n=="object"}var h=n,p=h.Base,c=h.ViewModels,w=c.equalDynamicSelections,l=c.SelectableSet,ut=ko.observable,e=ko.observableArray,o=ko.unwrap,a=ko.pureComputed,r=ko.utils.wrap,v,b="_msPortalFxPropertiesPartSelectionKey",ot=h.Resources.Strings.Part.PropertiesPart,ft=new p.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.PropertiesPart"),et=function(){function n(n){var i=this;this._openBladeProperties=null;this._openBladeAsyncProperties=
null;this._moveResourceProperties=null;this.properties=e([]);this.addProperty=function(n){i._addProperty(n)};this._openBladeProperties=e();this.selection=new l(this._openBladeProperties,function(n,t){return w(n.bladeSelection(),t)},function(n){return n.bladeSelection()},n&&n.content&&n.content.selection);this._moveResourceProperties=e();this.moveResourceSelection=new l(this._moveResourceProperties,function(n,t){var i=o(n.editBlade.bladeSelection);return w(i,t)},function(n){return o(n.editBlade.bladeSelection)},n&&n.content&&n.content.moveResourceSelection);var t=function(n){return n.label},r=function(n,i){n[b]=t(i)},u=function(n){return n[b]};this._openBladeAsyncProperties=e();this.asyncSelection=new l(this._openBladeAsyncProperties,function(n,i){return u(i)===t(n)},function(){return null},n&&n.content&&n.content.asyncSelection);c.Internal.SelectableSet.setCreateDelayedBladeSelection(this.asyncSelection,function(n){return{bladeWidth:h.Blades.BladeWidth.Medium,selectedValuePromise:n.resolveBlade(
).then(function(t){return r(t,n),t})}})}return n.prototype._addProperty=function(n){var t=this;this.properties.push(n);switch(n.getType()){case i.MultiOpenBlades:n.bladeLinks().forEach(function(n){t._openBladeProperties.push(n)});break;case i.OpenBladeAsync:this._openBladeAsyncProperties.push(n);n.editBlade&&n.editBlade.editType===s.MoveResource&&this._moveResourceProperties.push(n);break;default:n.bladeSelection&&this._openBladeProperties.push(n);n.editBlade&&n.editBlade.editType===s.MoveResource&&this._moveResourceProperties.push(n)}return},n.prototype.setProperties=function(n){var t=[],u=[],r=[];n.forEach(function(n){switch(n.getType()){case i.MultiOpenBlades:n.bladeLinks().forEach(function(n){t.push(n)});break;case i.OpenBladeAsync:u.push(n);n.editBlade&&n.editBlade.editType===s.MoveResource&&r.push(n);break;default:n.bladeSelection&&t.push(n);n.editBlade&&n.editBlade.editType===s.MoveResource&&r.push(n)}});this.properties(n);this._openBladeProperties(t);this._openBladeAsyncProperties(
u);this._moveResourceProperties(r)},n.prototype.removeAllProperties=function(){this.properties([]);this._openBladeProperties([]);this._openBladeAsyncProperties([]);this._moveResourceProperties([])},n.prototype.dispose=function(){this.properties().forEach(function(n){n.dispose()});this.selection.dispose();this.moveResourceSelection.dispose()},n}(),i,s,u,k,d,g,nt,y,tt,it,rt;t.ViewModel=et,function(n){n[n.Text=0]="Text";n[n.Link=1]="Link";n[n.CopyField=2]="CopyField";n[n.Callback=3]="Callback";n[n.OpenBlade=4]="OpenBlade";n[n.MultiLinks=5]="MultiLinks";n[n.Image=6]="Image";n[n.MultiOpenBlades=7]="MultiOpenBlades";n[n.OpenBladeAsync=8]="OpenBladeAsync"}(t.PropertyType||(t.PropertyType={}));i=t.PropertyType,function(n){n[n.Unknown=0]="Unknown";n[n.MoveResource=1]="MoveResource"}(t.EditType||(t.EditType={}));s=t.EditType;u=function(){function n(n){var h=this,t,f,e,u,o,s;this.displayValue=ut("");this.editBladeIcon=p.Images.Shell.Customize();this.label=n.label;this.value=r(n.value);t=n.blade;f=
t&&t.displayValue;this.displayValue=f?r(f):r(n.displayValue);this.copyableValue=r(n.copyableValue);this.visible=r(n.visible===v?!0:n.visible);this.wrappable=r(n.wrappable===v?!1:n.wrappable);e=t&&t.bladeSelection;this.bladeSelection=e?r(e):null;this.infoBalloon=n.infoBalloon;this.editBlade=n.editBlade;u=n.isLoading;this.isLoading=a(function(){return u&&u()});this._supportsIsLoading=!!u;this.type=this.getType();o=this.hasValidBladeSelection=a(function(){var n=h.bladeSelection;return!!(n&&n())||h.type===i.OpenBladeAsync});s=o();this._bladeSelectionSub=o.subscribe(function(n){s&&!n&&ft.error("A property's bladeSelection should never be updated from a non-null/non-empty value to a null/empty value.");s=n})}return n.prototype.getType=function(){throw new Error("Subclass needs to provide the property type.");},n.prototype.dispose=function(){this._bladeSelectionSub&&this._bladeSelectionSub.dispose();this.hasValidBladeSelection&&this.hasValidBladeSelection.dispose()},n}();t.Property=u;k=function(
n){function t(t,i){var u;u=f(t)?t:{label:t,value:i};u.copyableValue=u.value;n.call(this,u);this.icon=r(u.icon)}return __extends(t,n),t.prototype.getType=function(){return i.Text},t}(u);t.TextProperty=k;d=function(t){function r(i,r,u){var s=this,e;f(i)?(e=i,e.displayValue||(e.displayValue=e.value)):e={label:i,value:r,displayValue:!u?r:u};e.copyableValue=a(function(){var t=o(s.displayValue),i=o(s.value);return n.isNullOrWhiteSpace(t)?i:t.toLowerCase()===i.toLowerCase()?t:t+" <"+i+">"});t.call(this,e)}return __extends(r,t),r.prototype.getType=function(){return i.Link},r}(u);t.LinkProperty=d;g=function(n){function t(t,i,r){var u,e=new c.Controls.Forms.CopyableLabel.ViewModel(t);e.disabled(!0);f(i)?u=i:(t&&t.createChildLifetime||(t=v,i=arguments[0],r=arguments[1]),u={label:i,value:r});u.copyableValue=u.value;n.call(this,u);this._valueResponder=ko.computed(function(){var n=o(u.value);e.value(n)});this.value=e}return __extends(t,n),t.prototype.getType=function(){return i.CopyField},t.prototype.
dispose=function(){n.prototype.dispose.call(this);this._valueResponder.dispose();this.value.dispose()},t}(u);t.CopyFieldProperty=g;nt=function(n){function t(t,i,u,e){var s=this,o;o=f(t)?t:{label:t,displayValue:i,callback:u,icon:e};o.copyableValue=o.displayValue;n.call(this,o);this.callback=o.callback;this.icon=r(o.icon);this.callbackWrapper=function(){return s.callback(),!1}}return __extends(t,n),t.prototype.getType=function(){return i.Callback},t}(u);t.CallbackProperty=nt;y=function(n){function t(t,i,u){var e,o;e=f(t)?t:{label:t,displayValue:i,bladeSelection:u};o=$.extend({},{blade:{displayValue:e.displayValue,bladeSelection:e.bladeSelection}},e);n.call(this,o);this.copyableValue=r(e.displayValue)}return __extends(t,n),t.prototype.getType=function(){return i.OpenBlade},t}(u);t.OpenBladeProperty=y;tt=function(n){function t(t,i,r){var u,o;u=f(i)?i:{label:i,bladeLinks:r};n.call(this,u);this.bladeLinks=e();o=u.bladeLinks.map(function(n){return new y({label:"",displayValue:n.displayValue,bladeSelection:
n.bladeSelection})});o.subscribe(t,this.bladeLinks);this.bladeLinks(o())}return __extends(t,n),t.prototype.getType=function(){return i.MultiOpenBlades},t}(u);t.MultiOpenBladeProperty=tt;it=function(n){function t(t,i){var r;r=f(t)?t:{label:t,links:i};n.call(this,r);this.links=r.links}return __extends(t,n),t.prototype.getType=function(){return i.MultiLinks},t}(u);t.MultiLinksProperty=it;rt=function(n){function t(t,i){var u;u=f(t)?t:{label:t,icon:i};n.call(this,u);this.icon=r(u.icon)}return __extends(t,n),t.prototype.getType=function(){return i.Image},t}(u);t.ImageProperty=rt})(i=t.Properties||(t.Properties={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=MsPortalFx.ViewModels.Parts.Properties,i=ko.utils.wrap,r=function(n){function r(t){var r=$.extend({},{blade:{displayValue:t.displayValue,resolveBlade:t.resolveBlade}},t);n.call(this,r);this.resolveBlade=
t.resolveBlade;this.copyableValue=i(t.displayValue)}return __extends(r,n),r.prototype.getType=function(){return t.PropertyType.OpenBladeAsync},r}(t.Property);n.OpenBladeAsyncProperty=r})(t=n.Properties||(n.Properties={}))})(t=n.Parts||(n.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=n.Resources.Strings.Part.Provisioning.description,u=function(t){function u(u,f,e){t.call(this,u,f,e!==!1,!0);this._partContainer=null;this.title=i("");this.description=i(r);this.icon=i(n.Base.Images.Shell.DefaultBlade());this.errorMessage=i();this._partContainer=u;this.icon=i(n.Base.Images.Gear())}return __extends(u,t),u.prototype.onInputsSet=function(n){return t.prototype.onInputsSet.call(this,n)},u.prototype.mutate=function(n){this._partContainer.mutate({containerModel:n})},u}(n.ViewModels.ParameterCollection.BaseGalleryButtonPartViewModel);t.ContentViewModel=u})(i=t.ProvisioningPart||(t.ProvisioningPart=
{}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=function(t){function i(){t.call(this);this.backgroundColor=n.Parts.PartColor.Theme;this.title(n.Resources.Strings.Part.Quickstart.title);this.icon(n.Base.Images.AzureQuickstart())}return __extends(i,t),i}(t.ButtonPart);t.QuickStartPart=i})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,u=ko.observableArray,f,r;(function(n){n[n.None=0]="None";n[n.CurrentValue=1]="CurrentValue";n[n.GaugeBackground=2]="GaugeBackground";n[n.TotalValue=3]="TotalValue"})(t.MetricColorBarKind||(t.MetricColorBarKind={}));f=t.MetricColorBarKind;r=function(){function t(){this.instance=i(0);this.total=i(0);this.instanceQuota=i(100);this.totalQuota=i(100);this.unit=i("");this.hideTotal=i(!1);this.hideQuota=i(!1);this.hideTick=i(!1);this.maximum=i(100);this.startOffset=i(-90);this.
totalArc=i(355);this.captionDisplayFormat=i("{2}");this.valueDisplayFormat=i("{0}");this.metrics=u();this.size=i(n.Parts.PartSize.Normal)}return t}();t.ViewModel=r})(i=t.QuotaGauge||(t.QuotaGauge={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function u(n,t,i,r){return{key:n,extension:t,name:i,name2:r}}function ut(n){return si.some(function(t){return n.key===t.key})}function nr(n){var r="<div data-bind='",u=r+"image: {0}' style='height: {1}px; width: {1}px; padding: {2};' alt=''/>",t=function(n,t,r){var u=a.Format.HtmlBindings,f={htmlBindingsTemplate:t};return{itemKey:n,template:t,format:u,formatOptions:f,filterableFormat:u,filterableFormatOptions:f,width:r?i(r):null}},f=[t("icon",u.format("value",15,0),"25px"),t("displayText",r+"text: value' class='msportalfx-text-small msportalfx-text-ellipsis'/>"),t("",u.format("MsPortalFx.Base.Images.Shell.Chevron()",
14,"8px 0 9px 3px"),"30px"),];return n&&f.unshift(t("__placeholder__","","1px")),f}function et(t){n.isNullOrWhiteSpace(t.group())&&t.group(tt.general)}function ci(n,t){var i=n[pt];ko.reactor(t,function(){var t=n.displayText()+" "+n.group()+" "+(n.keywords()||[]).join(" ");i(t)})}var h=n,w=h.Base,b=w.Constants,ot=FxImpl.Extension.CloudName,l=b.ExtensionNames,k=h.ViewModels,st=k.Selectable,a=k.Controls.Lists.Grid,nt=a.Extensions,o=k.Services.ResourceTypes,vi=w.Diagnostics.Telemetry,yi=h.Resources.Strings.Part,r=yi.SettingList,tt=r.Group,c=r.Keywords,e=w.Images,v=e.Polychromatic,y=h.isNullOrUndefined,it=ko.utils,i=ko.observable,rt=ko.observableArray,ht=b.ResourceTypes.ResourceGroups,pi=b.ResourceTypes.AllResources,wi=window,ct=it.wrap,lt=it.arrayFirst,at=w.ImagePalette.Blue,vt=r.resources,yt=r.resourceGroups,pt="aggregatedKeywords",f="Blade",wt="Resource",s=l.Hubs,p=l.Support,bt="AzureDiagnostics"+f,bi=wi.fx.environment.features,kt=bi.newauditlogs==="true",dt=u("__users",l.ActiveDirectory,
"UserAssignments"+f),gt=u("__tags",s,wt+"TagsList"+f),ni=u("__locks",s,"Locks"+f),ti=u("__exportTemplate",s,"TemplateViewer"+f),ii=u("__troubleshoot",p,"Troubleshoot"+f),ri=u("__troubleshootV2",p,"TroubleshootV2"+f),ui=u("__supportRequest",p,"NewSupportRequest"+f),fi=u("__resourceHealth",p,wt+"HealthDetail"+f),ei=kt?u("__eventLogs",l.AzureMonitoring,"EventsBrowse"+f):u("__eventLogs",l.AzureInsights,bt+"FromSettings",bt+"WithParameter"),ki=u("__accessDetails",s,"MyAccess"+f),oi=u("__resources",s,"Resources"),di=u("__subCerts",s,"SubCerts"+f),gi=u("__subQuotas",s,"SubQuotas"+f),si=[dt,gt,ni,ti,ii,ri,ui,fi,ei],d=n.isFeatureEnabled("hidesupport"),ft=function(){function t(n,t,r,u,f){this.displayText=i("");this.icon=i();this.keywords=rt();this.group=i(" ");this.aggregatedKeywords=i("");this._key=n;this._blade=ct(t);this._bladeInputs=r;this._extension=ct(u);this._options=f}return Object.defineProperty(t.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),t.prototype.
getOptions=function(){return this._options},t.prototype.toSelection=function(){var n=this._options;return{key:this._key,detailBlade:this._blade.peek(),detailBladeInputs:this._bladeInputs.peek(),extension:this._extension.peek(),isParameterCollector:!!(n&&n.parameterCollector)}},__decorate([n.Composition.ProxyCompatibilityMode],t)}(),hi,g,li,ai;t.Setting=ft;hi=function(n){function t(){n.apply(this,arguments);this._cloudName=b.EmptyCloudName}return __extends(t,n),t.prototype.toSelection=function(){var t=n.prototype.toSelection.call(this),i=this._cloudName,r=this._bladeInputs.peek();return this._extension.peek()===s?ot.readFromInputs(r)||this._bladeInputs(ot.addToModel(i,r)):t.cloudName=i,t},t}(ft);g=function(){function t(n,t,u,f){var s=this,b,c,k,v,p,e,l,w;this._cloudAwareSettings=[];b=this.resourceId=i();this.searchBoxPlaceholder=i(r.searchBoxPlaceholder);c=it.wrapArray(u);f=f||{};v=function(){s._updateSettings(n,c,f,k);s._processSettings(n)}.bind(this);b.subscribe(n,function(n){p=(p||Q(
)).then(function(){var i=o.isSubscriptionId(n),t=Q();return i&&(t=h.Azure.getSubscriptionInfo(o.parseSubscriptionDescriptor(n).subscription).then(function(n){k=n},function(){})),t.then(function(){v()})})});var d=nt.SelectableRow|nt.Filterable,ft=this._searchText=i(""),g={selectableRow:{selectionMode:a.RowSelectionMode.Single,itemMatchesSelection:function(n,t){return n.key===t.key},createSelection:function(n){return n.toSelection()},activateOnSelected:i(!0),initialSelection:t&&t.content&&t.content.settingList&&t.content.settingList.selectableData},filterable:{searchableColumns:rt([pt]),searchBoxCloseButtonVisible:i(!1),searchBoxPlaceholder:this.searchBoxPlaceholder,queryString:ft}},tt=f&&!y(f.groupable)?f.groupable:!0;tt&&(d|=nt.Groupable,g.groupable={groupKey:i("group"),sortFunction:a.SortFunction.SettingListGroupOrder},c().forEach(function(n){et(n)}));e=new a.ViewModel(n,c,d,g);this.settingList=e;e.columns=rt(nr(tt));e.showHeader=!1;e.selectableData.activatedItems.subscribe(n,function(
n){if(n&&n.length>0){var t=n[0];s._trace(t)}});l=e.items;w=[];l.subscribe(n,function(n){w=n},null,"beforeChange");l.subscribe(n,function(n){(p||Q()).then(function(){var t=!y(lt(w,ut)),i=!y(lt(n,ut));t&&!i&&v()})});l.subscribeArrayChanges(n,function(t){s._removeSetting(t)||(ci(t,n),et(t))},null);this._processSettings(n)}return t.prototype._setCloudName=function(n){this._cloudName=n;this._cloudAwareSettings.forEach(function(t){t._cloudName=n})},t.prototype.isPCv3=function(){return!1},t.prototype._updateSettings=function(t,u,f,s){var ot=this,g=u().slice(),l=this.resourceId(),et,pt;if(h.remove(g,ut),!y(l)){var wt=o.isTenantResource(l),b=o.isSubscriptionId(l),nt=o.isResourceGroupId(l),it=o.isResourceId(l),k=b||nt||it,bt=nt?l:it?o.buildResourceGroupIdFromResourceId(l):null,rt=nt?ht:it?o.buildResourceTypeFromResourceId(l):null,st=rt&&rt.toLowerCase().startsWith("microsoft.classic"),si=i({scope:l}),p=i({resourceId:l}),ct=i({assetId:l}),ci=i({}),w=!y(f),lt=b&&s&&FxImpl.Azure.isZeroCapSubscription(
s),a=function(n,t,i,r,u,f,e,o,s){var h=new(o?hi:ft)(n.key,n.name,f,n.extension,s);return h.displayText(r),h.icon(i),h.group(t?tt.support:tt.resourceManagement),h.keywords([u]),g[e?"unshift":"push"](h),o&&(h._cloudName=ot._cloudName,ot._cloudAwareSettings.push(h)),h};!this.isPCv3()||d||w&&f.enableSupportHelpRequest===!1||a(ui,!0,e.Support(),r.helpRequest,c.helpRequest,ct,!1,!1,{parameterCollector:{supplyInitialData:function(){return""},receiveResult:function(){return{}},supplyProviderConfig:function(){return{provisioningConfig:{provisioningEnabled:!0,dontDiscardJourney:!0}}}}});!d&&w&&f.enableSupportResourceHealth&&a(fi,!0,e.HeartPulse(),r.resourceHealth,c.resourceHealth,p,!0);k&&(!w||f.enableSupportEventLogs!==!1)&&a(ei,!0,v.Log(),r.eventLogs,c.eventLogs,kt?i({queryInputs:{id:l}}):p,!0);b&&(lt||(a(oi,!1,v.ResourceGroup(),yt,vt,i({scope:l,resourceType:ht}),!1,!0),a(oi,!1,v.Grid(),vt,yt,i({scope:l,resourceType:pi}),!1,!0),f.enableManagementCerts!==!1&&a(di,!1,v.Certificate(),r.subCerts,"",
p,!1,!0),a(gi,!1,v.ControlsHorizontal(),r.subQuotas,c.subQuotas,p,!1,!0)),f.enableAccessDetails!==!1&&a(ki,!1,e.Person(at),r.accessDetails,"",p,!1,!0));et=n.isFeatureEnabled("addtagstosettings");k&&!st&&(w&&(pt=f.enableTags||pt!==!1&&et)||!w&&et)&&a(gt,!1,e.Tag(),r.tags,"",p,!1,!0);k&&!lt&&a(ni,!1,e.Lock(),b?r.locksForSubscriptions:r.locks,"",p,!1,!0);(k||wt)&&(!w||f.enableRbac!==!1)&&a(dt,!1,e.PersonWithFriend(at),r.users,r.access,si,!1,!0);!k||st||b||f.enableExportTemplate===!1||a(ti,!1,e.Polychromatic.Download(),r.exportTemplate,c.exportTemplate,i({options:{resourceGroup:bt,telemetryId:rt}}),!1,!0);!d&&w&&(f.enableSupportTroubleshoot||f.enableSupportTroubleshootV2)&&a(f.enableSupportTroubleshootV2?ri:ii,!0,e.Tools(),r.troubleshoot,c.troubleshoot,ct,!0);u(g)}},t.prototype._processSettings=function(n){var t=this;this.settingList.items().slice().forEach(function(i){t._removeSetting(i)||(ci(i,n),et(i))})},t.prototype._removeSetting=function(n){var f=this,t=n.toSelection(),i=t.extension,
r=t.detailBlade,e=t.key,u=!1;return si.forEach(function(t){var o=f.settingList.items,s=o().some(function(n){return n.key===t.key});(d&&i===p||i===t.extension&&(r===t.name||r===t.name2)&&e!==t.key&&s)&&(o.remove(n),u=!0)}),u},t.prototype._trace=function(t){var i={extension:t.extension,detailBlade:t.detailBlade},r=this._searchText.peek();n.isNullOrWhiteSpace(r)||(i.searchText=r);vi.trace({source:"MsPortalFx.ViewModels.Parts.SettingList",action:"OpenSetting",name:t.key,data:i})},t}();t.BaseViewModel=g;li=function(n){function t(t,i,r,u){n.call(this,t,i,r,u)}return __extends(t,n),t}(g);t.ViewModel=li;ai=function(n){function t(t,i,r,u){var f=this,o,s,e;n.call(this,t,i,r,u);o=this.selectable=new st;s=this.pcSelectable=new st;this.settingList.selectableData.selectedItems.subscribe(t,function(n){var r=f.pcSelectable,u=f.selectable,t,i;n.length<1?(u.isSelected(!1),r.isSelected(!1)):(t=n[0],i=t.isParameterCollector?r:u,i.selectedValue(t),i.isSelected(!0))});e=function(){var n=f.settingList.selectableData;
n.selectedItems([]);n.activatedItems([])};o.isSelected.subscribe(t,function(n){n||e()});s.isSelected.subscribe(t,function(n){n||e()});this._initParameterCollector(t)}return __extends(t,n),t.prototype.isPCv3=function(){return!0},t.prototype._initParameterCollector=function(n){var t=this,i=this._getCurrentSetting.bind(this),r={selectable:this.pcSelectable,supplyInitialData:function(){var n=i(t.pcSelectable);return n.getOptions().parameterCollector.supplyInitialData()},receiveResult:function(n){var r=i(t.pcSelectable);r.getOptions().parameterCollector.receiveResult(n)},supplyProviderConfig:function(){var r=i(t.pcSelectable),n=r.getOptions().parameterCollector;return n.supplyProviderConfig?n.supplyProviderConfig():null}};this.parameterCollector=new k.ParameterCollector(n,r)},t.prototype._getCurrentSetting=function(n){var t=n.selectedValue.peek();return this.settingList.items.peek().first(function(n){return n.key===t.key})},t}(g);t.ViewModelV2=ai})(i=t.SettingList||(t.SettingList={}))})(i=t.
Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){"use strict";var r=n.ViewModels.ParameterCollection.Internal,u=ko.observable,f=n.ViewModels.ContentState,e=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.SetupPart"),o=n.Services.Gallery.Constants.GalleryOptionsKey,s=function(i){function s(n,t){i.call(this,n,t,!1);this._setupPartContainer=null;this._previousCommit=null;this._outputs=null;this._setupPartContainer=n;this.provisioningEntity={cloudName:u(),enableProvisioning:u(!0),privatePcPrBI:new r.ProvisioningEntityBindingInternals}}return __extends(s,i),s.prototype.onInputsSet=function(n){return this.provisioningEntity.cloudName(r.getCloudNameFromInputs(n)),this._loadContent(),i.prototype.onInputsSet.call(this,n)},s.prototype.mutateOnLoad=function(){return null},s.prototype.mutate=function(n,t){this._setupPartContainer.mutate({partName:n,extensionName:t})},s.prototype.onProviderCommit=
function(t,i){return this._outputs=i,n.Helpers.resolve(!0)},s.prototype._loadContent=function(){var i=this,n=this._setupPartContainer,r=this.mutateOnLoad(),t=function(){i._commit.subscribe(n,function(n){i._executeProvisioningIfApplicable(n)})};r?r.then(function(i){i?typeof i=="string"?n.mutate({partName:i}):n.mutate(i):t()},function(){e.error("Extension's mutateOnLoad() function returned a promise that failed.");t()}):t()},s.prototype._executeProvisioningIfApplicable=function(i){var a=this,s,u;if(this._outputs&&(s=this._previousCommit,this._previousCommit=i,!n.deepEquals(s,i)&&t.ActionBars.Base.isCompleted(this.stepOutput()))){u=this._setupPartContainer;u.selectable.isSelected(!1);u.contentState(f.None);var v=new r.Provisioner(this.provisioningEntity),y=this._outputs,h=this.privateFcTpBI.inputs().options,c=v.executeProvisioning(y,h);u.operations.add(c,{blockUi:!0});var p=h[o].uiDefinition,l=p.markup.reference,w=l.partName,b=l.partExtension;c.then(function(){u.mutate({partName:w,extensionName:
b})},function(){e.error("executeProvisioning callback failed.");u.contentState(f.Error);a.beginExecuteCommand(!1)})}},s}(t.ProvisioningPart.ContentViewModel);i.Content=s})(i=t.SetupPart||(t.SetupPart={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function r(){return{size:i(n.Parts.PartSize.HeroWide),editButtonText:n.Resources.Strings.Part.Chart.editButtonText}}var i=ko.observable,u=function(t){function i(n,i){var i=$.extend(r(),i);t.call(this,n,i);this._initSimpleChartPartOptions(i)}return __extends(i,t),i.prototype._initSimpleChartPartOptions=function(t){var i=this,r=t;n.shallowCopyFromObject(i,r,["size","editButtonSelectable","editButtonText"])},i}(n.ViewModels.Controls.Visualization.SimpleChart.ViewModel);t.SimpleChartPart=u})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,u=ko.observableArray,f,r;
(function(n){n[n.None=0]="None";n[n.CurrentValue=1]="CurrentValue";n[n.GaugeBackground=2]="GaugeBackground"})(t.MetricColorBarKind||(t.MetricColorBarKind={}));f=t.MetricColorBarKind;r=function(){function t(){this.maximum=i(100);this.current=i(0);this.unit=i("");this.metrics=u();this.size=i(n.Parts.PartSize.Normal)}return t}();t.ViewModel=r})(i=t.SingleValueGauge||(t.SingleValueGauge={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function i(t){n.FeatureAdoption.traceFeature({name:t,status:!1,obsolete:!0})}t.traceObsolete=i})(t=n.ParameterCollection||(n.ParameterCollection={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";var f=n.Data,i=n.Base.Utilities.Internal.Serialization,r=ko.observable,u=i.fromSerializableObject,e=function(){function e(n,t){if(this.defaultActionBarInput=r({isLastStep:!0,allowToggleProvisioningLocation:!0,status:null}),this._configFromCollector=r(),this.
_hasSentResult=!1,this._getResultSubscribers=[],!t.mapIncomingDataForEditScope==!t.mapIncomingDataForEditScopeAsync)throw new Error("For ParameterProvider options, specify 'mapIncomingDataForEditScope' or 'mapIncomingDataForEditScopeAsync' (but not both).");this._options=t;this._prepareEditScopeWithInitialData(n);this._setUpActionBarWatcher(n)}return Object.defineProperty(e.prototype,"editScope",{get:function(){return this._editScopeView.editScope},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"configFromCollector",{get:function(){return this._configFromCollector},enumerable:!0,configurable:!0}),e.prototype.getResultsBeforeCommit=function(n){var t=this._getResultSubscribers.some(function(t){return t===n});if(t)throw new Error("This subscriber has already subscribed to get the results before the provider commit.");else this._getResultSubscribers.push(n)},e.prototype.getResults=function(){var n=this._editScopeView,t=n.editScope&&n.editScope(),i,r;return t&&(r=t.root,i=
this._options.mapOutgoingDataForCollector(r)),i},e.prototype._prepareEditScopeWithInitialData=function(n){var r=this,s,h,e=this._options,c,o;this.bladeCallable=new t.Internal.BladeCallable(n,{receiveParams:function(n){var f=u(n.initialData),t=n.providerConfig;t&&i.isSerializedObject(t)&&(t=u(t));r._configFromCollector(t);e.mapIncomingDataForEditScope?(h=e.mapIncomingDataForEditScope(f),s=Q({})):s=e.mapIncomingDataForEditScopeAsync(f).then(function(n){h=n})}});c=this._editScopeCache=f.EditScopeCache.createNew({entityTypeName:e.editScopeMetadataType,supplyNewData:function(){return h}});n.registerForDispose(c);this._editScopeView=c.createView(n);n.onInputsSetCallbacks.add(function(t){if(t.editScopeId&&t.editScopeId!==r._editScopeId){r._editScopeId=t.editScopeId;o=s.then(function(){return r._editScopeView.fetchForNewData(r._editScopeId)});var i=n;typeof i.revealContent=="function"&&(o=o.then(function(){i.revealContent()}))}return o})},e.prototype._setUpActionBarWatcher=function(n){var i=this,
r=function(n){if(n&&n.status===t.ActionBars.Base.Status.Completed&&!i._hasSentResult){i._hasSentResult=!0;var r={actionBarOutput:n};i._discardEditScopeAndSendResult(r)}};n.onInputsSetCallbacks.add(function(n){return r(n.internal_parameterProviderActionBarOutput),null});ko.reactor(n,function(){if(ko.isObservable(n._actionBar)){var i=n,t=i._actionBar();t&&r(t.output())}})},e.prototype._discardEditScopeAndSendResult=function(n){var t=this._editScopeView,u=t.editScope&&t.editScope(),r,s;if(u){var f=u.root,e=this._options,o=e.commitResult;o&&o(f);r=e.mapOutgoingDataForCollector(f,n);this.bladeCallable.sendResult({resultData:i.toSerializableObject(r)});this._getResultSubscribers.forEach(function(n){n.receiveResult(r)});s=this._editScopeCache;s.disposeAndDiscardEdits(this._editScopeId,t)}},__decorate([n.Composition.ProxyCompatibilityMode],e)}();t.ParameterProvider=e})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var f=n.Base.Utilities.
Internal.Serialization,u=undefined,i="",e={missingSelectable:i,bothSelectables:i,fieldAccessorAndCallbacks:i,missingCallbacks:i},r=FxImpl.getErrorMap(e),o=function(){function n(n,i){var c=i.selectable,s=i.selectableSet,v=n.selectable,l=s?null:c||v,e=i.formFieldValueAccessor,o=i.receiveResult?i.receiveResult.bind(i):u,h=i.supplyInitialData?i.supplyInitialData.bind(i):u,a=i.supplyProviderConfig?i.supplyProviderConfig.bind(i):u;l||s||r.missingSelectable();c&&s&&r.bothSelectables();e?(o||h)&&r.fieldAccessorAndCallbacks():o||r.missingCallbacks();this.bladeCaller=new t.Internal.BladeCaller(n,{forceInvocation:i.fxInternalFI,invokeOnSelectable:l,invokeOnSelectableSet:i.selectableSet,supplyParams:function(t){var i=null,r;return h?i=h(t):e&&(r=e.getEditableObservable(n),i=r()),{initialData:f.toSerializableObject(i),providerConfig:a?a(t):null}},receiveResult:function(t,i){var r=f.fromSerializableObject(t.resultData),u;o?o(r,i):(u=e.getEditableObservable(n),u(r))}})}return n}();t.ParameterCollector=
o})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";function e(n,i){return t.getProvisioningOperationEndPoint.acquireObject(i?i:f.client,u.Constants.Shell,n).then(function(n){var t=n&&n.getValue(),i;if(t)return i=t.provisioningPromise,i?(i.finally(function(){n.dispose()}),Q(t)):(n.dispose(),Q.reject("The provisioning operation was invalid."))})}var u=MsPortalFx.Base,f=u.Rpc.Internal,i=n.Constants.RpcMethods,r=f.ProxiedObjectTypeDefinition;t.initiateProvisioningRequestEndPoint=new r(i.initiateProvisioningRequest);t.getProvisioningRequestEndPoint=new r(i.getProvisioningRequest);t.getProvisioningOperationEndPoint=new r(i.getProvisioningOperation);t.getProvisioningOperation=e})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(t){"use strict";function u(n){return typeof n=="function"}function nt(n){n||
r.optionsMissing();u(n.supplyProvisioningPromise)||r.supplyProvisioningPromiseMissing();u(n.supplyStartboardInfo)||r.supplyStartboardInfoMissing();var t=n.parameterProvider;(n.actionBar?t:!t)||r.providerAndActionBar()}var e=n.Base,p=FxImpl.Extension.CloudName,w=n.ViewModels,a=FxImpl.ViewModels.ParameterCollectionV3,b=e.Rpc.Internal,k=e.Utilities,v=k.clone,o=w.ParameterCollection.Internal.ProvisioningTelemetry,h=o.ActionModifier,c=o.ProvisioningStatus,l=ko.observable,d=window,y=d.fx.environment,f=undefined,i="",g={optionsMissing:i,supplyProvisioningPromiseMissing:i,supplyStartboardInfoMissing:i,providerAndActionBar:i,automaticProvisioning:i,invalidStarboardInfo:i,badStarboardInfo:i,requestAlreadyExists:i,refKeyDoesntMatch:i,provisionerIdMissing:i,provisionerNotFound:i,refKeyMissing:i,requestNotFound:i},r=FxImpl.getErrorMap(g),tt=function(){function t(i,r){var e=this,f,c,o,s,h;this.provisioningConfig=l();this.provisioningPromise=l();this.provisionOnStartboard=l(!1);this._isCustomProvisioning=
!0;this._actionBarSupportsForceInProgressStatus=!1;this._actionBarSupportsIsProvisioningBlade=!1;this._actionBarSupportsProvisionOnStartboardPart=!1;this._actionBarSupportsSecondaryLinkDisplayText=!1;this._actionBarSupportsSecondaryLinkValidation=!1;this._actionBarSupportsShowActionBar=!1;nt(r);this._options=r;f=this._options&&this._options.actionBar;this._actionBar=f;f&&(this._actionBarSupportsForceInProgressStatus=u(f.forceInProgressStatus),this._actionBarSupportsIsProvisioningBlade=u(f.isProvisioningBlade),this._actionBarSupportsProvisionOnStartboardPart=u(f.provisionOnStartboardPart),this._actionBarSupportsSecondaryLinkDisplayText=u(f.secondaryLinkDisplayText),this._actionBarSupportsSecondaryLinkValidation=u(f.secondaryLinkTriggerValidation),this._actionBarSupportsShowActionBar=u(f.showActionBar));c=this._provisionerId=n.getUniqueId();t.provisionersList[c]=this;o=r.parameterProvider;o&&(o.getResultsBeforeCommit(this),s=function(n){var i,r,t,u;n&&n.provisioningConfig&&(i=n.provisioningConfig,
e.provisioningConfig(v(i)),r=i&&i.galleryCreateOptions,t=r&&r.launchingContext,t=e._launchingContext=v(t)||{},t.extVersion=y.version,u=e._telemetryId,!u||(t.telemetryId=u),f&&e._actionBarSupportsIsProvisioningBlade&&f.isProvisioningBlade(n.provisioningConfig.provisioningEnabled))},s(o.configFromCollector()),o.configFromCollector.subscribe(i,s));t._registerRpcCallbacks();h=function(n){e._cloudName=p.readFromInputs(n);i.onInputsSetCallbacks.remove(h);return};i.onInputsSetCallbacks.add(h)}return t.prototype.dispose=function(){delete t.provisionersList[this._provisionerId]},t.prototype.startProvisioning=function(n){this._actionBar&&r.automaticProvisioning();var i=this._options,t=i.supplyStartboardInfo(n);return t?(s.isValid(t)||r.invalidStarboardInfo(),this.provisionOnStartboard(!0)):this.provisionOnStartboard(!1),this._initiateProvisioningRequest(n,t)},t.prototype.receiveResult=function(n){var t=this.provisioningConfig()||{};t.provisioningEnabled&&this._beginProvisioning(n)},t.prototype._beginProvisioning=
function(n){var t,i=this._actionBar&&this._actionBarSupportsProvisionOnStartboardPart&&this._actionBar.provisionOnStartboardPart();return this.provisionOnStartboard(i),i&&(t=this._options.supplyStartboardInfo(n)||this.provisioningConfig().startboardProvisioningInfo,s.isValid(t)||r.badStarboardInfo()),this._initiateProvisioningRequest(n,t)},t.prototype._initiateProvisioningRequest=function(i,u){var h=this,c=this._launchingContext||{},l,o;if(c.telemetryId||(l=this._telemetryId=n.newGuid(),c.telemetryId=l),c.extVersion||(c.extVersion=y.version),this._traceProvisioningStarted(this._createEventBase()),o=this._options.supplyProvisioningPromise(i),this.provisioningPromise(o),o){o.then(function(n){h._traceProvisioningEnded(n,!0,h._createEventBase())},function(n){h._traceProvisioningEnded(n,!1,h._createEventBase())});var s=n.getUniqueId(),p={provisioningConfig:this.provisioningConfig(),provisioningRefKey:s,provisioningPromise:o,startboardInfo:u},v=t.provisioningRequestsLookup;v[s]&&r.requestAlreadyExists(
);v[s]=p;a.initiateProvisioningRequestEndPoint.acquireObject(t.rpcClient,e.Constants.Shell,{provisionerId:this._provisionerId,provisioningRefKey:s,cloudName:this._cloudName}).then(function(n){var t=n.getValue();t.provisioningRefKey!==s&&r.refKeyDoesntMatch();n.dispose()},function(n){throw new Error(n);})}else this._traceProvisioningEnded(f,f,this._createEventBase());return o},t._registerRpcCallbacks=function(){t._rpcRegistered||(a.getProvisioningRequestEndPoint.registerObjectFactory(t.rpcClient,{allowedOrigin:[e.Constants.Shell],allowRemoteChanges:!0,handler:function(n){var i=n.provisionerId,u;if(i||r.provisionerIdMissing(),u=t.provisionersList[i],u)return Q(u.getProvisioningRequest(n.provisioningRefKey));r.provisionerNotFound(i)}}),t._rpcRegistered=!0)},t.prototype.getProvisioningRequest=function(n){var i,u;return n||r.refKeyMissing(),i=t.provisioningRequestsLookup[n],i||r.requestNotFound(n),u=i.provisioningPromise,u&&u.finally(function(){delete t.provisioningRequestsLookup[n]}),i},t.
prototype._createEventBase=function(){var n=this._launchingContext,t={source:f,action:f,name:n&&n.galleryItemId,data:{isCustomProvisioning:this._isCustomProvisioning,provisionOnStartboard:this.provisionOnStartboard()}};return n&&(t.data.launchingContext=n),t},t.prototype._traceProvisioningStarted=function(n){return o.traceProvisioningStarted(n)},t.prototype._traceProvisioningEnded=function(n,t,i){var r=i||{},u;return r.actionModifier||(r.actionModifier=t===f||t?h.Succeeded:h.Failed),r.data||(r.data={}),u=r.data,u.provisioningStatus||(u.provisioningStatus=t===f?c.NoPromise:t?c.Resolved:c.UnknownFailure),r.actionModifier===h.Failed&&(u.details=n),o.traceProvisioningEnded(r)},t.rpcClient=b.client,t.provisioningRequestsLookup={},t.provisionersList={},t._rpcRegistered=!1,t}(),s;t.Provisioner=tt;s=function(){function n(){}return n.isValid=function(n){n=n||{};var t=n.provisioningPart||{},i=n.startboardPart||{};return!!t.name&&!!t.extension&&!!i.name&&!!i.extension&&!!n.startboardPartKeyId},n}
();t.StartboardInfo=s})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){"use strict";n.pollingInterval=2e3;n.pollingRetries=10})(t=n.ParameterCollectionV3||(n.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(i){"use strict";function o(n){return typeof n=="function"}function s(n,t){return t===void 0&&(t=u.pollingRetries),u.getProvisioningOperation(n).catch(function(i){return--t?Q.delay(u.pollingInterval).then(function(){return s(n,t)}):Q.reject(i)})}var u=FxImpl.ViewModels.ParameterCollectionV3,r=ko.observable,f=new n.Base.Diagnostics.Log("MsPortalFx/Azure/BaseResourceDropDown"),h=f.warning.bind(f),e=n.Base.Utilities.clone,c=function(i){function u(u,f){var e=this,h,c,s;i.call(this);this.description=r("");this.errorMessage=r();this.icon=r(n.Base.Images.Shell.DefaultBlade());this.initialData=
r();this.updatedData=r();this.provisioningPromise=r();this.provisioningStarted=r(!1);this.statusUnknown=r(!1);this.title=r("");this._shouldBlockUiWhenProvisioning=!0;this._provisioningConfig=r();this._delayPromise=Q.delay(2e3);h=f&&f.container||{};c=h.selectable&&h.selectable.selectedValue||!0;u.selectable=t.Part.createSelectableViewModel(f,c);this._partContainer=u;this.icon=r(n.Base.Images.Gear());s=f&&f.content||{};this.initialData(s.initialData);this.updatedData(s.updatedData);this.statusUnknown(s.statusUnknown);this.errorMessage(s.errorMessage);this.provisioningPromise.subscribe(u,function(n){if(n)if(e._shouldBlockUiWhenProvisioning&&u.operations.add(n,{blockUi:!0}),o(e.onProvisioningPromiseAcquired))e.onProvisioningPromiseAcquired(n);else n.then(function(n){e.mutateIntoStartboardPart(n)},function(n){if(o(e.onProvisioningPromiseError))e.onProvisioningPromiseError(n);else e.errorMessage(n)})})}return __extends(u,i),Object.defineProperty(u.prototype,"provisioningConfig",{get:function(
){if(!this._provisioningConfig()){var n=this.initialData();this._provisioningConfig(e(n&&n.provisioningConfig))}return this._provisioningConfig()},set:function(n){this._provisioningConfig(e(n))},enumerable:!0,configurable:!0}),u.prototype.onInputsSet=function(n){n&&n.initialData&&(this.initialData(n.initialData),this.provisioningPromise()||this.errorMessage()||this.statusUnknown()||(this.provisioningStarted(!0),this._fetchProvisioningPromise()));return},u.prototype.mutateIntoStartboardPart=function(n){var u=this,t=this.initialData(),i,r;if(!t||!t.startboardPart){this.errorMessage("Could not mutate into target part");throw new Error("Initial data was not persisted correctly to the part's viewstate. Make sure the 'initialData' property is added to your Part.ViewStateProperties in your PDL.");}i=t.startboardPart;r={partName:i.name,extensionName:i.extension,containerModel:n};this._delayPromise.then(function(){u._partContainer.mutate(r)})},u.prototype._fetchProvisioningPromise=function(){var
n=this,t=this.initialData().provisioningRefKey;!t||s(t).then(function(t){var i=t.provisioningPromise;if(i)n.updatedData(t.data),n.provisioningPromise(i);else throw new Error("Provisioning operation missing promise");}).catch(function(t){n.statusUnknown(!0);h(t)})},__decorate([n.Composition.ProxyCompatibilityMode],u)}(t.ButtonPart);i.ProvisioningPart=c})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function s(n){return typeof n=="function"}var e=n.Base,u=n.ViewModels,f=e.Diagnostics,i=u.Controls.Lists.Grid,a=e.Utilities,r=ko.observable,o=ko.observableArray,h="msportalfx-text-regular msportalfx-text-muted-50 msportalfx-text-ellipsis msportalfx-tooltip-overflow",c="Pickers",l="Metadata is null. Unable to set {0} flag.",v=function(t){function v(n,i,f){var e=this,o,c;if(t.call(this,n),this.showSelectButton=r(!1),this.triggerSelectAction=
r(""),this.showInfoBox=r(!1),this._pickerOptions=r(""),this._basicTemplate="<div style='height: 40px; margin-top: 10px'><!-- ko if: settings.item.icon --><div style='width: 30px; height: 30px; float: left; margin-right: 10px;' data-bind='image: settings.item.icon'><\/div><!-- /ko --><div><div><div data-bind='text: value()' class='msportalfx-text-header-regular msportalfx-text-ellipsis msportalfx-tooltip-overflow'><\/div><\/div><div><!-- ko if: settings.item.subtitle --><div class='"+h+"' data-bind='text: settings.item.subtitle' style='max-width: 60%; float: left'><\/div><!-- /ko --><!-- ko if: settings.item.detail --><div class='"+h+"' style='max-width: 20%; float: right' data-bind='text: settings.item.detail'><\/div><!-- /ko --><\/div><\/div><\/div>",!f.dataNavigator==!f.items)throw new Error("For PickerBase options, specify dataNavigator or items (not both).");this.showSelectButton(f.allowMultiSelect||!1);o=f.createNewOptions;this.showCreateAction=r(o&&!!o.title&&!!o.dynamicBladeSelection);
this._buildAddNewGrid(n,o);this._buildPickerGrid(n,f);this.pickerGrid.selectableData.selectedItems.subscribe(n,function(n){var t=e.showSelectButton(),i,r,u;n&&n.length>0?(e.addNewGrid&&e.addNewGrid.selectableData&&e.addNewGrid.selectableData.selectedItems&&e.addNewGrid.selectableData.selectedItems([]),i=void 0,t||(r=n[0],i=e.dataModel&&!f.isItemInDataModel(r,e.dataModel())),(i||t)&&(u=f.mapItemsToDataModel(n),e._saveToEditScope(u))):t&&e._saveToEditScope(null)});this.pickerGrid.items.subscribeArrayAdds(n,function(n){n.disabled&&n.disabled()?e._disableGridItem(n):e.dataModel&&f.isItemInDataModel(n,e.dataModel())&&e._selectGridItem(n)});this.parameterProvider=new u.ParameterProvider(n,{mapIncomingDataForEditScope:function(n){return{pickedItems:r(f.mapIncomingDataToDataModel(n))}},mapOutgoingDataForCollector:function(n){return n.pickedItems()}});this.addNewItemCollector=new u.ParameterCollector(n,{supplyInitialData:function(){return s(o.supplyInitialData)?o.supplyInitialData():{}},receiveResult:
function(n){s(o.receiveResults)&&o.receiveResults(n);e.addNewGrid.selectableData.selectedItems([]);e._saveToEditScope(n)},supplyProviderConfig:function(){if(s(o.supplyProviderConfig))return o.supplyProviderConfig()},selectableSet:this.addNewGrid.selectableData});this.addNewGrid.selectableData&&this.addNewGrid.selectableData.selectedItems&&this.addNewGrid.selectableData.selectedItems.subscribe(n,function(n){n&&n.length>0&&e.pickerGrid.selectableData.selectedItems([])});c=n.createChildLifetime();ko.computed(c,function(){if(e.parameterProvider.editScope()){var n=e.parameterProvider.configFromCollector();f.loadPickerItems(n||{},e.dataModel());c.dispose()}}).extend({throttle:50})}return __extends(v,t),v.prototype.openCreateNewBlade=function(){var n=this.addNewGrid.items,t=n&&n()||[],i;t.length&&(i=this.addNewGrid.getRowMetadata(t[0]),i.selected(!0))},v.prototype.disableCreateNewOption=function(){var n=this.addNewGrid.items,t=n&&n()||[],i;t.length&&(i=this.addNewGrid.getRowMetadata(t[0]),i.disabled(
!0))},v.prototype._saveToEditScope=function(t){this.dataModel(t);this.showSelectButton()||this.triggerSelectAction(n.getUniqueId())},v.prototype._buildPickerGrid=function(t,u){var s=[{name:r(""),itemKey:"title",format:i.Format.HtmlBindings,formatOptions:{htmlBindingsTemplate:this._basicTemplate}},{itemKey:"infoBalloon",format:i.Format.HtmlBindings,width:r("35px"),formatOptions:{htmlBindingsTemplate:"<!-- ko if: value --><div data-bind='pcDockedBalloon:value'><\/div><!-- /ko -->"}}],e={selectionMode:u.allowMultiSelect?i.RowSelectionMode.Multiple:i.RowSelectionMode.Single,selectionStyle:i.SelectionStyle.Checked},f;f=u.dataNavigator?this.pickerGrid=new i.ViewModel(t,null,i.Extensions.SelectableRow|i.Extensions.Pageable,{selectableRow:e,pageable:{type:i.PageableType.Sequential,dataNavigator:u.dataNavigator}}):this.pickerGrid=new i.ViewModel(t,u.items,i.Extensions.SelectableRow,{selectableRow:e});f.columns=o(s);f.showHeader=!1;f.noRowsMessage(n.Resources.Strings.ViewModels.Controls.noRowsMessage)}
,v.prototype._buildAddNewGrid=function(n,t){var u,f={activateOnSelected:r(!0),selectionMode:i.RowSelectionMode.Single,selectionStyle:i.SelectionStyle.Default},h=o(),s;!t||!t.title||!t.dynamicBladeSelection||(u=[{name:r(""),itemKey:"title",format:i.Format.HtmlBindings,formatOptions:{htmlBindingsTemplate:this._basicTemplate}}],h([{title:r(t.title),icon:r(e.Images.AddBoxed()),item:null}]),f=a.extend(f,{itemMatchesSelection:function(){return!0},createSelection:function(){return t.dynamicBladeSelection}}));s=this.addNewGrid=new i.ViewModel(n,h,i.Extensions.SelectableRow,{selectableRow:f});u&&(s.columns=o(u));s.showHeader=!1},Object.defineProperty(v.prototype,"dataModel",{get:function(){var n=this.parameterProvider.editScope();return n&&n.root&&n.root.pickedItems},enumerable:!0,configurable:!0}),v.prototype._selectGridItem=function(n){if(n){var t=this.pickerGrid.getRowMetadata(n);t?t.selected()||t.selected(!0):f.Log.writeEntry(f.LogEntryLevel.Warning,c,l.format("selected"))}},v.prototype._disableGridItem=
function(n){if(n){var t=this.pickerGrid.getRowMetadata(n);t?(t.disabled(!0),t.selected()&&t.selected(!1)):f.Log.writeEntry(f.LogEntryLevel.Warning,c,l.format("disabled"))}},__decorate([n.Composition.ProxyCompatibilityMode],v)}(u.Controls.Loadable.ViewModel);t.PickerBase=v})(i=t.Pickers||(t.Pickers={}))})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";var i=n.Base,u=i.Rpc.Internal,f=i.Utilities,e=new i.Diagnostics.Log("MsPortalFx/Hubs/Notifications"),o,r;(function(n){n[n.Information=0]="Information";n[n.Warning=1]="Warning";n[n.Error=2]="Error";n[n.InProgress=3]="InProgress";n[n.Success=4]="Success"})(t.NotificationStatus||(t.NotificationStatus={}));o=t.NotificationStatus;r=function(){function n(n){var i=this,t;if(n.asset&&n.linkedBlade)throw new Error("Notification can't be associated with both an asset and a blade");this.status=n.status;this.title=
n.title;this.description=n.description;this.correlationIds=["clientNotification-"+f.getUniqueId()];t=n.correlationIds;t&&t.length>0&&t.forEach(function(n){return i.correlationIds.push(n)});this.percentComplete=n.percentComplete;this.asset=n.asset;this.uri=n.uri;this.linkedBlade=n.linkedBlade}return n.prototype.publish=function(){var n=this.title,t=this.description,r,f;if(!n||!n.trim()||!t||!t.trim()){e.error("Notification is missing title and/or description. Unable to publish it.");return}if(r=this.asset,f=this.linkedBlade,r&&f)throw new Error("Notification can't be associated with both an asset and a blade");FxImpl.Hubs.Notifications.addClientNotficationDefinition.invoke(u.client,i.Constants.Shell,{timestamp:new Date,status:this.status,title:n,description:t,correlationIds:this.correlationIds,percentComplete:this.percentComplete,asset:r,isRecommendation:!1,cloudName:undefined,uri:this.uri,linkedBlade:f})},n.publish=function(t){var i=new n(t);return i.publish(),i},n}();t.ClientNotification=
r})(i=t.Notifications||(t.Notifications={}))})(t=n.Hubs||(n.Hubs={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";var i=MsPortalFx.Base,u=i.Rpc.Internal,o=MsPortalFx.Hubs.Notifications,f=n.Constants.RpcMethods,r=u.FuncEndPointDefinition,s=new i.Diagnostics.Log("MsPortalFx/Hubs/Notifications"),e;t.addClientNotficationDefinition=new r(f.addClientNotification);t.addClientNotficationsDefinition=new r(f.addClientNotifications);t.showModalNotification=new r("showModalNotification");e=function(n){function r(t,i){n.call(this,t);this.cloudName=i}return __extends(r,n),r.prototype.publish=function(){var n=this.title,r=this.description,f;if(!n||!n.trim()||!r||!r.trim()){s.error("Missing title/description.");return}return f=new Date,t.addClientNotficationDefinition.invoke(u.client,i.Constants.Shell,{timestamp:f,status:this.status,title:n,description:r,correlationIds:this.correlationIds,percentComplete:this.percentComplete,asset:this.asset,isRecommendation:
!1,cloudName:this.cloudName,uri:this.uri,linkedBlade:this.linkedBlade,isServerEvent:!1}),f},r.internalPublish=function(n,t){var i=new r(n,t);return i.publish(),i},r}(o.ClientNotification);t.InternalClientNotification=e})(i=t.Notifications||(t.Notifications={}))})(t=n.Hubs||(n.Hubs={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";function t(n){return typeof n=="string"}function r(n){var i={};if(n)return MsPortalFx.forEachKey(n,function(n,u){var e=t(n)&&n.toLowerCase()||n,f=u;try{f=JSON.parse(f)}catch(o){}f&&(i[e]=typeof f=="object"&&r(f)||f)}),i}function u(n,r,f){var e=n.message,l=$.map(n.details,function(n){return[n]}),s=[],h="",a="",c,o;return(e&&(c=e.error||{},h=c.message||e.message,a=c.code||e.code,h||t(e)||(h=JSON.stringify(e))),r&&l&&(s=l.map(function(n){return u(n,r-1,f)})),o=i.format(h||e,a||n.code),f)?(s.length&&(o=o.concat(" "+s.join(", "))),o):{error:o,details:s}}function f(n,t){var e;if(t===void 0&&(t=!0),n){var f=r(n),s=i.format(f.message,f.code),h=$.map(
f.details,function(n){return[n]}),c=(h||[]).map(function(n){return u(n,o,t)});e={error:s,details:c}}return e}function e(n,t){var i=f(n),r=i.error||t||"";return i.details.forEach(function(n){r+=" "+n}),r}function s(n,t,i){var r=new Error(t);return r.readyState=n.readyState,r.status=n.status,r.statusText=n.statusText,r.code=i,r.readyState!==0||r.status||(r.status=0,r.statusText="ajax readyState was zero"),r}function h(n){var i,f,o=n.responseText,h=n,u=h.responseJSON,c=h.message,r=u&&(u.error||u.Error||u),l=r&&(r.message||r.Message);if(l)i=e(r),f=r.code;else if(o)i=o;else if(c)i=c;else{if(n instanceof Error)return n;i=t(n)?n:"Unknown error occurred."}return s(n,i,f)}var i=MsPortalFx.Resources.Strings.Azure.errorMessageWithCode,o=2;n.parseArmError=f;n.parseArmErrorToMessage=e;n.buildSimplifiedError=h})(t=n.Azure||(n.Azure={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";function i(n){return typeof n=="function"}var h=MsPortalFx.Base,c=MsPortalFx.ViewModels,b=c.Forms,k=
b.FilterComboBox,d=h.Security,y=h.Utilities,r=undefined,p=MsPortalFx.Resources.Strings.Azure.BaseResourceDropDown,e=ko.computed,o=ko.observable,l=ko.observableArray,a=ko.reactor,w=new h.Diagnostics.Log("MsPortalFx/Azure/BaseResourceDropDown"),v=w.warning.bind(w),s=c.getValidationResultPromise,g=MsPortalFx.localeCompareIgnoreCase,u="",nt={optionsUndefined:u,formUndefined:u,accessorUndefined:u,configUndefined:u,fetchItemsUndefined:u,filterObjUndefined:u,mapItemUndefined:u,cannotWriteValidate:u},f=n.getErrorMap(nt),tt=function(){function n(n,t,u){var v=this,g,nt,w,h,b,it,rt,d,tt,ut;this._itemsObs=l();this._firstLoad=!0;this._validateBaseOptions(t);this._validateBaseConfig(u);this._bContainer=n;this._loadingDeferred=Q.defer();this._loading=o(!0);g={options:l([]),filterOptions:{datasetType:0},validations:l()};y.extend(g,t);this._bOptions=g;this._setOptions=g.options;nt={allowCreateNew:!1,blockLoadingItems:o(!1),nameForInitialValue:o(),fetchItems:r,filterObjectByName:r,itemToHierarchicalFormOption:
r};y.extend(nt,u);this._bConfig=nt;this._bConfig.allowCreateNew||this._bOptions.validations.push(new c.CustomValidation(p.creatingResourcedDisabledValidationMessage,function(n){var t=!v.getObjectByName(n);return s(t&&p.creatingResourcedDisabledValidationMessage)}));w=i(u.filterComboBoxCreateCallback)?u.filterComboBoxCreateCallback(this._bOptions):{filterComboBox:new k.ViewModel(n,this._bOptions),control:null};h=this._filterCombo=w.filterComboBox;this.control=u.control||w.control||w.filterComboBox;it=!1;rt=u.optionsFilter;a(n,function(){var n=v._itemsObs();v._setOptions((rt?rt(n):n).map(u.itemToHierarchicalFormOption));h.value.peek()&&v.triggerValidation()});d=!1;a(n,function(){var n=u.createNewOption&&u.createNewOption(),t=n?null:h.value();n=n||v.getObjectByName(t)||nt.nullValue;(!t||~h.items.peek().map(function(n){return n.text.peek()}).indexOf(t))&&!d&&b&&b(n)});this.value=o();this.value.subscribe(n,function(n){if(d||n!==b()){var i=n&&v._bConfig.itemToHierarchicalFormOption(n),t=i&&i.
text(),r=v.getObjectByName(t)||v.getObjectByName(i&&i.value);(t=r&&v._bConfig.itemToHierarchicalFormOption(r).text()||t,h.value()!==t)&&h.value(t)}});a(n,function(){var i=v._bConfig.blockLoadingItems(),r=t.form.editScope();!i&&r&&(it||(it=!0,b=t.accessor.getEditableObservable(n),b.subscribe(n,function(n){try{d=!0;v.value(n)}finally{d=!1}}),v._loadItems()))});i(h.valid)&&(this.valid=e(n,{read:function(){return w.valid?w.valid()&&h.valid():h.valid()},write:function(){f.cannotWriteValidate()}}));i(h.enabled)&&(tt=o(!0),this.enabled=e(n,{read:function(){return h.enabled()},write:function(n){tt(n);tt.valueHasMutated()}}),e(n,function(){h.enabled(tt())}),e(n,function(){h.loading(v._loading())}));i(h.infoBalloonContent)&&(this.infoBalloonContent=e(n,{read:function(){return h.infoBalloonContent()},write:function(n){h.infoBalloonContent(n)}}));ut=function(){var t=v._loadingDeferred.promise;return t.then(function(){n.onInputsSetCallbacks.remove(ut)}),t};n.onInputsSetCallbacks.add(ut)}return Object.
defineProperty(n.prototype,"_items",{get:function(){return this._itemsObs.peek()},set:function(n){this._itemsObs(n)},enumerable:!0,configurable:!0}),n.prototype.clearValidation=function(){var n=this._filterCombo;return n&&i(n.clearValidation)?n.clearValidation():Q()},n.prototype.triggerValidation=function(){var n=this._filterCombo;return!this._firstLoad&&n&&i(n.triggerValidation)?n.triggerValidation():Q()},n.prototype.getObjectByName=function(n){var t=this;return this._items.first(function(i){return t._bConfig.filterObjectByName(i,n)})},n.prototype._loadItems=function(){var n=this;this._loading(!0);this._bConfig.fetchItems().catch(function(n){return v("Failed to fetch items: "+n.message),[]}).then(function(t){t===void 0&&(t=[]);n._items=t;var i=n._bOptions.form.editScope();i.isDisposed||n._setInitialValue().finally(function(){n._firstLoad=!1;n._loading(!1);n._loadingDeferred.resolve();n.triggerValidation()})})},n.prototype._hasPermission=function(n,t,r){var f=i(t)&&t(),u=f&&f.actions||
[];return u.length<1?s():d.hasPermission(n,u).then(function(n){return s(!n&&(f.message||r||"{0}").format(u.toString()))},function(){return v("Failed to get permissions on ["+u.toString()+"] over scope '"+n+"'."),s()})},n.prototype._setInitialValue=function(){var f=this,n,t=this._bConfig,s=t.itemToHierarchicalFormOption,h=this._filterCombo,u=t.createNewOption,p=u&&u(),c=!1,w,l,v,k,o,y;if(this._firstLoad?(w=this._bOptions.form.editScope(),w.isDisposed||(l=this._bOptions.accessor.getEditableObservable(this._bContainer),n=l&&l()),MsPortalFx.keysLength(n)||(n=r)):n=this.value(),n){var e=s(n),a=e&&e.text(),b=e&&e.value;n=(a||b)&&h.items().first(function(n){return n.value===b||!g(n.text(),a)})&&this.getObjectByName(a)||p?(c=!0)&&n:r}return!this._firstLoad&&n?Q():(this._firstLoad&&!n&&(v=i(t.nameForInitialValue)?t.nameForInitialValue():r,n=!!v&&this.getObjectByName(v)||r),!n&&!n&&t.allowCreateNew&&i(u))?(h.value(""),this._firstLoad&&Q.nextTick(function(){f._resetEditScopeValue(n=p)}),Q()):(k=n,
y=this._items,Q().then(function(){if(!c)return n?(o=s(n),f._validate(o.text()).then(function(t){t||(n=r)})):void 0}).then(function(){if(!n&&y.length)return f._getFirstValidValue().then(function(t){n=t})}).finally(function(){n||(n=k||y[0]);f._resetEditScopeValue(n);n&&(c?u&&u(n):(o=s(n),h.value(o.text())))}))},n.prototype._getFirstValidValue=function(n){var f=this,t;if(n===void 0&&(n=0),t=this._items,n<t.length){var i=t[n],e=this._bConfig.itemToHierarchicalFormOption(i),u=e.text();return this._filterCombo.items().first(function(n){return n.text()===u})?this._validate(u).then(function(t){return t?i:f._getFirstValidValue(n+1)},function(){return Q(r)}):this._getFirstValidValue(n+1)}return Q(r)},n.prototype._resetEditScopeValue=function(n){if(n){var t=this._bOptions.form.editScope();t.isDisposed||t.resetValue(this._bOptions.accessor,{newInputValue:n})}},n.prototype._validate=function(n){var u=this._bOptions,t=u.validations,f=i(t)&&t()||[],e=f.map(function(t){var u=t.validate;return i(u)&&u(
n)||r});return Q.all(e).then(function(n){return n.every(function(n){return!n||n.valid})},function(){return v("Failed to validate '"+n+"'. Assuming valid."),Q(!0)})},n.prototype._validateBaseOptions=function(n){n||f.optionsUndefined();n.form||f.formUndefined();n.accessor||f.accessorUndefined()},n.prototype._validateBaseConfig=function(n){n||f.configUndefined();i(n.fetchItems)||f.fetchItemsUndefined();i(n.filterObjectByName)||f.filterObjUndefined();i(n.itemToHierarchicalFormOption)||f.mapItemUndefined()},n}();t.BaseResourceDropDown=tt})(t=n.Azure||(n.Azure={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";function o(n,i){return t.getLocationsForCreateEndPoint.invoke(n,f,i)}function s(n){return t.getLocationDisplayNamesEndPoint.invoke(n,f,null)}var i=MsPortalFx.Base,e=i.Rpc.Internal,r=n.Constants.RpcMethods,u=e.FuncEndPointDefinition,f=i.Constants.ExtensionNames.Hubs;t.getLocationDisplayNamesEndPoint=new u(r.getLocationDisplayNames);t.getLocationsForCreateEndPoint=new
u(r.getLocationsForCreate);t.getLocationsForCreate=o;t.getLocationDisplayNames=s})(t=n.Azure||(n.Azure={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";function a(){return e.getLocationDisplayNames(h.client)}var s=n.Base,h=n.Base.Rpc.Internal,e=FxImpl.Azure,c=n.ViewModels,o="function",r=undefined,i=ko.observable,l=ko.observableArray,u=ko.unwrap,f=c.getValidationResultPromise,v;t.getLocations=a,function(t){function b(n){if(typeof n.subscriptionIdObservable!==o)throw new Error("'subscriptionIdObservable' is undefined.");var t=u(n.filter);if(t&&!t.allowedLocations==!t.disallowedLocations)throw new Error("Specify 'allowedLocations' or 'disallowedLocations', but not both.");}function k(n,t){return!v(n.displayName,t)||!v(n.name,t)}function d(n){if(n)return{text:i(n.displayName||n.name),value:n.name}}function g(n,t,i){return e.getLocationsForCreate(w.client,{subscriptionId:n,resourceTypes:t,cloudName:i}).then(function(n){return(n||[]).map(function(n){return{displayName:n.
displayName,name:n.name}})})}var y=FxImpl.Azure.BaseResourceDropDown,p=n.ViewModels,w=n.Base.Rpc.Internal,c=s.Utilities.Internal.Serialization,a=n.Resources.Strings.Azure,h=a.Locations.DropDown,v=n.localeCompareIgnoreCase,nt=function(n){function t(t,e){var s=this,et,v,y,w,it,rt,ot,nt,tt,ut,ft;b(e);e.label||(e.label=i(h.defaultLabel));v=e.filter;it=[null];v&&(e.validations||(e.validations=l()),rt=function(n){var t,i;y=w=r;n&&(t=n.allowedLocations,t?y=t.locationNames.map(function(n){return n.toLowerCase()}):(i=n.disallowedLocations||[],w=i.map(function(n){return{name:n.name.toLowerCase()}})))},rt(u(v)),ot=v,ko.isSubscribable(v)&&ot.subscribe(t,function(n){rt(n)}),e.validations.push(new p.CustomValidation(h.emptyMessage,function(n){if(!it.length)return f(h.emptyMessage);var t=s._items.first(function(t){return t.displayName===n});return(n=t&&t.name,y&&!~y.indexOf(n)||w&&~w.map(function(n){return n.name}).indexOf(n))?f(a.BaseResourceDropDown.searchingValidationMessage.format(n)):f()})));nt=
{optionsFilter:function(n){return u(v),it=n.filter(function(n){return(!y||!!~y.indexOf(n.name.toLowerCase()))&&(!w||!~w.map(function(n){return n.name}).indexOf(n.name.toLowerCase()))})},blockLoadingItems:i(!0),nameForInitialValue:i(),fetchItems:function(){var n=s._subId,t;if(!n)throw new Error("Can't fetch items without a subscription id.");return t=typeof e.resourceTypesObservable===o?e.resourceTypesObservable():[],g(n,t,et)},filterObjectByName:k,itemToHierarchicalFormOption:d};n.call(this,t,e,nt);this._subId=null;tt=r;e.subscriptionIdObservable.subscribe(t,function(n){var t,i;n?(typeof tt=="boolean"&&(s.enabled(tt),tt=r),t=s._subId,t!==n&&(i=!!t,s._subId=n,nt.blockLoadingItems(!1),i&&s._loadItems())):(tt=s.enabled(),s.enabled(!1))});ut=t.onInputsSetCallbacks;ft=function(n){var r,t,i;if(et=FxImpl.Extension.CloudName.readFromInputs(n),r=n.internal_bladeCallerParams||{},t=r.providerConfig||{},c.isSerializedObject(t)&&(t=c.fromSerializableObject(t)),!nt.nameForInitialValue()){var e=t.provisioningConfig,
u=(t.provisioningConfig||{}).galleryCreateOptions||{},f=u.resourceGroupLocationDisplayName;f&&(nt.nameForInitialValue(f),i=u.subscriptionId,!s._subId&&i&&(s._subId=i,nt.blockLoadingItems(!1)));ut.remove(ft)}return null};ut.add(ft)}return __extends(t,n),t}(y);t.DropDown=nt}(v=t.Locations||(t.Locations={}))})(t=n.Azure||(n.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";function e(n,r){return t.getResourceGroupsFromSubscriptionEndPoint.invoke(n,i.Constants.ExtensionNames.Hubs,r)}var i=MsPortalFx.Base,r=i.Rpc.Internal,u=n.Constants.RpcMethods,f=r.FuncEndPointDefinition;t.getResourceGroupsFromSubscriptionEndPoint=new f(u.hubsGetResourceGroupsFromSubscription);t.getResourceGroupsFromSubscription=e})(t=n.Azure||(n.Azure={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";var o=n.ViewModels,e=n.Resources.Strings.ViewModels.Controls.ResourceGroups,u=undefined,i=ko.observable,f=ko.observableArray,s=ko.reactor,r=o.getValidationResult,h;(function(
o){function ft(n,t,i,r){return ut.validateResourceGroupName(n,t,v.EmptyCloudName,i,r)}function yt(n,t){var e=et(n),r,f,i;return e.valid?t.length<1?n:(r=1,i=function(u){f=u.toLocaleLowerCase();var e=t.some(function(n){return n.toLocaleLowerCase()===f});return e?(u=n+"_"+r++,i(u)):u},i(n)):u}function et(n){return(n=n||"",n.length>o.NameMaxLength)?r(l.lengthValidationMessage):n&&!lt.test(n)?r(l.invalidMessage):r()}var c=n.Base,a=FxImpl.ViewModels.Forms.CreatorAndComboBox,v=c.Constants,p=c.Diagnostics,h=n.ViewModels,st=h.Forms,w=h.Controls.Balloon.Link,b=FxImpl.Azure,ht=b.BaseResourceDropDown,k=n.Resources.Strings,d=k.Azure.ResourceGroups,y=d.DropDown,g=d.InfoBalloon,nt=y.ProvisioningStateValidation,ct=k.ResourceGroup,l=ct.Validation,tt=c.Utilities.Internal.Serialization,ot;o.AllowedMode=a.AllowedMode;o.Mode=a.Mode;o.NameMaxLength=90;var it="\\s~!@#$%^&*+=<>,\\?/\\\\\\:;'\"\\[\\]\\{\\}\\|",lt=new RegExp("^[^"+it+"]*[^."+it+"]$","i"),pt=v.ExtensionNames.Hubs,rt=c.Rpc.Internal.client,at=n.Resources.
Strings.Azure.BaseResourceDropDown,vt=v.ResourceTypes.ResourceGroups,ut;(function(n){function t(n,t,i,u,f){var e=et(n);return e.valid?t?FxImpl.Azure.getSubscriptionInfo(rt,t,i).then(function(n){return n&&n.uniqueDisplayName||t}).then(function(e){var s=FxImpl.Security.hasPermission("/subscriptions/"+t,["Microsoft.Resources/subscriptions/resourcegroups/write"],i).then(function(n){return n?r():r(l.subscriptionHasNoPermissionsMessage.format(e))},function(){return p.Log.writeEntry(p.LogEntryLevel.Warning,"ResourceGroupValidation","Error checking if user has permissions to create resource group. Defaulting to true."),r()}),o;return o=u?~u.indexOf(n)?r(l.alreadyExistsMessage.format(e)):r():f?f():r(),Q.all([s,o]).spread(function(n,t){return n.valid?t:n})}):h.getValidationResultPromise():Q(e)}n.validateResourceGroupName=t})(ut=o.Internal||(o.Internal={}));o.validateResourceGroupName=ft;ot=function(v){function p(r,b){var k=this,nt,et,wt,bt,ht,rt,ct,ot,lt,kt;b.label||(b.label=i(y.defaultLabel));var
dt=u,at=i(b.defaultNewValue),gt=i(new w("","")),d,ni=b.infoBalloonContent,ti=b.infoBalloonLinkContent,ut={filterComboOptions:c.Utilities.extend({options:f([]),defaultValue:i(""),infoBalloonLinkContent:ti||ni?u:gt,infoBalloonContent:ni||ti?u:ko.observable(g.text)},b)};n.Settings.getSharedSettings().then(function(n){gt(new w(g.linkText,n.links.resourceGroupOverview))});var pt=b.subscriptionIdObservable,ii={label:i(e.createNew),defaultValue:i(""),validations:f([new h.CustomValidation(l.invalidMessage,function(n){return ft(n,pt(),ut.filterComboOptions.options().map(function(n){return n.value}))}),new t.ReservedResourceNameValidator(vt),new h.RequiredValidation]),labelPosition:i(h.Forms.LabelPosition.Hidden)},it=new st.TextBox.ViewModel(r,ii);ut.children=f([it]);b.options=ut.filterComboOptions.options;b.validations=b.validations||f([]);nt=i(null);nt.extend({notify:"always"});b.validations.push(new h.CustomValidation(l.invalidMessage,function(n){return p._validate(k,nt,n)}));et=i(!0);wt=function(
n){n&&(et()?et(!1):(d.enabled(!!n),dt!==n&&(dt=n,et()||k._loadItems())))};pt.subscribe(r,function(n){wt(n);var t;k.toggleNewOrExisting(t=ht&&ht()?o.Mode.UseExisting:o.Mode.CreateNew);t===o.Mode.CreateNew&&it.value()&&it.triggerValidation()});bt=b.requiredPermissions;ko.isSubscribable(bt)&&bt.subscribe(r,function(){k.triggerValidation()});ht=i("");ct={filterComboBoxCreateCallback:function(n){return delete n.options,c.Utilities.extend(ut.filterComboOptions,n),ut.allowedMode=b.allowedMode,rt=k._dropDown=new a.ViewModel(r,ut),rt.control.label(e.selectExisting),rt.control.labelPosition(h.Forms.LabelPosition.Hidden),k._optionsGroup=rt.createOrSelectControl,k.allowedMode=rt.allowedMode,{control:rt,filterComboBox:d=rt.control,valid:ko.computed(r,function(){return k._optionsGroup.value()?it.valid():!0})}},allowCreateNew:!0,fetchItems:function(){return p._fetchItems(b).then(function(n){var t=b.defaultNewValue,i;return t&&(i=n.map(function(n){return n.value.name}),t=yt(t,i)),at(t),t&&at.valueHasMutated(
),n})},filterObjectByName:p._filterObjectByName,itemToHierarchicalFormOption:p._itemToHierarchicalFormOption,blockLoadingItems:et,createNewOption:nt,nameForInitialValue:ht,nullValue:{createNew:!1,value:{name:"",location:""}}};v.call(this,r,b,ct);this._createNewText=at;this._validated=!1;this._options=b;wt(pt());ot=null;lt=null;this._createNewText.subscribe(r,function(n){it.value(ot||n||"")});s(r,function(){var i=it.value(),t=k._createNewText()||"",n;rt.createOrSelectControl.value()?nt({createNew:!0,value:{name:i||ot||t,location:lt}}):(n=nt.peek(),n&&(n=n.value)&&(lt=n.location,ot=n.createNew&&n.name||ot||t),nt(null));d.value()});this._itemsObs.subscribe(r,function(){d.filterText("");d.clearValidation()});this.value.subscribe(r,function(n){if(n){var t=n.value;k.toggleNewOrExisting(n.createNew?o.Mode.CreateNew:o.Mode.UseExisting);n.createNew&&(it.value(t.name||""),lt=t.location)}n===nt()&&nt.valueHasMutated()});this._optionsGroup.value.subscribe(r,function(n){if(!n){var t=d.items.peek().
map(function(n){return n.text.peek()}),i;~t.indexOf(d.value())||~t.indexOf(i=it.value())&&d.value(i)||d.value("")&&d.filterText("")}});kt=function(n){var e=n.internal_bladeCallerParams,t=e&&e.providerConfig,i,u,f;return tt.isSerializedObject(t)&&(t=tt.fromSerializableObject(t)),i=t&&t.provisioningConfig,u=i&&i.galleryCreateOptions,ct.nameForInitialValue()||(f=u&&u.resourceGroupName,f&&(k.toggleNewOrExisting(o.Mode.UseExisting),ct.nameForInitialValue(f)),r.onInputsSetCallbacks.remove(kt)),null};r.onInputsSetCallbacks.add(kt)}return __extends(p,v),p.prototype.toggleNewOrExisting=function(n){this._dropDown.toggleNewOrExisting(n)},p._fetchItems=function(n){return b.getResourceGroupsFromSubscription(rt,[n.subscriptionIdObservable()]).then(function(n){return n.map(function(n){return{createNew:!1,value:n}})})},p._itemToHierarchicalFormOption=function(n){return n.value?{text:i(n.value.name),value:n.value.name}:{text:i(""),value:""}},p._filterObjectByName=function(t,i){return!n.localeCompareIgnoreCase(
t.value.name,i)},p._validate=function(n,t,i){return Q().then(function(){var h=t(),u=n.getObjectByName(i),f,e,o,s,c;return!u&&!h&&n._validated?r(at.searchingValidationMessage.format(i)):(n._validated=!0,h)?r():(f=u&&u.value,e=f&&(f.provisioningState||"").toLowerCase(),e&&(o=nt[e],o))?r(nt.baseMessage.format(o)):(s=n._options,c="/subscriptions/"+s.subscriptionIdObservable()+"/resourcegroups/"+i,n._hasPermission(c,s.requiredPermissions,y.requiredPermissionsValidationMessage))})},p}(ht);o.DropDown=ot})(h=t.ResourceGroups||(t.ResourceGroups={}))})(t=n.Azure||(n.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(n){"use strict";var t=MsPortalFx.Base,i=t.Rpc.Internal,f=window,r,u;(function(t){var r=n.Constants.RpcMethods;t.getSasUriForQueueEndPoint=new i.FuncEndPointDefinition(r.getSasUriForQueue)})(r=n.InternalAzure||(n.InternalAzure={})),function(n){var u;(function(n){function u(n){return r.getSasUriForQueueEndPoint.invoke(i.client,t.Constants.Shell,n)}n.getSasUriForQueue=u})(u=n.Storage||(n.
Storage={}))}(u=n.Azure||(n.Azure={}));f.define("MsPortalFx/Azure/Storage",[],function(){return u.Storage})}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";function c(n,i,r){return t.getSubscriptionInfoEndPoint.invoke(n,e,{subscriptionId:i,cloudName:r})}function l(n,i){return r||(r=t.getAllSubscriptionsEndPoint.invoke(n,e,i),Q.delay(3e4).then(function(){r=null})),r}function a(n,i){return t.getSelectedSubscriptionsEndPoint.invoke(n,s.Shell,i)}function v(n,i,r,u){return r===void 0&&(r=[]),t.canRegisterSubWithRPsEndPoint.invoke(n,e,{subscriptionId:i,resourceProviders:r,cloudName:u})}function u(n,t,i){var r=(n&&n.subscriptionPolicies&&n.subscriptionPolicies.quotaId||"").toLowerCase();return i?r.startsWith(t):t===r}var o=MsPortalFx.Base,s=o.Constants,h=o.Rpc.Internal,f=n.Constants.RpcMethods,i=h.FuncEndPointDefinition,e=n.Extension.getHubsWindowId(),r;t.getSubscriptionInfoEndPoint=new i(f.getSubscriptionInfo);t.getAllSubscriptionsEndPoint=new i(f.getAllSubscriptions);t.getSelectedSubscriptionsEndPoint=
new i(f.getSelectedSubscriptions);t.canRegisterSubWithRPsEndPoint=new i("Hubs.canRegisterSubWithRPs");t.getSubscriptionInfo=c;t.getAllSubscriptions=l;t.getSelectedSubscriptions=a;t.canRegisterSubWithRPs=v;t.isFreeTrialSubscription=function(n){return u(n,"freetrial_",!0)};t.isDreamSparkSubscription=function(n){return u(n,"dreamspark_",!0)};t.isBizSparkSubscription=function(n){return u(n,"bizspark_",!0)};t.isZeroCapSubscription=function(n){return u(n,"aad_2015-09-01",!1)}})(t=n.Azure||(n.Azure={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";function b(n,t,i){var r={galleryItem:t,subscriptions:n};return a.Rpc.invokeCallback(h.getWindowId({name:y,cloudName:i},{addSelfCloudNameIfMissing:!0}),p,r)}function d(n){return i.getSubscriptionInfo(f,n,u)}function g(){return i.getSelectedSubscriptions(f,u)}function nt(){return i.getAllSubscriptions(s.client,u)}var o=n.Base,s=n.Base.Rpc.Internal,h=FxImpl.Extension,l=n.ViewModels,a=n.Services,i=FxImpl.Azure,v=window,u=o.Constants.
EmptyCloudName,f=s.client,tt=v.fx.environment.isDevelopmentMode,y=o.Constants.ExtensionNames.Marketplace,p="validateSubscriptions",e=ko.observable,w=ko.observableArray,c=n.localeCompareIgnoreCase,r=l.getValidationResultPromise,k;(function(t){function a(n,t){return!c(n.subscriptionId,t)||!c(n.uniqueDisplayName,t)}function v(n){return{text:e(n.uniqueDisplayName),value:n.subscriptionId}}var p=i.BaseResourceDropDown,k=n.ViewModels,l=o.Utilities.Internal.Serialization,g=n.Hubs.Notifications,d=["enabled","active"],s=n.Resources.Strings.Azure.Subscriptions.DropDown,y;t.filterObjectByName=a;t.itemToHierarchicalFormOption=v;y=function(n){function t(t,o){var c=this,p,b,y,d,g;o.label||(o.label=e(s.defaultLabel));p=o.requiredPermissions;ko.isSubscribable(p)&&p.subscribe(t,function(){c.triggerValidation()});b=o.resourceProviders;ko.isSubscribable(b)&&b.subscribe(t,function(){c.triggerValidation()});o.allowSelectingDisabledSubscriptions||(o.validations||(o.validations=w()),o.validations.push(new k.CustomValidation(
s.disabledSubscriptionValidationMessage,function(n){var t=c.getObjectByName(n),l,e,h,a;return t?c._isSubDisabled(t)?r(s.disabledSubscriptionValidationMessage):(l=o.filterByGalleryItem&&o.filterByGalleryItem(),e=l&&c._isSubAllowedForGalleryItem(t),e)?r(e.displayText||s.subscriptionNotAllowedForGalleryItemValidationMessage):(h=t.subscriptionId,a=ko.unwrap(b),i.canRegisterSubWithRPs(f,h,a,u).then(function(n){if(!n.success)return r(s.subCantRegisterWithRP.format(t.uniqueDisplayName||t.subscriptionId,n.failedRPs.join(", ")))}).then(function(n){if(n)return n;var t="/subscriptions/"+h;return c._hasPermission(t,p,s.requiredPermissionsValidationMessage)}).catch(function(){return r()})):r()})));y={blockLoadingItems:e(!0),nameForInitialValue:e(),fetchItems:function(){return c._fetchItems()},filterObjectByName:a,itemToHierarchicalFormOption:v};n.call(this,t,o,y);this._cloudName=this._marketplaceValidation=null;this._options=o;d=t.onInputsSetCallbacks;g=function(n){var i,t,r,u,f;c._cloudName=h.CloudName.
readFromInputs(n);i=n.internal_bladeCallerParams;t=i&&i.providerConfig;l.isSerializedObject(t)&&(t=l.fromSerializableObject(t));r=t&&t.provisioningConfig;u=r&&r.galleryCreateOptions;y.nameForInitialValue()||(f=u&&u.subscriptionId,f&&y.nameForInitialValue(f),d.remove(g));y.blockLoadingItems(!1);return};d.add(g);this.subscriptionId=ko.computed(t,function(){var n=c.value,t=n&&n();return t&&t.subscriptionId})}return __extends(t,n),t.prototype._isSubDisabled=function(n){var t=n.status||n.state||"";return d.indexOf(t.toLowerCase())<0},t.prototype._isSubAllowedForGalleryItem=function(n){var t=this._marketplaceValidation;if(t&&t.invalidSubscriptions.length)return t.invalidSubscriptions.first(function(t){return t.subscriptionId===n.subscriptionId})},t.prototype._fetchItems=function(){var n=this;return i.getAllSubscriptions(f,this._cloudName).then(function(t){var i=n._options,r=i.filterByGalleryItem&&i.filterByGalleryItem();return r?b(t,r,n._cloudName).then(function(i){return n._marketplaceValidation=
i,t}):t})},t}(p);t.DropDown=y})(k=t.Subscriptions||(t.Subscriptions={}));t.getSubscriptionInfo=d;t.getSelectedSubscriptions=g;t.getAllSubscriptions=nt})(t=n.Azure||(n.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var u=n,o=u.Base,f=u.ViewModels,s=f.Controls,r=o.Constants,e=window.fx.environment,i=ko.observable,h;(function(n){var t=function(n){function t(t,u){var c=this,o,s,h;n.call(this,t);this.subscriptionsFiltered=i(!1);this.selectedTypes=i([]);this.selectedSubscriptions=i([]);this.filterText=i(null);this.cloudName=i();this.isCloudNameInitialized=i(!1);u=u||{};this.controlType=f.ControlType.ResourceFilter;this.showTextFilter=u.showTextFilter||i(!1);this.showTypeFilter=u.showTypeFilter||i(!1);this.showSubscriptionFilter=u.showSubscriptionFilter||i(!1);this.showSubscriptionSummary=u.showSubscriptionSummary||i(!0);this.showTenantLevelSubscriptionSummary=u.showTenantLevelSubscriptionSummary||i(!1);this.selectedSubscriptionId=u.selectedSubscriptionId||
i();this.textFilterPlaceholder=u.textFilterPlaceholder||i();this.actionHandler=u.actionHandler;o=this.isCloudNameInitialized;e.extensionName===r.ExtensionNames.Hubs?(s=t.onInputsSetCallbacks,h=function(n){return c.cloudName(FxImpl.Extension.CloudName.readFromInputs(n)),o(!0),s.remove(h),null},s.add(h)):(e.extensionName===r.Shell?this.cloudName(r.DefaultCloudName):this.cloudName(FxImpl.Extension.selfCloudName),o(!0));this.subscriptionsLoaded=ko.observable(!1)}return __extends(t,n),t}(s.Base.ViewModel);n.ViewModel=t})(h=t.ResourceFilter||(t.ResourceFilter={}))})(t=n.Azure||(n.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var r=n,u=r.Base,f=r.ViewModels,e=f.Validation,v=u.Rpc.Internal,o=r.Resources.Strings.Azure.Validators,s=undefined,h=f.FormValidationType.Custom,y=FxImpl.Extension.getArmEndpointEndPoint,i=f.getValidationResult,c,l,a;(function(n){var t=function(n){function t(t,f,e){n.call(this,h);this.validate=function(n){var c=Q.defer(),h,l;return l=
e?Q(e):y.invoke(v.client,u.Constants.ExtensionNames.Hubs,s),l.then(function(e){var s=r.ensureSuffix(e,"/"),c=s+"providers/microsoft.resources/checkresourcename?api-version=2015-07-01",l={name:n,type:t};return u.Net2.postJSON({uri:c,setAuthorizationHeader:!0},l).then(function(t){if(t){var r=(t.status||"").toLowerCase()==="reserved",u=t.error&&t.error.message;r&&(h=i((f||u||o.ReservedResourceName.message).format(n)))}})}).finally(function(){h||(h=i());c.resolve(h)}),c.promise}}return __extends(t,n),t}(e);n.ReservedResourceNameValidator=t})(c=t.Internal||(t.Internal={}));l=function(n){function t(t){n.call(this,h);this.validate=function(n){return t(n).then(function(n){if(!n)return i();var r=Q.defer(),e=n.entityId,f=n.actions,s=n.message||o.RequiredPermission.message,t;return u.Security.hasPermission(e,f).then(function(n){n||(t=i(s.format(f.toString())))}).finally(function(){t||(t=i());r.resolve(t)}),r.promise})}}return __extends(t,n),t}(e);t.RequiredPermissionsValidator=l;a=function(n){function t(
t,i){n.call(this,t,i,s)}return __extends(t,n),t}(c.ReservedResourceNameValidator);t.ReservedResourceNameValidator=a})(t=n.Azure||(n.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){"use strict";var t,i;(function(n){n[n.Windows=0]="Windows";n[n.Linux=1]="Linux"})(n.FirstPartyOperatingSystem||(n.FirstPartyOperatingSystem={}));t=n.FirstPartyOperatingSystem,function(n){n[n.Default=0]="Default";n[n.TemplateDeployment=1]="TemplateDeployment";n[n.RequestPricingInformation=2]="RequestPricingInformation";n[n.ProgrammaticAccess=3]="ProgrammaticAccess"}(n.LegalTermsLanguageEnum||(n.LegalTermsLanguageEnum={}));i=n.LegalTermsLanguageEnum})(t=n.Legal||(n.Legal={}))})(t=n.Azure||(n.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";function f(n,t){if(!n)throw new Error("Can't move resource without resource id.");return{bladeSelection:e(n,t),displayValue:t===1?r.changeResourceGroupLabel:r.changeSubscriptionLabel,
editType:u.EditType.MoveResource}}function e(t,r){return i.getBladeSelection(n.Base.Constants.ExtensionNames.Hubs,"MoveResourceBlade",{resourceId:t,moveType:r})}var i=n.ViewModels,u=i.Parts.Properties,r=n.Resources.Strings.Part.PropertiesPart,o;t.getMoveResourceBlade=f,function(n){(function(n){n[n.NotSet=0]="NotSet";n[n.Allowed=1]="Allowed";n[n.NotAllowed=2]="NotAllowed"})(n.GalleryItemAccess||(n.GalleryItemAccess={}));var t=n.GalleryItemAccess}(o=t.Internal||(t.Internal={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";function h(n,t){var f=Q.defer(),o=function(n){f.reject(n)};return n.acquireObject(r.azureResourceManagerDeployTemplate,i,t).then(function(n){var t=u(n&&n.getValue());t?t.progress(function(n){f.notify(n)}).then(function(n){f.resolve(n)}).catch(o).finally(function(){n.dispose()}):e.deployTemplateFailure()}).catch(o),f.promise}function c(n,t){var f=Q.defer(
),o=function(n){f.reject(n)};return n.acquireObject(r.azureResourceManagerPollForDeployment,i,t).then(function(n){var t=u(n&&n.getValue());t?t.progress(function(n){f.notify(n)}).then(function(n){f.resolve(n)}).catch(o).finally(function(){n.dispose()}):e.pollForDeploymentFailure()}).catch(o),f.promise}function l(n,t){return n.acquireObject(r.validateArmTemplate,i,t).then(function(n){var t=u(n&&n.getValue());if(t)return t.finally(function(){n.dispose()}),t;e.validateTemplateFailure()})}var o=MsPortalFx.Base,r=n.Constants.RpcMethods,u=ko.unwrap,f="",s={deployTemplateFailure:f,pollForDeploymentFailure:f,validateTemplateFailure:f},e=n.getErrorMap(s),i;t.lastDeployedGalleryItemsMaxCount=10;i=o.Constants.ExtensionNames.Hubs;t.deployTemplate=h;t.pollForDeployment=c;t.validateTemplate=l})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(t){"use strict";function o(n){return i.deployTemplate(r.client,n).then(
function(n){return n.deploymentStatusCode===u.Success?n:Q.reject(n)})}function s(n){return i.pollForDeployment(r.client,n).then(function(n){return n.deploymentStatusCode===u.Success?n:Q.reject(n)})}var i=FxImpl.Azure.ResourceManager,r=n.Base.Rpc.Internal,f,e,u,h;(function(n){n.Accepted="accepted";n.Succeeded="succeeded";n.Failed="failed";n.Canceled="canceled";n.Running="running";n.Deploying="deploying";n.Waiting="waiting";n.Deleting="deleting";n.Deleted="deleted"})(f=t.DeploymentStates||(t.DeploymentStates={})),function(n){n[n.RequestDeploymentOnly=1]="RequestDeploymentOnly";n[n.DeployAndAwaitCompletion=2]="DeployAndAwaitCompletion";n[n.DeployAndGetAllOperations=3]="DeployAndGetAllOperations"}(t.TemplateDeploymentMode||(t.TemplateDeploymentMode={}));e=t.TemplateDeploymentMode,function(n){n[n.Success=0]="Success";n[n.DeploymentRequestFailed=1]="DeploymentRequestFailed";n[n.DeploymentFailed=2]="DeploymentFailed";n[n.DeploymentStatusUnknown=3]="DeploymentStatusUnknown";n[n.ErrorProvisioningResourceGroup=
4]="ErrorProvisioningResourceGroup";n[n.ErrorSubmittingDeploymentRequest=5]="ErrorSubmittingDeploymentRequest";n[n.ErrorGettingDeploymentStatus=6]="ErrorGettingDeploymentStatus";n[n.InvalidArgs=7]="InvalidArgs";n[n.ErrorRegisteringResourceProviders=8]="ErrorRegisteringResourceProviders";n[n.DeploymentCanceled=9]="DeploymentCanceled";n[n.UnknownError=10]="UnknownError"}(t.DeploymentStatusCode||(t.DeploymentStatusCode={}));u=t.DeploymentStatusCode;t.deployTemplate=o;t.pollForDeployment=s,function(n){function t(n){return i.deployTemplate(r.client,n)}function u(n){return i.pollForDeployment(r.client,n)}function f(n){return i.validateTemplate(r.client,n)}n.deployTemplate=t;n.pollForDeployment=u;n.validateTemplate=f}(h=t.Deployments||(t.Deployments={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=MsPortalFx.ViewModels,i=function(
){function n(n,i,r,u){this.collector=new t.ParameterCollector(n,{supplyInitialData:function(){var n=u.supplyInitialData(),i=r(),t;return i&&(t=i.selectedSpecId,n.selectedSpecId=t,n.selectedSpecIds=[t]),{fromCollectorToProvider:n,fromProviderToCollector:null}},receiveResult:function(n){var t=n.fromProviderToCollector;r(t);typeof u.receiveResult=="function"&&u.receiveResult(t)},selectable:i})}return n}();n.CollectorControl=i})(t=n.Specs||(n.Specs={}))})(t=n.Pickers||(n.Pickers={}))})(t=n.ResourceManager||(n.ResourceManager={}))})(t=n.Azure||(n.Azure={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=FxImpl.Azure.ResourceManager.Pickers.Specs,r=n.ViewModels,u=r.Forms,f=ko.observable,e=ko.observableArray,o=function(t){function i(i,r){var s={label:f(n.Resources.Strings.Pickers.Specs.pricingTier),validations:e(),displayText:ko.pureComputed(function(){var n=o.value();return n?n.selectedSpecIds&&n.selectedSpecIds.
join(", ")||n.selectedSpecId:""})},o;r=n.Base.Utilities.extend(s,r);o=new u.Selector.ViewModel(i,r.form,r.pathOrAccessor,r);t.call(this,i,o.selectable,o.value,r);this.control=o}return __extends(i,t),i}(i.CollectorControl);t.Selector=o})(i=t.Specs||(t.Specs={}))})(i=t.Pickers||(t.Pickers={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=n.ViewModels.Controls,r=FxImpl.Azure.ResourceManager.Pickers.Specs,u=ko.observable,f=function(t){function r(r,f){var o=u(),e=new i.InfoBox.ViewModel(r,{},!1,f);e.selectable=n.ViewModels.Part.createSelectableViewModel();t.call(this,r,e.selectable,o,f);this.value=o;this.control=e}return __extends(r,t),r}(r.CollectorControl);t.InfoBox=f})(i=t.Specs||(t.Specs={}))})(i=t.Pickers||(t.Pickers={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))}(MsPortalFx||(MsPortalFx={})
),function(n){var t;(function(t){var i;(function(t){"use strict";function e(n){return typeof n=="function"}function ot(n,t){t===void 0&&(t={});var r=new i.Internal.Selectable({allowUnselect:!1,selectedValue:t.selectedValue,isSelected:t.isSelected,isActivated:t.isActivated});return n.registerForDispose(r),r}function wt(n){if(n||f.optionsUndefined(),!e(n.supplyTemplateDeploymentOptions))throw new Error("'supplyTemplateDeploymentOptions' implementation is undefined.");var t=n.createFeatures,i=l.CreateFeatures;t&&(t&i.ShowPricingSummary||t&i.ShowLegalTerms)&&!e(n.supplyPricingConfig)&&f.supplyPricingUndefined()}function st(n){n===void 0&&(n={});var t=n.galleryCreateOptions||{};return t.launchingContext||{}}var a=n.Base,i=n.ViewModels,ht=i.ActionBars,v=ht.Base,ct=i.ParameterCollectionV3,lt=HubsExtension.Azure.Pricing,d=i.ParameterCollection.Internal.ProvisioningTelemetry,o=a.Diagnostics.Telemetry,u=a.Utilities,y=d.ProvisioningStatus,g=d.ActionModifier,at=u.Internal.JQuery,vt=undefined,nt=ko.
observable,tt=ko.isObservable,h=n.Resources.Strings.Azure.ResourceManager.Provisioner,it=h.ArmValidation,s=i.getValidationResult,rt=u.newGuid,p=at.extend,w=u.extend,l;t.armValidateFeature=n.isFeatureEnabled("validatearmtemplates");var b=g.Succeeded,c=g.Failed,ut=lt.Constants,ft=ut.PricingSummaryBlade,et=ut.LegalTermsBlade,k=a.Constants.ExtensionNames.Hubs,yt=i.ShieldType.Translucent,r="",pt={canNotProvision:r,invalidGalleryOptions:r,launchPricingBladeFailure:r,legalTermsUnsupported:r,missingTemplateOptions:r,optionsUndefined:r,secondaryLinksUnsupported:r,supplyPricingUndefined:r,supplyTemplateUndefined:r},f=FxImpl.getErrorMap(pt);l=function(r){function l(t,i,u){var o=this,s=l.CreateFeatures,c,a,h;arguments.length===2&&(u=i,i=vt);wt(u);r.call(this,t,{supplyProvisioningPromise:function(n){return o._supplyProvisioningPromise(n)},supplyStartboardInfo:function(n){return o._supplyStartboardInfo(n)},actionBar:u.actionBar,parameterProvider:u.parameterProvider});this._armOptions=u;this._showPricingSummary=
nt(!1);this._showAutomationOptions=nt(!1);this._legalTermsBladeShown=!1;this._purchaseInProgress=!1;this._isCustomProvisioning=!1;c=i&&i.content||{};this.pricingSelectable=ot(t,c.pricingSelectable);this.errorsSelectable=ot(t,c.errorsSelectable);a=this._actionBar;this.pricingSelectable.isSelected.subscribe(t,function(n){n||o._purchaseInProgress||o._setActionBarProgress(!1)});a&&(this._setUpActionBarWatcher(t),this._setUpActionBarValidation(t,u));var y=!1,p=function(){var t=u.createFeatures,i=!!(t&s.ShowPricingSummary),r=!!(t&s.ShowLegalTerms),e=t&s.HideExportTemplate,h=!!(t&s.ShowAutomationOptions)||!e&&n.isFeatureEnabled("seetemplate");if(!y&&e){var c=st(o.armProvisioningConfig),l=c.galleryItemId,v=c.source||[];l&&(y=!0,FxImpl.FeatureAdoption.traceFeature({name:"ExportTemplateFromCreate",status:h,galleryItemId:l,blade:v.join(",")}))}u.actionBar&&(o._actionBarSupportsSecondaryLinkDisplayText?(o._showPricingSummary(i),o._showAutomationOptions(h)):i&&f.secondaryLinksUnsupported(),o._actionBarSupportsForceInProgressStatus?
a.forceInProgressStatus(r):r&&f.legalTermsUnsupported())},v=u.parameterProvider;this._parameterProvider=v;v&&v.configFromCollector.subscribe(t,p);p();h=t;e(h.registerSelectable)&&(h.registerSelectable(t.createChildLifetime(),rt(),this.pricingSelectable),h.registerSelectable(t.createChildLifetime(),rt(),this.errorsSelectable,{openInContextPane:!0,persistentContextPane:!0}))}return __extends(l,r),Object.defineProperty(l.prototype,"armProvisioningConfig",{get:function(){return this.provisioningConfig()},enumerable:!0,configurable:!0}),l.prototype.startProvisioning=function(n){e(this._armOptions.supplyGalleryCreateOptions)||f.canNotProvision();var i=this._armOptions.supplyGalleryCreateOptions(),t=u.clone(this.provisioningConfig()),o=i&&i.galleryItem;return o&&!!o.itemDisplayName?(t||(t={}),w(t,{galleryCreateOptions:i}),this.provisioningConfig(t)):f.invalidGalleryOptions(),r.prototype.startProvisioning.call(this,n)},l.prototype._deployTemplate=function(n){return t.Deployments.deployTemplate(
n)},l.prototype._validateTemplate=function(n){return t.Deployments.validateTemplate(n)},l.prototype._supplyProvisioningPromise=function(n){var i=this;return this._armOptions.supplyTemplateDeploymentOptions(n,l.GetTemplateDeploymentOptionsMode.Create).then(function(r){var e=i.provisionOnStartboard();return e&&!r.resourceId&&f.missingTemplateOptions(),w(r,{deploymentMode:t.TemplateDeploymentMode.DeployAndAwaitCompletion,launchingContext:i._launchingContext}),i._deployTemplate(r).then(function(f){var o;return f.deploymentStatusCode!==t.DeploymentStatusCode.Success?(o=u.clone(f,!0),o.subscriptionId=r.subscriptionId,o.resourceGroupName=r.resourceGroupName,o.deploymentName=r.deploymentName,o):e?i._getStartboardPartInputs(n,r):f},function(n){var t=u.clone(n,!0);return t.subscriptionId=r.subscriptionId,t.resourceGroupName=r.resourceGroupName,t.deploymentName=r.deploymentName,Q.reject(t)})})},l.prototype._supplyStartboardInfo=function(n){var t=this._armOptions.supplyStartboardInfo;if(e(t))return t(
n)},l.prototype._setUpActionBarValidation=function(n,i){var r=this,u=i.actionBar,f=i.createFeatures,e=l.CreateFeatures,a=!!(f&e.DisableArmValidation),v=!!(f&e.EnableArmValidation),y=!a&&(v||t.armValidateFeature),h=u.showActionBar,d=tt(h),g={validate:function(){if(d&&!h())return Q(s());var f=st(r.armProvisioningConfig),t={telemetryId:f.telemetryId,galleryItemId:f.galleryItemId,createBlade:f.createBlade},i=o.startTrace({source:"ArmProvisioner",action:"ValidateArmTemplate",data:t}),v=Q().then(function(){u.infoBoxSelectable.isSelected(!1);var n=r._parameterProvider.getResults();return r._armOptions.supplyTemplateDeploymentOptions(n,l.GetTemplateDeploymentOptionsMode.Validate)}).then(function(n){return r._validateTemplate(n).then(function(){return o.endTrace(i,b,t),s()}).catch(function(n){return(o.endTrace(i,c,p({},t,{error:n})),n.status===0)?s(it.networkFailure):{valid:!1,message:it.validationFailed,blade:{extension:k,detailBlade:"ArmErrorsBlade",detailBladeInputs:{errors:p({},t,n.error)}}}}
)}).catch(function(n){return o.cancelTrace(i,p({},t,{error:n.message})),s()}),e=Q.timeout(v,l.armValidationTimeout).catch(function(n){return w(t,{error:{message:n.message,code:n.code}}),o.endTrace(i,c,t),s()}),a=n;return a.operations&&a.operations.add(e,{blockUi:!0,shieldType:yt}),e}};y&&(u.infoBoxSelectable=this.errorsSelectable,u.asyncValidations.push(g))},l.prototype._setActionBarProgress=function(n){var t=this._actionBar;tt(t.actionInProgress)&&t.actionInProgress(n)},l.prototype._getStartboardPartInputs=function(n,i){var u={},r=this.provisioningConfig().startboardProvisioningInfo,f=this._armOptions.supplyStartboardInfo;return e(f)&&(r=f(n)||r),u[r.startboardPartKeyId]=i.resourceId,{deploymentStatusCode:t.DeploymentStatusCode.Success,partInputs:u}},l.prototype._setUpActionBarWatcher=function(n){var t=this,r=this._armOptions.supplyPricingConfig,f=r&&r(),e=f&&f.showPricingSummaryLink,i=this._actionBar;ko.computed(n,function(){if(t._actionBarSupportsSecondaryLinkDisplayText){var u=t._showPricingSummary(
)&&(e?e():!0),n=null,r=!1;u?n=h.pricingSummaryLinkLabel:t._showAutomationOptions()&&(n=h.seeTemplateLink,r=!0);i.secondaryLinkDisplayText(n);t._actionBarSupportsSecondaryLinkValidation&&i.secondaryLinkTriggerValidation(r)}});ko.reactor(n,function(){var n=i.output(),e=n&&t._actionBarSupportsForceInProgressStatus&&i.forceInProgressStatus()&&n.status===v.Status.InProgress&&n.action===v.Action.Complete,r=n&&n.commitId;if(e&&t._legalTermsCommitId!==r)return t._legalTermsCommitId=r,t._legalTermsBladeShown=!0,t._setActionBarProgress(!0),t._launchLegalTermsBlade(),null;var u=i.secondaryLinkDisplayText(),f=n&&n.secondaryLinkClicked,o=n&&t._actionBarSupportsSecondaryLinkDisplayText&&!!f&&f===u;o&&t._pricingSummaryCommitId!==r&&(t._pricingSummaryCommitId=r,t._setActionBarProgress(!1),u===h.seeTemplateLink?t._launchTemplateViewerBlade():t._launchPricingSummaryBlade())});n.onInputsSetCallbacks.add(function(n){var e=t.pricingSelectable.isSelected(),r=n.pricingOutput,f;e&&v.isCompleted(r)&&r.actionButtonClicked&&
(t._legalTermsBladeShown&&(t._legalTermsBladeShown=!1,t._purchaseInProgress=!0,f=r.pinToStartboard,t._actionBarSupportsShowActionBar&&!i.showActionBar()&&typeof f=="boolean"&&i.provisionOnStartboardPart(f),i.forceInProgressStatus(!1),i.triggerSelectAction(u.getUniqueId())),t.pricingSelectable.isSelected(!1));return})},l.prototype._launchTemplateViewerBlade=function(){var f=this,r=this._parameterProvider.getResults(),u,t;r&&(u=this._armOptions.supplyTemplateDeploymentOptions(r,l.GetTemplateDeploymentOptionsMode.ExportTemplate).then(function(n){var r=f.armProvisioningConfig.galleryCreateOptions,t=r.galleryItem;return i.getBladeSelection(k,"TemplateViewerBlade",{options:{templateLink:n.templateLinkUri,templateJson:n.templateJson,parameters:n.parameters,telemetryId:t&&t.id}})},function(n){throw n;}),t=this.pricingSelectable,t.delayedBladeSelection({bladeWidth:n.Blades.BladeWidth.Large,selectedValuePromise:u}),t.isSelected(!0))},l.prototype._launchPricingSummaryBlade=function(){var t=this._getPricingBladeInputs(
),n=this.pricingSelectable;n.selectedValue(i.getBladeSelection(ft.bladeExtension,ft.bladeName,t));n.isSelected(!0)},l.prototype._launchLegalTermsBlade=function(){var t=this._getPricingBladeInputs(),n=this.pricingSelectable;n.selectedValue(i.getBladeSelection(et.bladeExtension,et.bladeName,t));n.isSelected(!0)},l.prototype._getPricingBladeInputs=function(){var r=this._armOptions.supplyPricingConfig(),t=r&&r.supplyPricingInfo(),i;t||f.launchPricingBladeFailure();var o=this.armProvisioningConfig.galleryCreateOptions,n=o&&o.galleryItem,s=this._armOptions.supplyGalleryCreateOptions;return!n&&e(s)&&(i=s(),n=i&&i.galleryItem),n=n&&u.clone(n)||{categoryIds:[],products:[],productsWithNoPricing:[]},n.products=n.products.concat(t.products||[]),n.productsWithNoPricing=n.productsWithNoPricing.concat(t.productsWithNoPricing||[]),{galleryPricingInfo:t,galleryItem:n}},l.prototype._traceProvisioningStarted=function(){var n=this._createEventBase();return r.prototype._traceProvisioningStarted.call(this,n)}
,l.prototype._traceProvisioningEnded=function(n,i){var o=this._createEventBase(),f,e,u;return i?n?(u=n.deploymentStatusCode,u&&u!==t.DeploymentStatusCode.Success?(f=c,e=t.DeploymentStatusCode[u]):(f=b,e=u===t.DeploymentStatusCode.Success?t.DeploymentStatusCode[u]:y.Resolved)):(f=b,e=y.Resolved):(f=c,e=y.UnknownFailure),o.actionModifier=f,o.data.provisioningStatus=e,r.prototype._traceProvisioningEnded.call(this,n,i,o)},l=__decorate([n.Composition.ProxyCompatibilityMode],l)}(ct.Provisioner);t.Provisioner=l,function(n){var t,i;n.armValidationTimeout=1e4;n.azureResourceManagerProvisioningPart={name:"AzureResourceManagerProvisioningPart",extension:k},function(n){n[n.Create=0]="Create";n[n.ExportTemplate=1]="ExportTemplate";n[n.Validate=2]="Validate"}(n.GetTemplateDeploymentOptionsMode||(n.GetTemplateDeploymentOptionsMode={}));t=n.GetTemplateDeploymentOptionsMode,function(n){n[n.None=0]="None";n[n.ShowPricingSummary=1]="ShowPricingSummary";n[n.ShowLegalTerms=2]="ShowLegalTerms";n[n.ShowAutomationOptions=
4]="ShowAutomationOptions";n[n.HideExportTemplate=8]="HideExportTemplate";n[n.DisableArmValidation=16]="DisableArmValidation";n[n.EnableArmValidation=32]="EnableArmValidation"}(n.CreateFeatures||(n.CreateFeatures={}));i=n.CreateFeatures}(l=t.Provisioner||(t.Provisioner={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(i){var r;(function(i){"use strict";function at(t,r){if(!a.isResourceGroupId(t))try{var f=a.buildResourceTypeFromResourceId(t),u=i.includedResourceTypes[f.toLowerCase()];return u?u===r||u===b:n.isFeatureEnabled("autoenablemove")}catch(e){return h("Failed to get resource type from the resource id '"+t+"'."),!1}return!0}function ii(n){var t={resourceGroup:null,resourceGroupId:null,success:!1},i;try{i=a.parseResourceManagerDescriptor(n);t.resourceGroup=i.resourceGroup;t.resourceGroupId=a.buildResourceGroupIdFromResourceDescriptor(i);t.success=!0}catch(r){h("It failed to get resource group name from the resource id '"+
n+"'.")}return t}var tt=n.Resources.Strings.Part,c=tt.ResourceSummary,p=n.ViewModels,it=n.Base.Constants.ExtensionNames,rt=n.Base.Constants.BladeNames.Hubs,yt=n.Base.Constants.AssetNames,f=p.Parts.Properties,l=f.PropertyType,ut=FxImpl.ViewModels,pt=ut.Parts.Properties,wt=n.Base,a=p.Services.ResourceTypes,bt=n.Assets,ft=FxImpl.Extension,kt=ft.CloudName,dt=FxImpl,gt=n.Azure,et=n.Azure.ResourceManager,u=ko.observable,v=ko.reactor,ot=window,w=new wt.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.ResourceSummaryPart"),st=ot.fx&&ot.fx.environment,ri=st&&st.isDevelopmentMode,e=5,ht="number",k=new f.TextProperty("",""),ct=tt.PropertiesPart,ni=n.isFeatureEnabled("resourcemenu"),lt=it.Hubs,b=3,d=0,g=1,y="MsPortalFx.Parts.ResourceSummary.ViewModel2",h=w.error.bind(w),nt,r,vt;i.includedResourceTypes={"microsoft.servicefabric/clusters":b};var o="",ti={onlyStatic:o,propertyReused:o,setPropertiesNotAvail:o,noResourceGroupWithLayout:o,statusMissing:o,noSubId:o,maxColumns:o,missingProperties:o,
maxProperties:o},s=FxImpl.getErrorMap(ti);nt=function(i){function o(n,t,f){var c=this,a,e,o,s,h;i.call(this,n);this._editRg=u();this._currentResourceId=u();this._partContainer=f;this._options=t;this._allowedPropertyTypes=[l.Callback,l.Link,l.OpenBlade,l.OpenBladeAsync,l.Text];this.collapsed=u(undefined);this.tagsVisible=u(!0);this.hasQuickStart=u(!!t.getQuickStartSelection);this.hasKeys=u(!!t.getKeysSelection);this.hasSettings=u(!!t.getSettingsSelection);this.noTags=u(!!t.noTags);this.noRbac=u(!!t.noRbac);a=t.supportsResourceMove;this._editRg(a===g||a===b);this.title=u("");this.settingsLabel=u("");e=this._createSelectable;o="Selectable";this.resourceGroupSelectable=e(n,"resourceGroup"+o);this.quickStartSelectable=e(n,"quickStart"+o);this.settingsSelectable=e(n,"settings"+o);this.accessSelectable=e(n,"access"+o);this.tagsSelectable=e(n,"tags"+o);this.keysSelectable=e(n,"keys"+o);f?(s=f,this.collapsed.subscribe(s,function(n){c._updateDataLoading(f,n)})):s=new dt.TriggerableLifetimeManager;
this._ensureRGProperty=function(){return h||(h=c._createResourceGroupProperty(s),c._markBuiltInProperty(h,r.ResourceGroup)),h};t.noResourceGroup||i.prototype.setProperties.call(this,[this._ensureRGProperty()]);t.hasOwnProperty("staticProperties")||w.warning("MsPortalFx.ViewModels.Parts.ResourceSummary.ViewModel is deprecated.  Please use MsPortalFx.ViewModels.Parts.ResourceSummary.ViewModel2.")}return __extends(o,i),o.prototype.onInputsSet=function(t){var i=this._options,o=this._cloudName,s,r,u,c,f,e;return(arguments.length<2&&(s="The onInputsSet method of resource summary viewmodel requires the second *settings* argument.",h(s)),t.actionBarOutput)?(this.moveResourceSelection.activatedItems([]),Q()):(this._inputs=t,r=t.resourceId,r!==this._currentResourceId()&&this._startRebind(r),i.noRbac||this.accessSelectable.selectedValue(ut.getBladeSelection(o,"Microsoft_Azure_AD","UserAssignmentsBlade",{scope:r})),i.noTags||this.tagsSelectable.selectedValue(p.getBladeSelection(lt,"ResourceTagsListBlade",
kt.addToModel(o,{resourceId:r}))),i.getSettingsSelection&&this.settingsSelectable.selectedValue(i.getSettingsSelection(t)),i.getQuickStartSelection&&this.quickStartSelectable.selectedValue(i.getQuickStartSelection(t)),i.getKeysSelection&&this.keysSelectable.selectedValue(i.getKeysSelection(t)),u=this.collapsed,c=u.peek(),n.isNullOrUndefined(u())&&u(i.collapsed),f=this._partContainer,e=u.peek(),f&&c===e&&this._updateDataLoading(f,e),Q())},o.prototype.onExpanded=function(){return Q()},o.prototype._addProperty=function(n){var t=2*e;this.properties.peek().length>=t?h("Resource summary cannot have more than "+t+" properties"):this._isValidProperty(n)&&i.prototype._addProperty.call(this,n)},o.prototype.setProperties=function(n){var f=this,u=!this._options.noResourceGroup,r=2*e-(u?1:0),t;n.length>r&&h("Resource summary cannot have more than "+r+" properties");t=[];u&&t.push(this._ensureRGProperty());n.slice(0,r).forEach(function(n){f._isValidProperty(n)&&t.push(n)});i.prototype.setProperties.
call(this,t)},o.prototype._setProperties=function(n){i.prototype.setProperties.call(this,n)},o.prototype._startRebind=function(n){this._currentResourceId(n)},o.prototype._isValidProperty=function(n){return this._allowedPropertyTypes.indexOf(n.getType())<0?(h("Only Callback, Link, OpenBlade and Text properties are allowed to added to resource summary."),!1):!0},o.prototype._markBuiltInProperty=function(n,t){n.builtInPropertyKind=t},o.prototype._createSelectable=function(n,i){return new t.Selectable({isSelected:!!(n&&n[i]&&n[i].isSelected)})},o.prototype._updateDataLoading=function(n,t){var i,u,r;this._resetLoadingState(n);i=this._inputs;!t&&i&&(u=this._loadingLM=n.createChildLifetime(),r=this._loadingPromise=this.onExpanded(u,i),r&&n.operations.add(r,{blockUi:!0}))},o.prototype._resetLoadingState=function(n){var i=this._loadingPromise,t;i&&(n.operations.remove(i),this._loadingPromise=null);t=this._loadingLM;t&&(t.dispose(),this._loadingLM=null)},o.prototype._createResourceGroupProperty=
function(n){var t=this,r=u(),e=u(),o=u(),i;return v(n,function(){var n=t._currentResourceId(),u,i,f;n&&(u=t._editRg(),t._editRg(u?u:at(n,g)),i=ii(n),i.success&&(r(i.resourceGroup),e(p.getBladeSelection(lt,ni?rt.ResourceMenuBlade:rt.ResourceGroupMapBlade,{id:i.resourceGroupId})),t._editRg()&&(f=et.getMoveResourceBlade(n,g).bladeSelection,o(f))))}),i={label:c.resourceGroupPropertyLabel,displayValue:r,bladeSelection:e},i.editBlade={bladeSelection:o,editType:f.EditType.MoveResource,displayValue:ct.changeResourceGroupLabel,showIcon:!0},new f.OpenBladeProperty(i)},o}(f.ViewModel);i.ViewModel=nt,function(n){n[n.ResourceGroup=0]="ResourceGroup";n[n.Status=1]="Status";n[n.Location=2]="Location";n[n.SubscriptionName=3]="SubscriptionName";n[n.SubscriptionId=4]="SubscriptionId"}(i.BuiltInPropertyKind||(i.BuiltInPropertyKind={}));r=i.BuiltInPropertyKind;vt=function(t){function i(n,i,f){var e=this,h,o,c,l;t.call(this,n,i,f);this._dynamicProperties=u([]);this._editSub=u();this._dependencies={getLocation:
function(n){var t=ft.getRuntime();return t.getResource(n,"resourcesummarypartviewmodel").then(function(n){return n.locationString})},getSubscriptionName:function(n){return gt.getSubscriptionInfo(n).then(function(n){return n.displayName})},getSubscriptionBlade:function(n){var t={extensionName:it.Billing,assetType:yt.SubscriptionDetail,assetId:n};return bt.mapAssetIdToDynamicSelection(t,!0)}};h=this._options.supportsResourceMove;this._editSub(h===d||h===b);o=this._createBuiltInProperties(f,i);c=i.staticProperties||[];c.forEach(function(n){if(!n._supportsIsLoading)s.onlyStatic(y)});l=f;v(l,function(){var n=e._dynamicProperties(),t=e._layoutProperties(o,c,n,i.layout);e._setProperties(t)});v(l,function(){var t=o[r.SubscriptionId],i=o[r.ResourceGroup],u=(!i||i.displayValue())&&(!t||t.value()),n;u&&(n=e._loadingPromise,n?f.operations.update(n,{blockUi:!1}):f.revealContent())})}return __extends(i,t),i.prototype.setDynamicProperties=function(n){var i=this,r=n||[],u=this._dynamicProperties(),t=[
];r.forEach(function(n){!n._supportsIsLoading&&u.indexOf(n)>=0?s.propertyReused(y):i._isValidProperty(n)&&t.push(n)});this._dynamicProperties(t)},i.prototype.setProperties=function(){s.setPropertiesNotAvail(y)},i.prototype._setBuiltInProperty=function(n,t,i){this._markBuiltInProperty(i,t);n[t]=i},i.prototype._createBuiltInProperties=function(t,i){var e=this,o,ft,p,l,b,k,g,ot,nt;if(i.layout?(i.noResourceGroup&&s.noResourceGroupWithLayout(y),ft=[i.layout.left||[],i.layout.right||[]],o=n.mapMany(ft,function(n){return n.filter(function(n){return typeof n===ht})}).unique()):(o=[],i.noResourceGroup||o.push(r.ResourceGroup),i.status&&o.push(r.Status),o.push(r.Location),o.push(r.SubscriptionName),o.push(r.SubscriptionId)),p=function(n){return o.indexOf(n)>=0},l={},p(r.ResourceGroup)&&this._setBuiltInProperty(l,r.ResourceGroup,this._ensureRGProperty()),p(r.Status)&&(i.status||s.statusMissing(y),this._setBuiltInProperty(l,r.Status,new f.TextProperty({label:c.statusPropertyLabel,value:i.status.value,
isLoading:i.status.isLoading}))),p(r.Location)&&(b=u(),k=u(),v(t,function(){var t,n;e.collapsed()||(t=e._currentResourceId(),t)&&(k(!0),n=g=e._dependencies.getLocation(t),n.then(function(t){n===g&&b(t)}).catch(function(i){n===g&&(w.warning("Failed to get the location for the resource id '"+t+"'. '"+i+"'"),b(c.notAvailable))}).finally(function(){n===g&&k(!1)}))}),ot=ko.computed(t,function(){return i.location&&i.location()||b()}),this._setBuiltInProperty(l,r.Location,new f.TextProperty({label:c.locationPropertyLabel,value:ot,isLoading:k}))),nt=ko.computed(t,function(){var n=e._currentResourceId(),t;if(!n)return"";try{t=a.parseResourceManagerDescriptor(n).subscription}catch(i){h("Failed to get subscription name from the resource id '"+n+"'.")}return t}),p(r.SubscriptionId)&&this._setBuiltInProperty(l,r.SubscriptionId,new f.TextProperty(c.subscriptionIdPropertyLabel,nt)),p(r.SubscriptionName)){var it=u(),rt=u(),tt,st=u(),lt=this._currentResourceId(),ut=void 0;v(t,function(){var n,t,r,u,i;e.
collapsed()||(n=e._currentResourceId(),n&&n!==lt)&&(lt=n,t=nt(),t)&&(r=e._editSub(),e._editSub(r?r:at(n,d)),e._editSub()&&(u=et.getMoveResourceBlade(n,d).bladeSelection,st(u)),rt(!0),i=tt=e._dependencies.getSubscriptionName(t).then(function(n){i===tt&&it(n)}).catch(function(){i===tt&&(h("Failed to get the subscription name for the subscription id '"+t+"'."),it(c.notAvailable))}).finally(function(){i===tt&&rt(!1)}))});ut={label:c.subscriptionNamePropertyLabel,displayValue:it,resolveBlade:function(){var n=nt(),t;return n||(t=e._currentResourceId(),s.noSubId(t)),e._dependencies.getSubscriptionBlade(n)},isLoading:rt};ut.editBlade={bladeSelection:st,editType:f.EditType.MoveResource,displayValue:ct.changeSubscriptionLabel,showIcon:!0};this._setBuiltInProperty(l,r.SubscriptionName,new pt.OpenBladeAsyncProperty(ut))}return l},i.prototype._layoutProperties=function(n,t,i,u){var f=[],o=0,l,a,c,h,p;if(u){l=u.left||[];a=u.right||[];(l.length>e||a.length+i.length>e)&&s.maxColumns(e);for(var v=0,y=0,
w=function(r){var u,h=r?l:a,e;(r?v:y)<h.length?(e=h[r?v++:y++],typeof e===ht?u=n[e]:(u=e,t.indexOf(u)<0&&s.missingProperties())):u=!r&&o<i.length?i[o++]:k;f.push(u)},b=0;b++<e&&(v<l.length||y<a.length||o<i.length);)w(!0),w(!1)}else for(t.length+i.length>e&&s.maxProperties(e),c=0,h=function(){var n;n=c<t.length?t[c++]:o<i.length?i[o++]:k;f.push(n)},this._options.noResourceGroup||(f.push(n[r.ResourceGroup]),h()),p=n[r.Status],p&&(f.push(p),h()),f.push(n[r.Location]),h(),f.push(n[r.SubscriptionName]),h(),f.push(n[r.SubscriptionId]),h();c+o<e&&(c<t.length||o<i.length);)f.push(k),h();return f},i.prototype._startRebind=function(n){t.prototype._startRebind.call(this,n);this._dynamicProperties([])},i}(nt);i.ViewModel2=vt})(r=i.ResourceSummary||(i.ResourceSummary={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n,t){var i=n._dependencies;t.getLocation&&(
i.getLocation=t.getLocation);t.getSubscriptionName&&(i.getSubscriptionName=t.getSubscriptionName);t.getSubscriptionBlade&&(i.getSubscriptionBlade=t.getSubscriptionBlade)}n.setDependencies=t})(t=n.ResourceSummary||(n.ResourceSummary={}))})(t=n.Parts||(n.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var o=n.Services,i=ko.observable,r=ko.observableArray,u=n.disposeDisposable,s=function(){function n(){var n=this;this.initialized=i(!1);this.results=r();this.canceled=i(!1);this._dataSub=null;this._canceledSub=this.canceled.subscribe(function(t){t&&(n.results([]),n._releaseDataSub())})}return n.prototype.dispose=function(){u(this._canceledSub);this._canceledSub=null;this._releaseDataSub()},n.prototype.onInputsSet=function(){return this._releaseDataSub(),this.initialized(!1),this.canceled(!1),this.results([]),null},n.prototype.connectDataSource=function(n,t){this._dataSub=o.DataSetAssetExpansionMapper.
connectDataSet(n,this.results,t);this.initialized(!0)},n.prototype._releaseDataSub=function(){u(this._dataSub);this._dataSub=null},n}(),f,e;t.Service=s;f=function(){function n(){}return n.serialize=function(n,t,i){t===void 0&&(t=!1);i===void 0&&(i=null);var r={browseCriteria:n,newBrowse:t,useBrowseKey:i};return JSON.stringify(r)},n.deserialize=function(n){var t=JSON.parse(n);return{browseCriteria:t.browseCriteria,newBrowse:t.newBrowse,useBrowseKey:t.useBrowseKey}},n}();t.BrowseSerializer=f;e=function(){function t(n,t){this.initialized=i(!1);this.results=r();this._browseCriteria=null;this._browseCriteria=n;this.results(t)}return Object.defineProperty(t.prototype,"browseCriteria",{get:function(){return this._browseCriteria},enumerable:!0,configurable:!0}),__decorate([n.Composition.ProxyCompatibilityMode],t)}();t.ResultsViewModel=e})(i=t.Browse||(t.Browse={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t)
{var i;(function(t){var i;(function(t){"use strict";function e(n,t,r,f){var o=function(){return i.getAssetSelection(r,f,{id:t})},s=function(){var u=n.bladeName();return u?i.getBladeSelection(n.extensionName()||r,u,{id:t}):o()},e;return n&&(e=void 0,typeof n.onInputsSet=="function"&&(e=n.onInputsSet({assetId:t,usage:u.DynamicAssetSelection})),e)?e.then(function(){return s()}):Q(o())}var i=n.ViewModels,r=ko.observable,u,f;(function(n){n[n.DynamicAssetSelection=0]="DynamicAssetSelection"})(t.Usage||(t.Usage={}));u=t.Usage;f=function(){function n(){this.extensionName=r(null);this.bladeName=r(null)}return n}();t.Service=f;t.prepareDynamicSelection=e})(i=t.DynamicBlade||(t.DynamicBlade={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n.Services.AssetExpansion,u=n.Resources.Strings.Services.AssetHandler,i=ko.observable,e=function(){function n(){}return Object.
defineProperty(n,"base",{get:function(){return[{id:"title",name:i(u.titleGridColumn),itemKey:r.titlePropertyName},{id:"assetType",name:i(u.assetTypeGridColumn),itemKey:r.assetTypeStringPropertyName}]},enumerable:!0,configurable:!0}),n}(),o,f;t.BaseColumns=e,function(n){n[n.Default=0]="Default"}(t.Usage||(t.Usage={}));o=t.Usage;f=function(){function n(){this.includeAssetIcon=i(!0);this.columns=i([])}return n}();t.Service=f})(i=t.GridColumns||(t.GridColumns={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observableArray,i=function(){function n(){this.properties=t()}return n.prototype.setProperty=function(n,t){var i=this.properties,r=i().some(function(i){return i.property===n?(i.value=t,!0):!1});r||i.push({property:n,value:t})},n}();n.Service=i})(t=n.PropertyProvider||(n.PropertyProvider={}))})(t=n.Services||(n.Services={}))})(t=n.ViewModels||
(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function i(n){return n.toLowerCase()}function tt(n){var u="Invalid subscription id: "+n,i,r;if(!t.isSubscriptionId(n))throw new Error(u);if(i=t.regExpSubscriptionId.exec(n),!i||i.length!==2)throw new Error(u);return r=new e,r.subscription=i[1],r}function h(n){var u="Invalid resource group id: "+n,i,r;if(!t.isResourceGroupId(n))throw new Error(u);if(i=t.regExpResourceGroupId.exec(n),!i||i.length!==3)throw new Error(u);return r=new o,r.subscription=i[1],r.resourceGroup=i[2],r}function r(n){return et(n,!0)}function it(n){return et(n)}function lt(n){var i=t.regExpDeploymentResourceId.exec(n),r;if(i&&i.length===4||(i=t.regExpDeploymentId.exec(n)),!i||i.length!==4)throw new Error("Invalid deployment id: "+n);return r=new l,r.subscription=i[1],r.resourceGroup=i[2],r.deploymentName=i[3],r}function at(n){var i=t.regExpTagId.exec(n),r;if(!i||i.length!==4)throw new Error(
"Invalid tag id: "+n);return r=new a,r.subscription=i[1],r.tagName=i[2],r.tagValue=i[3]||f,r}function vt(n){return s(n.subscription)}function v(n){return s(n.subscription)}function y(n){var t=n.subscription;return t?s(t):""}function yt(n){return v(h(n))}function pt(n){return y(r(n))}function s(n){return"/subscriptions/"+n}function wt(n){return w(n.subscription,n.resourceGroup)}function p(n){return w(n.subscription,n.resourceGroup)}function bt(n){return p(r(n))}function w(n,t){return"/subscriptions/"+n+"/resourcegroups/"+t}function kt(n){return b(r(n))}function dt(n){return b(it(n))}function b(n){for(var t=n.provider,i=0;i<n.types.length;i++)t=t+"/"+n.types[i];return t}function rt(n){for(var i="/subscriptions/"+n.subscription+"/resourcegroups/"+n.resourceGroup+"/providers/"+n.provider,r=n.types,u=n.resources,t=0;t<r.length;t++)i+="/"+r[t]+"/"+u[t];return i}function gt(n){return"/subscriptions/"+n.subscription+"/resourcegroups/"+n.resourceGroup+"/providers/"+n.provider+"/"+n.types[0]+"/"+
n.resources[0]}function ni(n){var t;if(n.types.length<2)throw new Error("The resource descriptor is not for a nested resource.");var i="/subscriptions/"+n.subscription+"/resourcegroups/"+n.resourceGroup+"/providers/"+n.provider,r=n.types,u=n.resources;for(t=0;t<r.length-1;t++)i+="/"+r[t]+"/"+u[t];return i}function ti(t,r){var u=i(t)+"/";return n.startsWith(i(r),u)}function ii(n){return k(t.relatedTagPrefix,r(n))}function ri(n){return k(t.linkTagPrefix,r(n))}function k(n,t){return n+":"+rt(t)}function ui(n){var t=tt(n);return i(n)}function d(n,r){return n===r?!0:!n&&!r?!0:!n||!r?!1:t.isSubscriptionId(n)&&t.isSubscriptionId(r)?i(n)===i(r):!1}function fi(n){var t=h(n);return i(n)}function ut(n,r){return n===r?!0:!n&&!r?!0:!n||!r?!1:t.isResourceGroupId(n)&&t.isResourceGroupId(r)?i(n)===i(r):!1}function ei(n){var t=r(n);return i(n)}function oi(n,r){return n===r?!0:!n&&!r?!0:!n||!r?!1:t.isResourceId(n)&&t.isResourceId(r)?i(n)===i(r):!1}function si(n,r){return n===r?!0:!n&&!r?!0:!n||!r?!1:t.isResourceManagerId(
n)&&t.isResourceManagerId(r)?i(n)===i(r):!1}function hi(n){return t.isResourceManagerId(n)?n:null}function ci(n,t){return!n||!t?!1:d(n,v(h(t)))}function li(n,t){return!n||!t?!1:d(n,y(r(t)))}function ai(n,t){return!n||!t?!1:ut(n,p(r(t)))}function et(n,i){var o=i?g+n:"Invalid resource manager id: "+n,l=i?t.isResourceId:t.isResourceManagerId,h,e;if(!l(n))throw new Error(o);var r=new c,u=ht.exec(n),s=u&&u.length;if(r.subscription=s>1&&u[1]||f,r.resourceGroup=s>2&&u[2]||f,n="/providers/Microsoft.Resources"+n,u=ot.exec(n),!u)throw new Error(o);for(r.provider=u[1],h=u[2],e=r.provider,r.type=f,r.types=[],r.resource=f,r.resources=[],r.resourceMap={};u=st.exec(h);){if(!u)throw new Error(g+n);r.types.push(u[1]);r.type=u[1];r.resources.push(u[2]);r.resource=u[2];e+="/"+r.type;r.resourceMap[e]=r.resource}return r}var ot=/(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((:?\/[^\/]+\/[^\/]+)*)$/i,st=/\/([^\/]+)\/([^\/]+)/ig,ht=/\/subscriptions\/([^\/\s]+)(?:\/resourcegroups\/([^\/\s]+))?/i,ct,
nt,e,o,c,l,a,ft;t.relatedTagPrefix="hidden-related";t.linkTagPrefix="hidden-link";var f=undefined,u=ko.observable,g="Invalid resource id: ";(function(n){n[n.Failure=0]="Failure";n[n.DataNotAvailable=1]="DataNotAvailable";n[n.AccessDenied=2]="AccessDenied"})(t.MappingRejectionReason||(t.MappingRejectionReason={}));ct=t.MappingRejectionReason;nt=function(){function n(){this.name=u();this.description=u();this.descriptionUri=u();this.status=u();this.statusMessage=u()}return n}();t.Service=nt;e=function(){function n(){}return n}();t.SubscriptionDescriptor=e;o=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(e);t.ResourceGroupDescriptor=o;c=function(n){function t(){n.apply(this,arguments);this.types=[];this.resources=[];this.resourceMap={}}return __extends(t,n),t}(o);t.ResourceDescriptor=c;l=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(o);t.DeploymentDescriptor=l;a=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(
e);t.TagDescriptor=a;t.parseSubscriptionDescriptor=tt;t.parseResourceGroupDescriptor=h;t.parseResourceDescriptor=r;t.parseResourceManagerDescriptor=it;t.parseDeploymentDescriptor=lt;t.parseTagDescriptor=at;t.buildSubscriptionIdFromDescriptor=vt;t.buildSubscriptionIdFromResourceGroupDescriptor=v;t.buildSubscriptionIdFromResourceDescriptor=y;t.buildSubscriptionIdFromResourceGroupId=yt;t.buildSubscriptionIdFromResourceId=pt;t.buildSubscriptionIdFromSubscriptionName=s;t.buildResourceGroupIdFromDescriptor=wt;t.buildResourceGroupIdFromResourceDescriptor=p;t.buildResourceGroupIdFromResourceId=bt;t.buildResourceGroupIdFromSubscriptionAndResourceGroupName=w;t.buildSubscriptionFromId=s;t.buildResourceTypeFromResourceId=kt;t.buildResourceTypeFromResourceManagerId=dt;t.buildResourceTypeFromResourceDescriptor=b;t.buildResourceIdFromDescriptor=rt;t.buildTopmostParentResourceIdFromDescriptor=gt;t.buildParentResourceIdFromDescriptor=ni;t.isParentResource=ti;t.buildRelatedTagName=ii;t.buildLinkTagName=
ri;t.buildTagName=k;t.buildLowerCaseSubscriptionId=ui;t.compareSubscriptionId=d;t.buildLowerCaseResourceGroupId=fi;t.compareResourceGroupId=ut;t.buildLowerCaseResourceId=ei;t.compareResourceId=oi;t.compareResourceManagerId=si;t.tryBuildResourceManagerKey=hi;t.subscriptionContainsResourceGroup=ci;t.subscriptionContainsResource=li;t.resourceGroupContainsResource=ai;ft=function(){function n(){this.refreshPacket=u(null)}return n.prototype.signalResourceGroupRefresh=function(n){this.refreshPacket({resourceGroupId:n})},n.prototype.signalResourceRefresh=function(n){this.refreshPacket({resourceId:n})},n.prototype.signalAssetRefresh=function(n,t,i){this.refreshPacket({assetOwner:n,assetType:t,assetId:i})},n}();t.ResourcePartExtender=ft})(i=t.ResourceTypes||(t.ResourceTypes={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observableArray,i=function(){
function n(){this.actions=t()}return n}();n.Service=i})(t=n.Security||(n.Security={}))})(t=n.Services||(n.Services={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";var t=MsPortalFx.Base.Rpc.Internal.ActionEndPointDefinition,i="MsPortalFx.UI.AssetManager.",r="NotifyAssetDeleted";n.resourceAssetType="*Impl_Resource*";n.notifyAssetDeletedDefinition=new t(i+r);n.createResourceDeletedEventInHubsDefinition=new t(i+"CreateResourceDeletedEvent");n.hubsNotifyAssetDeletedDefinition=new t(i+"Hubs"+r)})(t=n.AssetManager||(n.AssetManager={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(t){"use strict";function f(n){t.notifyAssetDeleted(i.resourceAssetType,n)}var r=n.Base.Rpc.Internal,i=FxImpl.AssetManager,u=function(t,u,f){i.notifyAssetDeletedDefinition.invoke(r.client,"fx",{assetId:u,assetType:t,extensionName:f});i.createResourceDeletedEventInHubsDefinition.invoke(r.client,n.Base.Constants.ExtensionNames.Hubs,
{assetId:u,assetType:t,extensionName:f})};t.notifyAssetDeleted=u;t.notifyResourceDeleted=f})(i=t.AssetManager||(t.AssetManager={}))})(t=n.UI||(n.UI={}))}(MsPortalFx||(MsPortalFx={})),function(n){"use strict";var i=MsPortalFx.Base,r=i.Rpc.Internal,f=window,u=new r.ActionEndPointDefinition("OpenFeedbackPane"),t;n.feedbackEndPoint=u,function(n){function t(n,t){return Q(u.invoke(r.client,i.Constants.Shell,{resourceId:n,feedbackType:1,data:t}))}n.openResourceDeletedFeedbackPane=t}(t=n.Feedback||(n.Feedback={}));MsPortalFx.UI.Feedback=t;f.define("Fx/Feedback",function(){return t})}(FxImpl||(FxImpl={})),function(n){var t;(function(n){"use strict";var r=MsPortalFx.Base.Rpc.Internal,i="MsPortalFx.UI.NotificationManager",t=r.ActionEndPointDefinition;n.addNotificationsEndPoint=new t(i+".AddNotifications");n.addNotification2EndPoint=new t(i+".AddNotifications2");n.updateNotificationEndPoint=new t(i+".UpdateNotification");n.addServerEventsEndPoint=new t("addServerEvents")})(t=n.NotificationManager||
(n.NotificationManager={}))}(FxImpl||(FxImpl={})),function(n){var t;(function(t){var i;(function(t){"use strict";function u(n,t,r){i.updateNotificationEndPoint.invoke(i.rpcClient,"fx",{id:n,propertyName:t,propertyValue:r})}function s(n){return new r(n)}function c(n){e([n])}function e(n){if(n&&n.length>0)var t=i.addNotificationsEndPoint.invoke(i.rpcClient,"fx",{notifications:n})}var o=n.Base.Rpc.Internal,i=FxImpl.NotificationManager,r,h,f;i.rpcClient=o.client;r=function(){function t(t){this._id=n.getUniqueId();this._name=t}return t.prototype.raise=function(n,t,r){i.addNotification2EndPoint.invoke(i.rpcClient,"fx",{id:this._id,name:this._name,status:n.status,subStatus:n.subStatus,assetId:t,properties:r})},t.prototype.updateCorrelationId=function(n){u(this._id,"correlationId",n)},t.prototype.reportProgress=function(n){u(this._id,"percentComplete",n)},t}();t.Notification2=r;t.create=s,function(n){n[n.Information=0]="Information";n[n.Warning=1]="Warning";n[n.Error=2]="Error";n[n.InProgress=
3]="InProgress";n[n.Success=4]="Success"}(t.NotificationState||(t.NotificationState={}));h=t.NotificationState;f=function(){function n(n,t,i,r,u,f,e,o){if(i===undefined)throw new Error("Invalid state arg.");if(f&&!u)throw new Error("Sub id must be specified when operation id is specified.");this.source=n;this.eventType=t;this.state=i;this.timestamp=new Date;this.descriptionArgs=r;this.subscriptionId=u;this.operationId=f;this.percentOperationComplete=e;this.assetId=o}return n}();t.Notification=f;t.addNotification=c;t.addNotifications=e})(i=t.NotificationManager||(t.NotificationManager={}))})(t=n.UI||(n.UI={}))}(MsPortalFx||(MsPortalFx={})),function(n){"use strict";var i=MsPortalFx.Base,r=i.Rpc.Internal,u=window,f,t;(function(t){var i=n.Constants.RpcMethods;t.getHmacSha256EndPoint=new r.FuncEndPointDefinition(i.getHmacSha256)})(f=n.InternalCryptography||(n.InternalCryptography={})),function(n){function t(n){return n.stringToSign&&(n.stringToHash=n.stringToSign),f.getHmacSha256EndPoint.invoke(
r.client,i.Constants.Shell,n)}n.getHmacSha256=t}(t=n.Cryptography||(n.Cryptography={}));u.define("MsPortalFx/Util/Cryptography",[],function(){return t});u.define("Fx/Cryptography",[],function(){return t})}(FxImpl||(FxImpl={})),function(n){var t;(function(t){"use strict";var r=n.ViewModels,u=n.Base,i=ko.observable,f=function(){function n(){this.title=i();this.subtitle=i();this.description=i();this.helpUri=i();this.icon=i(u.Images.Shell.DefaultBlade());this.titleImageUri=i();this.statusBar=null;this.contentState=i(r.ContentState.None);this.contentStateDisplayText=i()}return n}();t.Blade=f})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){"use strict";function e(n){return n.startsWith("internal_bladeCall")}var t=undefined,f=1,i=ko.observable,r,u;n.isBladeCallerInput=e;r=function(){function n(n,r){var u=this;if(this._currentBladeCallId=null,this._activatedItemForCurrentBladeCall=t,this._hasInitialized=!1,this.internal_bladeCallId=
i(),this.internal_bladeCallerParams=i(),this._options=r,this._invokeOnSelectable=r.invokeOnSelectable,this._invokeOnSelectableSet=r.invokeOnSelectableSet,!!this._invokeOnSelectable==!!this._invokeOnSelectableSet)throw new Error("Specify 'invokeOnSelectable' or 'invokeOnSelectableSet', but not both.");n.onInputsSetCallbacks.add(function(t){if(u._hasInitialized||(u._hasInitialized=!0,u._initialize(n,r.forceInvocation)),t){var i=t.internal_bladeCallerResult;i&&i.bladeCallId===u._currentBladeCallId&&(u._currentBladeCallId=null,u._options.receiveResult(i.result,u._activatedItemForCurrentBladeCall),u._clearActivation())}return null},!0)}return n.prototype._initialize=function(n,t){var i=this;this._isCurrentlyActivated()&&this._beginNewBladeCall(!!t);this._subscribeToActivationStateChange(n,function(n){n&&i._beginNewBladeCall(!0)})},n.prototype._beginNewBladeCall=function(n){if(this._currentBladeCallId=f++,this.internal_bladeCallId(this._currentBladeCallId),this._activatedItemForCurrentBladeCall=
this._getCurrentlyActivatedValue(),n){var t=this._options.supplyParams(this._activatedItemForCurrentBladeCall);this.internal_bladeCallerParams(t)}},n.prototype._isCurrentlyActivated=function(){if(this._invokeOnSelectable)return this._invokeOnSelectable.isSelected();if(this._invokeOnSelectableSet){var n=this._invokeOnSelectableSet.activatedItems().length;if(n>1)throw new Error("Multiselection is not supported with parameter collectors.");return n>0}},n.prototype._getCurrentlyActivatedValue=function(){if(this._invokeOnSelectable)return this._invokeOnSelectable.value();if(this._invokeOnSelectableSet){var n=this._invokeOnSelectableSet.activatedItems();return n?n[0]:null}return null},n.prototype._subscribeToActivationStateChange=function(n,t){var i=this;this._invokeOnSelectable?this._invokeOnSelectable.isSelected.subscribe(n,t):this._invokeOnSelectableSet&&this._invokeOnSelectableSet.activatedItems.subscribe(n,function(){t(i._isCurrentlyActivated())})},n.prototype._clearActivation=function(
){this._invokeOnSelectable?this._invokeOnSelectable.isSelected(!1):this._invokeOnSelectableSet&&this._invokeOnSelectableSet.activatedItems([])},n}();n.BladeCaller=r;u=function(){function n(n,r){var u=this;this.internal_bladeCallerResult=i();this._options=r;n.onInputsSetCallbacks.add(function(n){if(n.internal_bladeCallId!==t&&(u._bladeCallId=n.internal_bladeCallId),n.internal_bladeCallerParams!==t){var i=u._makeStringHashFromParams(n.internal_bladeCallerParams);i!==u._lastReceivedParamsStringHash&&(u._lastReceivedParamsStringHash=i,u._options.receiveParams(n.internal_bladeCallerParams))}return null})}return n.prototype.sendResult=function(n){this.internal_bladeCallerResult({bladeCallId:this._bladeCallId,result:n})},n.prototype._makeStringHashFromParams=function(n){return ko.toJSON(n)},n}();n.BladeCallable=u})(t=n.Internal||(n.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";var i=n.ViewModels,
u=i.Controls.Internal.IFrameV2,f=function(){function n(n,t){this.signature="FxAppBlade";this.kind=n;this.data=t}return n}(),r;t.Message=f;r=function(n){function t(t,i){var r=this,f;n.call(this);this._handlers={};this._queue=[];f=this.iFrame=new u.ViewModel(t,{src:i.source});f.controlIsReady.subscribe(t,function(n){n&&r._queue.forEach(function(n){r.iFrame.postMessage(n)})});f.receiveMessage.subscribe(t,function(n){var t=r._handlers[n.kind];t&&t.forEach(function(t){t(n.data)})})}return __extends(t,n),t.prototype.postMessage=function(n){var t=this.iFrame;t.controlIsReady()?t.postMessage(n):this._queue.push(n)},t.prototype.on=function(n,t){var r=this._handlers,i=r[n];i||(r[n]=i=[]);i.push(t)},t.prototype.off=function(n,t){var i=this._handlers[n]||[];i.forEach(function(n,r){n===t&&i.splice(r,1)})},t}(i.Blade);t.ViewModel=r})(i=t.AppBlade||(t.AppBlade={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){var i;(function(t){"use strict";var i=n,
s=i.UI,h=s.NotificationManager,r=i.ViewModels,a=r.Controls,v=i.ViewModels.ActionBars,f=v.Base.Action,u=ko.observable,y=i.Resources.Strings,e=i.Helpers,o=" has not been implemented.",p=function(n){function t(){n.apply(this,arguments);this.data=u()}return __extends(t,n),t.prototype.onInputsSet=function(n){var t=n.data;return this.data(t),this.title(this._onGetTitle(t)),e.resolve()},t.prototype._onGetTitle=function(n){return y.DeleteAssetConfirmation.bladeTitle.format(n.assetName)},t}(r.Blade),c,l;t.BladeViewModel=p;c=function(n){function t(t,f){var e=this;n.call(this,t);this.data=u();this.result=u(r.CommandResult.None);this._container=null;this._assetType=null;this._data=null;this._selectedItems=null;this._previousUserActionId="";this._container=t;this._assetType=f;t.registerForDispose(ko.computed(function(){var n=e.data(),t=e._onValidateCommand(n);e.enabled(t)}));t.registerForDispose(this.result.subscribe(function(n){e._onDeletionResultChange(n)}));this.enabled(!1);this.icon(i.Base.Images.
Delete())}return __extends(t,n),t.prototype.onInputsSet=function(n){var i=n.data,r=n.selectedItems,t=n.actionBarOutput;return this.data(i),t&&((t.action===f.Complete||t.action===f.Cancel)&&this._container.selectable.isSelected(!1),t.action===f.Complete&&t.userActionId&&this._previousUserActionId!==t.userActionId&&(this._previousUserActionId=t.userActionId,this._data=i,this._selectedItems=r,this._onDelete(i,r))),e.resolve()},t.prototype._onDelete=function(){throw new Error("_onDelete()"+o);},t.prototype._onSendErrorNotification=function(){throw new Error("_onSendErrorNotification()"+o);},t.prototype._onValidateCommand=function(n){return!i.isNullOrUndefined(n)},t.prototype._onDeletionResultChange=function(n){switch(n){case r.CommandResult.Success:s.AssetManager.notifyAssetDeleted(this._assetType,this._data.assetId);break;case r.CommandResult.Failure:this._sendErrorNotification(this._data,this._selectedItems)}},t.prototype._sendErrorNotification=function(n,t){var i=this._onSendErrorNotification(
n,t);i.state=h.NotificationState.Error;h.addNotification(i)},t}(r.OpenBladeCommand);t.CommandViewModel=c;l=function(n){function t(t,i){var r=this;n.call(this,t,i);this.data=u();this._data=null;t.registerForDispose(this.data.subscribe(function(n){!r._isSameAsset(n)&&r._options.grid&&(r._onPopulateGrid(n),r._selectAll());r._data=n}))}return __extends(t,n),t.prototype.onInputsSet=function(n){var t=n.data;return this._assetName(t.assetName),i.isNullOrWhiteSpace(t.assetTypeDisplayName)||this._assetTypeDisplayName(t.assetTypeDisplayName),this.data(t),e.resolve()},t.prototype._onPopulateGrid=function(){throw new Error("_onPopulateGrid()"+o);},t.prototype._isSameAsset=function(n){return i.deepEquals(this._data,n)},t}(a.DeleteAssetConfirmation.ViewModel);t.PartViewModel=l})(i=t.DeleteAssetConfirmation||(t.DeleteAssetConfirmation={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(t){"use strict";var i=n,s=i.UI.NotificationManager,e=i.ViewModels,r=
e.Dialogs,h=ko.observable,o=" has not been implemented.",l=100,f=i.Resources.Strings.DeleteCommand,u,c;(function(n){n[n.None=0]="None";n[n.Success=1]="Success";n[n.Failure=2]="Failure"})(t.CommandResult||(t.CommandResult={}));u=t.CommandResult;c=function(n){function t(t,r){var f=this;n.call(this);this._assetType=null;this._confirmationDialog=null;this._errorDialog=null;this._data=null;this._assetType=r;this.data=h();this.result=h(u.None);t.registerForDispose(ko.computed(function(){var n=f.data(),t=f._onValidateCommand(n);f.enabled(t)}));t.registerForDispose(this.result.subscribe(function(n){f._onDeletionResultChange(n)}));this.icon(i.Base.Images.Delete())}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.data(n.data),i.Helpers.resolve()},t.prototype.execute=function(){this._data=this.data();this._createConfirmationDialog(this._data);this.dialog(this._confirmationDialog)},t.prototype.dialogClick=function(n){this._shouldDelete(n)?(this.result(u.None),this._onDelete(this.
_data)):this._resetCommand()},t.prototype._onDelete=function(){throw new Error("onDelete()"+o);},t.prototype._onGetAssetId=function(){throw new Error("onGetAssetId()"+o);},t.prototype._onSendErrorNotification=function(){throw new Error("onSendErrorNotification()"+o);},t.prototype._onShowConfirmation=function(){return{title:f.Confirmation.title,message:f.Confirmation.message}},t.prototype._onShowError=function(){return{title:f.Failure.title,message:f.Failure.message}},t.prototype._onValidateCommand=function(n){return!i.isNullOrUndefined(n)},t.prototype._shouldDelete=function(n){var t=this.dialog()===this._confirmationDialog&&n===r.DialogResult.Yes,i=this.dialog()===this._errorDialog&&n===r.DialogResult.Retry;return t||i},t.prototype._onDeletionResultChange=function(n){var t=this;switch(n){case u.Success:i.UI.AssetManager.notifyAssetDeleted(this._assetType,this._onGetAssetId(this._data));this._resetCommand();break;case u.Failure:this._sendErrorNotification(this._data);setTimeout(function(
){t._createErrorDialog(t._data);t.dialog(t._errorDialog)},l)}},t.prototype._createConfirmationDialog=function(n){var t=this._onShowConfirmation(n);this._confirmationDialog=new r.MessageBox(t.title,t.message,r.MessageBoxButtons.YesNo)},t.prototype._createErrorDialog=function(n){var t=this._onShowError(n);this._errorDialog=new r.MessageBox(t.title,t.message,r.MessageBoxButtons.RetryCancel)},t.prototype._sendErrorNotification=function(n){var t=this._onSendErrorNotification(n);t&&(t.state=s.NotificationState.Error,s.addNotification(t))},t.prototype._resetCommand=function(){this.status(e.CommandStatus.None)},t}(e.Command);t.DeleteAssetCommand=c})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observable,e=ko.observableArray,o,i,r,u,f;(function(n){n[n.AbortRetryIgnore=0]="AbortRetryIgnore";n[n.OK=1]="OK";n[n.OKCancel=2]="OKCancel";n[n.RetryCancel=3]="RetryCancel";n[n.YesNo=4]="YesNo";n[n.YesNoCancel=5]=
"YesNoCancel"})(n.MessageBoxButtons||(n.MessageBoxButtons={}));o=n.MessageBoxButtons;i=function(t){function i(i,r,u){t.call(this,i);this.type=n.DialogType.MessageBox;this.text=r;this.buttons=u}return __extends(i,t),i}(n.Dialog);n.MessageBox=i;r=function(i){function r(r,u,f){i.call(this,r);this.text=t("");this.completionPercentage=t(-1);this.type=n.DialogType.ProgressBox;this.text(u);f!==undefined&&this.completionPercentage(f)}return __extends(r,i),r}(n.Dialog);n.ProgressBox=r;u=function(i){function r(r){i.call(this,r);this.description=t();this.type=n.DialogType.Form}return __extends(r,i),r}(n.Dialog);n.FormDialog=u;f=function(i){function r(){i.call(this,"");this.listItems=e();this.selectedItem=t();this.type=n.DialogType.List}return __extends(r,i),r}(n.Dialog);n.ListPopup=f})(t=n.Dialogs||(n.Dialogs={}))})(t=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){var t;(function(n){"use strict";n.ResourceIdTypeName="MsPortalFx.ViewModels.ResourceId"})(t=n.ViewModels||
(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={})),function(n){n.Chart=MsPortalFx.ViewModels.Controls.Visualization.Chart;n.CollectionSummaryResources=MsPortalFx.Resources.Strings.Part.CollectionSummary;n.FxExtension=MsPortalFx.Extension;n.PartLocation=MsPortalFx.ViewModels.PartLocation;n.Rpc=MsPortalFx.Base.Rpc.Internal}(window),function(n){"use strict";var u=n,c=u.Base,i=FxImpl,l=c.Constants,w=i.Diagnostics,f=window,e=f.fx,t=e.environment,o=t.requireConfig,a=t.extensionName,v=a!==l.Shell,y=new n.Base.Diagnostics.Log("MsPortalFx/MsPortalFxEnd"),b=t.features.crossorigintraces,k=t.isDevelopmentMode||b==="true"&&t.crossOriginTraces,s,r,p,h,d,g;o.onNodeCreated=function(n,t,r,u){k&&n.setAttribute("crossorigin","anonymous");v&&w.addScriptErrorListener(i.Boot.MessageKind.ScriptError,n,u,r)};s="retryAttempt";o.getPathFallback=function(n,t){if(t){var i=new c.UriBuilder(t),r=i.query.getParameter(s);if(!r)return y.warning("Retrying download",0,n,t),i.query.setParameter(s,1),i.toString();y.error("Download failed even after retry",
0,n,t)}};e.bootstrapTelemetry.fxScriptsEnd=e.getTimestamp();r=f.define;r("MsPortalFx",[],function(){return u});r("f",[],function(){return u});r("i",[],function(){return i});r("u",[],function(){});p=v&&a!==l.ExtensionNames.Hubs;p&&(h=f.requirejs,h.config(t.fxRequireConfig||{}),h.config(o)),function(n){var t=i.Composition.Selectable;n.BladeReference=t.BladeReference;n.ParameterProviderBladeReference=t.ParameterProviderBladeReference;n.PdlBladeReference=t.PdlBladeReference;n.Selectable2=t.Selectable2;n.SelectableBase=t.SelectableBase}(d=n.Composition||(n.Composition={})),function(n){var t;(function(n){var t;(function(n){n.ViewModel2=i.Controls.HotSpot.ViewModel2})(t=n.HotSpot||(n.HotSpot={}))})(t=n.Controls||(n.Controls={}))}(g=n.ViewModels||(n.ViewModels={}))}(MsPortalFx||(MsPortalFx={}))